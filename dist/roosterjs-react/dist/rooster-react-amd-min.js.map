{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/roosterjs-editor-dom/lib/index.js","webpack:///./node_modules/roosterjs-editor-core/lib/index.js","webpack:///./node_modules/roosterjs-editor-dom/lib/utils/getTagOfNode.js","webpack:///./node_modules/roosterjs-editor-dom/lib/utils/contains.js","webpack:///./packages/roosterjs-react-common/lib/index.ts","webpack:///./node_modules/roosterjs-editor-dom/lib/selection/Position.js","webpack:///./node_modules/roosterjs-editor-api/lib/index.js","webpack:///external \"react\"","webpack:///./node_modules/roosterjs-editor-dom/lib/utils/getLeafSibling.js","webpack:///./node_modules/roosterjs-editor-dom/lib/typeUtils/safeInstanceOf.js","webpack:///./node_modules/roosterjs-editor-dom/lib/blockElements/getBlockElementAtNode.js","webpack:///./node_modules/roosterjs-editor-dom/lib/utils/toArray.js","webpack:///./node_modules/roosterjs-editor-dom/lib/selection/createRange.js","webpack:///./node_modules/roosterjs-editor-api/lib/utils/execCommand.js","webpack:///./node_modules/@microsoft/load-themed-styles/lib-es6/index.js","webpack:///./node_modules/roosterjs-editor-dom/lib/utils/splitParentNode.js","webpack:///./node_modules/roosterjs-editor-dom/lib/utils/findClosestElementAncestor.js","webpack:///./node_modules/roosterjs-editor-dom/lib/utils/wrap.js","webpack:///./node_modules/roosterjs-editor-dom/lib/inlineElements/getInlineElementAtNode.js","webpack:///external \"OfficeFabric/Utilities\"","webpack:///./node_modules/roosterjs-editor-dom/lib/utils/isNodeAfter.js","webpack:///./node_modules/roosterjs-editor-dom/lib/utils/isBlockElement.js","webpack:///./node_modules/roosterjs-editor-api/lib/utils/applyInlineStyle.js","webpack:///./node_modules/roosterjs-editor-plugins/lib/plugins/Entity/EntityInfo.js","webpack:///./node_modules/roosterjs-editor-plugins/lib/plugins/Entity/getEntityFromElement.js","webpack:///./node_modules/roosterjs-editor-dom/lib/utils/collapseNodes.js","webpack:///./node_modules/roosterjs-editor-dom/lib/typeUtils/isNode.js","webpack:///./node_modules/roosterjs-editor-dom/lib/contentTraverser/ContentTraverser.js","webpack:///./node_modules/roosterjs-editor-dom/lib/inlineElements/NodeInlineElement.js","webpack:///./node_modules/roosterjs-editor-dom/lib/utils/shouldSkipNode.js","webpack:///./node_modules/roosterjs-editor-dom/lib/utils/getComputedStyles.js","webpack:///./node_modules/roosterjs-editor-dom/lib/inlineElements/PartialInlineElement.js","webpack:///./node_modules/roosterjs-editor-dom/lib/utils/isNodeEmpty.js","webpack:///./node_modules/roosterjs-editor-dom/lib/utils/queryElements.js","webpack:///./node_modules/roosterjs-editor-dom/lib/utils/unwrap.js","webpack:///./node_modules/roosterjs-editor-plugins/lib/plugins/Entity/getEntityElement.js","webpack:///external \"OfficeFabric/FocusZone\"","webpack:///./packages/roosterjs-react-emoji/lib/utils/emojiList.ts","webpack:///./node_modules/roosterjs-editor-dom/lib/blockElements/NodeBlockElement.js","webpack:///./node_modules/roosterjs-editor-dom/lib/typeUtils/isRange.js","webpack:///./node_modules/roosterjs-editor-dom/lib/utils/isVoidHtmlElement.js","webpack:///./node_modules/roosterjs-editor-dom/lib/typeUtils/isHTMLElement.js","webpack:///./node_modules/roosterjs-editor-dom/lib/utils/applyTextStyle.js","webpack:///./node_modules/roosterjs-editor-dom/lib/utils/splitTextNode.js","webpack:///./node_modules/roosterjs-editor-dom/lib/inlineElements/getInlineElementBeforeAfter.js","webpack:///./node_modules/roosterjs-editor-dom/lib/utils/changeElementTag.js","webpack:///./node_modules/roosterjs-editor-dom/lib/list/getListTypeFromNode.js","webpack:///./node_modules/roosterjs-editor-dom/lib/region/isNodeInRegion.js","webpack:///./node_modules/roosterjs-editor-dom/lib/snapshots/canMoveCurrentSnapshot.js","webpack:///./node_modules/roosterjs-editor-core/lib/eventApi/isCtrlOrMetaPressed.js","webpack:///./node_modules/roosterjs-editor-core/lib/eventApi/cacheGetEventData.js","webpack:///./node_modules/roosterjs-editor-api/lib/utils/processList.js","webpack:///./packages/roosterjs-react-common/lib/utils/ImageManager.ts","webpack:///external \"OfficeFabric/Button\"","webpack:///external \"OfficeFabric/Tooltip\"","webpack:///./node_modules/roosterjs-html-sanitizer/lib/index.js","webpack:///./node_modules/roosterjs-editor-dom/lib/blockElements/StartEndBlockElement.js","webpack:///./node_modules/roosterjs-editor-dom/lib/utils/fromHtml.js","webpack:///./node_modules/roosterjs-editor-dom/lib/blockElements/getFirstLastBlockElement.js","webpack:///./node_modules/roosterjs-editor-dom/lib/inlineElements/ImageInlineElement.js","webpack:///./node_modules/roosterjs-editor-dom/lib/inlineElements/LinkInlineElement.js","webpack:///./node_modules/roosterjs-editor-dom/lib/inlineElements/getFirstLastInlineElement.js","webpack:///./node_modules/roosterjs-editor-dom/lib/utils/getLeafNode.js","webpack:///./node_modules/roosterjs-editor-dom/lib/inlineElements/EmptyInlineElement.js","webpack:///./node_modules/roosterjs-editor-dom/lib/utils/Browser.js","webpack:///./node_modules/roosterjs-editor-dom/lib/selection/isPositionAtBeginningOf.js","webpack:///./node_modules/roosterjs-editor-dom/lib/table/VTable.js","webpack:///./node_modules/roosterjs-editor-dom/lib/typeUtils/isHTMLTableCellElement.js","webpack:///./node_modules/roosterjs-editor-dom/lib/typeUtils/isHTMLTableElement.js","webpack:///./node_modules/roosterjs-editor-dom/lib/utils/normalizeRect.js","webpack:///./node_modules/roosterjs-editor-dom/lib/list/VList.js","webpack:///./node_modules/roosterjs-editor-dom/lib/region/getSelectedBlockElementsInRegion.js","webpack:///./node_modules/roosterjs-editor-dom/lib/selection/getSelectionPath.js","webpack:///./node_modules/roosterjs-editor-dom/lib/snapshots/clearProceedingSnapshots.js","webpack:///./node_modules/roosterjs-editor-dom/lib/htmlSanitizer/getInheritableStyles.js","webpack:///./node_modules/roosterjs-editor-dom/lib/htmlSanitizer/htmlToDom.js","webpack:///./node_modules/roosterjs-editor-dom/lib/htmlSanitizer/cloneObject.js","webpack:///./node_modules/roosterjs-editor-core/lib/corePlugins/CopyPlugin.js","webpack:///./node_modules/roosterjs-editor-core/lib/darkMode/normalizeContentColor.js","webpack:///./node_modules/roosterjs-editor-core/lib/corePlugins/CorePastePlugin.js","webpack:///./node_modules/roosterjs-editor-core/lib/corePlugins/DOMEventPlugin.js","webpack:///./node_modules/roosterjs-editor-core/lib/corePlugins/EditPlugin.js","webpack:///./node_modules/roosterjs-editor-core/lib/corePlugins/FirefoxTypeAfterLink.js","webpack:///./node_modules/roosterjs-editor-core/lib/eventApi/cacheGetContentSearcher.js","webpack:///./node_modules/roosterjs-editor-core/lib/eventApi/clearEventDataCache.js","webpack:///./node_modules/roosterjs-editor-core/lib/corePlugins/MouseUpPlugin.js","webpack:///./node_modules/roosterjs-editor-core/lib/corePlugins/TypeInContainerPlugin.js","webpack:///./node_modules/roosterjs-editor-core/lib/undo/Undo.js","webpack:///./node_modules/roosterjs-editor-core/lib/eventApi/isCharacterValue.js","webpack:///./node_modules/roosterjs-editor-core/lib/eventApi/isModifierKey.js","webpack:///./node_modules/roosterjs-editor-core/lib/coreAPI/calculateDefaultFormat.js","webpack:///./node_modules/roosterjs-editor-core/lib/coreAPI/hasFocus.js","webpack:///./node_modules/roosterjs-editor-api/lib/utils/collapseSelectedBlocks.js","webpack:///./node_modules/roosterjs-editor-api/lib/format/setBackgroundColor.js","webpack:///./node_modules/roosterjs-editor-api/lib/format/setFontName.js","webpack:///./node_modules/roosterjs-editor-api/lib/format/setFontSize.js","webpack:///./node_modules/roosterjs-editor-api/lib/format/setTextColor.js","webpack:///./node_modules/roosterjs-editor-api/lib/format/toggleBold.js","webpack:///./node_modules/roosterjs-editor-api/lib/format/toggleItalic.js","webpack:///./node_modules/roosterjs-editor-api/lib/format/toggleUnderline.js","webpack:///./node_modules/roosterjs-editor-api/lib/utils/blockFormat.js","webpack:///./node_modules/roosterjs-editor-api/lib/experiment/experimentToggleListType.js","webpack:///./node_modules/roosterjs-editor-api/lib/utils/toggleTagCore.js","webpack:///./node_modules/roosterjs-editor-plugins/lib/index.js","webpack:///./node_modules/roosterjs-editor-plugins/lib/plugins/ContentEdit/ContentEditFeatures.js","webpack:///./node_modules/roosterjs-editor-plugins/lib/plugins/Paste/wordConverter/CustomData.js","webpack:///./node_modules/roosterjs-editor-plugins/lib/plugins/Paste/wordConverter/LevelLists.js","webpack:///./node_modules/roosterjs-editor-plugins/lib/plugins/Paste/officeOnlineConverter/constants.js","webpack:///./node_modules/roosterjs-editor-plugins/lib/plugins/Entity/getEntities.js","webpack:///./node_modules/roosterjs-editor-plugins/lib/plugins/Entity/tryTriggerEntityEvent.js","webpack:///./node_modules/roosterjs-editor-plugins/lib/plugins/Entity/createEntityWrapper.js","webpack:///./packages/roosterjs-react-common/lib/utils/ReactUtil.ts","webpack:///./packages/roosterjs-react-common/lib/resources/Images.ts","webpack:///./packages/roosterjs-react-editor/lib/index.ts","webpack:///./packages/roosterjs-react-command-bar/lib/utils/getIconOnRenderDelegate.tsx","webpack:///external \"OfficeFabric/Icon\"","webpack:///./packages/roosterjs-react-command-bar/lib/utils/OutOfBoxCommandBarButtons.tsx","webpack:///./packages/roosterjs-react-command-bar/lib/components/LinkDialog.tsx","webpack:///external \"OfficeFabric/TextField\"","webpack:///external \"react-dom\"","webpack:///external \"OfficeFabric/Callout\"","webpack:///./packages/roosterjs-react-emoji/lib/utils/searchEmojis.ts","webpack:///./packages/roosterjs-react-emoji/lib/components/emoji.scss.g.ts","webpack:///./packages/roosterjs-react/lib/index.ts","webpack:///./node_modules/roosterjs-editor-dom/lib/contentTraverser/BodyScoper.js","webpack:///./node_modules/roosterjs-editor-dom/lib/contentTraverser/SelectionBlockScoper.js","webpack:///./node_modules/roosterjs-editor-dom/lib/contentTraverser/SelectionScoper.js","webpack:///./node_modules/roosterjs-editor-dom/lib/contentTraverser/PositionContentSearcher.js","webpack:///./node_modules/roosterjs-editor-dom/lib/utils/applyFormat.js","webpack:///./node_modules/roosterjs-editor-dom/lib/utils/extractClipboardEvent.js","webpack:///./node_modules/roosterjs-editor-dom/lib/utils/getPendableFormatState.js","webpack:///./node_modules/roosterjs-editor-dom/lib/utils/isRtl.js","webpack:///./node_modules/roosterjs-editor-dom/lib/utils/matchLink.js","webpack:///./node_modules/roosterjs-editor-dom/lib/utils/adjustNodeInsertPosition.js","webpack:///./node_modules/roosterjs-editor-dom/lib/utils/getTextContent.js","webpack:///./node_modules/roosterjs-editor-dom/lib/list/VListItem.js","webpack:///./node_modules/roosterjs-editor-dom/lib/list/createVListFromRegion.js","webpack:///./node_modules/roosterjs-editor-dom/lib/region/getRegionsFromRange.js","webpack:///./node_modules/roosterjs-editor-dom/lib/region/regionTypeData.js","webpack:///./node_modules/roosterjs-editor-dom/lib/region/collapseNodesInRegion.js","webpack:///./node_modules/roosterjs-editor-dom/lib/selection/getPositionRect.js","webpack:///./node_modules/roosterjs-editor-dom/lib/selection/getHtmlWithSelectionPath.js","webpack:///./node_modules/roosterjs-editor-dom/lib/selection/setHtmlWithSelectionPath.js","webpack:///./node_modules/roosterjs-editor-dom/lib/snapshots/addSnapshot.js","webpack:///./node_modules/roosterjs-editor-dom/lib/snapshots/moveCurrentSnapsnot.js","webpack:///./node_modules/roosterjs-editor-dom/lib/snapshots/createSnapshots.js","webpack:///./node_modules/roosterjs-editor-dom/lib/htmlSanitizer/HtmlSanitizer.js","webpack:///./node_modules/roosterjs-editor-dom/lib/htmlSanitizer/getAllowedValues.js","webpack:///./node_modules/roosterjs-editor-dom/lib/htmlSanitizer/createDefaultHtmlSanitizerOptions.js","webpack:///./node_modules/roosterjs-editor-dom/lib/htmlSanitizer/chainSanitizerCallback.js","webpack:///./node_modules/roosterjs-editor-dom/lib/typeUtils/isDocumentFragment.js","webpack:///./node_modules/roosterjs-editor-dom/lib/typeUtils/isHTMLOListElement.js","webpack:///./node_modules/roosterjs-editor-types/lib/index.js","webpack:///./node_modules/roosterjs-editor-types/lib/browser/DocumentCommand.js","webpack:///./node_modules/roosterjs-editor-types/lib/browser/DocumentPosition.js","webpack:///./node_modules/roosterjs-editor-types/lib/browser/NodeType.js","webpack:///./node_modules/roosterjs-editor-types/lib/enum/Alignment.js","webpack:///./node_modules/roosterjs-editor-types/lib/enum/ChangeSource.js","webpack:///./node_modules/roosterjs-editor-types/lib/enum/ContentPosition.js","webpack:///./node_modules/roosterjs-editor-types/lib/enum/Direction.js","webpack:///./node_modules/roosterjs-editor-types/lib/enum/EntityOperation.js","webpack:///./node_modules/roosterjs-editor-types/lib/enum/FontSizeChange.js","webpack:///./node_modules/roosterjs-editor-types/lib/enum/Indentation.js","webpack:///./node_modules/roosterjs-editor-types/lib/enum/ListType.js","webpack:///./node_modules/roosterjs-editor-types/lib/enum/PasteOption.js","webpack:///./node_modules/roosterjs-editor-types/lib/enum/PositionType.js","webpack:///./node_modules/roosterjs-editor-types/lib/enum/QueryScope.js","webpack:///./node_modules/roosterjs-editor-types/lib/enum/RegionType.js","webpack:///./node_modules/roosterjs-editor-types/lib/enum/TableOperation.js","webpack:///./node_modules/roosterjs-editor-types/lib/event/PluginEventType.js","webpack:///./node_modules/roosterjs-editor-core/lib/interfaces/ContentEditFeature.js","webpack:///./node_modules/roosterjs-editor-core/lib/editor/Editor.js","webpack:///./node_modules/roosterjs-editor-core/lib/editor/adjustBrowserBehavior.js","webpack:///./node_modules/roosterjs-editor-core/lib/editor/createEditorCore.js","webpack:///./node_modules/roosterjs-editor-core/lib/undo/UndoSnapshots.js","webpack:///./node_modules/roosterjs-editor-core/lib/coreAPI/attachDomEvent.js","webpack:///./node_modules/roosterjs-editor-core/lib/coreAPI/createPasteFragment.js","webpack:///./node_modules/roosterjs-editor-core/lib/coreAPI/editWithUndo.js","webpack:///./node_modules/roosterjs-editor-core/lib/coreAPI/focus.js","webpack:///./node_modules/roosterjs-editor-core/lib/coreAPI/getCustomData.js","webpack:///./node_modules/roosterjs-editor-core/lib/coreAPI/getSelectionRange.js","webpack:///./node_modules/roosterjs-editor-core/lib/coreAPI/getStyleBasedFormatState.js","webpack:///./node_modules/roosterjs-editor-core/lib/coreAPI/insertNode.js","webpack:///./node_modules/roosterjs-editor-core/lib/coreAPI/selectRange.js","webpack:///./node_modules/roosterjs-editor-core/lib/coreAPI/triggerEvent.js","webpack:///./node_modules/roosterjs-editor-core/lib/editor/mapPluginEvents.js","webpack:///./node_modules/roosterjs-editor-core/lib/darkMode/convertContentToDarkMode.js","webpack:///./node_modules/roosterjs-editor-core/lib/eventApi/cacheGetElementAtCursor.js","webpack:///./node_modules/roosterjs-editor-api/lib/format/changeFontSize.js","webpack:///./node_modules/roosterjs-editor-api/lib/format/clearBlockFormat.js","webpack:///./node_modules/roosterjs-editor-api/lib/format/clearFormat.js","webpack:///./node_modules/roosterjs-editor-api/lib/format/createLink.js","webpack:///./node_modules/roosterjs-editor-api/lib/format/getFormatState.js","webpack:///./node_modules/roosterjs-editor-api/lib/format/insertImage.js","webpack:///./node_modules/roosterjs-editor-api/lib/table/insertTable.js","webpack:///./node_modules/roosterjs-editor-api/lib/table/editTable.js","webpack:///./node_modules/roosterjs-editor-api/lib/table/formatTable.js","webpack:///./node_modules/roosterjs-editor-api/lib/format/removeLink.js","webpack:///./node_modules/roosterjs-editor-api/lib/format/replaceWithNode.js","webpack:///./node_modules/roosterjs-editor-api/lib/format/rotateElement.js","webpack:///./node_modules/roosterjs-editor-api/lib/format/setAlignment.js","webpack:///./node_modules/roosterjs-editor-api/lib/format/setDirection.js","webpack:///./node_modules/roosterjs-editor-api/lib/format/setImageAltText.js","webpack:///./node_modules/roosterjs-editor-api/lib/format/setIndentation.js","webpack:///./node_modules/roosterjs-editor-api/lib/experiment/experimentSetIndentation.js","webpack:///./node_modules/roosterjs-editor-api/lib/format/toggleBullet.js","webpack:///./node_modules/roosterjs-editor-api/lib/format/toggleNumbering.js","webpack:///./node_modules/roosterjs-editor-api/lib/format/toggleBlockQuote.js","webpack:///./node_modules/roosterjs-editor-api/lib/format/toggleCodeBlock.js","webpack:///./node_modules/roosterjs-editor-api/lib/format/toggleStrikethrough.js","webpack:///./node_modules/roosterjs-editor-api/lib/format/toggleSubscript.js","webpack:///./node_modules/roosterjs-editor-api/lib/format/toggleSuperscript.js","webpack:///./node_modules/roosterjs-editor-api/lib/format/toggleHeader.js","webpack:///./node_modules/roosterjs-editor-plugins/lib/ContentEdit.js","webpack:///./node_modules/roosterjs-editor-plugins/lib/plugins/ContentEdit/index.js","webpack:///./node_modules/roosterjs-editor-plugins/lib/plugins/ContentEdit/ContentEdit.js","webpack:///./node_modules/roosterjs-editor-plugins/lib/plugins/ContentEdit/features/autoLinkFeatures.js","webpack:///./node_modules/roosterjs-editor-plugins/lib/plugins/ContentEdit/features/shortcutFeatures.js","webpack:///./node_modules/roosterjs-editor-plugins/lib/plugins/ContentEdit/features/insertLineBeforeStructuredNodeFeature.js","webpack:///./node_modules/roosterjs-editor-plugins/lib/plugins/ContentEdit/features/noCycleCursorMove.js","webpack:///./node_modules/roosterjs-editor-plugins/lib/plugins/ContentEdit/features/tableFeatures.js","webpack:///./node_modules/roosterjs-editor-plugins/lib/plugins/ContentEdit/features/markdownFeatures.js","webpack:///./node_modules/roosterjs-editor-plugins/lib/plugins/ContentEdit/features/listFeatures.js","webpack:///./node_modules/roosterjs-editor-plugins/lib/plugins/ContentEdit/features/quoteFeatures.js","webpack:///./node_modules/roosterjs-editor-plugins/lib/CustomReplace.js","webpack:///./node_modules/roosterjs-editor-plugins/lib/plugins/CustomReplace/index.js","webpack:///./node_modules/roosterjs-editor-plugins/lib/plugins/CustomReplace/CustomReplace.js","webpack:///./node_modules/roosterjs-editor-plugins/lib/HyperLink.js","webpack:///./node_modules/roosterjs-editor-plugins/lib/plugins/HyperLink/index.js","webpack:///./node_modules/roosterjs-editor-plugins/lib/plugins/HyperLink/HyperLink.js","webpack:///./node_modules/roosterjs-editor-plugins/lib/ImageResize.js","webpack:///./node_modules/roosterjs-editor-plugins/lib/plugins/ImageResize/index.js","webpack:///./node_modules/roosterjs-editor-plugins/lib/plugins/ImageResize/ImageResize.js","webpack:///./node_modules/roosterjs-editor-plugins/lib/Paste.js","webpack:///./node_modules/roosterjs-editor-plugins/lib/plugins/Paste/index.js","webpack:///./node_modules/roosterjs-editor-plugins/lib/plugins/Paste/Paste.js","webpack:///./node_modules/roosterjs-editor-plugins/lib/plugins/Paste/excelConverter/convertPastedContentFromExcel.js","webpack:///./node_modules/roosterjs-editor-plugins/lib/plugins/Paste/wordConverter/convertPastedContentFromWord.js","webpack:///./node_modules/roosterjs-editor-plugins/lib/plugins/Paste/wordConverter/wordConverter.js","webpack:///./node_modules/roosterjs-editor-plugins/lib/plugins/Paste/wordConverter/WordConverterArguments.js","webpack:///./node_modules/roosterjs-editor-plugins/lib/plugins/Paste/wordConverter/converterUtils.js","webpack:///./node_modules/roosterjs-editor-plugins/lib/plugins/Paste/officeOnlineConverter/convertPastedContentFromWordOnline.js","webpack:///./node_modules/roosterjs-editor-plugins/lib/plugins/Paste/officeOnlineConverter/ListItemBlock.js","webpack:///./node_modules/roosterjs-editor-plugins/lib/Picker.js","webpack:///./node_modules/roosterjs-editor-plugins/lib/plugins/Picker/index.js","webpack:///./node_modules/roosterjs-editor-plugins/lib/plugins/Picker/PickerPlugin.js","webpack:///./node_modules/roosterjs-editor-plugins/lib/TableResize.js","webpack:///./node_modules/roosterjs-editor-plugins/lib/plugins/TableResize/index.js","webpack:///./node_modules/roosterjs-editor-plugins/lib/plugins/TableResize/TableResize.js","webpack:///./node_modules/roosterjs-editor-plugins/lib/Watermark.js","webpack:///./node_modules/roosterjs-editor-plugins/lib/plugins/Watermark/index.js","webpack:///./node_modules/roosterjs-editor-plugins/lib/plugins/Watermark/Watermark.js","webpack:///./node_modules/roosterjs-editor-plugins/lib/Entity.js","webpack:///./node_modules/roosterjs-editor-plugins/lib/plugins/Entity/index.js","webpack:///./node_modules/roosterjs-editor-plugins/lib/plugins/Entity/EntityPlugin.js","webpack:///./node_modules/roosterjs-editor-plugins/lib/plugins/Entity/EntityFeatures.js","webpack:///./node_modules/roosterjs-editor-plugins/lib/plugins/Entity/insertEntity.js","webpack:///./packages/roosterjs-react-common/lib/strings/strings.ts","webpack:///./packages/roosterjs-react-common/lib/utils/Core.ts","webpack:///./packages/roosterjs-react-common/lib/utils/ElementUtil.ts","webpack:///./packages/roosterjs-react-common/lib/utils/NonCompatFormatter.ts","webpack:///./packages/roosterjs-react-common/lib/scss/core.scss.g.ts","webpack:///(webpack)/buildin/global.js","webpack:///./packages/roosterjs-react-common/lib/plugins/ContentChangedPlugin.ts","webpack:///./packages/roosterjs-react-common/lib/plugins/DoubleClickImagePlugin.ts","webpack:///./packages/roosterjs-react-common/lib/plugins/PasteImagePlugin.ts","webpack:///./packages/roosterjs-react-common/lib/plugins/IgnorePasteImagePlugin.ts","webpack:///./packages/roosterjs-react-common/lib/plugins/UndoWithImagePlugin.ts","webpack:///./packages/roosterjs-react-common/lib/utils/Accessibility.ts","webpack:///./packages/roosterjs-react-command-bar/lib/index.ts","webpack:///./packages/roosterjs-react-command-bar/lib/components/RoosterCommandBar.tsx","webpack:///./packages/roosterjs-react-command-bar/lib/components/RoosterCommandBar.scss.g.ts","webpack:///external \"OfficeFabric/CommandBar\"","webpack:///./packages/roosterjs-react-editor/lib/utils/createEditorViewState.ts","webpack:///./packages/roosterjs-react-editor/lib/utils/createFormatState.ts","webpack:///./packages/roosterjs-react-editor/lib/components/FocusOutShell.tsx","webpack:///./packages/roosterjs-react-editor/lib/components/LeanRooster.tsx","webpack:///./packages/roosterjs-react-editor/lib/components/LeanRooster.scss.g.ts","webpack:///external \"OfficeFabric/ContextualMenu\"","webpack:///./packages/roosterjs-react-command-bar/lib/utils/OutOfBoxCommandBarButtons.ColorInfo.tsx","webpack:///./packages/roosterjs-react-command-bar/lib/plugins/RoosterCommandBarPlugin.ts","webpack:///./packages/roosterjs-react-command-bar/lib/components/LinkDialog.scss.g.ts","webpack:///external \"OfficeFabric/Dialog\"","webpack:///./packages/roosterjs-react-command-bar/lib/plugins/RoosterCommandBarPlugin.Shortcuts.ts","webpack:///./packages/roosterjs-react-emoji/lib/index.ts","webpack:///./packages/roosterjs-react-emoji/lib/plugins/EmojiPlugin.tsx","webpack:///./packages/roosterjs-react-emoji/lib/components/EmojiPane.tsx","webpack:///./packages/roosterjs-react-emoji/lib/components/EmojiIcon.tsx","webpack:///./packages/roosterjs-react-emoji/lib/components/EmojiNavBar.tsx","webpack:///./packages/roosterjs-react-emoji/lib/components/EmojiNavBar.scss.g.ts","webpack:///./packages/roosterjs-react-emoji/lib/components/EmojiStatusBar.tsx","webpack:///./packages/roosterjs-react-emoji/lib/components/EmojiStatusBar.scss.g.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","NodeBlockElement_1","NodeBlockElement","default","getBlockElementAtNode_1","getBlockElementAtNode","getFirstLastBlockElement_1","getFirstLastBlockElement","StartEndBlockElement_1","StartEndBlockElement","ContentTraverser_1","ContentTraverser","PositionContentSearcher_1","PositionContentSearcher","getInlineElementAtNode_1","getInlineElementAtNode","ImageInlineElement_1","ImageInlineElement","LinkInlineElement_1","LinkInlineElement","NodeInlineElement_1","NodeInlineElement","PartialInlineElement_1","PartialInlineElement","applyTextStyle_1","applyTextStyle","Browser_1","Browser","getBrowserInfo","applyFormat_1","applyFormat","changeElementTag_1","changeElementTag","collapseNodes_1","collapseNodes","contains_1","contains","extractClipboardEvent_1","extractClipboardEvent","findClosestElementAncestor_1","findClosestElementAncestor","fromHtml_1","fromHtml","getComputedStyles_1","getComputedStyles","getComputedStyle","getPendableFormatState_1","getPendableFormatState","PendableFormatCommandMap","getTagOfNode_1","getTagOfNode","isBlockElement_1","isBlockElement","isNodeEmpty_1","isNodeEmpty","isRtl_1","isRtl","isVoidHtmlElement_1","isVoidHtmlElement","matchLink_1","matchLink","adjustNodeInsertPosition_1","adjustNodeInsertPosition","queryElements_1","queryElements","splitParentNode_1","splitParentNode","splitBalancedNodeRange","unwrap_1","unwrap","wrap_1","wrap","getLeafSibling_1","getNextLeafSibling","getPreviousLeafSibling","getLeafNode_1","getFirstLeafNode","getLastLeafNode","getTextContent_1","getTextContent","splitTextNode_1","splitTextNode","normalizeRect_1","normalizeRect","toArray_1","toArray","VTable_1","VTable","VList_1","VList","createVListFromRegion_1","createVListFromRegion","getRegionsFromRange_1","getRegionsFromRange","getSelectedBlockElementsInRegion_1","getSelectedBlockElementsInRegion","collapseNodesInRegion_1","collapseNodesInRegion","isNodeInRegion_1","isNodeInRegion","Position_1","Position","createRange_1","createRange","getRangeFromSelectionPath","getPositionRect_1","getPositionRect","isPositionAtBeginningOf_1","isPositionAtBeginningOf","getSelectionPath_1","getSelectionPath","getHtmlWithSelectionPath_1","getHtmlWithSelectionPath","setHtmlWithSelectionPath_1","setHtmlWithSelectionPath","addSnapshot_1","addSnapshot","canMoveCurrentSnapshot_1","canMoveCurrentSnapshot","clearProceedingSnapshots_1","clearProceedingSnapshots","moveCurrentSnapsnot_1","moveCurrentSnapsnot","createSnapshots_1","createSnapshots","HtmlSanitizer_1","HtmlSanitizer","htmlToDom_1","htmlToDom","splitWithFragment","getInheritableStyles_1","getInheritableStyles","createDefaultHtmlSanitizerOptions_1","createDefaultHtmlSanitizerOptions","chainSanitizerCallback_1","chainSanitizerCallback","isDocumentFragment_1","isDocumentFragment","isHTMLElement_1","isHTMLElement","isHTMLOListElement_1","isHTMLOListElement","isHTMLTableCellElement_1","isHTMLTableCellElement","isHTMLTableElement_1","isHTMLTableElement","isNode_1","isNode","isRange_1","isRange","safeInstanceOf_1","safeInstanceOf","ContentEditFeature_1","Keys","Editor_1","Editor","Undo_1","Undo","EditPlugin_1","EditPlugin","MouseUpPlugin_1","MouseUpPlugin","DOMEventPlugin_1","DOMEventPlugin","TypeInContainerPlugin_1","TypeInContainerPlugin","FirefoxTypeAfterLink_1","FirefoxTypeAfterLink","CopyPlugin_1","CopyPlugin","CorePastePlugin_1","CorePastePlugin","cacheGetEventData_1","cacheGetEventData","clearEventDataCache_1","clearEventDataCache","cacheGetContentSearcher_1","cacheGetContentSearcher","clearContentSearcherCache","cacheGetElementAtCursor_1","cacheGetElementAtCursor","isModifierKey_1","isModifierKey","isCharacterValue_1","isCharacterValue","isCtrlOrMetaPressed_1","isCtrlOrMetaPressed","node","nodeType","tagName","toUpperCase","container","contained","treatSameNodeAsContain","commonAncestorContainer","parentNode","registerDefaultString","getString","NullFunction","closest","setNonCompatIndentation","toggleNonCompatBullet","toggleNonCompatNumbering","css","getDataAndAriaProps","Base64Svgs","AriaAttributes","isNodeAfter_1","nodeOrPosition","offsetOrPosType","isFromEndOfRange","this","offset","getIndexOfNode","isAtEnd","nextSibling","getEndOffset","endOffset","Math","max","min","element","normalize","firstChild","newOffset","nextNode","lastChild","childNodes","equalTo","position","isAfter","move","getStart","range","startContainer","startOffset","getEnd","collapsed","endContainer","previousSibling","nodeValue","length","changeFontSize_1","changeFontSize","FONT_SIZES","clearBlockFormat_1","clearBlockFormat","TAGS_TO_UNWRAP","TAGS_TO_STOP_UNWRAP","ATTRIBUTES_TO_PRESERVE","clearFormat_1","clearFormat","createLink_1","createLink","getFormatState_1","getFormatState","getElementBasedFormatState","getStyleBasedFormatState","insertImage_1","insertImage","insertTable_1","insertTable","editTable_1","editTable","formatTable_1","formatTable","removeLink_1","removeLink","replaceWithNode_1","replaceWithNode","rotateElement_1","rotateElement","setAlignment_1","setAlignment","setBackgroundColor_1","setBackgroundColor","setTextColor_1","setTextColor","setDirection_1","setDirection","setFontName_1","setFontName","setFontSize_1","setFontSize","setImageAltText_1","setImageAltText","setIndentation_1","setIndentation","toggleBold_1","toggleBold","toggleBullet_1","toggleBullet","toggleItalic_1","toggleItalic","toggleNumbering_1","toggleNumbering","toggleBlockQuote_1","toggleBlockQuote","toggleCodeBlock_1","toggleCodeBlock","toggleStrikethrough_1","toggleStrikethrough","toggleSubscript_1","toggleSubscript","toggleSuperscript_1","toggleSuperscript","toggleUnderline_1","toggleUnderline","toggleHeader_1","toggleHeader","roosterjs_editor_dom_1","__WEBPACK_EXTERNAL_MODULE__7__","shouldSkipNode_1","getLeafSibling","rootNode","startNode","isNext","skipTags","ignoreSpace","result","getSibling","getChild","curNode","shouldContinue","indexOf","getTargetWindow","source","document","ownerDocument","toString","apply","defaultView","window","obj","typeName","targetWindow","targetType","mainWindow","mainWindowType","findHeadTailLeafNode","containerBlockNode","isTail","sibling","getBlockContext","headNode","tailNode","nodes","collection","slice","arg1","arg2","arg3","arg4","start","end","isNodePosition","Array","isArray","getPositionFromPath","getFocusablePosition","setStart","setEnd","arg","path","pendableFormatCommands","editor","command","focus","formatter","getDocument","execCommand","getSelectionRange","addUndoSnapshot","keys","map","isPendableFormatCommand","triggerPluginEvent","formatState","__assign","assign","arguments","_root","global","_styleNonce","CSPSettings","nonce","_themeState","state","__themeState__","theme","undefined","lastStyleElement","registeredStyles","runState","perf","count","duration","flushTimer","buffer","registeredThemableStyles","initializeThemeState","_themeTokenRegex","now","performance","Date","measure","func","loadStyles","styles","loadAsync","styleParts","splitStyles","_a","push","setTimeout","flush","applyThemableStyles","configureLoadStyles","loadStylesFn","configureRunMode","styleArrays","mergedStyleArray","concat","stylesArray","styleRecord","resolveThemableArray","styleString","styleArray","head","getElementsByTagName","styleElement","createElement","themable","setAttribute","appendChild","createTextNode","ev","createEvent","initEvent","args","newStyle","dispatchEvent","record","themableStyle","registerStyles","loadTheme","themableStyles","_i","clearStyles","reloadStyles","option","clearStylesInternal","records","forEach","parentElement","removeChild","detokenize","splitStyleArray","currentValue","themeSlot","themedValue","defaultValue","console","DEBUG","warn","rawString","join","pos","tokenMatch","exec","matchIndex","index","substring","lastIndex","splitBefore","newParent","cloneNode","removeAttribute","innerHTML","insertBefore","temp","root","selector","matches","msMatchesSelector","wrapper","document_1","test","nodes_1","parent","parentBlock","inlineElement","nodeChain","parent_1","currentNode","tag","resolveInlineElement","__WEBPACK_EXTERNAL_MODULE__19__","node1","node2","compareDocumentPosition","BLOCK_ELEMENT_TAGS","split","BLOCK_DISPLAY_STYLES","style","display","callback","insertNode","select","firstNode","lastNode","contentTraverser","getSelectionTraverser","currentInlineElement","nextInlineElement","getNextInlineElement","applyStyle","isInnerNode","getEntities_1","ENTITY_ID_REGEX","getAllEntityIds","e","id","ALLOWED_CSS_CLASSES","serializeEntityInfo","type","isReadonly","originalId","knownIds","ENTITY_INFO_NAME","existingIdOrType","match","baseId","substr","newId","num","parseInt","createEntityId","deserialzeEntityInfo","entityInfo","isEntity","getEntitySelector","EntityInfo_1","className","contentNode","collapse","ref","isStart","canSplitParent","startIndex","endIndex","BodyScoper_1","EmptyInlineElement_1","SelectionBlockScoper_1","SelectionScoper_1","getInlineElementBeforeAfter_1","scoper","createBodyTraverser","createSelectionTraverser","createBlockTraverser","currentBlock","getStartBlockElement","configurable","getNextBlockElement","getPreviousNextBlockElement","getPreviousBlockElement","current","currentBlockElement","leaf","getEndNode","getStartNode","newBlock","isBlockInScope","currentInline","getStartInlineElement","getPreviousNextInlineElement","getPreviousInlineElement","newInline","getInlineElementBeforeAfter","getStartPosition","getParentBlock","getContainerNode","previousInlineElement","getNextPreviousInlineElement","trimInlineElement","containerNode","textContent","getEndPosition","isTextualInlineElement","styler","CRLF","CRLFSPACE","shouldSkipNode","replace","child","styleNames","styleNames_1","getPropertyValue","toLowerCase","px2Pt","px","round","parseFloat","styleName","getDecoratedInline","thisStart","otherEnd","from","to","previousNode","VISIBLE_ELEMENT_TAGS","VISIBLE_CHILD_ELEMENT_SELECTOR","ZERO_WIDTH_SPACE","trim","trimContent","querySelectorAll","checkPosition","targets","some","target","forEachCallback","scope","elements","startContainer_1","endContainer_1","filter","endNode","nodeContainedByRangeOnly","startPosition","endPosition","targetPositions","isIntersectWithNodeRange","getElementAtCursor","__WEBPACK_EXTERNAL_MODULE__36__","Common1","_createEmoji","common2","common3","common4","common5","MoreEmoji","description","codePoint","CommonEmojis","EmojiList","_createEmojiWithNoKeyword","forEachEmojiFamily","family","_getEmojiCodePoint","surrogatePairs","unicode","isNaN","floor","String","fromCharCode","shortcut","keywords","EmojiFabricIconCharacterMap","emojis","emoji","collapseToSingleElement","equals","blockElement","HTML_VOID_ELEMENTS","STYLETAGS","callStylerWithInnerNode","formatNodes","formatNode","parentTag","every","newNode_1","shift","textNode","returnFirstPart","firstPart","secondPart","newNode","isPartial","getInlineElementBefore","getInlineElementAfter","newTag","newElement","attributes","attr","marginTop","marginBottom","replaceChild","getListTypeFromNode","isListElement","region","nodeBefore","nodeAfter","snapshots","step","newIndex","currentIndex","isMac","event","metaKey","ctrlKey","eventDataCache","existingList","isChrome","parentLINode","currentRange","currentSelectionPath","listParent","nextElementSibling","insertAdjacentElement","wrappedContents","wrappedRange","wrappedSelectionPath","deleteNode","newRange","childElementCount","newList","PlaceholderDataAttribute","html","options","idToUrlImageCache","defaultCreateImagePlaceholder","image","isDisposed","src","RoosterJsReactSpinner","Styles","roosterjsReactSpinner","placeholderImageClassName","createImagePlaceholder","placeholderImageClasses","upload","forceFallbackAltValue","size","placeholder","altText","fallbackAltValue","placeholdId","ImageManager","Id","uploadImage","then","url","replacePlaceholder","triggerChangeEvent","removePlaceholder","updatePlaceholders","placeholders","resolvedAll","getAttribute","triggerContentChangedEvent","img","classList","remove","doc","replaceNode","__WEBPACK_EXTERNAL_MODULE__53__","__WEBPACK_EXTERNAL_MODULE__54__","STRUCTURE_NODE_TAGS","blockContext","isFirst","getFirstBlockElement","getLastBlockElement","extendStatics","__extends","b","setPrototypeOf","__proto__","__","constructor","_super","getFirstInlineElement","getLastInlineElement","getLeafNode","EmptyInlineElement","userAgent","appVersion","isIE11OrGreater","isIE","isFirefox","isSafari","isEdge","isWebKit","isWin","isIEOrEdge","navigator","areAllPrevousNodesEmpty","targetNode","_this","trs","table","td","getTableFromTd","currentTd_1","rows","cells","row","tr","rowIndex","sourceCol","targetCol","col","colSpan","rowSpan","spanLeft","spanAbove","writeBack","moveChildren","cell","recalcSpans","format","borderCollapse","backgroundColor","bgColorOdd","bgColorEven","borderTop","getBorderStyle","topBorderColor","borderBottom","bottomBorderColor","borderLeft","verticalBorderColor","borderRight","edit","operation","currentRow","currentCell","splice","cloneCell","newRow_1","countSpanAbove","colIndex","nextCell","getCell","newCell","getTd","forEachCellOfCurrentColumn","newCol_1","countSpanLeft","forEachCellOfColumn","forEachCellOfCurrentRow","rowStep","aboveCell","belowCell","colStep","leftCell","rightCell","splitRow","forEachCellOfRow","getCurrentTd","fromNode","toNode","clientRect","left","right","top","bottom","__spreadArrays","il","k","a","j","jl","getListTypeFromNode_1","VListItem_1","rootList","items","Error","moveChildNodesToLi","moveLiToList","populateItems","item","getFirstOrLastNode","isLast","getNode","listStack","createDocumentFragment","indentation","findListItems","outdent","indent","changeListType","needChangeType","getListType","appendItem","newListNode","nodeTag","mergeVList","list","originalLength","mergeOrphanNodesAfter","isOrphanItem","canMerge","mergeItems","listStartPos","listEndPos","listTypes","newListTypes","currentItem","li","furtherNodes","fullSelectionEnd","fullSelectionStart","blocks","regionRange","regionStart","regionEnd","traverser","block","getPositionPath","unshift","isPreviousText","removedSize","totalSize","INHERITABLE_PROPERTIES","win","defaultFragmentTrimmer","sourceHtml","body","lastIndexOf","before","after","preserveFragmentOnly","fragmentHandler","DOMParser","parseFromString","cloneObject","existingObj","normalizeContentColor_1","onExtract","isCut","isDarkMode","selectionRange","clipboardEvent","copyFragment","cloneContents","containerDiv","contentEditable","clipboardData","setData","innerText","deleteContents","preventDefault","getName","initialize","eventDisposer","addDomEventHandler","copy","cut","dispose","isDataAttributeSettable","allChildElements","dataset","color","ogsc","ogsb","ogac","ogab","onPaste","originalSelectionRange_1","tempDiv_1","getCustomData","createTempDivForIE","pasteDiv","runAsync","paste","disposer","types","text","rawHtml","snapshotBeforePaste","imageDataUri","originalFormat","reader_1","FileReader","onload","onerror","readAsDataURL","disableRestoreSelectionOnFocus","inIme","onNativeEvent","onFocus","cachedPosition","cachedFormatState","restorePendingFormatState","clear","restoreSavedRange","onBlur","saveSelectionRange","onScroll","rawEvent","scrollContainer","getScrollContainer","compositionstart","compositionend","drop","addEventListener","removeEventListener","onPluginEvent","eventType","getCurrentPosition","formatState_1","isInIME","featureMap","autoCompleteSnapshot","autoCompleteChangeSource","addFeature","shouldHandleEvent","handleEvent","setContent","contentChanged","currentFeature","findFeature","feature","array","performAutoComplete","changeSource","snapshot","data","features","hasFunctionKey","ctrlOrMeta","altKey","which","allowFunctionKeys","getContentSearcherOfCursor","onMouseUp","removeMouseUpEventListener","mouseUpEventListerAdded","onKeyPress","ensureTypeInElement","shouldSetNodeStyles","wasNodeJustCreatedByKeyboardEvent","updateCursor","replaceSelection","insertOnNewLine","getDefaultFormat","tryNormalizeTyping","UndoSnapshots_1","preserveSnapshots","maxBufferSize","canUndo","canRedo","onKeyDown","clearRedoForInput","isRestoring","undoSnapshots","hasNewContent","undo","restoreSnapshot","redo","getSnapshotsManager","canMove","getContent","delta","evt","lastKeyPress","clearRedo","isCtrlKey","isAltKey","isMetaKey","DARK_MODE_DEFAULT_FORMAT","darkModeColor","lightModeColor","calculateDefaultFormat","baseFormat","inDarkMode","backgroundColors","textColors","fontFamily","fontSize","textColor","bold","italic","underline","currentStyles","hasFocus","core","activeElement","contentDiv","isEmptyBlockUnderTR","applyInlineStyle_1","trimmedColor_1","darkMode_1","appliedColor_1","fontName","lineHeight","execCommand_1","getSelectedRegions","blockFormat_1","listType","vList","UNWRAPPABLE_NODES","DEFAULT_STYLER","_","wrapFunction","unwrapFunction","startBlock","endBlock","tag_1","__export","getDefaultContentEditFeatures","autoLink","indentWhenTab","outdentWhenShiftTab","outdentWhenBackspaceOnEmptyFirstLine","outdentWhenEnterOnEmptyLine","mergeInNewLineWhenBackspaceOnFirstChar","unquoteWhenBackspaceOnEmptyFirstLine","unquoteWhenEnterOnEmptyLine","autoBullet","tabInTable","upDownInTable","insertLineBeforeStructuredNodeFeature","defaultShortcut","unlinkWhenBackspaceAfterLink","noCycleCursorMove","smartOrderedList","smartOrderedListStyles","markdownBold","markdownItalic","markdownStrikethru","markdownInlineCode","getAndSetNodeId","customData","nextNodeId","createCustomData","dict","setObject","getObject","createLevelLists","listsMetadata","currentUniqueListId","WORD_ORDERED_LIST_SELECTOR","WORD_UNORDERED_LIST_SELECTOR","WORD_ONLINE_IDENTIFYING_SELECTOR","LIST_CONTAINER_ELEMENT_CLASS_NAME","UNORDERED_LIST_TAG_NAME","ORDERED_LIST_TAG_NAME","WAC_IDENTIFING_SELECTOR","getEntityFromElement_1","entity","isBlock","CssHandlers","string","str","handler","props","propName","reduce","OnRenderDelegateCache","getIconButtonOnRenderDelegate","customCacheKey","assets","highContrastAssetName","tooltipDirectionHint","cacheKey","asset","Icon","iconName","TooltipHost","hostClassName","content","directionalHint","CommandBarButton","componentRef","ariaLabel","menuProps","subMenuProps","onDismiss","dismissMenu","buttonClassName","onRenderIcon","__WEBPACK_EXTERNAL_MODULE__115__","RoosterCommandBarIconClassName","RoosterCommandBarButtonRootClassName","RoosterCommandBarStringKeys","LinkPrompt","RoosterCommmandBarButtonKeys","Header","Bold","Italic","Underline","BulletedList","NumberedList","Link","Highlight","ClearFormat","Emoji","InsertImage","Indent","Outdent","Strikethrough","FontColor","Unlink","Code","_getIconProps","_getCheckedForHeader","headerLevel","_handleChangeForHeader","_colorCellOnRender","cellBorderColor","DefaultButton","title","onClick","borderColor","viewBox","fill","focusable","width","height","_handleChangeForFontColor","_handleChangeForHighlight","selection","getSelection","backwards","isCollapsed","anchorNode","anchorOffset","focusNode","focusOffset","collapseToStart","collapseToEnd","OutOfBoxCommandBarButtons","iconProps","canCheck","getChecked","isBold","handleChange","isItalic","isUnderline","onRenderOptions","isBullet","disableListWorkaround","isNumbering","shouldFocusOnMount","DirectionalHint","bottomLeftEdge","focusZoneProps","direction","FocusZoneDirection","bidirectional","HighlightColorInfoList","onRender","FontColorInfoList","emojiPlugin","startEmoji","isStrikeThrough","isContextMenuItem","roosterCommandBarPlugin","promptForLink","getDisabled","canUnlink","button","OutOfBoxCommandBarButtonMap","InsertLinkStringKeys","LinkFieldLabel","Title","InsertButton","CancelButton","onLinkFieldRef","linkField","onLinkFieldChanged","_e","newValue","setState","insertButtonDisabled","onLinkFieldKeyDown","KeyCodes","enter","insertLink","stopPropagation","linkInserted","dismissDialog","render","strings","Dialog","dialogContentProps","DialogType","normal","hidden","modalProps","isBlocking","modal","TextField","label","required","onChange","DialogFooter","PrimaryButton","disabled","componentDidMount","React","PureComponent","calloutClassName","ReactDOM","unmountComponentAtNode","LinkDialog","__WEBPACK_EXTERNAL_MODULE__118__","__WEBPACK_EXTERNAL_MODULE__119__","__WEBPACK_EXTERNAL_MODULE__120__","matchShortcut","search","forEachEmoji","shortcutMatch","fullMatch","partialMatch","partialSearch","searchableKeywords","emojiTextInput","fullList","quickPicker","partialList","fullListBody","fullListContentContainer","partialListContent","fullListContent","tooltip","getFirstLastInlineElement_1","BodyScoper","SelectionBlockScoper","startFrom","blockNode","getFirstLastInlineElementFromBlockElement","startInline","SelectionScoper","inScope","selStartBlock","selEndBlock","inline","startPartial","endPartial","WHITESPACE_REGEX","inlineElements","getWordBefore","word","traverse","inlineBefore","inlineAfter","getSubStringBefore","getRangeFromText","exactMatch","textIndex","forEachTextInlineElement","textInline","nodeContent","nodeIndex","charCodeAt","getNearestNonTextInlineElement","nearestNonTextInlineElement","traversingComplete","previousInline","elementStyle","fontWeight","fontStyle","textDecoration","CLIPBOARD_HTML_HEADER_REGEX","getImage","dataTransfer","fileCount","getAsFile","files","file","workaroundForEdge","headerValues","getData","getAsString","isSubscript","isSuperscript","queryCommandState","httpExcludeRegEx","domainPortWithUrlRegEx","domainPortRegEx","linkMatchRules","http","RegExp","except","normalizeUrl","https","mailto","notes","unc","ftp","news","telnet","gopher","wais","schema","rule","scheme","originalUrl","normalizedUrl","adjustSteps","nodeToInsert","anchor","safeRemove","querySelector","normalizedPosition","splitter","rootNodeToInsert","rootNodes","hasBrNextToRoot","listItem","listNode","tdNode","trNode","newTable","currentTable","shouldInsertListAsText","div","orderListStyles","VListItem","wrapIfNotBlockNode","pop","nextLevel","listStyleType","checkFirst","checkLast","tryIncludeSiblingNode","getRootListNode","ancestor","includeSiblingLists","createVListFromItemNode","regionTypeData_1","getRegionCreator","fullRange","firstNodeOfRegion","lastNodeOfRegion","firstNodeValid","lastNodeValid","bothValid","areNodesValid","regions","innerSelector","boundaryTree","allBoundaries","innerNode","children","outerSelector","inSelectionOuterNode","thisInnerNode","thisOuterNode","boundary","outerNode","boundaries","buildBoundaryTree","iterateNodes","creator","started","ended","_b","previousOuterNode","newRegions","regionTypeData","rect","getBoundingClientRect","rects","getClientRects","span","selectionPath","JSON","stringify","pathComment","parse","removeCount","maxSize","cloneObject_1","getAllowedValues_1","elementCallbacks","styleCallbacks","getStyleCallbacks","attributeCallbacks","allowedTags","getAllowedTags","additionalAllowedTags","allowedAttributes","getAllowedAttributes","additionalAllowAttributes","allowedCssClassesRegex","getAllowedCssClassesRegex","additionalAllowedCssClasses","defaultStyleValues","getDefaultStyleValues","additionalDefaultStyleValues","additionalGlobalStyleNodes","allowPreserveWhiteSpace","convertInlineCss","additionalStyleNodes","sanitizeHtml","sanitizer","currentElementOrStyle","convertCssOnly","convertGlobalCssToInlineCss","sanitize","processNode","styleNodes","styleSheets_1","reverse","sheet","styleSheet","_loop_1","styleRule","cssRules","cssText","CSSRule","STYLE_RULE","selectorText","currentStyle","context","isElement","isText","isFragment","allowElement","insidePRE","thisStyle","processAttributes","processCss","next","styleNode","getAttributeNode","pair","isInheritable","keep","attribute","name_1","processCssClass","originalValue","calculatedValue","originalClasses","calculatedClasses","ALLOWED_HTML_TAGS","ALLOWED_HTML_ATTRIBUTES","DEFAULT_STYLE_VALUES","overflow","padding","border","float","removeValue","removeWidthForLiAndDiv","unique","self","additionalTags","additionalAttributes","toLocaleLowerCase","additionalCssClasses","patterns","additionalDefaultStyles","callbacks","newCallback","originalCallback_1","DocumentCommand_1","DocumentCommand","DocumentPosition_1","DocumentPosition","NodeType_1","NodeType","Alignment_1","Alignment","ChangeSource_1","ChangeSource","ContentPosition_1","ContentPosition","Direction_1","Direction","EntityOperation_1","EntityOperation","FontSizeChange_1","FontSizeChange","Indentation_1","Indentation","ListType_1","ListType","PasteOption_1","PasteOption","PositionType_1","PositionType","QueryScope_1","QueryScope","RegionType_1","RegionType","TableOperation_1","TableOperation","PluginEventType_1","PluginEventType","adjustBrowserBehavior_1","createEditorCore_1","mapPluginEvents_1","calculateDefaultFormat_1","convertContentToDarkMode_1","enableExperimentFeatures","plugins","plugin","initialContent","eventDisposers","additionalEditFeatures","addContentEditFeature","omitContentEditableAttributeChanges","isContentEditable","userSelect","msUserSelect","webkitUserSelect","contenteditableChanged","corePlugins","typeInContainer","getFocusedPosition","darkModeOptions","getDarkModeOptions","darkModeTransform","convertContentToDarkMode","onExternalContentTransform","api","existingNode","transformColorForDarkMode","scopeOrCallback","Function","isEmpty","triggerExtractContentEvent","includeSelectionMarker","clonedRoot","convertFunction","insertContent","allNodes","fragment_1","pasteAsText","applyCurrentFormat","fragment_2","createPasteFragment","selectRange","cachedSelectionRange","sel","getCursorRect","isPositionAtBeginning","nameOrMap","handlers_1","eventName","attachDomEvent","x","broadcast","triggerEvent","pluginEvent","editWithUndo","domEvent","defaultFormat","getBodyTraverser","getBlockTraverser","requestAnimationFrame","setEditorDomAttribute","getEditorDomAttribute","setDarkModeState","nextDarkMode","currentContent","changedToDarkMode","useExperimentFeatures","COMMANDS","attachDomEvent_1","createPasteFragment_1","editWithUndo_1","focus_1","getCustomData_1","getSelectionRange_1","getStyleBasedFormatState_1","hasFocus_1","insertNode_1","selectRange_1","triggerEvent_1","createCoreApiMap","initValue","mouseUp","firefoxTypeAfterLink","copyPlugin","pastePlugin","allPlugins","buildPluginList","eventHandlerPlugins","willHandleEventExclusively","currentUndoSnapshot","coreApiOverride","defaultApi","UndoSnapshots","pluginEventType","beforeDispatch","onEvent","processStyles","applyCurrentStyle","pasteOption","fragment","sanitizingOption","htmlBefore","htmlAfter","htmlAttributes","createBeforePasteEvent","maxWidth","attrs","meta","format_1","pendableFormat","styleBasedForamt","getCurrentFormat","line","lines","isNested","event_1","tryGetFromCache","rangeCount","getRangeAt","ogTextColorNode","ogBackgroundColorNode","insertedNode_1","isBegin","refNode","insertedNode","rangeToRestore","cloneRange","getInitialRange","nodeForCursor","skipSameRange","needAddRange","removeAllRanges","addRange","handledExclusively","EVENT_MAPPING","keypress","keydown","keyup","mousedown","skipRootElement","childElements","getNewFontSize","pt","changeBase","fontSizes","ceil","last","change","collapseSelectedBlocks_1","canCollapse","tagsToStopUnwrap","tagsToUnwrap","attributesToPreserve","groups","stopUnwrapSelector","group","first","clearNodeFormat","allChildrenAreBlock","previousValue","returnBlockElement","clearAttribute","STYLES_TO_REMOVE","isDefaultFormatEmpty","removeProperty","URI_REGEX","MAILTO_REGEX","FTP_REGEX","getAnchorNodeAtCursor","updateAnchorDisplayText","displayText","link","santizer","href","checkXss","linkData","normalizedUrl_1","prefix","applyLinkPrefix","originalUrl_1","roosterjs_editor_core_1","roosterjs_editor_dom_2","listTag","headerTag","canAddImageAltText","isBlockQuote","insertImageWithSrc","imageFile","reader","getTableCellWidth","columns","cellSpacing","cellPadding","vtable","cellToSelect","currentCol","newRow","newCol","calculateCellToSelect","textOrRange","searcher","backupRange","angle","transform","alignment","align","textAlign","experimentSetIndentation_1","processList_1","command_1","quote","blockGroups","experimentToggleListType_1","toggleTagCore_1","paddingLeft","codeBlock","level","wrapped","header","ContentEdit_1","ContentEdit","ContentEditFeatures_1","autoLinkFeatures_1","shortcutFeatures_1","insertLineBeforeStructuredNodeFeature_1","noCycleCursorMove_1","tableFeatures_1","markdownFeatures_1","listFeatures_1","quoteFeatures_1","featureSet","getFilteredFeatures","allFeatures","IndentWhenTab","OutdentWhenShiftTab","OutdentWhenBackOn1stEmptyLine","OutdentWhenEnterOnEmptyLine","MergeInNewLine","UnquoteWhenBackOnEmpty1stLine","UnquoteWhenEnterOnEmptyLine","TabInTable","UpDownInTable","InsertLineBeforeStructuredNodeFeature","AutoBullet","AutoLink","UnlinkWhenBackspaceAfterLink","DefaultShortcut","NoCycleCursorMove","getSmartOrderedList","MarkdownBold","MarkdownItalic","MarkdownStrikethru","MarkdownInlineCode","roosterjs_editor_api_1","TRAILING_PUNCTUATION_REGEX","cacheGetLinkData","trailingPunctuation","candidate_1","createCommand","winKey","macKey","action","commands","cacheGetCommand","shiftKey","cmd","NEWLINE_HTML","CHILD_PARENT_TAG_MAP","TD","TH","LI","CHILD_SELECTOR","cacheGetStructuredElement","rtl","cacheGetTableCell","firstTd","isUp","targetTd","hasShiftKey","newContainer","newPos","setBaseAndExtent","generateBasicMarkdownFeature","triggerCharacter","elementTag","useShiftKey","cacheGetRangeForMarkdownOperation","textContentRange","elementToWrap","extractContents","nonPrintedSpaceTextNode","handleMarkdownEvent","textInlineElement","inlineTextContent","contentIndex","toggleListAndPreventDefault","listInfo","cacheGetListElement","listElement","br","textBeforeCursor","rangeToDelete","styleList","ol","parentOl","listStyle","QUOTE_TAG","STRUCTURED_TAGS","cacheGetQuoteChild","splitQuote","childOfQuote","CustomReplace_1","CustomReplace","makeReplacement","sourceString","replacementHTML","matchSourceCaseSensitive","defaultReplacements","CustomReplacePlugin","replacements","updateReplacements","newReplacements","longestReplacementLength","replacement","replacementEndCharacters","endChars","Set","replacements_1","lastChar","add","toLocaleUpperCase","getReplacementEndCharacters","has","stringToSearch","getMatchingReplacement","matchingText","matchingRange","parsingSpan","lowerCaseStringToSearch","sourceMatch","replacementMatch","HyperLink_1","HyperLink","getTooltipCallback","onLinkClick","onMouse","tryGetHref","mouseover","mouseout","srcElement","open","ImageResize_1","ImageResize","BEGIN_TAG","END_TAG","EXTRACT_HTML_REGEX","minWidth","minHeight","selectionBorderColor","forcePreserveRatio","resizableImageSelector","startResize","getSelectedImage","startPageX","pageX","startPageY","pageY","startWidth","clientWidth","startHeight","clientHeight","doResize","finishResize","cursor","stopEvent","widthChange","heightChange","newWidth","isWest","newHeight","isNorth","ratio","document_2","resizeDiv","removeResizeDivIfAny","previous","removeResizeDiv","hideResizeHandle","onDragStart","dragstart","blur","currentImg","showResizeHandle","event_2","event_3","extractHtml","createResizeDiv","selectImageAfterUnSelect","referenceNode","createComment","pointerEvents","selectedImage","comment","divWithImage","Paste_1","Paste","convertPastedContentFromExcel_1","convertPastedContentFromWord_1","constants_1","convertPastedContentFromWordOnline_1","preserved","sanitizingOption_1","wacListElements","el","margin","isWordOnlineWithList","pasteOriginal","pasteText","pasteAndMergeFormat","LAST_TD_END_REGEX","LAST_TR_END_REGEX","LAST_TR_REGEX","LAST_TABLE_REGEX","trMatch","tableMatch","borderStyle","wordConverter_1","WordConverterArguments_1","converterUtils_1","wordConverter","createWordConverter","wordConverterArgs","createWordConverterArguments","processNodesDiscovery","processNodeConvert","CustomData_1","nextUniqueId","numBulletsConverted","numNumberedConverted","LevelLists_1","lists","listItems","currentListIdsByLevels","lastProcessedItem","LINE_BREAKS","getOrCreateListForNode","metadata","listMetadata","recurringGetOrCreateListAtNode","possibleList","getRealPreviousSibling","listId","uniqueListId","convertListIfNeeded","cleanupListIgnore","levels","nodesToRemove","isEmptySpan","fixWordListComments","isIgnoreNode","getListItemMetadata","listatt","getStyleValue","listprops","wordListId","originalNode","isFakeBullet","fakeBullet","getFakeBulletText","removeComments","nextElement","endComment","getRealNextSibling","newSpan","prevSibling","isEmptyTextNode","textStyle","inStyles","nvpair","resetCurrentLists","ll","itemMetadata","levelInfo","ignore","numberOfItems","secondFakeBullet","firstFakeBullet","ListItemBlock_1","insertConvertedListToDoc","convertedListElement","listItemBlock","insertPositionNode","startElement","replaceRegex","prevParent","nextParent","sanitizeListItemContainer","curListItemBlock","listElements","curItem","listItemContainers","lastItemInCurBlock","endElement","createListItemBlock","getListItemBlocks","itemBlock","section","flattenListBlock","listItemContainer","getContainerListType","itemLevel","listRootElement","itemToInsert","curListLevel","lastElementChild","lastChildTag","append","firstElementChild","insertListItem","parentContainer","PickerPlugin_1","PickerPlugin","ESC_CHARCODE","LEFT_ARROW_CHARCODE","UP_ARROW_CHARCODE","RIGHT_ARROW_CHARCODE","DOWN_ARROW_CHARCODE","DELETE_CHARCODE","UNIDENTIFIED_CODE","dataProvider","pickerOptions","isPendingInputEventHandling","onInitalize","htmlNode","wordToReplace","getWord","lastKnownRange","setIsSuggesting","handleAutoComplete","isSuggesting","onDispose","onContentChanged","elementIds_1","elementIdPrefix","eventHandledOnKeyDown","isAndroidKeyboardEvent","currentInputLength","calcInputLength","onKeyDownEvent","onAndroidInputEvent","shouldHandleKeyUpEvent","onKeyUpDomEvent","setLastKnownRange","onIsSuggestingChanged","setAriaOwns","setAriaActiveDescendant","cancelDefaultKeyDownEvent","stopImmediatePropagation","getIdValue","getNamedItem","getWordBeforeCursor","replacementNode","getRangeUntilAt","startPos","endPos","hasMatched","trimmedWordBeforeCursor","wordBeforeCursorWithoutTriggerChar","wordBeforeCursor","queryStringUpdated","blockSuggestions","setCursorPoint","rangeNode","nodeBeforeCursor","setRangeStart","nodeBeforeNodeBeforeCursor","detach","targetPoint","y","bufferZone","keyboardEvent","shiftHighlight","isHorizontal","getSelectedIndex","selectOption","tryRemoveNode","nodeAfterCursor","nodeId","onRemove","newInputLength","inputType","wordBeforCursor","getInlineElementBeforeCursor","inlineElementBefore","inlineElementAfter","replacementNode_1","wordFromRange","wordFromCache","nodeOffset","suggestionsLabel","selectedIndex","suggestionLabelPrefix","charCode","TableResize_1","TableResize","ResizeState","tableRectMap","resizingState","insertingState","onMouseMove","cacheRects","setCurrentTable","i_1","tdRect","setCurrentTd","setCurrentInsertTd","insertTd","currentInsertTd","startHorizontalResizeTable","startResizeTable","startVerticalResizeTable","frameAnimateResizeTable","resizeTable","currentTd","rect_1","newPos_1","endResizeTable","setupResizerContainer","onMouseMoveDisposer","destoryRectMap","removeResizerContainer","resizerContainer","tableRect","inserter","createInserter","inserterBackgroundColor","HORIZONTAL_INSERTER_HTML","VERTICAL_INSERTER_HTML","horizontalResizer","verticalResizer","createResizer","horizontal","Watermark_1","Watermark","WATERMARK_REGEX","watermark","handleWatermark","showHideWatermark","spellcheckInitialValue","hideWatermark","isWatermarkShowing","removeWartermarkFromHtml","ignoreCachedState","showWatermark","watermarkNode","EntityPlugin_1","EntityPlugin","insertEntity_1","insertEntity","getEntityFromElement","getEntities","getEntityElement_1","getEntityElement","createEntityWrapper_1","createEntityWrapper","tryTriggerEntityEvent_1","EntityFeatures_1","handleContextMenuEvent","entityElement","handleCutEvent","checkRemoveEntityForRange","contextmenu","knownEntityElements","ClickOnEntityFeature","EscapeFromEntityFeature","EnterBeforeReadonlyEntityFeature","BackspaceAfterEntityFeature","DeleteBeforeEntityFeature","handleMouseDownEvent","handleMouseUpEvent","handleKeyDownEvent","handleBeforePasteEvent","handleContentChangedEvent","handleExtractContentWithDomEvent","clickingPoint","workaroundSelectionIssueForIE","entityElements","knownIds_1","resetAll","editableEntityElements","inSelectionEntityElements_1","isFullyCovered","workaroundButton","onblur","cacheGetReadonlyEntityElement","cacheGetNeighborEntityElement","collapseOnly","checkForSameLine","lookForPrev","entityNode","existingEntity","defaultStrings","category","query","addUndoSnapshotWhenCollapsed","roosterjsReactSpin","g","onChangeEvent","changeDisposer","textInputDisposer","pasteDisposer","doubleClickImageSelector","onDoubleClick","isDataUrl","openedWindow","opener","onDoubleClickDisposer","getEditor","PlaceholderRegex","imageManager","preventImagePaste","beforePasteEvent","outerHTML","extractContentEvent","hasPlaceholder","setPreventImagePaste","enabled","IgnorePasteImagePlugin","InternalInstance","sizeDelta","lastSnapshot","bufferSize","UndoSnapshotsWithImage","reset","ActiveDescendant","AutoComplete","Controls","Expanded","HasPopup","Owns","Pressed","getIconOnRenderDelegate","getIconOnRenderDelegateWithCustomCacheKey","createLinkDialog","DisplayNoneStyle","_id","RoosterCommandBar","IdCounter","_fileInputOnRef","_fileInput","_fileInputOnChange","_refreshButtonStatesCore","commandBarButton","firstLevel","checked","_refreshChildButtonStates","_refreshButtonStates","_createButton","calloutOnDismiss","rootClassName","_onCommandBarButtonClick","iconOnly","_createChildButton","calloutProps","onButtonClicked","click","_updateFormatState","_hasFormatStateChanged","createFormatState","_initButtons","_async","Async","_updateFormatStateDebounced","debounce","overflowMenuProps","commandBarClassName","ellipsisAriaLabel","_buttons","CommandBar","overflowButtonProps","accept","registerRoosterCommandBar","componentWillUnmount","unregisterRoosterCommandBar","componentWillReceiveProps","nextProps","nextState","buttonOverrides","refreshFormatState","buttonMap","visibleButtonKeys","currentButton","currentSubMenuProps","subMenuPropsOverride","emojiIndex","exclude","sort","order","Number","MAX_VALUE","newState","__WEBPACK_EXTERNAL_MODULE__272__","isDirty","_calloutClassName","FocusOutShell","CalloutClassName","NextId","_calloutOnDismiss","nextTarget","_shouldCallBlur","isFocused","_onBlur","relatedTarget","_shouldCallBlurDefault","_containerDiv","_onFocus","_onFocusNative","_onMouseDown","_containerDivOnRef","BaseClassName","onMouseDown","ContentEditableDivStyle","WebkitUserSelect","_mode","_initialContent","_editorOptions","_hasPlaceholder","_placeholderVisible","_refreshPlaceholder","wasPlaceholderVisible","_editor","forceUpdate","_onHyperlinkClick","mouseEvent","_hyperlinkToolTipCallback","_updateViewState","viewState","isInitializing","originalContent","__html","_getAnchorForClickOpenHyperlink","_trySwithToEditMode","_onMouseUp","onHyperlinkClick","hasActivated","nativeEvent","_updateContentToViewState","_onDragEnter","_onDragLeave","_onDragOver","_onDrop","onDrop","_contentDiv","_contentDivOnRef","contentDivRef","initializeContentEditable","_setInitialReactContent","_createEditorOptions","readonly","_getClassName","dir","_getDirValue","onDragEnter","onDragLeave","onDragOver","suppressContentEditableWarning","tabIndex","dangerouslySetInnerHTML","role","activateRoosterOnMount","activateInViewMode","shouldComponentUpdate","_trySwitchToViewMode","reloadContent","resetUndo","selectAll","selectNodeContents","trimWithEmptyCheck","thresholdForIsEmptyCheck","isEmptyFunction","modeClassName","fromConstructor","hasContent","updateViewState","additionalPlugins","contentEditFeatures","enableRestoreSelectionOnFocus","sanitizeAttributeCallbacks","istemptitle","v","alwaysForceUpdateForEditMode","onBeforeModeChange","onAfterModeChange","clickOpenHyperlinkViewMode","ctrlOpen","Component","__WEBPACK_EXTERNAL_MODULE__278__","_setKey","commandBars","dialogDismiss","RoosterCommandBarPlugin","EventTypesToRefreshFormatState","commandBar","handleShortcuts","defaultPrevented","getCommandFromEvent","onShortcutTriggered","commandExecuted","useLegacyClearFormat","__WEBPACK_EXTERNAL_MODULE__282__","macCommands","u","z","period","forwardSlash","space","winCommands","EMOJI_BEFORE_COLON_REGEX","_onModeChanged","newMode","_removeAutoCompleteAriaAttributes","_paneRef","_pane","_calloutRef","_callout","_calloutOnDismissInternal","_setIsSuggesting","_onSelectFromPane","_insertEmoji","showFullPicker","_refreshCalloutDebounced","_refreshCallout","_strings","_contentEditable","setStrings","_isSuggesting","_eventHandledOnKeyDown","_onKeyDownSuggestingDomEvent","backspace","_canUndoEmoji","_handleEventOnKeyDown","_isModifierKey","_onKeyUpSuggestingDomEvent","_onKeyUpDomEvent","startingString","_triggerChangeEvent","_getCallout","getEmojiElementIdByIndex","selectedEmoji","getSelectedEmoji","_getWordBeforeCursor","_tryShowFullPicker","_timer","nextIndex","navigate","escape","clearTimeout","setSearch","cursorData","charBeforeCursor","onKeyboardTriggered","inserted","_tryPatchEmojiFont","emojiPaneProps","cursorRect","point","gap","Callout","bottomAutoEdge","isBeakVisible","gapSpace","onSelect","onLayoutChanged","onModeChanged","navBarProps","statusBarProps","searchDisabled","hideStatusBar","VerticalDirectionKeys","up","down","DirectionKeys","home","TooltipCalloutProps","beakWidth","setInitialFocus","doNotLayer","bottomCenter","_baseId","EmojiPane","_listId","_onSearchFocus","_input","_onSearchKeyPress","currentEmojiList","_onSelect","_onSearchKeyDown","_emojiBody","scrollTop","scrollHeight","visibleRowCount","visibleTop","currentRowTop","_onEmojiBodyRef","_pivotClick","selected","currentFamily","_getTabId","itemKey","_searchRefCallback","_searchBox","setSelectionStart","_focusZoneRefCallback","_getEmojiIconId","_onSearchChange","normalizedSearchValue","_normalizeSearchText","_getSearchResult","searchInBox","_renderQuickPicker","_renderFullPicker","componentDidUpdate","prevState","currentEmojisLength","prevEmojisLength","fullSearchText","colonIncluded","searchValue","isQuickMode","emojiList","searchEmojis","quickPickerClassName","tooltipClassName","_renderCurrentEmojiIcons","fullPickerClassName","searchPlaceholder","searchInputAriaLabel","emojiId","autoCompleteAttributes","inputClassName","_renderFullList","_renderPartialList","emojiIconProps","onMouseOver","isSelected","partialListClassName","hasResult","FocusZone","fullListClassName","fullListContentClassName","currentSelected","getTabId","defaultProps","selectedClassName","selectedButtonClassName","iconClassName","EmojiNavBarStyles","navBar","friendlyName","navBarTooltip","navBarButton","onFamilyClick","noResultDescription","StatusBarStyles","statusBar","statusBarNoResultDetailsContainer","overflowMode","TooltipOverflowMode","Parent","icon","statusBarIcon","statusBarDetailsContainer","statusBarDetails"],"mappings":"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,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbU,EAA0B,SAC1BA,EAA0B,SAC1BV,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbU,EAA0B,SAC1BV,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbU,EAA0B,SAC1BA,EAA0B,SAC1BV,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbU,EAA0B,SAC1BV,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbU,EAA0B,SAC1BV,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,UAEjB,SAA0B,CACtBA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbU,EAA0B,SAC1BV,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbU,EAA0B,SAC1BV,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbU,EAA0B,SAC1BA,EAA0B,SAC1BV,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbU,EAA0B,SAC1BV,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbU,EAA0B,SAC1BV,EAAa,SACbU,EAA0B,SAC1BA,EAA0B,SAC1BV,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbU,EAA0B,SAC1BA,EAA0B,SAC1BV,EAAa,UAEjB,aAA8B,CAC1BA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,UAEjB,OAAwB,CACpBA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbU,EAA0B,SAC1BV,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,UAEjB,SAA0B,CACtBA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbU,EAA0B,SAC1BV,EAAa,SACbA,EAAa,SACbA,EAAa,SACbU,EAA0B,SAC1BV,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbU,EAA0B,SAC1BV,EAAa,SACbA,EAAa,SACbA,EAAa,SACbU,EAA0B,SAC1BV,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbU,EAA0B,SAC1BV,EAAa,SACbA,EAAa,SACbU,EAA0B,SAC1BA,EAA0B,SAC1BA,EAA0B,SAC1BA,EAA0B,SAC1BV,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbU,EAA0B,SAC1BV,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbU,EAA0B,SAC1BA,EAA0B,SAC1BV,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbU,EAA0B,SAC1BV,EAAa,SACbA,EAAa,SACbA,EAAa,UAEjB,UAA2B,CACvBE,EACAF,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbU,EAA0B,SAC1BA,EAA0B,SAC1BV,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbU,EAA0B,SAC1BA,EAA0B,SAC1BA,EAA0B,SAC1BA,EAA0B,SAC1BA,EAA0B,SAC1BA,EAA0B,SAC1BA,EAA0B,SAC1BA,EAA0B,SAC1BA,EAA0B,SAC1BV,EAAa,SACbA,EAAa,SACbU,EAA0B,SAC1BA,EAA0B,SAC1BA,EAA0B,SAC1BV,EAAa,SACbU,EAA0B,SAC1BA,EAA0B,SAC1BA,EAA0B,SAC1BA,EAA0B,SAC1BA,EAA0B,SAC1BA,EAA0B,SAC1BA,EAA0B,SAC1BV,EAAa,SACbU,EAA0B,SAC1BV,EAAa,SACbU,EAA0B,SAC1BA,EAA0B,SAC1BA,EAA0B,SAC1BV,EAAa,SACbU,EAA0B,SAC1BA,EAA0B,SAC1BA,EAA0B,SAC1BV,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbU,EAA0B,SAC1BV,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbU,EAA0B,SAC1BV,EAAa,SACbA,EAAa,SACbA,EAAa,SACbU,EAA0B,SAC1BA,EAA0B,SAC1BA,EAA0B,SAC1BA,EAA0B,SAC1BA,EAA0B,SAC1BV,EAAa,SACbU,EAA0B,SAC1BA,EAA0B,SAC1BA,EAA0B,SAC1BA,EAA0B,SAC1BA,EAA0B,SAC1BA,EAA0B,SAC1BA,EAA0B,SAC1BA,EAA0B,SAC1BA,EAA0B,SAC1BA,EAA0B,SAC1BA,EAA0B,SAC1BA,EAA0B,SAC1BA,EAA0B,SAC1BA,EAA0B,SAC1BA,EAA0B,SAC1BA,EAA0B,SAC1BV,EAAa,SACbA,EAAa,SACbU,EAA0B,SAC1BA,EAA0B,SAC1BA,EAA0B,SAC1BV,EAAa,SACbU,EAA0B,SAC1BA,EAA0B,SAC1BA,EAA0B,SAC1BA,EAA0B,SAC1BA,EAA0B,SAC1BA,EAA0B,SAC1BA,EAA0B,SAC1BA,EAA0B,SAC1BA,EAA0B,SAC1BA,EAA0B,SAC1BA,EAA0B,SAC1BA,EAA0B,SAC1BA,EAA0B,SAC1BA,EAA0B,SAC1BA,EAA0B,SAC1BA,EAA0B,SAC1BA,EAA0B,SAC1BA,EAA0B,SAC1BA,EAA0B,SAC1BA,EAA0B,SAC1BA,EAA0B,SAC1BA,EAA0B,SAC1BA,EAA0B,SAC1BA,EAA0B,SAC1BA,EAA0B,SAC1BA,EAA0B,SAC1BA,EAA0B,SAC1BA,EAA0B,SAC1BV,EAAa,SACbU,EAA0B,SAC1BV,EAAa,SACbU,EAA0B,SAC1BV,EAAa,SACbU,EAA0B,SAC1BA,EAA0B,SAC1BV,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbU,EAA0B,SAC1BA,EAA0B,SAC1BA,EAA0B,SAC1BA,EAA0B,SAC1BA,EAA0B,SAC1BA,EAA0B,SAC1BA,EAA0B,SAC1BA,EAA0B,SAC1BA,EAA0B,SAC1BA,EAA0B,UAE9B,UAA2B,CACvBA,EAA0B,SAC1BV,EAAa,SACbU,EAA0B,SAC1BV,EAAa,SACbU,EAA0B,SAC1BV,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbU,EAA0B,SAC1BV,EAAa,SACbA,EAAa,SACbA,EAAa,SACbA,EAAa,SACbU,EAA0B,SAC1BA,EAA0B,SAC1BA,EAA0B,SAC1BV,EAAa,SACbA,EAAa,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","file":"rooster-react-amd-min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 123);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar NodeBlockElement_1 = require(\"./blockElements/NodeBlockElement\");\nexports.NodeBlockElement = NodeBlockElement_1.default;\nvar getBlockElementAtNode_1 = require(\"./blockElements/getBlockElementAtNode\");\nexports.getBlockElementAtNode = getBlockElementAtNode_1.default;\nvar getFirstLastBlockElement_1 = require(\"./blockElements/getFirstLastBlockElement\");\nexports.getFirstLastBlockElement = getFirstLastBlockElement_1.default;\nvar StartEndBlockElement_1 = require(\"./blockElements/StartEndBlockElement\");\nexports.StartEndBlockElement = StartEndBlockElement_1.default;\nvar ContentTraverser_1 = require(\"./contentTraverser/ContentTraverser\");\nexports.ContentTraverser = ContentTraverser_1.default;\nvar PositionContentSearcher_1 = require(\"./contentTraverser/PositionContentSearcher\");\nexports.PositionContentSearcher = PositionContentSearcher_1.default;\nvar getInlineElementAtNode_1 = require(\"./inlineElements/getInlineElementAtNode\");\nexports.getInlineElementAtNode = getInlineElementAtNode_1.default;\nvar ImageInlineElement_1 = require(\"./inlineElements/ImageInlineElement\");\nexports.ImageInlineElement = ImageInlineElement_1.default;\nvar LinkInlineElement_1 = require(\"./inlineElements/LinkInlineElement\");\nexports.LinkInlineElement = LinkInlineElement_1.default;\nvar NodeInlineElement_1 = require(\"./inlineElements/NodeInlineElement\");\nexports.NodeInlineElement = NodeInlineElement_1.default;\nvar PartialInlineElement_1 = require(\"./inlineElements/PartialInlineElement\");\nexports.PartialInlineElement = PartialInlineElement_1.default;\nvar applyTextStyle_1 = require(\"./utils/applyTextStyle\");\nexports.applyTextStyle = applyTextStyle_1.default;\nvar Browser_1 = require(\"./utils/Browser\");\nexports.Browser = Browser_1.Browser;\nexports.getBrowserInfo = Browser_1.getBrowserInfo;\nvar applyFormat_1 = require(\"./utils/applyFormat\");\nexports.applyFormat = applyFormat_1.default;\nvar changeElementTag_1 = require(\"./utils/changeElementTag\");\nexports.changeElementTag = changeElementTag_1.default;\nvar collapseNodes_1 = require(\"./utils/collapseNodes\");\nexports.collapseNodes = collapseNodes_1.default;\nvar contains_1 = require(\"./utils/contains\");\nexports.contains = contains_1.default;\nvar extractClipboardEvent_1 = require(\"./utils/extractClipboardEvent\");\nexports.extractClipboardEvent = extractClipboardEvent_1.default;\nvar findClosestElementAncestor_1 = require(\"./utils/findClosestElementAncestor\");\nexports.findClosestElementAncestor = findClosestElementAncestor_1.default;\nvar fromHtml_1 = require(\"./utils/fromHtml\");\nexports.fromHtml = fromHtml_1.default;\nvar getComputedStyles_1 = require(\"./utils/getComputedStyles\");\nexports.getComputedStyles = getComputedStyles_1.default;\nexports.getComputedStyle = getComputedStyles_1.getComputedStyle;\nvar getPendableFormatState_1 = require(\"./utils/getPendableFormatState\");\nexports.getPendableFormatState = getPendableFormatState_1.default;\nexports.PendableFormatCommandMap = getPendableFormatState_1.PendableFormatCommandMap;\nvar getTagOfNode_1 = require(\"./utils/getTagOfNode\");\nexports.getTagOfNode = getTagOfNode_1.default;\nvar isBlockElement_1 = require(\"./utils/isBlockElement\");\nexports.isBlockElement = isBlockElement_1.default;\nvar isNodeEmpty_1 = require(\"./utils/isNodeEmpty\");\nexports.isNodeEmpty = isNodeEmpty_1.default;\nvar isRtl_1 = require(\"./utils/isRtl\");\nexports.isRtl = isRtl_1.default;\nvar isVoidHtmlElement_1 = require(\"./utils/isVoidHtmlElement\");\nexports.isVoidHtmlElement = isVoidHtmlElement_1.default;\nvar matchLink_1 = require(\"./utils/matchLink\");\nexports.matchLink = matchLink_1.default;\nvar adjustNodeInsertPosition_1 = require(\"./utils/adjustNodeInsertPosition\");\nexports.adjustNodeInsertPosition = adjustNodeInsertPosition_1.default;\nvar queryElements_1 = require(\"./utils/queryElements\");\nexports.queryElements = queryElements_1.default;\nvar splitParentNode_1 = require(\"./utils/splitParentNode\");\nexports.splitParentNode = splitParentNode_1.default;\nexports.splitBalancedNodeRange = splitParentNode_1.splitBalancedNodeRange;\nvar unwrap_1 = require(\"./utils/unwrap\");\nexports.unwrap = unwrap_1.default;\nvar wrap_1 = require(\"./utils/wrap\");\nexports.wrap = wrap_1.default;\nvar getLeafSibling_1 = require(\"./utils/getLeafSibling\");\nexports.getNextLeafSibling = getLeafSibling_1.getNextLeafSibling;\nexports.getPreviousLeafSibling = getLeafSibling_1.getPreviousLeafSibling;\nvar getLeafNode_1 = require(\"./utils/getLeafNode\");\nexports.getFirstLeafNode = getLeafNode_1.getFirstLeafNode;\nexports.getLastLeafNode = getLeafNode_1.getLastLeafNode;\nvar getTextContent_1 = require(\"./utils/getTextContent\");\nexports.getTextContent = getTextContent_1.default;\nvar splitTextNode_1 = require(\"./utils/splitTextNode\");\nexports.splitTextNode = splitTextNode_1.default;\nvar normalizeRect_1 = require(\"./utils/normalizeRect\");\nexports.normalizeRect = normalizeRect_1.default;\nvar toArray_1 = require(\"./utils/toArray\");\nexports.toArray = toArray_1.default;\nvar VTable_1 = require(\"./table/VTable\");\nexports.VTable = VTable_1.default;\nvar VList_1 = require(\"./list/VList\");\nexports.VList = VList_1.default;\nvar createVListFromRegion_1 = require(\"./list/createVListFromRegion\");\nexports.createVListFromRegion = createVListFromRegion_1.default;\nvar getRegionsFromRange_1 = require(\"./region/getRegionsFromRange\");\nexports.getRegionsFromRange = getRegionsFromRange_1.default;\nvar getSelectedBlockElementsInRegion_1 = require(\"./region/getSelectedBlockElementsInRegion\");\nexports.getSelectedBlockElementsInRegion = getSelectedBlockElementsInRegion_1.default;\nvar collapseNodesInRegion_1 = require(\"./region/collapseNodesInRegion\");\nexports.collapseNodesInRegion = collapseNodesInRegion_1.default;\nvar isNodeInRegion_1 = require(\"./region/isNodeInRegion\");\nexports.isNodeInRegion = isNodeInRegion_1.default;\nvar Position_1 = require(\"./selection/Position\");\nexports.Position = Position_1.default;\nvar createRange_1 = require(\"./selection/createRange\");\nexports.createRange = createRange_1.default;\nexports.getRangeFromSelectionPath = createRange_1.getRangeFromSelectionPath;\nvar getPositionRect_1 = require(\"./selection/getPositionRect\");\nexports.getPositionRect = getPositionRect_1.default;\nvar isPositionAtBeginningOf_1 = require(\"./selection/isPositionAtBeginningOf\");\nexports.isPositionAtBeginningOf = isPositionAtBeginningOf_1.default;\nvar getSelectionPath_1 = require(\"./selection/getSelectionPath\");\nexports.getSelectionPath = getSelectionPath_1.default;\nvar getHtmlWithSelectionPath_1 = require(\"./selection/getHtmlWithSelectionPath\");\nexports.getHtmlWithSelectionPath = getHtmlWithSelectionPath_1.default;\nvar setHtmlWithSelectionPath_1 = require(\"./selection/setHtmlWithSelectionPath\");\nexports.setHtmlWithSelectionPath = setHtmlWithSelectionPath_1.default;\nvar addSnapshot_1 = require(\"./snapshots/addSnapshot\");\nexports.addSnapshot = addSnapshot_1.default;\nvar canMoveCurrentSnapshot_1 = require(\"./snapshots/canMoveCurrentSnapshot\");\nexports.canMoveCurrentSnapshot = canMoveCurrentSnapshot_1.default;\nvar clearProceedingSnapshots_1 = require(\"./snapshots/clearProceedingSnapshots\");\nexports.clearProceedingSnapshots = clearProceedingSnapshots_1.default;\nvar moveCurrentSnapsnot_1 = require(\"./snapshots/moveCurrentSnapsnot\");\nexports.moveCurrentSnapsnot = moveCurrentSnapsnot_1.default;\nvar createSnapshots_1 = require(\"./snapshots/createSnapshots\");\nexports.createSnapshots = createSnapshots_1.default;\nvar HtmlSanitizer_1 = require(\"./htmlSanitizer/HtmlSanitizer\");\nexports.HtmlSanitizer = HtmlSanitizer_1.default;\nvar htmlToDom_1 = require(\"./htmlSanitizer/htmlToDom\");\nexports.htmlToDom = htmlToDom_1.default;\nexports.splitWithFragment = htmlToDom_1.splitWithFragment;\nvar getInheritableStyles_1 = require(\"./htmlSanitizer/getInheritableStyles\");\nexports.getInheritableStyles = getInheritableStyles_1.default;\nvar createDefaultHtmlSanitizerOptions_1 = require(\"./htmlSanitizer/createDefaultHtmlSanitizerOptions\");\nexports.createDefaultHtmlSanitizerOptions = createDefaultHtmlSanitizerOptions_1.default;\nvar chainSanitizerCallback_1 = require(\"./htmlSanitizer/chainSanitizerCallback\");\nexports.chainSanitizerCallback = chainSanitizerCallback_1.default;\nvar isDocumentFragment_1 = require(\"./typeUtils/isDocumentFragment\");\nexports.isDocumentFragment = isDocumentFragment_1.default;\nvar isHTMLElement_1 = require(\"./typeUtils/isHTMLElement\");\nexports.isHTMLElement = isHTMLElement_1.default;\nvar isHTMLOListElement_1 = require(\"./typeUtils/isHTMLOListElement\");\nexports.isHTMLOListElement = isHTMLOListElement_1.default;\nvar isHTMLTableCellElement_1 = require(\"./typeUtils/isHTMLTableCellElement\");\nexports.isHTMLTableCellElement = isHTMLTableCellElement_1.default;\nvar isHTMLTableElement_1 = require(\"./typeUtils/isHTMLTableElement\");\nexports.isHTMLTableElement = isHTMLTableElement_1.default;\nvar isNode_1 = require(\"./typeUtils/isNode\");\nexports.isNode = isNode_1.default;\nvar isRange_1 = require(\"./typeUtils/isRange\");\nexports.isRange = isRange_1.default;\nvar safeInstanceOf_1 = require(\"./typeUtils/safeInstanceOf\");\nexports.safeInstanceOf = safeInstanceOf_1.default;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// Interfaces\nvar ContentEditFeature_1 = require(\"./interfaces/ContentEditFeature\");\nexports.Keys = ContentEditFeature_1.Keys;\n// Classes\nvar Editor_1 = require(\"./editor/Editor\");\nexports.Editor = Editor_1.default;\nvar Undo_1 = require(\"./undo/Undo\");\nexports.Undo = Undo_1.default;\n// Core Plugins\nvar EditPlugin_1 = require(\"./corePlugins/EditPlugin\");\nexports.EditPlugin = EditPlugin_1.default;\nvar MouseUpPlugin_1 = require(\"./corePlugins/MouseUpPlugin\");\nexports.MouseUpPlugin = MouseUpPlugin_1.default;\nvar DOMEventPlugin_1 = require(\"./corePlugins/DOMEventPlugin\");\nexports.DOMEventPlugin = DOMEventPlugin_1.default;\nvar TypeInContainerPlugin_1 = require(\"./corePlugins/TypeInContainerPlugin\");\nexports.TypeInContainerPlugin = TypeInContainerPlugin_1.default;\nvar FirefoxTypeAfterLink_1 = require(\"./corePlugins/FirefoxTypeAfterLink\");\nexports.FirefoxTypeAfterLink = FirefoxTypeAfterLink_1.default;\nvar CopyPlugin_1 = require(\"./corePlugins/CopyPlugin\");\nexports.CopyPlugin = CopyPlugin_1.default;\nvar CorePastePlugin_1 = require(\"./corePlugins/CorePastePlugin\");\nexports.CorePastePlugin = CorePastePlugin_1.default;\n// Event APIs\nvar cacheGetEventData_1 = require(\"./eventApi/cacheGetEventData\");\nexports.cacheGetEventData = cacheGetEventData_1.default;\nvar clearEventDataCache_1 = require(\"./eventApi/clearEventDataCache\");\nexports.clearEventDataCache = clearEventDataCache_1.default;\nvar cacheGetContentSearcher_1 = require(\"./eventApi/cacheGetContentSearcher\");\nexports.cacheGetContentSearcher = cacheGetContentSearcher_1.cacheGetContentSearcher;\nexports.clearContentSearcherCache = cacheGetContentSearcher_1.clearContentSearcherCache;\nvar cacheGetElementAtCursor_1 = require(\"./eventApi/cacheGetElementAtCursor\");\nexports.cacheGetElementAtCursor = cacheGetElementAtCursor_1.default;\nvar isModifierKey_1 = require(\"./eventApi/isModifierKey\");\nexports.isModifierKey = isModifierKey_1.default;\nvar isCharacterValue_1 = require(\"./eventApi/isCharacterValue\");\nexports.isCharacterValue = isCharacterValue_1.default;\nvar isCtrlOrMetaPressed_1 = require(\"./eventApi/isCtrlOrMetaPressed\");\nexports.isCtrlOrMetaPressed = isCtrlOrMetaPressed_1.default;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Get the html tag of a node, or empty if it is not an element\n * @param node The node to get tag of\n * @returns Tag name in upper case if the given node is an Element, or empty string otherwise\n */\nfunction getTagOfNode(node) {\n    return node && node.nodeType == 1 /* Element */ ? node.tagName.toUpperCase() : '';\n}\nexports.default = getTagOfNode;\n//# sourceMappingURL=getTagOfNode.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar isRange_1 = require(\"../typeUtils/isRange\");\nfunction contains(container, contained, treatSameNodeAsContain) {\n    if (!container || !contained) {\n        return false;\n    }\n    if (treatSameNodeAsContain && container == contained) {\n        return true;\n    }\n    if (isRange_1.default(contained)) {\n        contained = contained && contained.commonAncestorContainer;\n        treatSameNodeAsContain = true;\n    }\n    if (contained && contained.nodeType == 3 /* Text */) {\n        contained = contained.parentNode;\n        treatSameNodeAsContain = true;\n    }\n    if (container.nodeType != 1 /* Element */ && container.nodeType != 11 /* DocumentFragment */) {\n        return !!treatSameNodeAsContain && container == contained;\n    }\n    return !!(treatSameNodeAsContain || container != contained) && container.contains(contained);\n}\nexports.default = contains;\n//# sourceMappingURL=contains.js.map","export { Strings, registerDefaultString, getString } from './strings/strings';\r\nexport { NullFunction } from './utils/Core';\r\nexport { closest } from './utils/ElementUtil';\r\nexport { setNonCompatIndentation, toggleNonCompatBullet, toggleNonCompatNumbering } from './utils/NonCompatFormatter';\r\nexport { css, getDataAndAriaProps } from './utils/ReactUtil';\r\nexport { default as ImageManager, ImageManagerInteface, ImageManagerOptions, UpdatePlaceholdersResult } from './utils/ImageManager';\r\nexport { default as ContentChangedPlugin } from './plugins/ContentChangedPlugin';\r\nexport { default as DoubleClickImagePlugin } from './plugins/DoubleClickImagePlugin';\r\nexport { default as PasteImagePlugin } from './plugins/PasteImagePlugin';\r\nexport { default as IgnorePasteImagePlugin } from './plugins/IgnorePasteImagePlugin';\r\nexport { default as UndoWithImagePlugin } from './plugins/UndoWithImagePlugin';\r\nexport { Base64Svgs } from './resources/Images';\r\nexport { LeanRoosterPlugin } from './schema/RoosterReactPlugin';\r\nexport { AriaAttributes } from './utils/Accessibility';","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar findClosestElementAncestor_1 = require(\"../utils/findClosestElementAncestor\");\nvar isNodeAfter_1 = require(\"../utils/isNodeAfter\");\n/**\n * Represent a position in DOM tree by the node and its offset index\n */\nvar Position = /** @class */ (function () {\n    function Position(nodeOrPosition, offsetOrPosType, isFromEndOfRange) {\n        this.isFromEndOfRange = isFromEndOfRange;\n        if (nodeOrPosition.node) {\n            this.node = nodeOrPosition.node;\n            offsetOrPosType = nodeOrPosition.offset;\n        }\n        else {\n            this.node = nodeOrPosition;\n        }\n        switch (offsetOrPosType) {\n            case -2 /* Before */:\n                this.offset = getIndexOfNode(this.node);\n                this.node = this.node.parentNode;\n                this.isAtEnd = false;\n                break;\n            case -3 /* After */:\n                this.offset = getIndexOfNode(this.node) + 1;\n                this.isAtEnd = !this.node.nextSibling;\n                this.node = this.node.parentNode;\n                break;\n            case -1 /* End */:\n                this.offset = getEndOffset(this.node);\n                this.isAtEnd = true;\n                break;\n            default:\n                var endOffset = getEndOffset(this.node);\n                this.offset = Math.max(0, Math.min(offsetOrPosType, endOffset));\n                this.isAtEnd = offsetOrPosType > 0 && offsetOrPosType >= endOffset;\n                break;\n        }\n        this.element = findClosestElementAncestor_1.default(this.node);\n    }\n    /**\n     * Normalize this position to the leaf node, return the normalize result.\n     * If current position is already using leaf node, return this position object itself\n     */\n    Position.prototype.normalize = function () {\n        if (this.node.nodeType == 3 /* Text */ || !this.node.firstChild) {\n            return this;\n        }\n        var node = this.node;\n        var newOffset = this.isAtEnd\n            ? -1 /* End */\n            : this.offset;\n        while (node.nodeType == 1 /* Element */) {\n            var nextNode = this.isFromEndOfRange\n                ? newOffset == -1 /* End */\n                    ? node.lastChild\n                    : node.childNodes[newOffset - 1]\n                : newOffset == 0 /* Begin */\n                    ? node.firstChild\n                    : newOffset == -1 /* End */\n                        ? node.lastChild\n                        : node.childNodes[newOffset];\n            if (nextNode) {\n                node = nextNode;\n                newOffset =\n                    this.isAtEnd || this.isFromEndOfRange ? -1 /* End */ : 0 /* Begin */;\n            }\n            else {\n                break;\n            }\n        }\n        return new Position(node, newOffset, this.isFromEndOfRange);\n    };\n    /**\n     * Check if this position is equal to the given position\n     * @param position The position to check\n     */\n    Position.prototype.equalTo = function (position) {\n        return (position &&\n            (this == position ||\n                (this.node == position.node &&\n                    this.offset == position.offset &&\n                    this.isAtEnd == position.isAtEnd)));\n    };\n    /**\n     * Checks if this position is after the given position\n     */\n    Position.prototype.isAfter = function (position) {\n        return this.node == position.node\n            ? (this.isAtEnd && !position.isAtEnd) || this.offset > position.offset\n            : isNodeAfter_1.default(this.node, position.node);\n    };\n    /**\n     * Move this position with offset, returns a new position with a valid offset in the same node\n     * @param offset Offset to move with\n     */\n    Position.prototype.move = function (offset) {\n        return new Position(this.node, Math.max(this.offset + offset, 0));\n    };\n    /**\n     * Get start position of the given Range\n     * @param range The range to get position from\n     */\n    Position.getStart = function (range) {\n        return new Position(range.startContainer, range.startOffset);\n    };\n    /**\n     * Get end position of the given Range\n     * @param range The range to get position from\n     */\n    Position.getEnd = function (range) {\n        // For collapsed range, always return the same value of start container to make sure\n        // end position is not before start position\n        return range.collapsed\n            ? Position.getStart(range)\n            : new Position(range.endContainer, range.endOffset, true /*isFromEndOfRange*/);\n    };\n    return Position;\n}());\nexports.default = Position;\nfunction getIndexOfNode(node) {\n    var i = 0;\n    while ((node = node.previousSibling)) {\n        i++;\n    }\n    return i;\n}\nfunction getEndOffset(node) {\n    if (node.nodeType == 3 /* Text */) {\n        return node.nodeValue.length;\n    }\n    else if (node.nodeType == 1 /* Element */) {\n        return node.childNodes.length;\n    }\n    else {\n        return 1;\n    }\n}\n//# sourceMappingURL=Position.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar changeFontSize_1 = require(\"./format/changeFontSize\");\nexports.changeFontSize = changeFontSize_1.default;\nexports.FONT_SIZES = changeFontSize_1.FONT_SIZES;\nvar clearBlockFormat_1 = require(\"./format/clearBlockFormat\");\nexports.clearBlockFormat = clearBlockFormat_1.default;\nexports.TAGS_TO_UNWRAP = clearBlockFormat_1.TAGS_TO_UNWRAP;\nexports.TAGS_TO_STOP_UNWRAP = clearBlockFormat_1.TAGS_TO_STOP_UNWRAP;\nexports.ATTRIBUTES_TO_PRESERVE = clearBlockFormat_1.ATTRIBUTES_TO_PRESERVE;\nvar clearFormat_1 = require(\"./format/clearFormat\");\nexports.clearFormat = clearFormat_1.default;\nvar createLink_1 = require(\"./format/createLink\");\nexports.createLink = createLink_1.default;\nvar getFormatState_1 = require(\"./format/getFormatState\");\nexports.getFormatState = getFormatState_1.default;\nexports.getElementBasedFormatState = getFormatState_1.getElementBasedFormatState;\nexports.getStyleBasedFormatState = getFormatState_1.getStyleBasedFormatState;\nvar insertImage_1 = require(\"./format/insertImage\");\nexports.insertImage = insertImage_1.default;\nvar insertTable_1 = require(\"./table/insertTable\");\nexports.insertTable = insertTable_1.default;\nvar editTable_1 = require(\"./table/editTable\");\nexports.editTable = editTable_1.default;\nvar formatTable_1 = require(\"./table/formatTable\");\nexports.formatTable = formatTable_1.default;\nvar removeLink_1 = require(\"./format/removeLink\");\nexports.removeLink = removeLink_1.default;\nvar replaceWithNode_1 = require(\"./format/replaceWithNode\");\nexports.replaceWithNode = replaceWithNode_1.default;\nvar rotateElement_1 = require(\"./format/rotateElement\");\nexports.rotateElement = rotateElement_1.default;\nvar setAlignment_1 = require(\"./format/setAlignment\");\nexports.setAlignment = setAlignment_1.default;\nvar setBackgroundColor_1 = require(\"./format/setBackgroundColor\");\nexports.setBackgroundColor = setBackgroundColor_1.default;\nvar setTextColor_1 = require(\"./format/setTextColor\");\nexports.setTextColor = setTextColor_1.default;\nvar setDirection_1 = require(\"./format/setDirection\");\nexports.setDirection = setDirection_1.default;\nvar setFontName_1 = require(\"./format/setFontName\");\nexports.setFontName = setFontName_1.default;\nvar setFontSize_1 = require(\"./format/setFontSize\");\nexports.setFontSize = setFontSize_1.default;\nvar setImageAltText_1 = require(\"./format/setImageAltText\");\nexports.setImageAltText = setImageAltText_1.default;\nvar setIndentation_1 = require(\"./format/setIndentation\");\nexports.setIndentation = setIndentation_1.default;\nvar toggleBold_1 = require(\"./format/toggleBold\");\nexports.toggleBold = toggleBold_1.default;\nvar toggleBullet_1 = require(\"./format/toggleBullet\");\nexports.toggleBullet = toggleBullet_1.default;\nvar toggleItalic_1 = require(\"./format/toggleItalic\");\nexports.toggleItalic = toggleItalic_1.default;\nvar toggleNumbering_1 = require(\"./format/toggleNumbering\");\nexports.toggleNumbering = toggleNumbering_1.default;\nvar toggleBlockQuote_1 = require(\"./format/toggleBlockQuote\");\nexports.toggleBlockQuote = toggleBlockQuote_1.default;\nvar toggleCodeBlock_1 = require(\"./format/toggleCodeBlock\");\nexports.toggleCodeBlock = toggleCodeBlock_1.default;\nvar toggleStrikethrough_1 = require(\"./format/toggleStrikethrough\");\nexports.toggleStrikethrough = toggleStrikethrough_1.default;\nvar toggleSubscript_1 = require(\"./format/toggleSubscript\");\nexports.toggleSubscript = toggleSubscript_1.default;\nvar toggleSuperscript_1 = require(\"./format/toggleSuperscript\");\nexports.toggleSuperscript = toggleSuperscript_1.default;\nvar toggleUnderline_1 = require(\"./format/toggleUnderline\");\nexports.toggleUnderline = toggleUnderline_1.default;\nvar toggleHeader_1 = require(\"./format/toggleHeader\");\nexports.toggleHeader = toggleHeader_1.default;\n// @deprecated the function getPendableFormatState will still be available from\n// roosterjs-editor-dom package, keep export it here just for compatibility\nvar roosterjs_editor_dom_1 = require(\"roosterjs-editor-dom\");\nexports.getPendableFormatState = roosterjs_editor_dom_1.getPendableFormatState;\n//# sourceMappingURL=index.js.map","module.exports = __WEBPACK_EXTERNAL_MODULE__7__;","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar contains_1 = require(\"./contains\");\nvar getTagOfNode_1 = require(\"./getTagOfNode\");\nvar shouldSkipNode_1 = require(\"./shouldSkipNode\");\n/**\n * This walks forwards/backwards DOM tree to get next meaningful node\n * @param rootNode Root node to scope the leaf sibling node\n * @param startNode current node to get sibling node from\n * @param isNext True to get next leaf sibling node, false to get previous leaf sibling node\n * @param skipTags (Optional) tags that child elements will be skipped\n * @param ignoreSpace (Optional) Ignore pure space text node when check if the node should be skipped\n */\nfunction getLeafSibling(rootNode, startNode, isNext, skipTags, ignoreSpace) {\n    var result = null;\n    var getSibling = isNext\n        ? function (node) { return node.nextSibling; }\n        : function (node) { return node.previousSibling; };\n    var getChild = isNext ? function (node) { return node.firstChild; } : function (node) { return node.lastChild; };\n    if (contains_1.default(rootNode, startNode)) {\n        var curNode = startNode;\n        var shouldContinue = true;\n        while (shouldContinue) {\n            // Find next/previous node, starting from next/previous sibling, then one level up to find next/previous sibling from parent\n            // till a non-null nextSibling/previousSibling is found or the ceiling is encountered (rootNode)\n            var parentNode = curNode.parentNode;\n            curNode = getSibling(curNode);\n            while (!curNode && parentNode != rootNode) {\n                curNode = getSibling(parentNode);\n                parentNode = parentNode.parentNode;\n            }\n            // Now traverse down to get first/last child\n            while (curNode &&\n                (!skipTags || skipTags.indexOf(getTagOfNode_1.default(curNode)) < 0) &&\n                getChild(curNode)) {\n                curNode = getChild(curNode);\n            }\n            // Check special nodes (i.e. node that has a display:none etc.) and continue looping if so\n            shouldContinue = curNode && shouldSkipNode_1.default(curNode, ignoreSpace);\n            if (!shouldContinue) {\n                // Found a good leaf node, assign and exit\n                result = curNode;\n                break;\n            }\n        }\n    }\n    return result;\n}\nexports.getLeafSibling = getLeafSibling;\n/**\n * This walks forwards DOM tree to get next meaningful node\n * @param rootNode Root node to scope the leaf sibling node\n * @param startNode current node to get sibling node from\n * @param skipTags (Optional) tags that child elements will be skipped\n */\nfunction getNextLeafSibling(rootNode, startNode, skipTags) {\n    return getLeafSibling(rootNode, startNode, true /*isNext*/, skipTags);\n}\nexports.getNextLeafSibling = getNextLeafSibling;\n/**\n * This walks backwards DOM tree to get next meaningful node\n * @param rootNode Root node to scope the leaf sibling node\n * @param startNode current node to get sibling node from\n * @param skipTags (Optional) tags that child elements will be skipped\n */\nfunction getPreviousLeafSibling(rootNode, startNode, skipTags) {\n    return getLeafSibling(rootNode, startNode, false /*isNext*/, skipTags);\n}\nexports.getPreviousLeafSibling = getPreviousLeafSibling;\n//# sourceMappingURL=getLeafSibling.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// NOTE: Type TargetWindow is an auto-generated type.\n// Run node ./tools/generateTargetWindow.js to generate it.\n/**\n * Try get window from the given node or range\n * @param source Source node or range\n */\nfunction getTargetWindow(source) {\n    var node = source && (source.commonAncestorContainer || source);\n    var document = node &&\n        (node.ownerDocument ||\n            (Object.prototype.toString.apply(node) == '[object HTMLDocument]'\n                ? node\n                : null));\n    // If document exists but document.defaultView doesn't exist, it is a detached object, just use current window instead\n    var targetWindow = document && (document.defaultView || window);\n    return targetWindow;\n}\nexports.getTargetWindow = getTargetWindow;\n/**\n * Check if the given object is instance of the target type\n * @param obj Object to check\n * @param typeName Target type name\n */\nfunction safeInstanceOf(obj, typeName) {\n    var targetWindow = getTargetWindow(obj);\n    var targetType = targetWindow && targetWindow[typeName];\n    var mainWindow = window;\n    var mainWindowType = mainWindow && mainWindow[typeName];\n    return ((mainWindowType && obj instanceof mainWindowType) ||\n        (targetType && obj instanceof targetType));\n}\nexports.default = safeInstanceOf;\n//# sourceMappingURL=safeInstanceOf.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar collapseNodes_1 = require(\"../utils/collapseNodes\");\nvar contains_1 = require(\"../utils/contains\");\nvar getTagOfNode_1 = require(\"../utils/getTagOfNode\");\nvar isBlockElement_1 = require(\"../utils/isBlockElement\");\nvar NodeBlockElement_1 = require(\"./NodeBlockElement\");\nvar StartEndBlockElement_1 = require(\"./StartEndBlockElement\");\n/**\n * This produces a block element from a a node\n * It needs to account for various HTML structure. Examples:\n * 1) &lt;root&gt;&lt;div&gt;abc&lt;/div&gt;&lt;/root&gt;\n *   This is most common the case, user passes in a node pointing to abc, and get back a block representing &lt;div&gt;abc&lt;/div&gt;\n * 2) &lt;root&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;/root&gt;\n *   Common content for empty block, user passes node pointing to &lt;br&gt;, and get back a block representing &lt;p&gt;&lt;br&gt;&lt;/p&gt;\n * 3) &lt;root&gt;abc&lt;/root&gt;\n *   Not common, but does happen. It is still a block in user's view. User passes in abc, and get back a start-end block representing abc\n *   NOTE: abc could be just one node. However, since it is not a html block, it is more appropriate to use start-end block although they point to same node\n * 4) &lt;root&gt;&lt;div&gt;abc&lt;br&gt;123&lt;/div&gt;&lt;/root&gt;\n *   A bit tricky, but can happen when user use Ctrl+Enter which simply inserts a &lt;BR&gt; to create a link break. There're two blocks:\n *   block1: 1) abc&lt;br&gt; block2: 123\n * 5) &lt;root&gt;&lt;div&gt;abc&lt;div&gt;123&lt;/div&gt;&lt;/div&gt;&lt;/root&gt;\n *   Nesting div and there is text node in same level as a DIV. Two blocks: 1) abc 2) &lt;div&gt;123&lt;/div&gt;\n * 6) &lt;root&gt;&lt;div&gt;abc&lt;span&gt;123&lt;br&gt;456&lt;/span&gt;&lt;/div&gt;&lt;/root&gt;\n *   This is really tricky. Essentially there is a &lt;BR&gt; in middle of a span breaking the span into two blocks;\n *   block1: abc&lt;span&gt;123&lt;br&gt; block2: 456\n * In summary, given any arbitary node (leaf), to identify the head and tail of the block, following rules need to be followed:\n * 1) to identify the head, it needs to crawl DOM tre left/up till a block node or BR is encountered\n * 2) same for identifying tail\n * 3) should also apply a block ceiling, meaning as it crawls up, it should stop at a block node\n * @param rootNode Root node of the scope, the block element will be inside of this node\n * @param node The node to get BlockElement start from\n */\nfunction getBlockElementAtNode(rootNode, node) {\n    if (!contains_1.default(rootNode, node)) {\n        return null;\n    }\n    // Identify the containing block. This serves as ceiling for traversing down below\n    // NOTE: this container block could be just the rootNode,\n    // which cannot be used to create block element. We will special case handle it later on\n    var containerBlockNode = StartEndBlockElement_1.default.getBlockContext(node);\n    if (containerBlockNode == node) {\n        return new NodeBlockElement_1.default(containerBlockNode);\n    }\n    // Find the head and leaf node in the block\n    var headNode = findHeadTailLeafNode(node, containerBlockNode, false /*isTail*/);\n    var tailNode = findHeadTailLeafNode(node, containerBlockNode, true /*isTail*/);\n    // At this point, we have the head and tail of a block, here are some examples and where head and tail point to\n    // 1) &lt;root&gt;&lt;div&gt;hello&lt;br&gt;&lt;/div&gt;&lt;/root&gt;, head: hello, tail: &lt;br&gt;\n    // 2) &lt;root&gt;&lt;div&gt;hello&lt;span style=\"font-family: Arial\"&gt;world&lt;/span&gt;&lt;/div&gt;&lt;/root&gt;, head: hello, tail: world\n    // Both are actually completely and exclusively wrapped in a parent div, and can be represented with a Node block\n    // So we shall try to collapse as much as we can to the nearest common ancester\n    var nodes = collapseNodes_1.default(rootNode, headNode, tailNode, false /*canSplitParent*/);\n    headNode = nodes[0];\n    tailNode = nodes[nodes.length - 1];\n    if (headNode.parentNode != tailNode.parentNode) {\n        // Un-Balanced start and end, create a start-end block\n        return new StartEndBlockElement_1.default(rootNode, headNode, tailNode);\n    }\n    else {\n        // Balanced start and end (point to same parent), need to see if further collapsing can be done\n        while (!headNode.previousSibling && !tailNode.nextSibling) {\n            var parentNode = headNode.parentNode;\n            if (parentNode == containerBlockNode) {\n                // Has reached the container block\n                if (containerBlockNode != rootNode) {\n                    // If the container block is not the root, use the container block\n                    headNode = tailNode = parentNode;\n                }\n                break;\n            }\n            else {\n                // Continue collapsing to parent\n                headNode = tailNode = parentNode;\n            }\n        }\n        // If head and tail are same and it is a block element, create NodeBlock, otherwise start-end block\n        return headNode == tailNode && isBlockElement_1.default(headNode)\n            ? new NodeBlockElement_1.default(headNode)\n            : new StartEndBlockElement_1.default(rootNode, headNode, tailNode);\n    }\n}\nexports.default = getBlockElementAtNode;\n/**\n * Given a node and container block, identify the first/last leaf node\n * A leaf node is defined as deepest first/last node in a block\n * i.e. &lt;div&gt;&lt;span style=\"font-family: Arial\"&gt;abc&lt;/span&gt;&lt;/div&gt;, abc is the head leaf of the block\n * Often &lt;br&gt; or a child &lt;div&gt; is used to create a block. In that case, the leaf after the sibling div or br should be the head leaf\n * i.e. &lt;div&gt;123&lt;br&gt;abc&lt;/div&gt;, abc is the head of a block because of a previous sibling &lt;br&gt;\n * i.e. &lt;div&gt;&lt;div&gt;123&lt;/div&gt;abc&lt;/div&gt;, abc is also the head of a block because of a previous sibling &lt;div&gt;\n */\nfunction findHeadTailLeafNode(node, containerBlockNode, isTail) {\n    var result = node;\n    if (getTagOfNode_1.default(result) == 'BR' && isTail) {\n        return result;\n    }\n    while (result) {\n        var sibling = node;\n        while (!(sibling = isTail ? node.nextSibling : node.previousSibling)) {\n            node = node.parentNode;\n            if (node == containerBlockNode) {\n                return result;\n            }\n        }\n        while (sibling) {\n            if (isBlockElement_1.default(sibling)) {\n                return result;\n            }\n            else if (getTagOfNode_1.default(sibling) == 'BR') {\n                return isTail ? sibling : result;\n            }\n            node = sibling;\n            sibling = isTail ? node.firstChild : node.lastChild;\n        }\n        result = node;\n    }\n    return result;\n}\n//# sourceMappingURL=getBlockElementAtNode.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction toArray(collection) {\n    return [].slice.call(collection);\n}\nexports.default = toArray;\n//# sourceMappingURL=toArray.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar isNode_1 = require(\"../typeUtils/isNode\");\nvar isVoidHtmlElement_1 = require(\"../utils/isVoidHtmlElement\");\nvar Position_1 = require(\"./Position\");\nfunction createRange(arg1, arg2, arg3, arg4) {\n    var start;\n    var end;\n    if (isNodePosition(arg1)) {\n        // function createRange(startPosition: NodePosition, endPosition?: NodePosition): Range;\n        start = arg1;\n        end = isNodePosition(arg2) ? arg2 : null;\n    }\n    else if (isNode_1.default(arg1)) {\n        if (Array.isArray(arg2)) {\n            // function createRange(rootNode: Node, startPath: number[], endPath?: number[]): Range;\n            start = getPositionFromPath(arg1, arg2);\n            end = Array.isArray(arg3) ? getPositionFromPath(arg1, arg3) : null;\n        }\n        else if (typeof arg2 == 'number') {\n            // function createRange(node: Node, offset: number | PositionType): Range;\n            // function createRange(startNode: Node, startOffset: number | PositionType, endNode: Node, endOffset: number | PositionType): Range;\n            start = new Position_1.default(arg1, arg2);\n            end = isNode_1.default(arg3) ? new Position_1.default(arg3, arg4) : null;\n        }\n        else if (isNode_1.default(arg2) || !arg2) {\n            // function createRange(startNode: Node, endNode?: Node): Range;\n            start = new Position_1.default(arg1, -2 /* Before */);\n            end = new Position_1.default(arg2 || arg1, -3 /* After */);\n        }\n    }\n    if (start && start.node) {\n        var range = start.node.ownerDocument.createRange();\n        start = getFocusablePosition(start);\n        end = getFocusablePosition(end || start);\n        range.setStart(start.node, start.offset);\n        range.setEnd(end.node, end.offset);\n        return range;\n    }\n    else {\n        return null;\n    }\n}\nexports.default = createRange;\n/**\n * Convert to focusable position\n * If current node is a void element, we need to move up one level to put cursor outside void element\n */\nfunction getFocusablePosition(position) {\n    return position.node.nodeType == 1 /* Element */ && isVoidHtmlElement_1.default(position.node)\n        ? new Position_1.default(position.node, position.isAtEnd ? -3 /* After */ : -2 /* Before */)\n        : position;\n}\nfunction isNodePosition(arg) {\n    return arg && arg.node;\n}\nfunction getPositionFromPath(node, path) {\n    if (!node || !path) {\n        return null;\n    }\n    // Iterate with a for loop to avoid mutating the passed in element path stack\n    // or needing to copy it.\n    var offset;\n    for (var i = 0; i < path.length; i++) {\n        offset = path[i];\n        if (i < path.length - 1 &&\n            node &&\n            node.nodeType == 1 /* Element */ &&\n            node.childNodes.length > offset) {\n            node = node.childNodes[offset];\n        }\n        else {\n            break;\n        }\n    }\n    return new Position_1.default(node, offset);\n}\n/**\n * @deprecated Use createRange instead\n * Get range from the given selection path\n * @param rootNode Root node of the selection path\n * @param path The selection path which contains start and end position path\n */\nfunction getRangeFromSelectionPath(rootNode, path) {\n    return createRange(rootNode, path.start, path.end);\n}\nexports.getRangeFromSelectionPath = getRangeFromSelectionPath;\n//# sourceMappingURL=createRange.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar roosterjs_editor_dom_1 = require(\"roosterjs-editor-dom\");\nvar pendableFormatCommands = null;\n/**\n * Execute a document command\n * @param editor The editor instance\n * @param command The command to execute\n * @param addUndoSnapshotWhenCollapsed Optional, set to true to always add undo snapshot even current selection is collapsed.\n * Default value is false.\n * @param doWorkaroundForList Optional, set to true to do workaround for list in order to keep current format.\n * Default value is false.\n */\nfunction execCommand(editor, command) {\n    editor.focus();\n    var formatter = function () { return editor.getDocument().execCommand(command, false, null); };\n    var range = editor.getSelectionRange();\n    if (range && range.collapsed) {\n        editor.addUndoSnapshot();\n        formatter();\n        if (isPendableFormatCommand(command)) {\n            // Trigger PendingFormatStateChanged event since we changed pending format state\n            editor.triggerPluginEvent(13 /* PendingFormatStateChanged */, {\n                formatState: roosterjs_editor_dom_1.getPendableFormatState(editor.getDocument()),\n            });\n        }\n    }\n    else {\n        editor.addUndoSnapshot(formatter, \"Format\" /* Format */);\n    }\n}\nexports.default = execCommand;\nfunction isPendableFormatCommand(command) {\n    if (!pendableFormatCommands) {\n        pendableFormatCommands = Object.keys(roosterjs_editor_dom_1.PendableFormatCommandMap).map(function (key) { return roosterjs_editor_dom_1.PendableFormatCommandMap[key]; });\n    }\n    return pendableFormatCommands.indexOf(command) >= 0;\n}\n//# sourceMappingURL=execCommand.js.map","// Copyright (c) Microsoft Corporation. All rights reserved. Licensed under the MIT license.\n// See LICENSE in the project root for license information.\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\n// Store the theming state in __themeState__ global scope for reuse in the case of duplicate\n// load-themed-styles hosted on the page.\nvar _root = typeof window === 'undefined' ? global : window; // eslint-disable-line @typescript-eslint/no-explicit-any\n// Nonce string to inject into script tag if one provided. This is used in CSP (Content Security Policy).\nvar _styleNonce = _root && _root.CSPSettings && _root.CSPSettings.nonce;\nvar _themeState = initializeThemeState();\n/**\n * Matches theming tokens. For example, \"[theme: themeSlotName, default: #FFF]\" (including the quotes).\n */\nvar _themeTokenRegex = /[\\'\\\"]\\[theme:\\s*(\\w+)\\s*(?:\\,\\s*default:\\s*([\\\\\"\\']?[\\.\\,\\(\\)\\#\\-\\s\\w]*[\\.\\,\\(\\)\\#\\-\\w][\\\"\\']?))?\\s*\\][\\'\\\"]/g;\nvar now = function () {\n    return typeof performance !== 'undefined' && !!performance.now ? performance.now() : Date.now();\n};\nfunction measure(func) {\n    var start = now();\n    func();\n    var end = now();\n    _themeState.perf.duration += end - start;\n}\n/**\n * initialize global state object\n */\nfunction initializeThemeState() {\n    var state = _root.__themeState__ || {\n        theme: undefined,\n        lastStyleElement: undefined,\n        registeredStyles: []\n    };\n    if (!state.runState) {\n        state = __assign(__assign({}, state), { perf: {\n                count: 0,\n                duration: 0\n            }, runState: {\n                flushTimer: 0,\n                mode: 0 /* sync */,\n                buffer: []\n            } });\n    }\n    if (!state.registeredThemableStyles) {\n        state = __assign(__assign({}, state), { registeredThemableStyles: [] });\n    }\n    _root.__themeState__ = state;\n    return state;\n}\n/**\n * Loads a set of style text. If it is registered too early, we will register it when the window.load\n * event is fired.\n * @param {string | ThemableArray} styles Themable style text to register.\n * @param {boolean} loadAsync When true, always load styles in async mode, irrespective of current sync mode.\n */\nexport function loadStyles(styles, loadAsync) {\n    if (loadAsync === void 0) { loadAsync = false; }\n    measure(function () {\n        var styleParts = Array.isArray(styles) ? styles : splitStyles(styles);\n        var _a = _themeState.runState, mode = _a.mode, buffer = _a.buffer, flushTimer = _a.flushTimer;\n        if (loadAsync || mode === 1 /* async */) {\n            buffer.push(styleParts);\n            if (!flushTimer) {\n                _themeState.runState.flushTimer = asyncLoadStyles();\n            }\n        }\n        else {\n            applyThemableStyles(styleParts);\n        }\n    });\n}\n/**\n * Allows for customizable loadStyles logic. e.g. for server side rendering application\n * @param {(processedStyles: string, rawStyles?: string | ThemableArray) => void}\n * a loadStyles callback that gets called when styles are loaded or reloaded\n */\nexport function configureLoadStyles(loadStylesFn) {\n    _themeState.loadStyles = loadStylesFn;\n}\n/**\n * Configure run mode of load-themable-styles\n * @param mode load-themable-styles run mode, async or sync\n */\nexport function configureRunMode(mode) {\n    _themeState.runState.mode = mode;\n}\n/**\n * external code can call flush to synchronously force processing of currently buffered styles\n */\nexport function flush() {\n    measure(function () {\n        var styleArrays = _themeState.runState.buffer.slice();\n        _themeState.runState.buffer = [];\n        var mergedStyleArray = [].concat.apply([], styleArrays);\n        if (mergedStyleArray.length > 0) {\n            applyThemableStyles(mergedStyleArray);\n        }\n    });\n}\n/**\n * register async loadStyles\n */\nfunction asyncLoadStyles() {\n    return setTimeout(function () {\n        _themeState.runState.flushTimer = 0;\n        flush();\n    }, 0);\n}\n/**\n * Loads a set of style text. If it is registered too early, we will register it when the window.load event\n * is fired.\n * @param {string} styleText Style to register.\n * @param {IStyleRecord} styleRecord Existing style record to re-apply.\n */\nfunction applyThemableStyles(stylesArray, styleRecord) {\n    if (_themeState.loadStyles) {\n        _themeState.loadStyles(resolveThemableArray(stylesArray).styleString, stylesArray);\n    }\n    else {\n        registerStyles(stylesArray);\n    }\n}\n/**\n * Registers a set theme tokens to find and replace. If styles were already registered, they will be\n * replaced.\n * @param {theme} theme JSON object of theme tokens to values.\n */\nexport function loadTheme(theme) {\n    _themeState.theme = theme;\n    // reload styles.\n    reloadStyles();\n}\n/**\n * Clear already registered style elements and style records in theme_State object\n * @param option - specify which group of registered styles should be cleared.\n * Default to be both themable and non-themable styles will be cleared\n */\nexport function clearStyles(option) {\n    if (option === void 0) { option = 3 /* all */; }\n    if (option === 3 /* all */ || option === 2 /* onlyNonThemable */) {\n        clearStylesInternal(_themeState.registeredStyles);\n        _themeState.registeredStyles = [];\n    }\n    if (option === 3 /* all */ || option === 1 /* onlyThemable */) {\n        clearStylesInternal(_themeState.registeredThemableStyles);\n        _themeState.registeredThemableStyles = [];\n    }\n}\nfunction clearStylesInternal(records) {\n    records.forEach(function (styleRecord) {\n        var styleElement = styleRecord && styleRecord.styleElement;\n        if (styleElement && styleElement.parentElement) {\n            styleElement.parentElement.removeChild(styleElement);\n        }\n    });\n}\n/**\n * Reloads styles.\n */\nfunction reloadStyles() {\n    if (_themeState.theme) {\n        var themableStyles = [];\n        for (var _i = 0, _a = _themeState.registeredThemableStyles; _i < _a.length; _i++) {\n            var styleRecord = _a[_i];\n            themableStyles.push(styleRecord.themableStyle);\n        }\n        if (themableStyles.length > 0) {\n            clearStyles(1 /* onlyThemable */);\n            applyThemableStyles([].concat.apply([], themableStyles));\n        }\n    }\n}\n/**\n * Find theme tokens and replaces them with provided theme values.\n * @param {string} styles Tokenized styles to fix.\n */\nexport function detokenize(styles) {\n    if (styles) {\n        styles = resolveThemableArray(splitStyles(styles)).styleString;\n    }\n    return styles;\n}\n/**\n * Resolves ThemingInstruction objects in an array and joins the result into a string.\n * @param {ThemableArray} splitStyleArray ThemableArray to resolve and join.\n */\nfunction resolveThemableArray(splitStyleArray) {\n    var theme = _themeState.theme;\n    var themable = false;\n    // Resolve the array of theming instructions to an array of strings.\n    // Then join the array to produce the final CSS string.\n    var resolvedArray = (splitStyleArray || []).map(function (currentValue) {\n        var themeSlot = currentValue.theme;\n        if (themeSlot) {\n            themable = true;\n            // A theming annotation. Resolve it.\n            var themedValue = theme ? theme[themeSlot] : undefined;\n            var defaultValue = currentValue.defaultValue || 'inherit';\n            // Warn to console if we hit an unthemed value even when themes are provided, but only if \"DEBUG\" is true.\n            // Allow the themedValue to be undefined to explicitly request the default value.\n            if (theme &&\n                !themedValue &&\n                console &&\n                !(themeSlot in theme) &&\n                typeof DEBUG !== 'undefined' &&\n                DEBUG) {\n                console.warn(\"Theming value not provided for \\\"\" + themeSlot + \"\\\". Falling back to \\\"\" + defaultValue + \"\\\".\");\n            }\n            return themedValue || defaultValue;\n        }\n        else {\n            // A non-themable string. Preserve it.\n            return currentValue.rawString;\n        }\n    });\n    return {\n        styleString: resolvedArray.join(''),\n        themable: themable\n    };\n}\n/**\n * Split tokenized CSS into an array of strings and theme specification objects\n * @param {string} styles Tokenized styles to split.\n */\nexport function splitStyles(styles) {\n    var result = [];\n    if (styles) {\n        var pos = 0; // Current position in styles.\n        var tokenMatch = void 0;\n        while ((tokenMatch = _themeTokenRegex.exec(styles))) {\n            var matchIndex = tokenMatch.index;\n            if (matchIndex > pos) {\n                result.push({\n                    rawString: styles.substring(pos, matchIndex)\n                });\n            }\n            result.push({\n                theme: tokenMatch[1],\n                defaultValue: tokenMatch[2] // May be undefined\n            });\n            // index of the first character after the current match\n            pos = _themeTokenRegex.lastIndex;\n        }\n        // Push the rest of the string after the last match.\n        result.push({\n            rawString: styles.substring(pos)\n        });\n    }\n    return result;\n}\n/**\n * Registers a set of style text. If it is registered too early, we will register it when the\n * window.load event is fired.\n * @param {ThemableArray} styleArray Array of IThemingInstruction objects to register.\n * @param {IStyleRecord} styleRecord May specify a style Element to update.\n */\nfunction registerStyles(styleArray) {\n    if (typeof document === 'undefined') {\n        return;\n    }\n    var head = document.getElementsByTagName('head')[0];\n    var styleElement = document.createElement('style');\n    var _a = resolveThemableArray(styleArray), styleString = _a.styleString, themable = _a.themable;\n    styleElement.setAttribute('data-load-themed-styles', 'true');\n    if (_styleNonce) {\n        styleElement.setAttribute('nonce', _styleNonce);\n    }\n    styleElement.appendChild(document.createTextNode(styleString));\n    _themeState.perf.count++;\n    head.appendChild(styleElement);\n    var ev = document.createEvent('HTMLEvents');\n    ev.initEvent('styleinsert', true /* bubbleEvent */, false /* cancelable */);\n    ev.args = {\n        newStyle: styleElement\n    };\n    document.dispatchEvent(ev);\n    var record = {\n        styleElement: styleElement,\n        themableStyle: styleArray\n    };\n    if (themable) {\n        _themeState.registeredThemableStyles.push(record);\n    }\n    else {\n        _themeState.registeredStyles.push(record);\n    }\n}\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar isNodeAfter_1 = require(\"./isNodeAfter\");\n/**\n * Split parent node of the given node before/after the given node.\n * When a parent node contains [A,B,C] and pass B as the given node,\n * If split before, the new nodes will be [A][B,C] and returns [A];\n * otherwise, it will be [A,B][C] and returns [C].\n * @param node The node to split before/after\n * @param splitBefore Whether split before or after\n * @param removeEmptyNewNode If the new node is empty (even then only child is space or ZER_WIDTH_SPACE),\n * we remove it. @default false\n * @returns The new parent node\n */\nfunction splitParentNode(node, splitBefore) {\n    if (!node || !node.parentNode) {\n        return null;\n    }\n    var parentNode = node.parentNode;\n    var newParent = parentNode.cloneNode(false /*deep*/);\n    newParent.removeAttribute('id');\n    if (splitBefore) {\n        while (parentNode.firstChild && parentNode.firstChild != node) {\n            newParent.appendChild(parentNode.firstChild);\n        }\n    }\n    else {\n        while (node.nextSibling) {\n            newParent.appendChild(node.nextSibling);\n        }\n    }\n    // When the only child of new parent is ZERO_WIDTH_SPACE, we can still prevent keeping it by set removeEmptyNewNode to true\n    if (newParent.firstChild && newParent.innerHTML != '') {\n        parentNode.parentNode.insertBefore(newParent, splitBefore ? parentNode : parentNode.nextSibling);\n    }\n    else {\n        newParent = null;\n    }\n    return newParent;\n}\nexports.default = splitParentNode;\n/**\n * Split parent node by a balanced node range\n * @param nodes The nodes to split from. If only one node is passed, split it from all its siblings.\n * If two or nodes are passed, will split before the first one and after the last one, all other nodes will be ignored\n * @returns The parent node of the given node range if the given nodes are balanced, otherwise null\n */\nfunction splitBalancedNodeRange(nodes) {\n    var start = Array.isArray(nodes) ? nodes[0] : nodes;\n    var end = Array.isArray(nodes) ? nodes[nodes.length - 1] : nodes;\n    var parentNode = start && end && start.parentNode == end.parentNode ? start.parentNode : null;\n    if (parentNode) {\n        if (isNodeAfter_1.default(start, end)) {\n            var temp = end;\n            end = start;\n            start = temp;\n        }\n        splitParentNode(start, true /*splitBefore*/);\n        splitParentNode(end, false /*splitBefore*/);\n    }\n    return parentNode;\n}\nexports.splitBalancedNodeRange = splitBalancedNodeRange;\n//# sourceMappingURL=splitParentNode.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar contains_1 = require(\"./contains\");\n/**\n * Find closest element ancestor start from the given node which matches the given selector\n * @param node Find ancestor start from this node\n * @param root Root node where the search should stop at. The return value can never be this node\n * @param selector The expected selector. If null, return the first HTML Element found from start node\n * @returns An HTML element which matches the given selector. If the given start node matches the selector,\n * returns the given node\n */\nfunction findClosestElementAncestor(node, root, selector) {\n    node = !node ? null : node.nodeType == 1 /* Element */ ? node : node.parentNode;\n    var element = node && node.nodeType == 1 /* Element */ ? node : null;\n    if (element && selector) {\n        if (element.closest) {\n            element = element.closest(selector);\n        }\n        else {\n            while (element &&\n                element != root &&\n                !(element.matches || element.msMatchesSelector).call(element, selector)) {\n                element = element.parentElement;\n            }\n        }\n    }\n    return !root || contains_1.default(root, element) ? element : null;\n}\nexports.default = findClosestElementAncestor;\n//# sourceMappingURL=findClosestElementAncestor.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar fromHtml_1 = require(\"./fromHtml\");\nvar isHTMLElement_1 = require(\"../typeUtils/isHTMLElement\");\nvar isNode_1 = require(\"../typeUtils/isNode\");\nfunction wrap(nodes, wrapper) {\n    nodes = !nodes ? [] : isNode_1.default(nodes) ? [nodes] : nodes;\n    if (nodes.length == 0 || !nodes[0]) {\n        return null;\n    }\n    if (!isHTMLElement_1.default(wrapper)) {\n        var document_1 = nodes[0].ownerDocument;\n        wrapper = wrapper || 'div';\n        wrapper = /^\\w+$/.test(wrapper)\n            ? document_1.createElement(wrapper)\n            : fromHtml_1.default(wrapper, document_1)[0];\n    }\n    var parentNode = nodes[0].parentNode;\n    if (parentNode) {\n        parentNode.insertBefore(wrapper, nodes[0]);\n    }\n    for (var _i = 0, nodes_1 = nodes; _i < nodes_1.length; _i++) {\n        var node = nodes_1[_i];\n        wrapper.appendChild(node);\n    }\n    return wrapper;\n}\nexports.default = wrap;\n//# sourceMappingURL=wrap.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar getBlockElementAtNode_1 = require(\"../blockElements/getBlockElementAtNode\");\nvar getTagOfNode_1 = require(\"../utils/getTagOfNode\");\nvar ImageInlineElement_1 = require(\"./ImageInlineElement\");\nvar isNode_1 = require(\"../typeUtils/isNode\");\nvar LinkInlineElement_1 = require(\"./LinkInlineElement\");\nvar NodeInlineElement_1 = require(\"./NodeInlineElement\");\nfunction getInlineElementAtNode(parent, node) {\n    // An inline element has to be in a block element, get the block first and then resolve through the factory\n    var parentBlock = isNode_1.default(parent) ? getBlockElementAtNode_1.default(parent, node) : parent;\n    return node && parentBlock && resolveInlineElement(node, parentBlock);\n}\nexports.default = getInlineElementAtNode;\n/**\n * Resolve an inline element by a leaf node\n * @param node The node to resolve from\n * @param parentBlock The parent block element\n */\nfunction resolveInlineElement(node, parentBlock) {\n    var nodeChain = [node];\n    for (var parent_1 = node.parentNode; parent_1 && parentBlock.contains(parent_1); parent_1 = parent_1.parentNode) {\n        nodeChain.push(parent_1);\n    }\n    var inlineElement;\n    for (var i = nodeChain.length - 1; i >= 0 && !inlineElement; i--) {\n        var currentNode = nodeChain[i];\n        var tag = getTagOfNode_1.default(currentNode);\n        if (tag == 'A') {\n            inlineElement = new LinkInlineElement_1.default(currentNode, parentBlock);\n        }\n        else if (tag == 'IMG') {\n            inlineElement = new ImageInlineElement_1.default(currentNode, parentBlock);\n        }\n    }\n    return inlineElement || new NodeInlineElement_1.default(node, parentBlock);\n}\n//# sourceMappingURL=getInlineElementAtNode.js.map","module.exports = __WEBPACK_EXTERNAL_MODULE__19__;","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Checks if node1 is after node2\n * @param node1 The node to check if it is after another node\n * @param node2 The node to check if another node is after this one\n * @returns True if node1 is after node2, otherwise false\n */\nfunction isNodeAfter(node1, node2) {\n    return !!(node1 &&\n        node2 &&\n        (node2.compareDocumentPosition(node1) & 4 /* Following */) ==\n            4 /* Following */);\n}\nexports.default = isNodeAfter;\n//# sourceMappingURL=isNodeAfter.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar getTagOfNode_1 = require(\"./getTagOfNode\");\nvar BLOCK_ELEMENT_TAGS = 'ADDRESS,ARTICLE,ASIDE,BLOCKQUOTE,CANVAS,DD,DIV,DL,DT,FIELDSET,FIGCAPTION,FIGURE,FOOTER,FORM,H1,H2,H3,H4,H5,H6,HEADER,HR,LI,MAIN,NAV,NOSCRIPT,OL,OUTPUT,P,PRE,SECTION,TABLE,TD,TH,TFOOT,UL,VIDEO'.split(',');\nvar BLOCK_DISPLAY_STYLES = ['block', 'list-item', 'table-cell'];\n/**\n * Checks if the node is a block like element. Block like element are usually those P, DIV, LI, TD etc.\n * @param node The node to check\n * @returns True if the node is a block element, otherwise false\n */\nfunction isBlockElement(node) {\n    var tag = getTagOfNode_1.default(node);\n    return !!(tag &&\n        (BLOCK_DISPLAY_STYLES.indexOf(node.style.display) >= 0 ||\n            BLOCK_ELEMENT_TAGS.indexOf(tag) >= 0));\n}\nexports.default = isBlockElement;\n//# sourceMappingURL=isBlockElement.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar roosterjs_editor_dom_1 = require(\"roosterjs-editor-dom\");\nvar ZERO_WIDTH_SPACE = '\\u200B';\n/**\n * Apply inline style to current selection\n * @param editor The editor instance\n * @param callback The callback function to apply style\n */\nfunction applyInlineStyle(editor, callback) {\n    editor.focus();\n    var range = editor.getSelectionRange();\n    if (range && range.collapsed) {\n        var node = range.startContainer;\n        var isEmptySpan = roosterjs_editor_dom_1.getTagOfNode(node) == 'SPAN' &&\n            (!node.firstChild ||\n                (roosterjs_editor_dom_1.getTagOfNode(node.firstChild) == 'BR' && !node.firstChild.nextSibling));\n        if (isEmptySpan) {\n            editor.addUndoSnapshot();\n            callback(node);\n        }\n        else {\n            var isZWSNode = node &&\n                node.nodeType == 3 /* Text */ &&\n                node.nodeValue == ZERO_WIDTH_SPACE &&\n                roosterjs_editor_dom_1.getTagOfNode(node.parentNode) == 'SPAN';\n            if (!isZWSNode) {\n                editor.addUndoSnapshot();\n                // Create a new text node to hold the selection.\n                // Some content is needed to position selection into the span\n                // for here, we inject ZWS - zero width space\n                node = editor.getDocument().createTextNode(ZERO_WIDTH_SPACE);\n                range.insertNode(node);\n            }\n            roosterjs_editor_dom_1.applyTextStyle(node, callback);\n            editor.select(node, -1 /* End */);\n        }\n    }\n    else {\n        // This is start and end node that get the style. The start and end needs to be recorded so that selection\n        // can be re-applied post-applying style\n        editor.addUndoSnapshot(function () {\n            var firstNode;\n            var lastNode;\n            var contentTraverser = editor.getSelectionTraverser();\n            var inlineElement = contentTraverser && contentTraverser.currentInlineElement;\n            while (inlineElement) {\n                var nextInlineElement = contentTraverser.getNextInlineElement();\n                inlineElement.applyStyle(function (element, isInnerNode) {\n                    callback(element, isInnerNode);\n                    firstNode = firstNode || element;\n                    lastNode = element;\n                });\n                inlineElement = nextInlineElement;\n            }\n            if (firstNode && lastNode) {\n                editor.select(firstNode, -2 /* Before */, lastNode, -3 /* After */);\n            }\n        }, \"Format\" /* Format */);\n    }\n}\nexports.default = applyInlineStyle;\n//# sourceMappingURL=applyInlineStyle.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar getEntities_1 = require(\"./getEntities\");\nvar ENTITY_ID_REGEX = /_\\d{1,8}$/;\nvar ENTITY_INFO_NAME = '_Entity';\nvar ENTITY_TYPE_PREFIX = '_EType_';\nvar ENTITY_ID_PREFIX = '_EId_';\nvar ENTITY_READONLY_PREFIX = '_EReadonly_';\nvar ENTITY_CSS_REGEX = '^' + ENTITY_INFO_NAME + '$';\nvar ENTITY_ID_CSS_REGEX = '^' + ENTITY_ID_PREFIX;\nvar ENTITY_TYPE_CSS_REGEX = '^' + ENTITY_TYPE_PREFIX;\nvar ENTITY_READONLY_CSS_REGEX = '^' + ENTITY_READONLY_PREFIX;\nexports.ALLOWED_CSS_CLASSES = [\n    ENTITY_CSS_REGEX,\n    ENTITY_ID_CSS_REGEX,\n    ENTITY_TYPE_CSS_REGEX,\n    ENTITY_READONLY_CSS_REGEX,\n];\n/**\n * @internal Serialize entity info into a CSS class list string\n * @param editor The editor which contains the entity\n * @param type Type of the entity\n * @param isReadonly Whether the entity is readonly\n * @param originalId (Optional) Existing id of the entity. If this id already exists in the editor, it will be replaced\n * by a new one\n * @param knownIds (Optional) All known entity ids inside this editor. This is a performance optimization when this function\n * will be called multiple times\n */\nfunction serializeEntityInfo(editor, type, isReadonly, originalId, knownIds) {\n    if (knownIds === void 0) { knownIds = getAllEntityIds(editor); }\n    var id = createEntityId(originalId || type, knownIds);\n    return ENTITY_INFO_NAME + \" \" + ENTITY_TYPE_PREFIX + type + \" \" + ENTITY_ID_PREFIX + id + \" \" + ENTITY_READONLY_PREFIX + (isReadonly ? '1' : '0');\n}\nexports.serializeEntityInfo = serializeEntityInfo;\n/**\n * @internal Deserialze entity info string to entity info (type, id, isReadonly)\n * @param entityInfo The entity info string generated from serializeEntityInfo()\n */\nfunction deserialzeEntityInfo(entityInfo) {\n    var isEntity = false;\n    var type;\n    var id = '';\n    var isReadonly = false;\n    if (entityInfo) {\n        entityInfo.split(' ').forEach(function (name) {\n            if (name == ENTITY_INFO_NAME) {\n                isEntity = true;\n            }\n            else if (name.indexOf(ENTITY_TYPE_PREFIX) == 0) {\n                type = name.substr(ENTITY_TYPE_PREFIX.length);\n            }\n            else if (name.indexOf(ENTITY_ID_PREFIX) == 0) {\n                id = name.substr(ENTITY_ID_PREFIX.length);\n            }\n            else if (name.indexOf(ENTITY_READONLY_PREFIX) == 0) {\n                isReadonly = name.substr(ENTITY_READONLY_PREFIX.length) == '1';\n            }\n        });\n    }\n    return isEntity && type\n        ? {\n            type: type,\n            id: id,\n            isReadonly: isReadonly,\n        }\n        : null;\n}\nexports.deserialzeEntityInfo = deserialzeEntityInfo;\n/**\n * @internal Get all known entity ids from an editor\n * @param editor The editor to get entity ids from\n */\nfunction getAllEntityIds(editor) {\n    return getEntities_1.default(editor).map(function (e) { return e.id; });\n}\nexports.getAllEntityIds = getAllEntityIds;\n/**\n * @internal Get a selector string for specified entity type and id\n * @param type (Optional) Type of entity\n * @param id (Optional) Id of entity\n */\nfunction getEntitySelector(type, id) {\n    var typeSelector = type ? \".\" + ENTITY_TYPE_PREFIX + type : '';\n    var idSelector = id ? \".\" + ENTITY_ID_PREFIX + id : '';\n    return '.' + ENTITY_INFO_NAME + typeSelector + idSelector;\n}\nexports.getEntitySelector = getEntitySelector;\nfunction createEntityId(existingIdOrType, knownIds) {\n    var match = ENTITY_ID_REGEX.exec(existingIdOrType);\n    var baseId = match\n        ? existingIdOrType.substr(0, existingIdOrType.length - match[0].length)\n        : existingIdOrType;\n    var newId = '';\n    for (var num = (match && parseInt(match[1])) || 0;; num++) {\n        newId = baseId + \"_\" + num;\n        if (knownIds.indexOf(newId) < 0) {\n            knownIds.push(newId);\n            break;\n        }\n    }\n    return newId;\n}\n//# sourceMappingURL=EntityInfo.js.map","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar EntityInfo_1 = require(\"./EntityInfo\");\n/**\n * Get Entity object from an entity root element\n * @param element The entity root element. If this element is not an entity root element,\n * it will return null\n */\nfunction getEntityFromElement(element) {\n    var entityInfo = EntityInfo_1.deserialzeEntityInfo(element === null || element === void 0 ? void 0 : element.className);\n    return entityInfo\n        ? __assign({ contentNode: element }, entityInfo) : null;\n}\nexports.default = getEntityFromElement;\n//# sourceMappingURL=getEntityFromElement.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar contains_1 = require(\"./contains\");\nvar splitParentNode_1 = require(\"./splitParentNode\");\nvar toArray_1 = require(\"./toArray\");\n/**\n * Collapse nodes within the given start and end nodes to their common ascenstor node,\n * split parent nodes if necessary\n * @param root The root node of the scope\n * @param start The start node\n * @param end The end node\n * @param canSplitParent True to allow split parent node there are nodes before start or after end under the same parent\n * and the returned nodes will be all nodes from start trhough end after splitting\n * False to disallow split parent\n * @returns When cansplitParent is true, returns all node from start through end after splitting,\n * otherwise just return start and end\n */\nfunction collapseNodes(root, start, end, canSplitParent) {\n    if (!contains_1.default(root, start) || !contains_1.default(root, end)) {\n        return [];\n    }\n    start = collapse(root, start, end, true /*isStart*/, canSplitParent);\n    end = collapse(root, end, start, false /*isStart*/, canSplitParent);\n    if (contains_1.default(start, end, true /*treateSameNodeAsContain*/)) {\n        return [start];\n    }\n    else if (contains_1.default(end, start)) {\n        return [end];\n    }\n    else if (start.parentNode == end.parentNode) {\n        var nodes = toArray_1.default(start.parentNode.childNodes);\n        var startIndex = nodes.indexOf(start);\n        var endIndex = nodes.indexOf(end);\n        return nodes.slice(startIndex, endIndex + 1);\n    }\n    else {\n        return [start, end];\n    }\n}\nexports.default = collapseNodes;\nfunction collapse(root, node, ref, isStart, canSplitParent) {\n    while (node.parentNode != root && !contains_1.default(node.parentNode, ref)) {\n        if ((isStart && node.previousSibling) || (!isStart && node.nextSibling)) {\n            if (!canSplitParent) {\n                break;\n            }\n            splitParentNode_1.default(node, isStart);\n        }\n        node = node.parentNode;\n    }\n    return node;\n}\n//# sourceMappingURL=collapseNodes.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar safeInstanceOf_1 = require(\"./safeInstanceOf\");\n/**\n * Check if the given object is Node\n * @param obj The object to check\n */\nfunction isNode(obj) {\n    return safeInstanceOf_1.default(obj, 'Node');\n}\nexports.default = isNode;\n//# sourceMappingURL=isNode.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar BodyScoper_1 = require(\"./BodyScoper\");\nvar EmptyInlineElement_1 = require(\"../inlineElements/EmptyInlineElement\");\nvar getBlockElementAtNode_1 = require(\"../blockElements/getBlockElementAtNode\");\nvar getInlineElementAtNode_1 = require(\"../inlineElements/getInlineElementAtNode\");\nvar PartialInlineElement_1 = require(\"../inlineElements/PartialInlineElement\");\nvar SelectionBlockScoper_1 = require(\"./SelectionBlockScoper\");\nvar SelectionScoper_1 = require(\"./SelectionScoper\");\nvar getInlineElementBeforeAfter_1 = require(\"../inlineElements/getInlineElementBeforeAfter\");\nvar getLeafSibling_1 = require(\"../utils/getLeafSibling\");\n/**\n * The provides traversing of content inside editor.\n * There are two ways to traverse, block by block, or inline element by inline element\n * Block and inline traversing is independent from each other, meanning if you traverse block by block, it does not change\n * the current inline element position\n */\nvar ContentTraverser = /** @class */ (function () {\n    /**\n     * Create a content traverser for the whole body of given root node\n     * @param scoper Traversing scoper object to help scope the traversing\n     * @param skipTags (Optional) tags that child elements will be skipped\n     */\n    function ContentTraverser(scoper, skipTags) {\n        this.scoper = scoper;\n        this.skipTags = skipTags;\n    }\n    /**\n     * Create a content traverser for the whole body of given root node\n     * @param rootNode The root node to traverse in\n     * @param startNode The node to start from. If not passed, it will start from the beginning of the body\n     * @param skipTags (Optional) tags that child elements will be skipped\n     */\n    ContentTraverser.createBodyTraverser = function (rootNode, startNode, skipTags) {\n        return new ContentTraverser(new BodyScoper_1.default(rootNode, startNode));\n    };\n    /**\n     * Create a content traverser for the given selection\n     * @param rootNode The root node to traverse in\n     * @param range The selection range to scope the traversing\n     * @param skipTags (Optional) tags that child elements will be skipped\n     */\n    ContentTraverser.createSelectionTraverser = function (rootNode, range, skipTags) {\n        return new ContentTraverser(new SelectionScoper_1.default(rootNode, range), skipTags);\n    };\n    /**\n     * Create a content traverser for a block element which contains the given position\n     * @param rootNode The root node to traverse in\n     * @param position A position inside a block, traversing will be scoped within this block.\n     * If passing a range, the start position of this range will be used\n     * @param startFrom Start position of traversing. The value can be Begin, End, SelectionStart\n     * @param skipTags (Optional) tags that child elements will be skipped\n     */\n    ContentTraverser.createBlockTraverser = function (rootNode, position, start, skipTags) {\n        if (start === void 0) { start = 3 /* SelectionStart */; }\n        return new ContentTraverser(new SelectionBlockScoper_1.default(rootNode, position, start));\n    };\n    Object.defineProperty(ContentTraverser.prototype, \"currentBlockElement\", {\n        /**\n         * Get current block\n         */\n        get: function () {\n            // Prepare currentBlock from the scoper\n            if (!this.currentBlock) {\n                this.currentBlock = this.scoper.getStartBlockElement();\n            }\n            return this.currentBlock;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * Get next block element\n     */\n    ContentTraverser.prototype.getNextBlockElement = function () {\n        return this.getPreviousNextBlockElement(true /*isNext*/);\n    };\n    /**\n     * Get previous block element\n     */\n    ContentTraverser.prototype.getPreviousBlockElement = function () {\n        return this.getPreviousNextBlockElement(false /*isNext*/);\n    };\n    ContentTraverser.prototype.getPreviousNextBlockElement = function (isNext) {\n        var current = this.currentBlockElement;\n        if (!current) {\n            return null;\n        }\n        var leaf = getLeafSibling_1.getLeafSibling(this.scoper.rootNode, isNext ? current.getEndNode() : current.getStartNode(), isNext, this.skipTags);\n        var newBlock = leaf ? getBlockElementAtNode_1.default(this.scoper.rootNode, leaf) : null;\n        // Make sure this is right block:\n        // 1) the block is in scope per scoper\n        // 2) the block is after (for next) or before (for previous) the current block\n        // Then:\n        // 1) Re-position current block to newly found block\n        if (newBlock &&\n            this.scoper.isBlockInScope(newBlock) &&\n            ((isNext && newBlock.isAfter(current)) || (!isNext && current.isAfter(newBlock)))) {\n            this.currentBlock = newBlock;\n            return this.currentBlock;\n        }\n        return null;\n    };\n    Object.defineProperty(ContentTraverser.prototype, \"currentInlineElement\", {\n        /**\n         * Current inline element getter\n         */\n        get: function () {\n            // Retrieve a start inline from scoper\n            if (!this.currentInline) {\n                this.currentInline = this.scoper.getStartInlineElement();\n            }\n            return this.currentInline instanceof EmptyInlineElement_1.default ? null : this.currentInline;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * Get next inline element\n     */\n    ContentTraverser.prototype.getNextInlineElement = function () {\n        return this.getPreviousNextInlineElement(true /*isNext*/);\n    };\n    /**\n     * Get previous inline element\n     */\n    ContentTraverser.prototype.getPreviousInlineElement = function () {\n        return this.getPreviousNextInlineElement(false /*isNext*/);\n    };\n    ContentTraverser.prototype.getPreviousNextInlineElement = function (isNext) {\n        var current = this.currentInlineElement || this.currentInline;\n        var newInline;\n        if (!current) {\n            return null;\n        }\n        if (current instanceof EmptyInlineElement_1.default) {\n            newInline = getInlineElementBeforeAfter_1.getInlineElementBeforeAfter(this.scoper.rootNode, current.getStartPosition(), isNext);\n            if (newInline && !current.getParentBlock().contains(newInline.getContainerNode())) {\n                newInline = null;\n            }\n        }\n        else {\n            newInline = getNextPreviousInlineElement(this.scoper.rootNode, current, isNext);\n            newInline =\n                newInline &&\n                    current &&\n                    ((isNext && newInline.isAfter(current)) || (!isNext && current.isAfter(newInline)))\n                    ? newInline\n                    : null;\n        }\n        // For inline, we need to make sure:\n        // 1) it is really next/previous to current\n        // 2) pass on the new inline to this.scoper to do the triming and we still get back an inline\n        // Then\n        // 1) re-position current inline\n        if (newInline && (newInline = this.scoper.trimInlineElement(newInline))) {\n            this.currentInline = newInline;\n            return this.currentInline;\n        }\n        return null;\n    };\n    return ContentTraverser;\n}());\nexports.default = ContentTraverser;\nfunction getNextPreviousInlineElement(rootNode, current, isNext) {\n    if (!current) {\n        return null;\n    }\n    if (current instanceof PartialInlineElement_1.default) {\n        // if current is partial, get the the othe half of the inline unless it is no more\n        var result = isNext ? current.nextInlineElement : current.previousInlineElement;\n        if (result) {\n            return result;\n        }\n    }\n    // Get a leaf node after startNode and use that base to find next inline\n    var startNode = current.getContainerNode();\n    startNode = getLeafSibling_1.getLeafSibling(rootNode, startNode, isNext);\n    return getInlineElementAtNode_1.default(rootNode, startNode);\n}\n//# sourceMappingURL=ContentTraverser.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar applyTextStyle_1 = require(\"../utils/applyTextStyle\");\nvar isNodeAfter_1 = require(\"../utils/isNodeAfter\");\nvar Position_1 = require(\"../selection/Position\");\n/**\n * This presents an inline element that can be reprented by a single html node.\n * This serves as base for most inline element as it contains most implentation\n * of all operations that can happen on an inline element. Other sub inline elements mostly\n * just identify themself for a certain type\n */\nvar NodeInlineElement = /** @class */ (function () {\n    function NodeInlineElement(containerNode, parentBlock) {\n        this.containerNode = containerNode;\n        this.parentBlock = parentBlock;\n    }\n    /**\n     * The text content for this inline element\n     */\n    NodeInlineElement.prototype.getTextContent = function () {\n        // nodeValue is better way to retrieve content for a text. Others, just use textContent\n        return this.containerNode.nodeType == 3 /* Text */\n            ? this.containerNode.nodeValue\n            : this.containerNode.textContent;\n    };\n    /**\n     * Get the container node\n     */\n    NodeInlineElement.prototype.getContainerNode = function () {\n        return this.containerNode;\n    };\n    // Get the parent block\n    NodeInlineElement.prototype.getParentBlock = function () {\n        return this.parentBlock;\n    };\n    /**\n     * Get the start position of the inline element\n     */\n    NodeInlineElement.prototype.getStartPosition = function () {\n        // For a position, we always want it to point to a leaf node\n        // We should try to go get the lowest first child node from the container\n        return new Position_1.default(this.containerNode, 0).normalize();\n    };\n    /**\n     * Get the end position of the inline element\n     */\n    NodeInlineElement.prototype.getEndPosition = function () {\n        // For a position, we always want it to point to a leaf node\n        // We should try to go get the lowest last child node from the container\n        return new Position_1.default(this.containerNode, -1 /* End */).normalize();\n    };\n    /**\n     * Checks if this inline element is a textual inline element\n     */\n    NodeInlineElement.prototype.isTextualInlineElement = function () {\n        return this.containerNode && this.containerNode.nodeType == 3 /* Text */;\n    };\n    /**\n     * Checks if an inline element is after the current inline element\n     */\n    NodeInlineElement.prototype.isAfter = function (inlineElement) {\n        return inlineElement && isNodeAfter_1.default(this.containerNode, inlineElement.getContainerNode());\n    };\n    /**\n     * Checks if the given position is contained in the inline element\n     */\n    NodeInlineElement.prototype.contains = function (pos) {\n        var start = this.getStartPosition();\n        var end = this.getEndPosition();\n        return pos && pos.isAfter(start) && end.isAfter(pos);\n    };\n    /**\n     * Apply inline style to an inline element\n     */\n    NodeInlineElement.prototype.applyStyle = function (styler) {\n        applyTextStyle_1.default(this.containerNode, styler);\n    };\n    return NodeInlineElement;\n}());\nexports.default = NodeInlineElement;\n//# sourceMappingURL=NodeInlineElement.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar getTagOfNode_1 = require(\"./getTagOfNode\");\nvar getComputedStyles_1 = require(\"./getComputedStyles\");\nvar CRLF = /^[\\r\\n]+$/gm;\nvar CRLFSPACE = /[\\t\\r\\n\\u0020\\u200B]/gm; // We should only find new line, real space or ZeroWidthSpace (TAB, %20, but not &nbsp;)\n/**\n * Skip a node when any of following conditions are true\n * - it is neither Element nor Text\n * - it is a text node but is empty\n * - it is a text node but contains just CRLF (noisy text node that often comes in-between elements)\n * - has a display:none\n * - it is just <div></div>\n * @param node The node to check\n * @param ignoreSpace (Optional) True to ignore pure space text node of the node when check.\n * If the value of a node value is only space, set this to true will treat this node as skippable.\n * Default value is false\n */\nfunction shouldSkipNode(node, ignoreSpace) {\n    if (node.nodeType == 3 /* Text */) {\n        if (!node.nodeValue || node.textContent == '' || CRLF.test(node.nodeValue)) {\n            return true;\n        }\n        else if (ignoreSpace && node.nodeValue.replace(CRLFSPACE, '') == '') {\n            return true;\n        }\n        else {\n            return false;\n        }\n    }\n    else if (node.nodeType == 1 /* Element */) {\n        if (getComputedStyles_1.getComputedStyle(node, 'display') == 'none') {\n            return true;\n        }\n        var tag = getTagOfNode_1.default(node);\n        if (tag == 'DIV' || tag == 'SPAN') {\n            // Empty SPAN/DIV or SPAN/DIV with only unmeaningful children is unmeaningful,\n            // because it can render nothing. If we keep them here, there may be unexpected\n            // LI elements added for those unmeaningful nodes.\n            for (var child = node.firstChild; !!child; child = child.nextSibling) {\n                if (!shouldSkipNode(child, ignoreSpace)) {\n                    return false;\n                }\n            }\n            return true;\n        }\n        else {\n            // There may still be other cases that the node is not meaningful.\n            // We can add those cases here once we hit them.\n            return false;\n        }\n    }\n    else {\n        return true;\n    }\n}\nexports.default = shouldSkipNode;\n//# sourceMappingURL=shouldSkipNode.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar findClosestElementAncestor_1 = require(\"./findClosestElementAncestor\");\n/**\n * Get computed styles of a node\n * @param node The node to get computed styles from\n * @param styleNames Names of style to get, can be a single name or an array.\n * Default value is font-family, font-size, color, background-color\n * @returns An array of the computed styles\n */\nfunction getComputedStyles(node, styleNames) {\n    if (styleNames === void 0) { styleNames = ['font-family', 'font-size', 'color', 'background-color']; }\n    var element = findClosestElementAncestor_1.default(node);\n    var result = [];\n    styleNames = Array.isArray(styleNames) ? styleNames : [styleNames];\n    if (element) {\n        var win = element.ownerDocument.defaultView || window;\n        var styles = win.getComputedStyle(element);\n        if (styles) {\n            for (var _i = 0, styleNames_1 = styleNames; _i < styleNames_1.length; _i++) {\n                var style = styleNames_1[_i];\n                var value = (styles.getPropertyValue(style) || '').toLowerCase();\n                value = style == 'font-size' ? px2Pt(value) : value;\n                result.push(value);\n            }\n        }\n    }\n    return result;\n}\nexports.default = getComputedStyles;\n/**\n * A shortcut for getComputedStyles() when only one style is to be retrieved\n * @param node The node to get style from\n * @param styleName The style name\n * @returns The style value\n */\nfunction getComputedStyle(node, styleName) {\n    return getComputedStyles(node, styleName)[0] || '';\n}\nexports.getComputedStyle = getComputedStyle;\nfunction px2Pt(px) {\n    if (px && px.indexOf('px') == px.length - 2) {\n        // Edge may not handle the floating computing well which causes the calculated value is a little less than actual value\n        // So add 0.05 to fix it\n        return Math.round(parseFloat(px) * 75 + 0.05) / 100 + 'pt';\n    }\n    return px;\n}\n//# sourceMappingURL=getComputedStyles.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar applyTextStyle_1 = require(\"../utils/applyTextStyle\");\nvar createRange_1 = require(\"../selection/createRange\");\nvar Position_1 = require(\"../selection/Position\");\nvar getLeafSibling_1 = require(\"../utils/getLeafSibling\");\n/**\n * This is a special version of inline element that identifies a section of an inline element\n * We often have the need to cut an inline element in half and perform some operation only on half of an inline element\n * i.e. users select only some text of a text node and apply format, in that case, format has to happen on partial of an inline element\n * PartialInlineElement is implemented in a way that decorate another full inline element with its own override on methods like isAfter\n * It also offers some special methods that others don't have, i.e. nextInlineElement etc.\n */\nvar PartialInlineElement = /** @class */ (function () {\n    function PartialInlineElement(inlineElement, start, end) {\n        this.inlineElement = inlineElement;\n        this.start = start;\n        this.end = end;\n    }\n    /**\n     * Get the full inline element that this partial inline decorates\n     */\n    PartialInlineElement.prototype.getDecoratedInline = function () {\n        return this.inlineElement;\n    };\n    /**\n     * Gets the container node\n     */\n    PartialInlineElement.prototype.getContainerNode = function () {\n        return this.inlineElement.getContainerNode();\n    };\n    /**\n     * Gets the parent block\n     */\n    PartialInlineElement.prototype.getParentBlock = function () {\n        return this.inlineElement.getParentBlock();\n    };\n    /**\n     * Gets the text content\n     */\n    PartialInlineElement.prototype.getTextContent = function () {\n        var range = createRange_1.default(this.getStartPosition(), this.getEndPosition());\n        return range.toString();\n    };\n    /**\n     * Get start position of this inline element.\n     */\n    PartialInlineElement.prototype.getStartPosition = function () {\n        return this.start || this.inlineElement.getStartPosition();\n    };\n    /**\n     * Get end position of this inline element.\n     */\n    PartialInlineElement.prototype.getEndPosition = function () {\n        return this.end || this.inlineElement.getEndPosition();\n    };\n    Object.defineProperty(PartialInlineElement.prototype, \"nextInlineElement\", {\n        /**\n         * Get next partial inline element if it is not at the end boundary yet\n         */\n        get: function () {\n            return this.end && new PartialInlineElement(this.inlineElement, this.end, null);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PartialInlineElement.prototype, \"previousInlineElement\", {\n        /**\n         * Get previous partial inline element if it is not at the begin boundary yet\n         */\n        get: function () {\n            return this.start && new PartialInlineElement(this.inlineElement, null, this.start);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * Checks if it contains a position\n     */\n    PartialInlineElement.prototype.contains = function (pos) {\n        return pos && pos.isAfter(this.getStartPosition()) && this.getEndPosition().isAfter(pos);\n    };\n    /**\n     * Checks if this inline element is a textual inline element\n     */\n    PartialInlineElement.prototype.isTextualInlineElement = function () {\n        return this.inlineElement && this.inlineElement.isTextualInlineElement();\n    };\n    /**\n     * Check if this inline element is after the other inline element\n     */\n    PartialInlineElement.prototype.isAfter = function (inlineElement) {\n        var thisStart = this.getStartPosition();\n        var otherEnd = inlineElement && inlineElement.getEndPosition();\n        return otherEnd && (thisStart.isAfter(otherEnd) || thisStart.equalTo(otherEnd));\n    };\n    /**\n     * apply style\n     */\n    PartialInlineElement.prototype.applyStyle = function (styler) {\n        var from = this.getStartPosition().normalize();\n        var to = this.getEndPosition().normalize();\n        var container = this.getContainerNode();\n        if (from.isAtEnd) {\n            var nextNode = getLeafSibling_1.getNextLeafSibling(container, from.node);\n            from = nextNode ? new Position_1.default(nextNode, 0 /* Begin */) : null;\n        }\n        if (to.offset == 0) {\n            var previousNode = getLeafSibling_1.getPreviousLeafSibling(container, to.node);\n            to = previousNode ? new Position_1.default(previousNode, -1 /* End */) : null;\n        }\n        applyTextStyle_1.default(container, styler, from, to);\n    };\n    return PartialInlineElement;\n}());\nexports.default = PartialInlineElement;\n//# sourceMappingURL=PartialInlineElement.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar getTagOfNode_1 = require(\"./getTagOfNode\");\nvar VISIBLE_ELEMENT_TAGS = ['IMG'];\nvar VISIBLE_CHILD_ELEMENT_SELECTOR = ['TABLE', 'IMG', 'LI'].join(',');\nvar ZERO_WIDTH_SPACE = /\\u200b/g;\n/**\n * Check if a given node has no visible content\n * @param node The node to check\n * @param trimContent Whether trim the text content so that spaces will be treated as empty.\n * Default value is false\n * @returns True if there isn't any visible element inside node, otherwise false\n */\nfunction isNodeEmpty(node, trimContent) {\n    if (!node) {\n        return false;\n    }\n    else if (node.nodeType == 3 /* Text */) {\n        return trim(node.nodeValue, trimContent) == '';\n    }\n    else if (node.nodeType == 1 /* Element */) {\n        var element = node;\n        var textContent = trim(element.textContent, trimContent);\n        if (textContent != '' ||\n            VISIBLE_ELEMENT_TAGS.indexOf(getTagOfNode_1.default(element)) >= 0 ||\n            element.querySelectorAll(VISIBLE_CHILD_ELEMENT_SELECTOR)[0]) {\n            return false;\n        }\n    }\n    return true;\n}\nexports.default = isNodeEmpty;\nfunction trim(s, trim) {\n    s = s.replace(ZERO_WIDTH_SPACE, '');\n    return trim ? s.trim() : s;\n}\n//# sourceMappingURL=isNodeEmpty.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar toArray_1 = require(\"./toArray\");\n/**\n * Query HTML elements in the container by a selector string\n * @param container Container element to query from\n * @param selector Selector string to query\n * @param forEachCallback An optional callback to be invoked on each node in query result\n * @param scope The scope of the query, default value is QueryScope.Body\n * @param range The selection range to query with. This is required when scope is not Body\n * @returns HTML Element array of the query result\n */\nfunction queryElements(container, selector, forEachCallback, scope, range) {\n    if (scope === void 0) { scope = 0 /* Body */; }\n    if (!container || !selector) {\n        return [];\n    }\n    var elements = toArray_1.default(container.querySelectorAll(selector));\n    if (scope != 0 /* Body */ && range) {\n        var startContainer_1 = range.startContainer, startOffset = range.startOffset, endContainer_1 = range.endContainer, endOffset = range.endOffset;\n        if (startContainer_1.nodeType == 1 /* Element */ && startContainer_1.firstChild) {\n            var child = startContainer_1.childNodes[startOffset];\n            // range.startOffset can give a value of child.length+1 when selection is after the last child\n            // In that case we will use the last child instead\n            startContainer_1 = child || startContainer_1.lastChild;\n        }\n        endContainer_1 =\n            endContainer_1.nodeType == 1 /* Element */ && endContainer_1.firstChild && endOffset > 0\n                ? endContainer_1.childNodes[endOffset - 1]\n                : endContainer_1;\n        elements = elements.filter(function (element) {\n            return isIntersectWithNodeRange(element, startContainer_1, endContainer_1, scope == 2 /* InSelection */);\n        });\n    }\n    if (forEachCallback) {\n        elements.forEach(forEachCallback);\n    }\n    return elements;\n}\nexports.default = queryElements;\nfunction isIntersectWithNodeRange(node, startNode, endNode, nodeContainedByRangeOnly) {\n    var startPosition = node.compareDocumentPosition(startNode);\n    var endPosition = node.compareDocumentPosition(endNode);\n    var targetPositions = [0 /* Same */, 8 /* Contains */];\n    if (!nodeContainedByRangeOnly) {\n        targetPositions.push(16 /* ContainedBy */);\n    }\n    return (checkPosition(startPosition, targetPositions) || // intersectStart\n        checkPosition(endPosition, targetPositions) || // intersectEnd\n        (checkPosition(startPosition, [2 /* Preceding */]) && // Contains\n            checkPosition(endPosition, [4 /* Following */]) &&\n            !checkPosition(endPosition, [16 /* ContainedBy */])));\n}\nfunction checkPosition(position, targets) {\n    return targets.some(function (target) {\n        return target == 0 /* Same */\n            ? position == 0 /* Same */\n            : (position & target) == target;\n    });\n}\n//# sourceMappingURL=queryElements.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Removes the node and keep all children in place, return the parentNode where the children are attached\n * @param node the node to remove\n */\nfunction unwrap(node) {\n    // Unwrap requires a parentNode\n    var parentNode = node ? node.parentNode : null;\n    if (!parentNode) {\n        return null;\n    }\n    while (node.firstChild) {\n        parentNode.insertBefore(node.firstChild, node);\n    }\n    parentNode.removeChild(node);\n    return parentNode;\n}\nexports.default = unwrap;\n//# sourceMappingURL=unwrap.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar EntityInfo_1 = require(\"./EntityInfo\");\n/**\n * Get the entity element from a child (or the element itself) of an entity.\n * If the given node is not part of an entity, it will return null\n * @param editor The editor to get entity from\n * @param node The child node\n */\nfunction getEntityElement(editor, node) {\n    return (node && editor.getElementAtCursor(EntityInfo_1.getEntitySelector(), node)) || null;\n}\nexports.default = getEntityElement;\n//# sourceMappingURL=getEntityElement.js.map","module.exports = __WEBPACK_EXTERNAL_MODULE__36__;","import Emoji from \"../schema/Emoji\";\r\n\r\nconst Common1 = _createEmoji(\"1f60a\", \":) :-)\");\r\nconst common2 = _createEmoji(\"1f609\", \";) ;-)\");\r\nconst common3 = _createEmoji(\"02764\", \"<3\");\r\nconst common4 = _createEmoji(\"1f61e\", \":( :-(\");\r\nconst common5 = _createEmoji(\"1f603\", \":D :-D\");\r\n\r\nexport const MoreEmoji: Emoji = {\r\n    key: \"more\",\r\n    description: \"emjDMore\",\r\n    codePoint: \"\"\r\n};\r\n\r\nexport const CommonEmojis = [Common1, common2, common3, common4, common5, MoreEmoji];\r\n\r\nexport const enum EmojiFamilyKeys {\r\n    People = \"People\",\r\n    Nature = \"Nature\",\r\n    Activities = \"Activities\",\r\n    Food = \"Food\",\r\n    Travel = \"Travel\",\r\n    Symbols = \"Symbols\",\r\n    Objects = \"Objects\"\r\n}\r\n\r\n// NOTE: name for an emoji should be in lower case\r\nconst EmojiList = {\r\n    [EmojiFamilyKeys.People]: [\r\n        _createEmoji(\"1f601\"),\r\n        _createEmoji(\"1f602\"),\r\n        common5,\r\n        _createEmoji(\"1f604\"),\r\n        _createEmoji(\"1f605\"),\r\n        _createEmoji(\"1f606\"),\r\n        _createEmoji(\"1f607\"),\r\n        common2,\r\n        Common1,\r\n        _createEmoji(\"1f642\"),\r\n        _createEmoji(\"1f60b\"),\r\n        _createEmoji(\"1f60c\"),\r\n        _createEmoji(\"1f60d\"),\r\n        _createEmoji(\"1f618\"),\r\n        _createEmoji(\"1f61a\"),\r\n        _createEmoji(\"1f61c\"),\r\n        _createEmoji(\"1f61d\", \":p :P :-p :-P\"),\r\n        _createEmoji(\"1f60e\", \"B) B-)\"),\r\n        _createEmoji(\"1f60f\"),\r\n        _createEmoji(\"1f636\"),\r\n        _createEmoji(\"1f610\", \":| :-|\"),\r\n        _createEmoji(\"1f612\"),\r\n        _createEmoji(\"1f633\"),\r\n        common4,\r\n        _createEmoji(\"1f620\"),\r\n        _createEmoji(\"1f621\"),\r\n        _createEmoji(\"1f614\"),\r\n        _createEmoji(\"1f623\"),\r\n        _createEmoji(\"1f616\"),\r\n        _createEmoji(\"1f62b\"),\r\n        _createEmoji(\"1f629\"),\r\n        _createEmoji(\"1f624\"),\r\n        _createEmoji(\"1f631\"),\r\n        _createEmoji(\"1f628\"),\r\n        _createEmoji(\"1f630\"),\r\n        _createEmoji(\"1f625\"),\r\n        _createEmoji(\"1f622\"),\r\n        _createEmoji(\"1f62a\"),\r\n        _createEmoji(\"1f613\"),\r\n        _createEmoji(\"1f62d\"),\r\n        _createEmoji(\"1f635\"),\r\n        _createEmoji(\"1f632\", \":o :O :-o :-O\"),\r\n        _createEmoji(\"1f637\"),\r\n        _createEmoji(\"1f4a4\"),\r\n        _createEmojiWithNoKeyword(\"1f608\"),\r\n        _createEmoji(\"1f47f\"),\r\n        _createEmojiWithNoKeyword(\"1f479\"),\r\n        _createEmojiWithNoKeyword(\"1f47a\"),\r\n        _createEmoji(\"1f480\"),\r\n        _createEmoji(\"1f47b\"),\r\n        _createEmoji(\"1f47d\"),\r\n        _createEmoji(\"1f63a\"),\r\n        _createEmoji(\"1f638\"),\r\n        _createEmoji(\"1f639\"),\r\n        _createEmoji(\"1f63b\"),\r\n        _createEmoji(\"1f63c\"),\r\n        _createEmoji(\"1f63d\"),\r\n        _createEmojiWithNoKeyword(\"1f640\"),\r\n        _createEmoji(\"1f63f\"),\r\n        _createEmoji(\"1f63e\"),\r\n        _createEmoji(\"1f64c\"),\r\n        _createEmoji(\"1f44f\"),\r\n        _createEmoji(\"1f44b\"),\r\n        _createEmoji(\"1f44d\"),\r\n        _createEmoji(\"1f44e\"),\r\n        _createEmoji(\"1f44a\"),\r\n        _createEmoji(\"0270a\"),\r\n        _createEmoji(\"0270b\"),\r\n        _createEmoji(\"0270c\"),\r\n        _createEmoji(\"1f44c\"),\r\n        _createEmojiWithNoKeyword(\"1f450\"),\r\n        _createEmojiWithNoKeyword(\"1f596\"),\r\n        _createEmoji(\"1f4aa\"),\r\n        _createEmoji(\"1f64f\"),\r\n        _createEmoji(\"1f446\"),\r\n        _createEmoji(\"1f447\"),\r\n        _createEmoji(\"1f448\"),\r\n        _createEmoji(\"1f449\"),\r\n        _createEmoji(\"1f485\"),\r\n        _createEmoji(\"1f444\"),\r\n        _createEmoji(\"1f445\"),\r\n        _createEmoji(\"1f442\"),\r\n        _createEmoji(\"1f443\"),\r\n        _createEmoji(\"1f440\"),\r\n        _createEmojiWithNoKeyword(\"1f464\"),\r\n        _createEmoji(\"1f476\"),\r\n        _createEmoji(\"1f466\"),\r\n        _createEmoji(\"1f467\"),\r\n        _createEmoji(\"1f468\"),\r\n        _createEmoji(\"1f469\"),\r\n        _createEmoji(\"1f471\"),\r\n        _createEmoji(\"1f474\"),\r\n        _createEmoji(\"1f475\"),\r\n        _createEmojiWithNoKeyword(\"1f472\"),\r\n        _createEmojiWithNoKeyword(\"1f473\"),\r\n        _createEmoji(\"1f46e\"),\r\n        _createEmoji(\"1f477\"),\r\n        _createEmoji(\"1f482\"),\r\n        _createEmoji(\"1f385\"),\r\n        _createEmoji(\"1f47c\"),\r\n        _createEmoji(\"1f478\"),\r\n        _createEmoji(\"1f470\"),\r\n        _createEmoji(\"1f6b6\"),\r\n        _createEmoji(\"1f3c3\"),\r\n        _createEmoji(\"1f483\"),\r\n        _createEmoji(\"1f46f\"),\r\n        _createEmoji(\"1f46b\"),\r\n        _createEmojiWithNoKeyword(\"1f647\"),\r\n        _createEmoji(\"1f481\"),\r\n        _createEmoji(\"1f645\"),\r\n        _createEmoji(\"1f646\"),\r\n        _createEmoji(\"1f64b\"),\r\n        _createEmoji(\"1f64e\"),\r\n        _createEmoji(\"1f64d\"),\r\n        _createEmoji(\"1f487\"),\r\n        _createEmoji(\"1f486\"),\r\n        _createEmoji(\"1f491\"),\r\n        _createEmoji(\"1f48f\"),\r\n        _createEmoji(\"1f46a\"),\r\n        _createEmoji(\"1f45a\"),\r\n        _createEmoji(\"1f455\"),\r\n        _createEmoji(\"1f456\"),\r\n        _createEmoji(\"1f454\"),\r\n        _createEmoji(\"1f457\"),\r\n        _createEmoji(\"1f459\"),\r\n        _createEmoji(\"1f458\"),\r\n        _createEmoji(\"1f484\"),\r\n        _createEmoji(\"1f48b\"),\r\n        _createEmoji(\"1f463\"),\r\n        _createEmojiWithNoKeyword(\"1f460\"),\r\n        _createEmoji(\"1f461\"),\r\n        _createEmoji(\"1f462\"),\r\n        _createEmoji(\"1f45e\"),\r\n        _createEmoji(\"1f45f\"),\r\n        _createEmoji(\"1f452\"),\r\n        _createEmoji(\"1f3a9\"),\r\n        _createEmoji(\"1f393\"),\r\n        _createEmoji(\"1f451\"),\r\n        _createEmoji(\"1f392\"),\r\n        _createEmoji(\"1f45d\"),\r\n        _createEmoji(\"1f45b\"),\r\n        _createEmoji(\"1f45c\"),\r\n        _createEmoji(\"1f4bc\"),\r\n        _createEmoji(\"1f453\"),\r\n        _createEmoji(\"1f48d\"),\r\n        _createEmoji(\"1f302\")\r\n    ],\r\n    [EmojiFamilyKeys.Nature]: [\r\n        _createEmoji(\"1f436\"),\r\n        _createEmoji(\"1f431\"),\r\n        _createEmoji(\"1f42d\"),\r\n        _createEmoji(\"1f439\"),\r\n        _createEmoji(\"1f430\"),\r\n        _createEmoji(\"1f43b\"),\r\n        _createEmoji(\"1f43c\"),\r\n        _createEmojiWithNoKeyword(\"1f428\"),\r\n        _createEmoji(\"1f42f\"),\r\n        _createEmoji(\"1f42e\"),\r\n        _createEmoji(\"1f437\"),\r\n        _createEmoji(\"1f43d\"),\r\n        _createEmoji(\"1f438\"),\r\n        _createEmoji(\"1f419\"),\r\n        _createEmoji(\"1f435\"),\r\n        _createEmoji(\"1f648\"),\r\n        _createEmoji(\"1f649\"),\r\n        _createEmoji(\"1f64a\"),\r\n        _createEmoji(\"1f412\"),\r\n        _createEmoji(\"1f427\"),\r\n        _createEmoji(\"1f426\"),\r\n        _createEmojiWithNoKeyword(\"1f424\"),\r\n        _createEmoji(\"1f423\"),\r\n        _createEmoji(\"1f425\"),\r\n        _createEmoji(\"1f43a\"),\r\n        _createEmoji(\"1f417\"),\r\n        _createEmoji(\"1f434\"),\r\n        _createEmoji(\"1f41d\"),\r\n        _createEmoji(\"1f41b\"),\r\n        _createEmoji(\"1f40c\"),\r\n        _createEmoji(\"1f41e\"),\r\n        _createEmoji(\"1f41c\"),\r\n        _createEmoji(\"1f40d\"),\r\n        _createEmoji(\"1f422\"),\r\n        _createEmoji(\"1f420\"),\r\n        _createEmoji(\"1f41f\"),\r\n        _createEmoji(\"1f421\"),\r\n        _createEmoji(\"1f42c\"),\r\n        _createEmoji(\"1f433\"),\r\n        _createEmoji(\"1f414\"),\r\n        _createEmoji(\"1f42b\"),\r\n        _createEmoji(\"1f418\"),\r\n        _createEmoji(\"1f411\"),\r\n        _createEmoji(\"1f40e\"),\r\n        _createEmoji(\"1f429\"),\r\n        _createEmoji(\"1f43e\"),\r\n        _createEmoji(\"1f432\"),\r\n        _createEmoji(\"1f335\"),\r\n        _createEmoji(\"1f384\"),\r\n        _createEmoji(\"1f334\"),\r\n        _createEmoji(\"1f331\"),\r\n        _createEmoji(\"1f33f\"),\r\n        _createEmoji(\"1f340\"),\r\n        _createEmojiWithNoKeyword(\"1f38d\"),\r\n        _createEmojiWithNoKeyword(\"1f38b\"),\r\n        _createEmoji(\"1f343\"),\r\n        _createEmoji(\"1f342\"),\r\n        _createEmoji(\"1f341\"),\r\n        _createEmoji(\"1f33e\"),\r\n        _createEmoji(\"1f33a\"),\r\n        _createEmoji(\"1f33b\"),\r\n        _createEmoji(\"1f339\"),\r\n        _createEmoji(\"1f33c\"),\r\n        _createEmoji(\"1f337\"),\r\n        _createEmoji(\"1f338\"),\r\n        _createEmoji(\"1f344\"),\r\n        _createEmoji(\"1f490\"),\r\n        _createEmoji(\"1f330\"),\r\n        _createEmoji(\"1f383\"),\r\n        _createEmoji(\"1f41a\"),\r\n        _createEmojiWithNoKeyword(\"1f30f\"),\r\n        _createEmoji(\"1f315\"),\r\n        _createEmoji(\"1f311\"),\r\n        _createEmoji(\"1f313\"),\r\n        _createEmoji(\"1f314\"),\r\n        _createEmoji(\"1f31b\"),\r\n        _createEmoji(\"1f319\"),\r\n        _createEmoji(\"02b50\"),\r\n        _createEmoji(\"1f31f\"),\r\n        _createEmojiWithNoKeyword(\"1f4ab\"),\r\n        _createEmoji(\"02728\"),\r\n        _createEmojiWithNoKeyword(\"02600\"),\r\n        _createEmojiWithNoKeyword(\"026c5\"),\r\n        _createEmoji(\"02601\"),\r\n        _createEmoji(\"026a1\"),\r\n        _createEmoji(\"1f525\"),\r\n        _createEmoji(\"1f4a5\"),\r\n        _createEmoji(\"02744\"),\r\n        _createEmoji(\"026c4\"),\r\n        _createEmoji(\"1f4a8\"),\r\n        _createEmoji(\"02614\"),\r\n        _createEmojiWithNoKeyword(\"1f4a7\"),\r\n        _createEmojiWithNoKeyword(\"1f4a6\"),\r\n        _createEmoji(\"1f30a\")\r\n    ],\r\n    [EmojiFamilyKeys.Activities]: [\r\n        _createEmoji(\"026bd\"),\r\n        _createEmoji(\"1f3c0\"),\r\n        _createEmoji(\"1f3c8\"),\r\n        _createEmoji(\"026be\"),\r\n        _createEmoji(\"1f3be\"),\r\n        _createEmoji(\"1f3b1\"),\r\n        _createEmoji(\"026f3\"),\r\n        _createEmoji(\"1f3bf\"),\r\n        _createEmoji(\"1f3c2\"),\r\n        _createEmoji(\"1f3a3\"),\r\n        _createEmoji(\"1f3ca\"),\r\n        _createEmoji(\"1f3c4\"),\r\n        _createEmoji(\"1f3c6\"),\r\n        _createEmoji(\"1f3bd\"),\r\n        _createEmoji(\"1f3ab\"),\r\n        _createEmoji(\"1f3ad\"),\r\n        _createEmoji(\"1f3a8\"),\r\n        _createEmoji(\"1f3aa\"),\r\n        _createEmoji(\"1f3a4\"),\r\n        _createEmoji(\"1f3a7\"),\r\n        _createEmoji(\"1f3bc\"),\r\n        _createEmoji(\"1f3b9\"),\r\n        _createEmoji(\"1f3b7\"),\r\n        _createEmoji(\"1f3ba\"),\r\n        _createEmoji(\"1f3b8\"),\r\n        _createEmoji(\"1f3bb\"),\r\n        _createEmoji(\"1f3ac\"),\r\n        _createEmoji(\"1f3ae\"),\r\n        _createEmoji(\"1f47e\"),\r\n        _createEmoji(\"1f3af\"),\r\n        _createEmoji(\"1f3b2\"),\r\n        _createEmoji(\"1f3b0\"),\r\n        _createEmoji(\"1f3b3\")\r\n    ],\r\n    [EmojiFamilyKeys.Food]: [\r\n        _createEmoji(\"1f34f\"),\r\n        _createEmoji(\"1f34e\"),\r\n        _createEmoji(\"1f34a\"),\r\n        _createEmoji(\"1f34c\"),\r\n        _createEmoji(\"1f349\"),\r\n        _createEmoji(\"1f347\"),\r\n        _createEmoji(\"1f353\"),\r\n        _createEmoji(\"1f348\"),\r\n        _createEmoji(\"1f352\"),\r\n        _createEmoji(\"1f351\"),\r\n        _createEmoji(\"1f34d\"),\r\n        _createEmoji(\"1f345\"),\r\n        _createEmoji(\"1f346\"),\r\n        _createEmoji(\"1f33d\"),\r\n        _createEmoji(\"1f360\"),\r\n        _createEmoji(\"1f35e\"),\r\n        _createEmoji(\"1f357\"),\r\n        _createEmoji(\"1f356\"),\r\n        _createEmoji(\"1f364\"),\r\n        _createEmoji(\"1f373\"),\r\n        _createEmoji(\"1f354\"),\r\n        _createEmoji(\"1f35f\"),\r\n        _createEmoji(\"1f355\"),\r\n        _createEmoji(\"1f35d\"),\r\n        _createEmoji(\"1f35c\"),\r\n        _createEmoji(\"1f372\"),\r\n        _createEmoji(\"1f365\"),\r\n        _createEmoji(\"1f363\"),\r\n        _createEmoji(\"1f371\"),\r\n        _createEmoji(\"1f35b\"),\r\n        _createEmoji(\"1f359\"),\r\n        _createEmoji(\"1f35a\"),\r\n        _createEmoji(\"1f358\"),\r\n        _createEmoji(\"1f362\"),\r\n        _createEmoji(\"1f361\"),\r\n        _createEmojiWithNoKeyword(\"1f367\"),\r\n        _createEmoji(\"1f368\"),\r\n        _createEmoji(\"1f366\"),\r\n        _createEmoji(\"1f370\"),\r\n        _createEmoji(\"1f36f\"),\r\n        _createEmoji(\"1f382\"),\r\n        _createEmoji(\"1f36e\"),\r\n        _createEmoji(\"1f36c\"),\r\n        _createEmoji(\"1f36d\"),\r\n        _createEmoji(\"1f36b\"),\r\n        _createEmoji(\"1f369\"),\r\n        _createEmoji(\"1f36a\"),\r\n        _createEmoji(\"1f37a\"),\r\n        _createEmoji(\"1f37b\"),\r\n        _createEmoji(\"1f377\"),\r\n        _createEmoji(\"1f378\"),\r\n        _createEmoji(\"1f379\"),\r\n        _createEmoji(\"1f376\"),\r\n        _createEmoji(\"1f375\"),\r\n        _createEmoji(\"02615\"),\r\n        _createEmoji(\"1f374\")\r\n    ],\r\n    [EmojiFamilyKeys.Travel]: [\r\n        _createEmoji(\"1f697\"),\r\n        _createEmoji(\"1f695\"),\r\n        _createEmoji(\"1f687\"),\r\n        _createEmojiWithNoKeyword(\"1f699\"),\r\n        _createEmoji(\"1f68c\"),\r\n        _createEmoji(\"1f693\"),\r\n        _createEmoji(\"1f69a\"),\r\n        _createEmojiWithNoKeyword(\"1f691\"),\r\n        _createEmoji(\"1f692\"),\r\n        _createEmoji(\"1f6b2\"),\r\n        _createEmoji(\"1f6a8\"),\r\n        _createEmoji(\"1f683\"),\r\n        _createEmoji(\"1f684\"),\r\n        _createEmojiWithNoKeyword(\"1f685\"),\r\n        _createEmoji(\"1f689\"),\r\n        _createEmoji(\"02708\"),\r\n        _createEmoji(\"026f5\"),\r\n        _createEmojiWithNoKeyword(\"1f6a4\"),\r\n        _createEmoji(\"1f680\"),\r\n        _createEmoji(\"1f4ba\"),\r\n        _createEmoji(\"02693\"),\r\n        _createEmoji(\"1f6a7\"),\r\n        _createEmoji(\"026fd\"),\r\n        _createEmoji(\"1f68f\"),\r\n        _createEmoji(\"1f6a5\"),\r\n        _createEmoji(\"1f3c1\"),\r\n        _createEmoji(\"1f6a2\"),\r\n        _createEmoji(\"1f3a1\"),\r\n        _createEmoji(\"1f3a2\"),\r\n        _createEmoji(\"1f3a0\"),\r\n        _createEmoji(\"1f301\"),\r\n        _createEmojiWithNoKeyword(\"1f5fc\"),\r\n        _createEmoji(\"1f3ed\"),\r\n        _createEmoji(\"026f2\"),\r\n        _createEmojiWithNoKeyword(\"1f391\"),\r\n        _createEmojiWithNoKeyword(\"1f5fb\"),\r\n        _createEmojiWithNoKeyword(\"1f30b\"),\r\n        _createEmojiWithNoKeyword(\"1f5fe\"),\r\n        _createEmoji(\"1f305\"),\r\n        _createEmoji(\"1f304\"),\r\n        _createEmoji(\"1f307\"),\r\n        _createEmoji(\"1f306\"),\r\n        _createEmoji(\"1f303\"),\r\n        _createEmoji(\"1f309\"),\r\n        _createEmoji(\"1f30c\"),\r\n        _createEmoji(\"1f387\"),\r\n        _createEmoji(\"1f386\"),\r\n        _createEmoji(\"1f308\"),\r\n        _createEmoji(\"1f3f0\"),\r\n        _createEmojiWithNoKeyword(\"1f3ef\"),\r\n        _createEmoji(\"1f5fd\"),\r\n        _createEmoji(\"1f3e0\"),\r\n        _createEmoji(\"1f3e1\"),\r\n        _createEmoji(\"1f3e2\"),\r\n        _createEmoji(\"1f3ec\"),\r\n        _createEmoji(\"026fa\"),\r\n        _createEmojiWithNoKeyword(\"1f3e3\"),\r\n        _createEmojiWithNoKeyword(\"1f3e5\"),\r\n        _createEmoji(\"1f3e6\"),\r\n        _createEmoji(\"1f3e8\"),\r\n        _createEmoji(\"1f3ea\"),\r\n        _createEmoji(\"1f3eb\"),\r\n        _createEmojiWithNoKeyword(\"1f3e9\"),\r\n        _createEmoji(\"1f492\"),\r\n        _createEmoji(\"026ea\"),\r\n        _createEmoji(\"1f320\")\r\n    ],\r\n    [EmojiFamilyKeys.Symbols]: [\r\n        common3,\r\n        _createEmoji(\"1f49b\"),\r\n        _createEmoji(\"1f49a\"),\r\n        _createEmoji(\"1f499\"),\r\n        _createEmoji(\"1f494\"),\r\n        _createEmoji(\"1f49c\"),\r\n        _createEmoji(\"1f495\"),\r\n        _createEmoji(\"1f493\"),\r\n        _createEmoji(\"1f49e\"),\r\n        _createEmoji(\"1f497\"),\r\n        _createEmoji(\"1f498\"),\r\n        _createEmoji(\"1f496\"),\r\n        _createEmoji(\"1f49d\"),\r\n        _createEmoji(\"1f49f\"),\r\n        _createEmojiWithNoKeyword(\"1f52f\"),\r\n        _createEmojiWithNoKeyword(\"026ce\"),\r\n        _createEmoji(\"02648\"),\r\n        _createEmoji(\"02649\"),\r\n        _createEmoji(\"0264a\"),\r\n        _createEmoji(\"0264b\"),\r\n        _createEmoji(\"0264c\"),\r\n        _createEmoji(\"0264d\"),\r\n        _createEmoji(\"0264e\"),\r\n        _createEmoji(\"0264f\"),\r\n        _createEmoji(\"02650\"),\r\n        _createEmoji(\"02651\"),\r\n        _createEmoji(\"02652\"),\r\n        _createEmoji(\"02653\"),\r\n        _createEmojiWithNoKeyword(\"1f194\"),\r\n        _createEmojiWithNoKeyword(\"1f4f4\"),\r\n        _createEmojiWithNoKeyword(\"1f4f3\"),\r\n        _createEmojiWithNoKeyword(\"1f19a\"),\r\n        _createEmojiWithNoKeyword(\"1f4ae\"),\r\n        _createEmojiWithNoKeyword(\"1f18e\"),\r\n        _createEmojiWithNoKeyword(\"1f191\"),\r\n        _createEmojiWithNoKeyword(\"1f198\"),\r\n        _createEmojiWithNoKeyword(\"026d4\"),\r\n        _createEmoji(\"1f4db\"),\r\n        _createEmoji(\"1f6ab\"),\r\n        _createEmojiWithNoKeyword(\"0274c\"),\r\n        _createEmojiWithNoKeyword(\"02b55\"),\r\n        _createEmojiWithNoKeyword(\"1f4a2\"),\r\n        _createEmoji(\"02668\"),\r\n        _createEmojiWithNoKeyword(\"1f51e\"),\r\n        _createEmojiWithNoKeyword(\"02757\"),\r\n        _createEmojiWithNoKeyword(\"02755\"),\r\n        _createEmojiWithNoKeyword(\"02753\"),\r\n        _createEmojiWithNoKeyword(\"02754\"),\r\n        _createEmojiWithNoKeyword(\"02049\"),\r\n        _createEmojiWithNoKeyword(\"1f4af\"),\r\n        _createEmoji(\"1f531\"),\r\n        _createEmojiWithNoKeyword(\"0303d\"),\r\n        _createEmoji(\"026a0\"),\r\n        _createEmojiWithNoKeyword(\"1f530\"),\r\n        _createEmojiWithNoKeyword(\"1f22f\"),\r\n        _createEmojiWithNoKeyword(\"1f4b9\"),\r\n        _createEmoji(\"02733\"),\r\n        _createEmojiWithNoKeyword(\"0274e\"),\r\n        _createEmojiWithNoKeyword(\"02705\"),\r\n        _createEmojiWithNoKeyword(\"1f4a0\"),\r\n        _createEmoji(\"1f300\"),\r\n        _createEmoji(\"1f3e7\"),\r\n        _createEmoji(\"0267f\"),\r\n        _createEmoji(\"1f6ad\"),\r\n        _createEmojiWithNoKeyword(\"1f6be\"),\r\n        _createEmoji(\"02734\"),\r\n        _createEmoji(\"1f17f\"),\r\n        _createEmoji(\"1f6b9\"),\r\n        _createEmoji(\"1f6ba\"),\r\n        _createEmojiWithNoKeyword(\"1f6bc\"),\r\n        _createEmoji(\"1f6bb\"),\r\n        _createEmoji(\"1f3a6\"),\r\n        _createEmoji(\"1f4f6\"),\r\n        _createEmojiWithNoKeyword(\"1f201\"),\r\n        _createEmojiWithNoKeyword(\"1f196\"),\r\n        _createEmojiWithNoKeyword(\"0267b\"),\r\n        _createEmojiWithNoKeyword(\"1f197\"),\r\n        _createEmojiWithNoKeyword(\"1f192\"),\r\n        _createEmoji(\"02747\"),\r\n        _createEmojiWithNoKeyword(\"1f195\"),\r\n        _createEmojiWithNoKeyword(\"1f193\"),\r\n        _createEmojiWithNoKeyword(\"1f51f\"),\r\n        _createEmojiWithNoKeyword(\"1f522\"),\r\n        _createEmojiWithNoKeyword(\"023ea\"),\r\n        _createEmojiWithNoKeyword(\"023e9\"),\r\n        _createEmojiWithNoKeyword(\"1f53c\"),\r\n        _createEmojiWithNoKeyword(\"1f53d\"),\r\n        _createEmojiWithNoKeyword(\"023eb\"),\r\n        _createEmojiWithNoKeyword(\"023ec\"),\r\n        _createEmojiWithNoKeyword(\"1f199\"),\r\n        _createEmojiWithNoKeyword(\"02139\"),\r\n        _createEmojiWithNoKeyword(\"1f524\"),\r\n        _createEmojiWithNoKeyword(\"1f521\"),\r\n        _createEmojiWithNoKeyword(\"1f520\"),\r\n        _createEmojiWithNoKeyword(\"1f523\"),\r\n        _createEmoji(\"1f3b5\"),\r\n        _createEmoji(\"1f3b6\"),\r\n        _createEmojiWithNoKeyword(\"03030\"),\r\n        _createEmojiWithNoKeyword(\"027bf\"),\r\n        _createEmojiWithNoKeyword(\"02714\"),\r\n        _createEmoji(\"1f503\"),\r\n        _createEmojiWithNoKeyword(\"02795\"),\r\n        _createEmojiWithNoKeyword(\"02796\"),\r\n        _createEmojiWithNoKeyword(\"02797\"),\r\n        _createEmojiWithNoKeyword(\"02716\"),\r\n        _createEmojiWithNoKeyword(\"027b0\"),\r\n        _createEmojiWithNoKeyword(\"1f4b2\"),\r\n        _createEmojiWithNoKeyword(\"1f4b1\"),\r\n        _createEmojiWithNoKeyword(\"1f51a\"),\r\n        _createEmojiWithNoKeyword(\"1f519\"),\r\n        _createEmojiWithNoKeyword(\"1f51b\"),\r\n        _createEmojiWithNoKeyword(\"1f51d\"),\r\n        _createEmojiWithNoKeyword(\"1f51c\"),\r\n        _createEmojiWithNoKeyword(\"02611\"),\r\n        _createEmojiWithNoKeyword(\"1f518\"),\r\n        _createEmojiWithNoKeyword(\"026ab\"),\r\n        _createEmojiWithNoKeyword(\"1f534\"),\r\n        _createEmojiWithNoKeyword(\"1f535\"),\r\n        _createEmojiWithNoKeyword(\"1f539\"),\r\n        _createEmojiWithNoKeyword(\"1f538\"),\r\n        _createEmojiWithNoKeyword(\"1f536\"),\r\n        _createEmojiWithNoKeyword(\"1f537\"),\r\n        _createEmojiWithNoKeyword(\"1f53a\"),\r\n        _createEmojiWithNoKeyword(\"1f53b\"),\r\n        _createEmojiWithNoKeyword(\"02b1b\"),\r\n        _createEmojiWithNoKeyword(\"02b1c\"),\r\n        _createEmojiWithNoKeyword(\"1f532\"),\r\n        _createEmojiWithNoKeyword(\"1f533\"),\r\n        _createEmojiWithNoKeyword(\"1f50a\"),\r\n        _createEmoji(\"1f4e3\"),\r\n        _createEmojiWithNoKeyword(\"1f4e2\"),\r\n        _createEmoji(\"1f514\"),\r\n        _createEmojiWithNoKeyword(\"1f004\"),\r\n        _createEmoji(\"1f0cf\"),\r\n        _createEmojiWithNoKeyword(\"1f3b4\"),\r\n        _createEmojiWithNoKeyword(\"1f4ac\"),\r\n        _createEmoji(\"1f550\"),\r\n        _createEmoji(\"1f551\"),\r\n        _createEmoji(\"1f552\"),\r\n        _createEmoji(\"1f553\"),\r\n        _createEmoji(\"1f554\"),\r\n        _createEmoji(\"1f555\"),\r\n        _createEmoji(\"1f556\"),\r\n        _createEmoji(\"1f557\"),\r\n        _createEmoji(\"1f558\"),\r\n        _createEmoji(\"1f559\"),\r\n        _createEmoji(\"1f55a\"),\r\n        _createEmoji(\"1f55b\"),\r\n        _createEmojiWithNoKeyword(\"1f236\"),\r\n        _createEmojiWithNoKeyword(\"1f250\"),\r\n        _createEmojiWithNoKeyword(\"1f239\"),\r\n        _createEmojiWithNoKeyword(\"1f21a\"),\r\n        _createEmojiWithNoKeyword(\"1f232\"),\r\n        _createEmojiWithNoKeyword(\"1f251\"),\r\n        _createEmojiWithNoKeyword(\"1f234\"),\r\n        _createEmojiWithNoKeyword(\"1f233\"),\r\n        _createEmojiWithNoKeyword(\"1f23a\"),\r\n        _createEmojiWithNoKeyword(\"1f235\")\r\n    ],\r\n    [EmojiFamilyKeys.Objects]: [\r\n        _createEmojiWithNoKeyword(\"0231a\"),\r\n        _createEmoji(\"1f4f1\"),\r\n        _createEmojiWithNoKeyword(\"1f4f2\"),\r\n        _createEmoji(\"1f4bb\"),\r\n        _createEmojiWithNoKeyword(\"1f4bd\"),\r\n        _createEmoji(\"1f4be\"),\r\n        _createEmoji(\"1f4bf\"),\r\n        _createEmoji(\"1f4c0\"),\r\n        _createEmoji(\"1f4fc\"),\r\n        _createEmoji(\"1f4f7\"),\r\n        _createEmoji(\"1f4f9\"),\r\n        _createEmoji(\"1f3a5\"),\r\n        _createEmoji(\"1f4de\"),\r\n        _createEmojiWithNoKeyword(\"0260e\"),\r\n        _createEmoji(\"1f4df\"),\r\n        _createEmoji(\"1f4e0\"),\r\n        _createEmoji(\"1f4fa\"),\r\n        _createEmoji(\"1f4fb\"),\r\n        _createEmojiWithNoKeyword(\"023f0\"),\r\n        _createEmojiWithNoKeyword(\"0231b\"),\r\n        _createEmojiWithNoKeyword(\"023f3\"),\r\n        _createEmoji(\"1f4e1\"),\r\n        _createEmoji(\"1f50b\"),\r\n        _createEmoji(\"1f50c\"),\r\n        _createEmoji(\"1f4a1\"),\r\n        _createEmoji(\"1f526\"),\r\n        _createEmojiWithNoKeyword(\"1f4b8\"),\r\n        _createEmoji(\"1f4b5\"),\r\n        _createEmoji(\"1f4b4\"),\r\n        _createEmoji(\"1f4b0\"),\r\n        _createEmoji(\"1f4b3\"),\r\n        _createEmoji(\"1f48e\"),\r\n        _createEmoji(\"1f527\"),\r\n        _createEmoji(\"1f528\"),\r\n        _createEmoji(\"1f529\"),\r\n        _createEmojiWithNoKeyword(\"1f52b\"),\r\n        _createEmoji(\"1f4a3\"),\r\n        _createEmoji(\"1f52a\"),\r\n        _createEmoji(\"1f6ac\"),\r\n        _createEmoji(\"1f52e\"),\r\n        _createEmoji(\"1f488\"),\r\n        _createEmoji(\"1f48a\"),\r\n        _createEmoji(\"1f489\"),\r\n        _createEmoji(\"1f516\"),\r\n        _createEmoji(\"1f6bd\"),\r\n        _createEmoji(\"1f6c0\"),\r\n        _createEmoji(\"1f511\"),\r\n        _createEmoji(\"1f6aa\"),\r\n        _createEmojiWithNoKeyword(\"1f5ff\"),\r\n        _createEmoji(\"1f388\"),\r\n        _createEmojiWithNoKeyword(\"1f38f\"),\r\n        _createEmoji(\"1f380\"),\r\n        _createEmoji(\"1f381\"),\r\n        _createEmoji(\"1f38a\"),\r\n        _createEmoji(\"1f389\"),\r\n        _createEmojiWithNoKeyword(\"1f38e\"),\r\n        _createEmoji(\"1f390\"),\r\n        _createEmojiWithNoKeyword(\"1f38c\"),\r\n        _createEmojiWithNoKeyword(\"1f3ee\"),\r\n        _createEmoji(\"02709\"),\r\n        _createEmoji(\"1f4e9\"),\r\n        _createEmoji(\"1f4e8\"),\r\n        _createEmoji(\"1f48c\"),\r\n        _createEmoji(\"1f4e7\"),\r\n        _createEmoji(\"1f4ee\"),\r\n        _createEmoji(\"1f4ea\"),\r\n        _createEmoji(\"1f4eb\"),\r\n        _createEmoji(\"1f4e6\"),\r\n        _createEmojiWithNoKeyword(\"1f4e5\"),\r\n        _createEmojiWithNoKeyword(\"1f4e4\"),\r\n        _createEmojiWithNoKeyword(\"1f4dc\"),\r\n        _createEmojiWithNoKeyword(\"1f4c3\"),\r\n        _createEmojiWithNoKeyword(\"1f4d1\"),\r\n        _createEmoji(\"1f4ca\"),\r\n        _createEmoji(\"1f4c8\"),\r\n        _createEmoji(\"1f4c9\"),\r\n        _createEmojiWithNoKeyword(\"1f4c4\"),\r\n        _createEmoji(\"1f4c5\"),\r\n        _createEmojiWithNoKeyword(\"1f4c6\"),\r\n        _createEmojiWithNoKeyword(\"1f4c7\"),\r\n        _createEmoji(\"1f4cb\"),\r\n        _createEmoji(\"1f4c1\"),\r\n        _createEmojiWithNoKeyword(\"1f4c2\"),\r\n        _createEmoji(\"1f4f0\"),\r\n        _createEmoji(\"1f4d3\"),\r\n        _createEmojiWithNoKeyword(\"1f4d5\"),\r\n        _createEmojiWithNoKeyword(\"1f4d7\"),\r\n        _createEmojiWithNoKeyword(\"1f4d8\"),\r\n        _createEmojiWithNoKeyword(\"1f4d9\"),\r\n        _createEmojiWithNoKeyword(\"1f4d4\"),\r\n        _createEmoji(\"1f4d2\"),\r\n        _createEmoji(\"1f4da\"),\r\n        _createEmojiWithNoKeyword(\"1f4d6\"),\r\n        _createEmojiWithNoKeyword(\"1f517\"),\r\n        _createEmoji(\"1f4ce\"),\r\n        _createEmoji(\"02702\"),\r\n        _createEmojiWithNoKeyword(\"1f4d0\"),\r\n        _createEmoji(\"1f4cf\"),\r\n        _createEmoji(\"1f4cc\"),\r\n        _createEmoji(\"1f4cd\"),\r\n        _createEmojiWithNoKeyword(\"1f6a9\"),\r\n        _createEmoji(\"1f510\"),\r\n        _createEmoji(\"1f512\"),\r\n        _createEmoji(\"1f513\"),\r\n        _createEmoji(\"1f50f\"),\r\n        _createEmojiWithNoKeyword(\"02712\"),\r\n        _createEmoji(\"1f4dd\"),\r\n        _createEmoji(\"0270f\"),\r\n        _createEmoji(\"1f50d\"),\r\n        _createEmojiWithNoKeyword(\"1f50e\")\r\n    ]\r\n};\r\n\r\nexport default EmojiList;\r\n\r\nexport const EmojiFabricIconCharacterMap = {\r\n    [EmojiFamilyKeys.Activities]: \"Soccer\",\r\n    [EmojiFamilyKeys.Food]: \"EatDrink\",\r\n    [EmojiFamilyKeys.Nature]: \"FangBody\",\r\n    [EmojiFamilyKeys.Objects]: \"Lightbulb\",\r\n    [EmojiFamilyKeys.People]: \"Emoji2\",\r\n    [EmojiFamilyKeys.Symbols]: \"Heart\",\r\n    [EmojiFamilyKeys.Travel]: \"Car\"\r\n};\r\n\r\nexport function forEachEmojiFamily(callback: (emojis: Emoji[], family: EmojiFamilyKeys) => boolean): void {\r\n    const families = Object.keys(EmojiList);\r\n    for (const family of families) {\r\n        if (!callback(EmojiList[family], family as EmojiFamilyKeys)) {\r\n            break;\r\n        }\r\n    }\r\n}\r\n\r\nexport function forEachEmoji(callback: (emoji: Emoji) => boolean): void {\r\n    forEachEmojiFamily(emojis => {\r\n        for (const emoji of emojis) {\r\n            if (!callback(emoji)) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    });\r\n}\r\n\r\n// get emoji code point from an emoji key\r\nfunction _getEmojiCodePoint(key: string): string {\r\n    let unicode = parseInt(key, 16);\r\n    if (isNaN(unicode)) {\r\n        return null;\r\n    }\r\n\r\n    // All emojis have codepoints between the following ranges:\r\n    // 0x1F7000 - 0x1F700 -> has surrogate pairs\r\n    // 0x00023 - 0x04000 -> does not have surrogate pairs\r\n    let surrogatePairs: number[];\r\n    if (unicode >= 0x1f000 && unicode <= 0x1f700) {\r\n        let hi = Math.floor((unicode - 0x10000) / 0x400) + 0xd800;\r\n        let lo = ((unicode - 0x10000) % 0x400) + 0xdc00;\r\n        surrogatePairs = [hi, lo];\r\n    } else if (unicode >= 0x00023 && unicode <= 0x04000) {\r\n        surrogatePairs = [unicode];\r\n    }\r\n\r\n    return String.fromCharCode(...surrogatePairs);\r\n}\r\n\r\nfunction _createEmoji(key: string, shortcut?: string): Emoji {\r\n    return { key, description: `emjD${key}`, keywords: `emjK${key}`, shortcut, codePoint: _getEmojiCodePoint(key) };\r\n}\r\n\r\nfunction _createEmojiWithNoKeyword(key: string): Emoji {\r\n    return { key, description: `emjD${key}`, codePoint: _getEmojiCodePoint(key) };\r\n}\r\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar contains_1 = require(\"../utils/contains\");\nvar isNodeAfter_1 = require(\"../utils/isNodeAfter\");\n/**\n * This presents a content block that can be reprented by a single html block type element.\n * In most cases, it corresponds to an HTML block level element, i.e. P, DIV, LI, TD etc.\n */\nvar NodeBlockElement = /** @class */ (function () {\n    function NodeBlockElement(element) {\n        this.element = element;\n    }\n    /**\n     * Collapse this element to a single DOM element.\n     * If the content nodes are separated in different root nodes, wrap them to a single node\n     * If the content nodes are included in root node with other nodes, split root node\n     */\n    NodeBlockElement.prototype.collapseToSingleElement = function () {\n        return this.element;\n    };\n    /**\n     * Get the start node of the block\n     * For NodeBlockElement, start and end essentially refers to same node\n     */\n    NodeBlockElement.prototype.getStartNode = function () {\n        return this.element;\n    };\n    /**\n     * Get the end node of the block\n     * For NodeBlockElement, start and end essentially refers to same node\n     */\n    NodeBlockElement.prototype.getEndNode = function () {\n        return this.element;\n    };\n    /**\n     * Checks if it refers to same block\n     */\n    NodeBlockElement.prototype.equals = function (blockElement) {\n        // Ideally there is only one unique way to generate a block so we only need to compare the startNode\n        return this.element == blockElement.getStartNode();\n    };\n    /**\n     * Checks if a block is after the current block\n     */\n    NodeBlockElement.prototype.isAfter = function (blockElement) {\n        // if the block's startNode is after current node endEnd, we say it is after\n        return isNodeAfter_1.default(this.element, blockElement.getEndNode());\n    };\n    /**\n     * Checks if a certain html node is within the block\n     */\n    NodeBlockElement.prototype.contains = function (node) {\n        return contains_1.default(this.element, node, true /*treatSameNodeAsContain*/);\n    };\n    /**\n     * Get the text content of this block element\n     */\n    NodeBlockElement.prototype.getTextContent = function () {\n        return this.element ? this.element.textContent : '';\n    };\n    return NodeBlockElement;\n}());\nexports.default = NodeBlockElement;\n//# sourceMappingURL=NodeBlockElement.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar safeInstanceOf_1 = require(\"./safeInstanceOf\");\n/**\n * Check if the given object is Range\n * @param obj The object to check\n */\nfunction isRange(obj) {\n    return safeInstanceOf_1.default(obj, 'Range');\n}\nexports.default = isRange;\n//# sourceMappingURL=isRange.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar getTagOfNode_1 = require(\"./getTagOfNode\");\n/**\n * HTML void elements\n * Per https://www.w3.org/TR/html/syntax.html#syntax-elements, cannot have child nodes\n * This regex is used when we move focus to very begin of editor. We should avoid putting focus inside\n * void elements so users don't accidently create child nodes in them\n */\nvar HTML_VOID_ELEMENTS = 'AREA,BASE,BR,COL,COMMAND,EMBED,HR,IMG,INPUT,KEYGEN,LINK,META,PARAM,SOURCE,TRACK,WBR'.split(',');\n/**\n * Check if the given node is html void element. Void element cannot have childen\n * @param node The node to check\n */\nfunction isVoidHtmlElement(node) {\n    return !!node && HTML_VOID_ELEMENTS.indexOf(getTagOfNode_1.default(node)) >= 0;\n}\nexports.default = isVoidHtmlElement;\n//# sourceMappingURL=isVoidHtmlElement.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar safeInstanceOf_1 = require(\"./safeInstanceOf\");\n/**\n * Check if the given object is HTMLElement\n * @param obj The object to check\n */\nfunction isHTMLElement(obj) {\n    return safeInstanceOf_1.default(obj, 'HTMLElement');\n}\nexports.default = isHTMLElement;\n//# sourceMappingURL=isHTMLElement.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar getTagOfNode_1 = require(\"./getTagOfNode\");\nvar Position_1 = require(\"../selection/Position\");\nvar splitTextNode_1 = require(\"./splitTextNode\");\nvar wrap_1 = require(\"./wrap\");\nvar getLeafSibling_1 = require(\"./getLeafSibling\");\nvar splitParentNode_1 = require(\"./splitParentNode\");\nvar STYLETAGS = 'SPAN,B,I,U,EM,STRONG,STRIKE,S,SMALL'.split(',');\n/**\n * Apply style using a styler function to the given container node in the given range\n * @param container The container node to apply style to\n * @param styler The styler function\n * @param from From position\n * @param to To position\n */\nfunction applyTextStyle(container, styler, from, to) {\n    if (from === void 0) { from = new Position_1.default(container, 0 /* Begin */).normalize(); }\n    if (to === void 0) { to = new Position_1.default(container, -1 /* End */).normalize(); }\n    var formatNodes = [];\n    while (from && to && to.isAfter(from)) {\n        var formatNode = from.node;\n        var parentTag = getTagOfNode_1.default(formatNode.parentNode);\n        // The code below modifies DOM. Need to get the next sibling first otherwise you won't be able to reliably get a good next sibling node\n        var nextNode = getLeafSibling_1.getNextLeafSibling(container, formatNode);\n        if (formatNode.nodeType == 3 /* Text */ && ['TR', 'TABLE'].indexOf(parentTag) < 0) {\n            if (formatNode == to.node && !to.isAtEnd) {\n                formatNode = splitTextNode_1.default(formatNode, to.offset, true /*returnFirstPart*/);\n            }\n            if (from.offset > 0) {\n                formatNode = splitTextNode_1.default(formatNode, from.offset, false /*returnFirstPart*/);\n            }\n            formatNodes.push(formatNode);\n        }\n        from = nextNode && new Position_1.default(nextNode, 0 /* Begin */);\n    }\n    if (formatNodes.length > 0) {\n        if (formatNodes.every(function (node) { return node.parentNode == formatNodes[0].parentNode; })) {\n            var newNode_1 = formatNodes.shift();\n            formatNodes.forEach(function (node) {\n                newNode_1.nodeValue += node.nodeValue;\n                node.parentNode.removeChild(node);\n            });\n            formatNodes = [newNode_1];\n        }\n        formatNodes.forEach(function (node) {\n            // When apply style within style tags like B/I/U/..., we split the tag and apply outside them\n            // So that the inner style tag such as U, STRIKE can inherit the style we added\n            while (getTagOfNode_1.default(node) != 'SPAN' &&\n                STYLETAGS.indexOf(getTagOfNode_1.default(node.parentNode)) >= 0) {\n                callStylerWithInnerNode(node, styler);\n                node = splitParentNode_1.splitBalancedNodeRange(node);\n            }\n            if (getTagOfNode_1.default(node) != 'SPAN') {\n                callStylerWithInnerNode(node, styler);\n                node = wrap_1.default(node, 'SPAN');\n            }\n            styler(node);\n        });\n    }\n}\nexports.default = applyTextStyle;\nfunction callStylerWithInnerNode(node, styler) {\n    if (node && node.nodeType == 1 /* Element */) {\n        styler(node, true /*isInnerNode*/);\n    }\n}\n//# sourceMappingURL=applyTextStyle.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Split a text node into two parts by an offset number, and return one of them\n * @param textNode The text node to split\n * @param offset The offset number to split at\n * @param returnFirstPart True to return the first part, then the passed in textNode will become the second part.\n * Otherwise return the second part, and the passed in textNode will become the first part\n */\nfunction splitTextNode(textNode, offset, returnFirstPart) {\n    var firstPart = textNode.nodeValue.substr(0, offset);\n    var secondPart = textNode.nodeValue.substr(offset);\n    var newNode = textNode.ownerDocument.createTextNode(returnFirstPart ? firstPart : secondPart);\n    textNode.nodeValue = returnFirstPart ? secondPart : firstPart;\n    textNode.parentNode.insertBefore(newNode, returnFirstPart ? textNode : textNode.nextSibling);\n    return newNode;\n}\nexports.default = splitTextNode;\n//# sourceMappingURL=splitTextNode.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar getInlineElementAtNode_1 = require(\"./getInlineElementAtNode\");\nvar PartialInlineElement_1 = require(\"./PartialInlineElement\");\nvar shouldSkipNode_1 = require(\"../utils/shouldSkipNode\");\nvar getLeafSibling_1 = require(\"../utils/getLeafSibling\");\n/**\n * Get inline element before a position\n * This is mostly used when we want to get the inline element before selection/cursor\n * There is a possible that the cursor is in middle of an inline element (i.e. mid of a text node)\n * in this case, we only want to return what is before cursor (a partial of an inline) to indicate\n * that we're in middle.\n * @param root Root node of current scope, use for create InlineElement\n * @param position The position to get InlineElement before\n */\nfunction getInlineElementBefore(root, position) {\n    return getInlineElementBeforeAfter(root, position, false /*isAfter*/);\n}\nexports.getInlineElementBefore = getInlineElementBefore;\n/**\n * Get inline element after a position\n * This is mostly used when we want to get the inline element after selection/cursor\n * There is a possible that the cursor is in middle of an inline element (i.e. mid of a text node)\n * in this case, we only want to return what is before cursor (a partial of an inline) to indicate\n * that we're in middle.\n * @param root Root node of current scope, use for create InlineElement\n * @param position The position to get InlineElement after\n */\nfunction getInlineElementAfter(root, position) {\n    return getInlineElementBeforeAfter(root, position, true /*isAfter*/);\n}\nexports.getInlineElementAfter = getInlineElementAfter;\nfunction getInlineElementBeforeAfter(root, position, isAfter) {\n    if (!root || !position || !position.node) {\n        return null;\n    }\n    position = position.normalize();\n    var node = position.node, offset = position.offset, isAtEnd = position.isAtEnd;\n    var isPartial = false;\n    if ((!isAfter && offset == 0 && !isAtEnd) || (isAfter && isAtEnd)) {\n        node = getLeafSibling_1.getLeafSibling(root, node, isAfter);\n    }\n    else if (node.nodeType == 3 /* Text */ &&\n        ((!isAfter && !isAtEnd) || (isAfter && offset > 0))) {\n        isPartial = true;\n    }\n    if (node && shouldSkipNode_1.default(node)) {\n        node = getLeafSibling_1.getLeafSibling(root, node, isAfter);\n    }\n    var inlineElement = getInlineElementAtNode_1.default(root, node);\n    if (inlineElement && (isPartial || inlineElement.contains(position))) {\n        inlineElement = isAfter\n            ? new PartialInlineElement_1.default(inlineElement, position, null)\n            : new PartialInlineElement_1.default(inlineElement, null, position);\n    }\n    return inlineElement;\n}\nexports.getInlineElementBeforeAfter = getInlineElementBeforeAfter;\n//# sourceMappingURL=getInlineElementBeforeAfter.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar getComputedStyles_1 = require(\"./getComputedStyles\");\nvar getTagOfNode_1 = require(\"./getTagOfNode\");\nfunction changeElementTag(element, newTag) {\n    var _a;\n    if (!element || !newTag) {\n        return null;\n    }\n    var newElement = element.ownerDocument.createElement(newTag);\n    for (var i = 0; i < element.attributes.length; i++) {\n        var attr = element.attributes[i];\n        newElement.setAttribute(attr.name, attr.value);\n    }\n    while (element.firstChild) {\n        newElement.appendChild(element.firstChild);\n    }\n    if (getTagOfNode_1.default(element) == 'P' || getTagOfNode_1.default(newElement) == 'P') {\n        _a = getComputedStyles_1.default(element, [\n            'margin-top',\n            'margin-bottom',\n        ]), newElement.style.marginTop = _a[0], newElement.style.marginBottom = _a[1];\n    }\n    if (element.parentNode) {\n        element.parentNode.replaceChild(newElement, element);\n    }\n    return newElement;\n}\nexports.default = changeElementTag;\n//# sourceMappingURL=changeElementTag.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar getTagOfNode_1 = require(\"../utils/getTagOfNode\");\nfunction getListTypeFromNode(node) {\n    switch (getTagOfNode_1.default(node)) {\n        case 'OL':\n            return 1 /* Ordered */;\n        case 'UL':\n            return 2 /* Unordered */;\n        default:\n            return 0 /* None */;\n    }\n}\nexports.default = getListTypeFromNode;\n/**\n * @internal\n * Check if the given DOM node is a list element (OL or UL)\n * @param node The node to check\n */\nfunction isListElement(node) {\n    return getListTypeFromNode(node) != 0 /* None */;\n}\nexports.isListElement = isListElement;\n//# sourceMappingURL=getListTypeFromNode.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar contains_1 = require(\"../utils/contains\");\n/**\n * Check if a given node is contained by the given region\n * @param region The region to check from\n * @param node The node or block element to check\n */\nfunction isNodeInRegion(region, node) {\n    return !!(region &&\n        contains_1.default(region.rootNode, node) &&\n        (!region.nodeBefore ||\n            region.nodeBefore.compareDocumentPosition(node) == 4 /* Following */) &&\n        (!region.nodeAfter ||\n            region.nodeAfter.compareDocumentPosition(node) == 2 /* Preceding */));\n}\nexports.default = isNodeInRegion;\n//# sourceMappingURL=isNodeInRegion.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Check whether can move current snapshot with the given step\n * @param snapshots The snapshots data structure to check\n * @param step The step to check, can be positive, negative or 0\n * @returns True if can move current snapshot with the given step, otherwise false\n */\nfunction canMoveCurrentSnapshot(snapshots, step) {\n    var newIndex = snapshots.currentIndex + step;\n    return newIndex >= 0 && newIndex < snapshots.snapshots.length;\n}\nexports.default = canMoveCurrentSnapshot;\n//# sourceMappingURL=canMoveCurrentSnapshot.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar roosterjs_editor_dom_1 = require(\"roosterjs-editor-dom\");\n/**\n * Check if Ctrl key (Windows) or Meta key (Mac) is pressed for the given Event\n * @param event A Keyboard event or Mouse event object\n * @returns True if Ctrl key is pressed on Windows or Meta key is pressed on Mac\n */\nvar isCtrlOrMetaPressed = roosterjs_editor_dom_1.Browser.isMac\n    ? function (event) { return event.metaKey; }\n    : function (event) { return event.ctrlKey; };\nexports.default = isCtrlOrMetaPressed;\n//# sourceMappingURL=isCtrlOrMetaPressed.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Gets the cached event data by cache key from event object if there is already one.\n * Otherwise, call getter function to create one, and cache it.\n * @param event The event object\n * @param key Cache key string, need to be unique\n * @param getter Getter function to get the object when it is not in cache yet\n */\nfunction cacheGetEventData(event, key, getter) {\n    var result = event && event.eventDataCache && event.eventDataCache.hasOwnProperty(key)\n        ? event.eventDataCache[key]\n        : getter();\n    if (event) {\n        event.eventDataCache = event.eventDataCache || {};\n        event.eventDataCache[key] = result;\n    }\n    return result;\n}\nexports.default = cacheGetEventData;\n//# sourceMappingURL=cacheGetEventData.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar roosterjs_editor_dom_1 = require(\"roosterjs-editor-dom\");\n/**\n * Browsers don't handle bullet/numbering list well, especially the formats when switching list statue\n * So we workaround it by always adding format to list element\n */\nfunction processList(editor, command) {\n    var existingList = editor.getElementAtCursor('OL,UL');\n    if (roosterjs_editor_dom_1.Browser.isChrome && command !== \"indent\" /* Indent */) {\n        // Chrome has a bug where certain information about elements are deleted when outdent or enter on empty line occurs.\n        // We need to clone our current LI node so we can replace the new LI node with it post outdent / enter.\n        var parentLINode = editor.getElementAtCursor('LI');\n        // We must first be in an LI node to do something to fix this.\n        if (parentLINode) {\n            // We also don't want to try to handle the multi select outdent case at this time.\n            // These are already pretty stable in Chromium.\n            var currentRange = editor.getSelectionRange();\n            var currentSelectionPath = roosterjs_editor_dom_1.getSelectionPath(parentLINode, currentRange);\n            if (currentRange &&\n                (currentRange.collapsed ||\n                    (editor.getElementAtCursor('LI', currentRange.startContainer) == parentLINode &&\n                        editor.getElementAtCursor('LI', currentRange.endContainer) == parentLINode))) {\n                // Handle the case for toggling between the two list types as a special case.\n                // We'll let the browser handle this for now.\n                if ((existingList.tagName === 'OL' &&\n                    command === \"insertUnorderedList\" /* InsertUnorderedList */) ||\n                    (existingList.tagName === 'UL' && command === \"insertOrderedList\" /* InsertOrderedList */)) {\n                    editor.getDocument().execCommand(command, false, null);\n                }\n                else {\n                    // Get the next highest list element.\n                    // In well formed HTML, this should just be the existing list's parent container.\n                    var listParent = existingList.parentElement;\n                    if (listParent.tagName == 'OL' || listParent.tagName == 'UL') {\n                        if (parentLINode.nextElementSibling) {\n                            roosterjs_editor_dom_1.splitBalancedNodeRange(parentLINode);\n                        }\n                        existingList.insertAdjacentElement('afterend', parentLINode);\n                        editor.select(roosterjs_editor_dom_1.createRange(parentLINode, currentSelectionPath.start, currentSelectionPath.end));\n                    }\n                    else {\n                        // In this case, we're going out to the parent root.\n                        if (parentLINode.nextElementSibling) {\n                            roosterjs_editor_dom_1.splitBalancedNodeRange(parentLINode);\n                        }\n                        var wrappedContents = roosterjs_editor_dom_1.wrap(roosterjs_editor_dom_1.toArray(parentLINode.childNodes));\n                        var wrappedRange = roosterjs_editor_dom_1.createRange(wrappedContents, currentSelectionPath.start, currentSelectionPath.end);\n                        var wrappedSelectionPath = roosterjs_editor_dom_1.getSelectionPath(wrappedContents, wrappedRange);\n                        existingList.insertAdjacentElement('afterend', wrappedContents);\n                        editor.deleteNode(parentLINode);\n                        var newRange = roosterjs_editor_dom_1.createRange(wrappedContents, wrappedSelectionPath.start, wrappedSelectionPath.end);\n                        editor.select(newRange);\n                    }\n                    if (existingList.childElementCount == 0) {\n                        editor.deleteNode(existingList);\n                    }\n                }\n            }\n            else {\n                editor.getDocument().execCommand(command, false, null);\n            }\n        }\n        else {\n            editor.getDocument().execCommand(command, false, null);\n        }\n    }\n    else {\n        editor.getDocument().execCommand(command, false, null);\n    }\n    var newList = editor.getElementAtCursor('OL,UL');\n    if (newList == existingList) {\n        newList = null;\n    }\n    return newList;\n}\nexports.default = processList;\n//# sourceMappingURL=processList.js.map","import { Editor } from 'roosterjs-editor-core';\r\n\r\nimport { Base64Svgs } from '../resources/Images';\r\nimport * as Styles from '../scss/core.scss.g';\r\nimport { css } from '../utils/ReactUtil';\r\n\r\nexport interface ImageManagerInteface {\r\n    upload: (editor: Editor, image: File, forceFallbackAltValue?: boolean) => HTMLElement;\r\n    updatePlaceholders: (html: string) => UpdatePlaceholdersResult;\r\n}\r\n\r\nexport interface ImageManagerOptions {\r\n    uploadImage: (file: File) => Promise<string>;\r\n    createImagePlaceholder?: (editor: Editor, image: File) => HTMLImageElement;\r\n    placeholderImageClassName?: string;\r\n    fallbackAltValue?: string;\r\n}\r\n\r\nconst PlaceholderDataName = 'paste-image-placeholder-804b751e';\r\nexport const PlaceholderDataAttribute = `data-${PlaceholderDataName}`;\r\n\r\nexport function hasPlaceholder(html: string): boolean {\r\n    return html.indexOf(PlaceholderDataAttribute) > -1; // quick and dirty check\r\n}\r\n\r\nexport interface UpdatePlaceholdersResult {\r\n    resolvedAll: boolean;\r\n    html: string;\r\n}\r\n\r\nexport default class ImageManager implements ImageManagerInteface {\r\n    private static Id: number = 0;\r\n\r\n    private idToUrlImageCache: { [id: string]: string } = {};\r\n    private options: ImageManagerOptions;\r\n    private placeholderImageClasses: string[];\r\n\r\n    constructor(options: ImageManagerOptions) {\r\n        this.options = { ...options };\r\n        this.options.createImagePlaceholder = this.options.createImagePlaceholder || this.defaultCreateImagePlaceholder;\r\n        this.placeholderImageClasses = this.options.placeholderImageClassName ? this.options.placeholderImageClassName.split(' ') : undefined;\r\n    }\r\n\r\n    public upload(editor: Editor, image: File, forceFallbackAltValue?: boolean): HTMLImageElement {\r\n        if (!image || image.size === 0) {\r\n            return null;\r\n        }\r\n\r\n        const placeholder = this.options.createImagePlaceholder(editor, image);\r\n        if (placeholder === null) {\r\n            return null;\r\n        }\r\n\r\n        let altText = \"\";\r\n        if (forceFallbackAltValue) {\r\n            altText = this.options.fallbackAltValue;\r\n        } else {\r\n            altText = image.name || this.options.fallbackAltValue;\r\n        }\r\n\r\n        // note: add identification (to handle undo/redo scenarios)\r\n        const placeholdId = (ImageManager.Id++).toString(10);\r\n        placeholder.setAttribute(PlaceholderDataAttribute, placeholdId);\r\n\r\n        this.options.uploadImage(image).then(\r\n            (url: string) => {\r\n                // accepted, so replace the placeholder with final image\r\n                this.idToUrlImageCache[placeholdId] = url;\r\n\r\n                if (editor.isDisposed() || !editor.contains(placeholder)) {\r\n                    return;\r\n                }\r\n\r\n                this.replacePlaceholder(placeholder, url, editor, altText || \"Image\");\r\n                this.triggerChangeEvent(editor);\r\n            },\r\n            () => {\r\n                // rejected, so remove the placeholder\r\n                if (editor.isDisposed() || !editor.contains(placeholder)) {\r\n                    return;\r\n                }\r\n\r\n                this.idToUrlImageCache[placeholdId] = null;\r\n                this.removePlaceholder(placeholder, editor);\r\n                this.triggerChangeEvent(editor);\r\n            }\r\n        );\r\n\r\n        return placeholder;\r\n    }\r\n\r\n    public updatePlaceholders(html: string): UpdatePlaceholdersResult {\r\n        // example: <TAG data-paste-image-placeholder-804b751e=\"10\" />\r\n        const container = document.createElement('div');\r\n        container.innerHTML = html;\r\n        const placeholders = container.querySelectorAll(`[${PlaceholderDataAttribute}]`);\r\n        let resolvedAll = true;\r\n        for (let i = 0; i < placeholders.length; ++i) {\r\n            const placeholder = placeholders[i];\r\n            const id = placeholder.getAttribute(PlaceholderDataAttribute);\r\n            const url = this.idToUrlImageCache[id];\r\n            if (url === undefined) {\r\n                resolvedAll = false;\r\n                continue;\r\n            }\r\n\r\n            if (url === null) {\r\n                this.removePlaceholder(placeholder as HTMLElement);\r\n            } else {\r\n                this.replacePlaceholder(placeholder as HTMLElement, url);\r\n            }\r\n        }\r\n\r\n        return { html: container.innerHTML, resolvedAll };\r\n    }\r\n\r\n    private triggerChangeEvent(editor: Editor): void {\r\n        editor.triggerContentChangedEvent('ImageManager');\r\n    }\r\n\r\n    private removePlaceholder(placeholder: HTMLElement, editor?: Editor): void {\r\n        if (editor) {\r\n            editor.deleteNode(placeholder);\r\n            editor.addUndoSnapshot();\r\n        } else {\r\n            const parent = placeholder.parentNode;\r\n            if (parent) {\r\n                parent.removeChild(placeholder);\r\n            }\r\n        }\r\n    }\r\n\r\n    private replacePlaceholder(placeholder: HTMLElement, url: string, editor?: Editor, altText?: string): void {\r\n        // just update attributes if placeholder is already an image tag\r\n        let img: HTMLImageElement;\r\n        if (placeholder.tagName === 'IMG') {\r\n            img = placeholder as HTMLImageElement;\r\n            img.src = url;\r\n            img.classList.remove(Styles.roosterjsReactSpinner, ...this.placeholderImageClasses);\r\n            placeholder.removeAttribute(PlaceholderDataAttribute);\r\n            if (img.classList.length === 0) {\r\n                placeholder.removeAttribute('class');\r\n            }\r\n        } else {\r\n            const doc = editor ? editor.getDocument() : document; // editor can be null when called from updatePlaceholders\r\n\r\n            // create final IMG node\r\n            img = doc.createElement('img') as HTMLImageElement;\r\n            img.src = url;\r\n            if (editor) {\r\n                editor.replaceNode(placeholder, img);\r\n                editor.addUndoSnapshot();\r\n            } else {\r\n                doc.replaceChild(img, placeholder);\r\n            }\r\n        }\r\n\r\n        img.setAttribute(\"alt\", altText);\r\n    }\r\n\r\n    private defaultCreateImagePlaceholder = (editor: Editor, image: File): HTMLImageElement => {\r\n        if (editor.isDisposed()) {\r\n            return null;\r\n        }\r\n\r\n        const result = editor.getDocument().createElement('img') as HTMLImageElement;\r\n        result.src = Base64Svgs.RoosterJsReactSpinner;\r\n        result.className = css(Styles.roosterjsReactSpinner, this.options.placeholderImageClassName);\r\n\r\n        return result;\r\n    };\r\n}\r\n","module.exports = __WEBPACK_EXTERNAL_MODULE__53__;","module.exports = __WEBPACK_EXTERNAL_MODULE__54__;","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// This package is deprecated.\n// All exports here are just for backward compatibility.\n// Please use type from their real packages directly\nvar roosterjs_editor_dom_1 = require(\"roosterjs-editor-dom\");\nexports.HtmlSanitizer = roosterjs_editor_dom_1.HtmlSanitizer;\nexports.htmlToDom = roosterjs_editor_dom_1.htmlToDom;\nexports.splitWithFragment = roosterjs_editor_dom_1.splitWithFragment;\nexports.getInheritableStyles = roosterjs_editor_dom_1.getInheritableStyles;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar collapseNodes_1 = require(\"../utils/collapseNodes\");\nvar contains_1 = require(\"../utils/contains\");\nvar createRange_1 = require(\"../selection/createRange\");\nvar getTagOfNode_1 = require(\"../utils/getTagOfNode\");\nvar isBlockElement_1 = require(\"../utils/isBlockElement\");\nvar isNodeAfter_1 = require(\"../utils/isNodeAfter\");\nvar wrap_1 = require(\"../utils/wrap\");\nvar splitParentNode_1 = require(\"../utils/splitParentNode\");\nvar STRUCTURE_NODE_TAGS = ['TD', 'TH', 'LI', 'BLOCKQUOTE'];\n/**\n * This reprents a block that is identified by a start and end node\n * This is for cases like &lt;root&gt;Hello&lt;BR&gt;World&lt;/root&gt;\n * in that case, Hello&lt;BR&gt; is a block, World is another block\n * Such block cannot be represented by a NodeBlockElement since they don't chained up\n * to a single parent node, instead they have a start and end\n * This start and end must be in same sibling level and have same parent in DOM tree\n */\nvar StartEndBlockElement = /** @class */ (function () {\n    function StartEndBlockElement(rootNode, startNode, endNode) {\n        this.rootNode = rootNode;\n        this.startNode = startNode;\n        this.endNode = endNode;\n    }\n    StartEndBlockElement.getBlockContext = function (node) {\n        while (node && !isBlockElement_1.default(node)) {\n            node = node.parentNode;\n        }\n        return node;\n    };\n    /**\n     * Collapse this element to a single DOM element.\n     * If the content nodes are separated in different root nodes, wrap them to a single node\n     * If the content nodes are included in root node with other nodes, split root node\n     */\n    StartEndBlockElement.prototype.collapseToSingleElement = function () {\n        var nodes = collapseNodes_1.default(StartEndBlockElement.getBlockContext(this.startNode), this.startNode, this.endNode, true /*canSplitParent*/);\n        var blockContext = StartEndBlockElement.getBlockContext(this.startNode);\n        while (nodes[0] &&\n            nodes[0] != blockContext &&\n            nodes[0].parentNode != this.rootNode &&\n            STRUCTURE_NODE_TAGS.indexOf(getTagOfNode_1.default(nodes[0].parentNode)) < 0) {\n            nodes = [splitParentNode_1.splitBalancedNodeRange(nodes)];\n        }\n        return nodes.length == 1 && isBlockElement_1.default(nodes[0])\n            ? nodes[0]\n            : wrap_1.default(nodes);\n    };\n    /**\n     * Gets the start node\n     */\n    StartEndBlockElement.prototype.getStartNode = function () {\n        return this.startNode;\n    };\n    /**\n     * Gets the end node\n     */\n    StartEndBlockElement.prototype.getEndNode = function () {\n        return this.endNode;\n    };\n    /**\n     * Checks equals of two blocks\n     */\n    StartEndBlockElement.prototype.equals = function (blockElement) {\n        return (this.startNode == blockElement.getStartNode() &&\n            this.endNode == blockElement.getEndNode());\n    };\n    /**\n     * Checks if another block is after this current\n     */\n    StartEndBlockElement.prototype.isAfter = function (blockElement) {\n        return isNodeAfter_1.default(this.getStartNode(), blockElement.getEndNode());\n    };\n    /**\n     * Checks if an Html node is contained within the block\n     */\n    StartEndBlockElement.prototype.contains = function (node) {\n        return (contains_1.default(this.startNode, node, true /*treatSameNodeAsContain*/) ||\n            contains_1.default(this.endNode, node, true /*treatSameNodeAsContain*/) ||\n            (isNodeAfter_1.default(node, this.startNode) && isNodeAfter_1.default(this.endNode, node)));\n    };\n    /**\n     * Get the text content of this block element\n     */\n    StartEndBlockElement.prototype.getTextContent = function () {\n        var range = createRange_1.default(this.getStartNode(), this.getEndNode());\n        return range ? range.toString() : '';\n    };\n    return StartEndBlockElement;\n}());\nexports.default = StartEndBlockElement;\n//# sourceMappingURL=StartEndBlockElement.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar toArray_1 = require(\"./toArray\");\n/**\n * Creates an HTML node array from html\n * @param html the html string to create HTML elements from\n * @param ownerDocument Owner document of the result HTML elements\n * @returns An HTML node array to represent the given html string\n */\nfunction fromHtml(html, ownerDocument) {\n    var element = ownerDocument.createElement('DIV');\n    element.innerHTML = html;\n    return toArray_1.default(element.childNodes);\n}\nexports.default = fromHtml;\n//# sourceMappingURL=fromHtml.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar getBlockElementAtNode_1 = require(\"./getBlockElementAtNode\");\n/**\n * Get the first/last BlockElement of under the root node.\n * If no suitable BlockElement found, returns null\n * @param rootNode The root node to get BlockElement from\n * @param isFirst True to get first BlockElement, false to get last BlockElement\n */\nfunction getFirstLastBlockElement(rootNode, isFirst) {\n    var node = rootNode;\n    do {\n        node = node && (isFirst ? node.firstChild : node.lastChild);\n    } while (node && node.firstChild);\n    return node && getBlockElementAtNode_1.default(rootNode, node);\n}\nexports.default = getFirstLastBlockElement;\n/**\n * Get the first BlockElement of under the root node.\n * If no suitable BlockElement found, returns null\n * @param rootNode The root node to get BlockElement from\n */\nfunction getFirstBlockElement(rootNode) {\n    return getFirstLastBlockElement(rootNode, true /*isFirst*/);\n}\nexports.getFirstBlockElement = getFirstBlockElement;\n/**\n * Get the last BlockElement of under the root node.\n * If no suitable BlockElement found, returns null\n * @param rootNode The root node to get BlockElement from\n */\nfunction getLastBlockElement(rootNode) {\n    return getFirstLastBlockElement(rootNode, false /*isFirst*/);\n}\nexports.getLastBlockElement = getLastBlockElement;\n//# sourceMappingURL=getFirstLastBlockElement.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar NodeInlineElement_1 = require(\"./NodeInlineElement\");\n/**\n * This is an inline element representing an Html image\n */\nvar ImageInlineElement = /** @class */ (function (_super) {\n    __extends(ImageInlineElement, _super);\n    function ImageInlineElement(containerNode, parentBlock) {\n        return _super.call(this, containerNode, parentBlock) || this;\n    }\n    return ImageInlineElement;\n}(NodeInlineElement_1.default));\nexports.default = ImageInlineElement;\n//# sourceMappingURL=ImageInlineElement.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar NodeInlineElement_1 = require(\"./NodeInlineElement\");\n/**\n * This is inline element presenting an html hyperlink\n */\nvar LinkInlineElement = /** @class */ (function (_super) {\n    __extends(LinkInlineElement, _super);\n    function LinkInlineElement(containerNode, parentBlock) {\n        return _super.call(this, containerNode, parentBlock) || this;\n    }\n    return LinkInlineElement;\n}(NodeInlineElement_1.default));\nexports.default = LinkInlineElement;\n//# sourceMappingURL=LinkInlineElement.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar getInlineElementAtNode_1 = require(\"./getInlineElementAtNode\");\nvar getLeafNode_1 = require(\"../utils/getLeafNode\");\n/**\n * Get the first inline element inside the given node\n */\nfunction getFirstInlineElement(rootNode) {\n    // getFirstLeafNode can return null for empty container\n    // do check null before passing on to get inline from the node\n    var node = getLeafNode_1.getFirstLeafNode(rootNode);\n    return node ? getInlineElementAtNode_1.default(rootNode, node) : null;\n}\nexports.getFirstInlineElement = getFirstInlineElement;\n/**\n * Get the last inline element inside the given node\n */\nfunction getLastInlineElement(rootNode) {\n    // getLastLeafNode can return null for empty container\n    // do check null before passing on to get inline from the node\n    var node = getLeafNode_1.getLastLeafNode(rootNode);\n    return node ? getInlineElementAtNode_1.default(rootNode, node) : null;\n}\nexports.getLastInlineElement = getLastInlineElement;\n//# sourceMappingURL=getFirstLastInlineElement.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar shouldSkipNode_1 = require(\"./shouldSkipNode\");\nvar getLeafSibling_1 = require(\"./getLeafSibling\");\n/**\n * Get first/last leaf node of the given root node.\n * @param rootNode Root node to get leaf node from\n * @param isFirst True to get first leaf node, false to get last leaf node\n */\nfunction getLeafNode(rootNode, isFirst) {\n    var getChild = function (node) { return (isFirst ? node.firstChild : node.lastChild); };\n    var result = getChild(rootNode);\n    while (result && getChild(result)) {\n        result = getChild(result);\n    }\n    if (result && shouldSkipNode_1.default(result)) {\n        result = getLeafSibling_1.getLeafSibling(rootNode, result, isFirst);\n    }\n    return result;\n}\n/**\n * Get the first meaningful leaf node\n * @param rootNode Root node to get leaf node from\n */\nfunction getFirstLeafNode(rootNode) {\n    return getLeafNode(rootNode, true /*isFirst*/);\n}\nexports.getFirstLeafNode = getFirstLeafNode;\n/**\n * Get the last meaningful leaf node\n * @param rootNode Root node to get leaf node from\n */\nfunction getLastLeafNode(rootNode) {\n    return getLeafNode(rootNode, false /*isFirst*/);\n}\nexports.getLastLeafNode = getLastLeafNode;\n//# sourceMappingURL=getLeafNode.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Represents an empty InlineElement.\n * This is used for ContentTraverser internally only.\n * An empty InlineElement means current position is at the end of a tag so nothing is included inside this element\n */\nvar EmptyInlineElement = /** @class */ (function () {\n    function EmptyInlineElement(position, parentBlock) {\n        this.position = position;\n        this.parentBlock = parentBlock;\n    }\n    /**\n     * Get the text content of this inline element\n     */\n    EmptyInlineElement.prototype.getTextContent = function () {\n        return '';\n    };\n    /**\n     * Get the container node of this inline element\n     */\n    EmptyInlineElement.prototype.getContainerNode = function () {\n        return this.position.node;\n    };\n    /**\n     * Get the parent block element of this inline element\n     */\n    EmptyInlineElement.prototype.getParentBlock = function () {\n        return this.parentBlock;\n    };\n    /**\n     * Get the start position of this inline element\n     */\n    EmptyInlineElement.prototype.getStartPosition = function () {\n        return this.position;\n    };\n    /**\n     * Get the end position of this inline element\n     */\n    EmptyInlineElement.prototype.getEndPosition = function () {\n        return this.position;\n    };\n    /**\n     * Checks if the given inline element is after this inline element\n     */\n    EmptyInlineElement.prototype.isAfter = function (inlineElement) {\n        return inlineElement && this.position.isAfter(inlineElement.getEndPosition());\n    };\n    /**\n     * Checks if this inline element is a textual inline element\n     */\n    EmptyInlineElement.prototype.isTextualInlineElement = function () {\n        return false;\n    };\n    /**\n     * Checks if the given editor position is contained in this inline element\n     */\n    EmptyInlineElement.prototype.contains = function (position) {\n        return false;\n    };\n    /**\n     * Apply inline style to a region of an inline element.\n     */\n    EmptyInlineElement.prototype.applyStyle = function (styler) { };\n    return EmptyInlineElement;\n}());\nexports.default = EmptyInlineElement;\n//# sourceMappingURL=EmptyInlineElement.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Get current browser information from user agent string\n * @param userAgent The userAgent string of a browser\n * @param appVersion The appVersion string of a browser\n * @returns The BrowserInfo object calculated from the given userAgent and appVersion\n */\nfunction getBrowserInfo(userAgent, appVersion) {\n    // checks whether the browser is running in IE\n    // IE11 will use rv in UA instead of MSIE. Unfortunately Firefox also uses this. We should also look for \"Trident\" to confirm this.\n    // There have been cases where companies using older version of IE and custom UserAgents have broken this logic (e.g. IE 10 and KellyServices)\n    // therefore we should check that the Trident/rv combo is not just from an older IE browser\n    var isIE11OrGreater = userAgent.indexOf('rv:') != -1 && userAgent.indexOf('Trident') != -1;\n    var isIE = userAgent.indexOf('MSIE') != -1 || isIE11OrGreater;\n    // IE11+ may also have 'Chrome', 'Firefox' and 'Safari' in user agent. But it will have 'trident' as well\n    var isChrome = false;\n    var isFirefox = false;\n    var isSafari = false;\n    var isEdge = false;\n    var isWebKit = userAgent.indexOf('WebKit') != -1;\n    if (!isIE) {\n        isChrome = userAgent.indexOf('Chrome') != -1;\n        isFirefox = userAgent.indexOf('Firefox') != -1;\n        if (userAgent.indexOf('Safari') != -1) {\n            // Android and Chrome have Safari in the user string\n            isSafari = userAgent.indexOf('Chrome') == -1 && userAgent.indexOf('Android') == -1;\n        }\n        // Sample Edge UA: Mozilla/5.0 (Windows NT 10.0) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/42.0.2311.135 Safari/537.36 Edge/12.10121\n        isEdge = userAgent.indexOf('Edge') != -1;\n        // When it is edge, it should not be chrome or firefox. and it is also not webkit\n        if (isEdge) {\n            isWebKit = isChrome = isFirefox = false;\n        }\n    }\n    var isMac = appVersion.indexOf('Mac') != -1;\n    var isWin = appVersion.indexOf('Win') != -1 || appVersion.indexOf('NT') != -1;\n    return {\n        isMac: isMac,\n        isWin: isWin,\n        isWebKit: isWebKit,\n        isIE: isIE,\n        isIE11OrGreater: isIE11OrGreater,\n        isSafari: isSafari,\n        isChrome: isChrome,\n        isFirefox: isFirefox,\n        isEdge: isEdge,\n        isIEOrEdge: isIE || isEdge,\n    };\n}\nexports.getBrowserInfo = getBrowserInfo;\n/**\n * Browser object contains browser and operating system informations of current environment\n */\nexports.Browser = window\n    ? getBrowserInfo(window.navigator.userAgent, window.navigator.appVersion)\n    : {};\n//# sourceMappingURL=Browser.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar contains_1 = require(\"../utils/contains\");\nvar getTagOfNode_1 = require(\"../utils/getTagOfNode\");\nvar isNodeEmpty_1 = require(\"../utils/isNodeEmpty\");\n/**\n * Check if this position is at beginning of the given node.\n * This will return true if all nodes between the beginning of target node and the position are empty.\n * @param position The position to check\n * @param targetNode The node to check\n * @returns True if position is at beginning of the node, otherwise false\n */\nfunction isPositionAtBeginningOf(position, targetNode) {\n    if (position) {\n        var _a = position.normalize(), node = _a.node, offset = _a.offset;\n        if (offset == 0) {\n            while (contains_1.default(targetNode, node) && areAllPrevousNodesEmpty(node)) {\n                node = node.parentNode;\n            }\n            return node == targetNode;\n        }\n    }\n    return false;\n}\nexports.default = isPositionAtBeginningOf;\nfunction areAllPrevousNodesEmpty(node) {\n    while (node.previousSibling) {\n        node = node.previousSibling;\n        if (getTagOfNode_1.default(node) == 'BR' || !isNodeEmpty_1.default(node)) {\n            return false;\n        }\n    }\n    return true;\n}\n//# sourceMappingURL=isPositionAtBeginningOf.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar isHTMLTableCellElement_1 = require(\"../typeUtils/isHTMLTableCellElement\");\nvar isHTMLTableElement_1 = require(\"../typeUtils/isHTMLTableElement\");\nvar roosterjs_editor_dom_1 = require(\"roosterjs-editor-dom\");\n/**\n * A virtual table class, represent an HTML table, by expand all merged cells to each separated cells\n */\nvar VTable = /** @class */ (function () {\n    /**\n     * Create a new instance of VTable object using HTML TABLE or TD node\n     * @param node The HTML Table or TD node\n     */\n    function VTable(node) {\n        var _this = this;\n        this.trs = [];\n        this.table = isHTMLTableElement_1.default(node) ? node : getTableFromTd(node);\n        if (this.table) {\n            var currentTd_1 = isHTMLTableElement_1.default(node) ? null : node;\n            var trs = roosterjs_editor_dom_1.toArray(this.table.rows);\n            this.cells = trs.map(function (row) { return []; });\n            trs.forEach(function (tr, rowIndex) {\n                _this.trs[rowIndex % 2] = tr;\n                for (var sourceCol = 0, targetCol = 0; sourceCol < tr.cells.length; sourceCol++) {\n                    // Skip the cells which already initialized\n                    for (; _this.cells[rowIndex][targetCol]; targetCol++) { }\n                    var td = tr.cells[sourceCol];\n                    if (td == currentTd_1) {\n                        _this.col = targetCol;\n                        _this.row = rowIndex;\n                    }\n                    for (var colSpan = 0; colSpan < td.colSpan; colSpan++, targetCol++) {\n                        for (var rowSpan = 0; rowSpan < td.rowSpan; rowSpan++) {\n                            _this.cells[rowIndex + rowSpan][targetCol] = {\n                                td: colSpan + rowSpan == 0 ? td : null,\n                                spanLeft: colSpan > 0,\n                                spanAbove: rowSpan > 0,\n                            };\n                        }\n                    }\n                }\n            });\n        }\n    }\n    /**\n     * Write the virtual table back to DOM tree to represent the change of VTable\n     */\n    VTable.prototype.writeBack = function () {\n        var _this = this;\n        if (this.cells) {\n            moveChildren(this.table);\n            this.cells.forEach(function (row, r) {\n                var tr = cloneNode(_this.trs[r % 2] || _this.trs[0]);\n                _this.table.appendChild(tr);\n                row.forEach(function (cell, c) {\n                    if (cell.td) {\n                        _this.recalcSpans(r, c);\n                        tr.appendChild(cell.td);\n                    }\n                });\n            });\n        }\n        else if (this.table) {\n            this.table.parentNode.removeChild(this.table);\n        }\n    };\n    /**\n     * Apply the given table format to this virtual table\n     * @param format Table format to apply\n     */\n    VTable.prototype.applyFormat = function (format) {\n        if (!format || !this.table) {\n            return;\n        }\n        this.table.style.borderCollapse = 'collapse';\n        this.trs[0].style.backgroundColor = format.bgColorOdd || 'transparent';\n        if (this.trs[1]) {\n            this.trs[1].style.backgroundColor = format.bgColorEven || 'transparent';\n        }\n        this.cells.forEach(function (row) {\n            return row\n                .filter(function (cell) { return cell.td; })\n                .forEach(function (cell) {\n                cell.td.style.borderTop = getBorderStyle(format.topBorderColor);\n                cell.td.style.borderBottom = getBorderStyle(format.bottomBorderColor);\n                cell.td.style.borderLeft = getBorderStyle(format.verticalBorderColor);\n                cell.td.style.borderRight = getBorderStyle(format.verticalBorderColor);\n            });\n        });\n    };\n    /**\n     * Edit table with given operation.\n     * @param operation Table operation\n     */\n    VTable.prototype.edit = function (operation) {\n        var _this = this;\n        if (!this.table) {\n            return;\n        }\n        var currentRow = this.cells[this.row];\n        var currentCell = currentRow[this.col];\n        switch (operation) {\n            case 0 /* InsertAbove */:\n                this.cells.splice(this.row, 0, currentRow.map(cloneCell));\n                break;\n            case 1 /* InsertBelow */:\n                var newRow_1 = this.row + this.countSpanAbove(this.row, this.col);\n                this.cells.splice(newRow_1, 0, this.cells[newRow_1 - 1].map(function (cell, colIndex) {\n                    var nextCell = _this.getCell(newRow_1, colIndex);\n                    if (nextCell.spanAbove) {\n                        return cloneCell(nextCell);\n                    }\n                    else if (cell.spanLeft) {\n                        var newCell = cloneCell(cell);\n                        newCell.spanAbove = false;\n                        return newCell;\n                    }\n                    else {\n                        return {\n                            td: cloneNode(_this.getTd(_this.row, colIndex)),\n                        };\n                    }\n                }));\n                break;\n            case 2 /* InsertLeft */:\n                this.forEachCellOfCurrentColumn(function (cell, row) {\n                    row.splice(_this.col, 0, cloneCell(cell));\n                });\n                break;\n            case 3 /* InsertRight */:\n                var newCol_1 = this.col + this.countSpanLeft(this.row, this.col);\n                this.forEachCellOfColumn(newCol_1 - 1, function (cell, row, i) {\n                    var nextCell = _this.getCell(i, newCol_1);\n                    var newCell;\n                    if (nextCell.spanLeft) {\n                        newCell = cloneCell(nextCell);\n                    }\n                    else if (cell.spanAbove) {\n                        newCell = cloneCell(cell);\n                        newCell.spanLeft = false;\n                    }\n                    else {\n                        newCell = {\n                            td: cloneNode(_this.getTd(i, _this.col)),\n                        };\n                    }\n                    row.splice(newCol_1, 0, newCell);\n                });\n                break;\n            case 6 /* DeleteRow */:\n                this.forEachCellOfCurrentRow(function (cell, i) {\n                    var nextCell = _this.getCell(_this.row + 1, i);\n                    if (cell.td && cell.td.rowSpan > 1 && nextCell.spanAbove) {\n                        nextCell.td = cell.td;\n                    }\n                });\n                this.cells.splice(this.row, 1);\n                break;\n            case 5 /* DeleteColumn */:\n                this.forEachCellOfCurrentColumn(function (cell, row, i) {\n                    var nextCell = _this.getCell(i, _this.col + 1);\n                    if (cell.td && cell.td.colSpan > 1 && nextCell.spanLeft) {\n                        nextCell.td = cell.td;\n                    }\n                    row.splice(_this.col, 1);\n                });\n                break;\n            case 7 /* MergeAbove */:\n            case 8 /* MergeBelow */:\n                var rowStep = operation == 7 /* MergeAbove */ ? -1 : 1;\n                for (var rowIndex = this.row + rowStep; rowIndex >= 0 && rowIndex < this.cells.length; rowIndex += rowStep) {\n                    var cell = this.getCell(rowIndex, this.col);\n                    if (cell.td && !cell.spanAbove) {\n                        var aboveCell = rowIndex < this.row ? cell : currentCell;\n                        var belowCell = rowIndex < this.row ? currentCell : cell;\n                        if (aboveCell.td.colSpan == belowCell.td.colSpan) {\n                            moveChildren(belowCell.td, aboveCell.td);\n                            belowCell.td = null;\n                            belowCell.spanAbove = true;\n                        }\n                        break;\n                    }\n                }\n                break;\n            case 9 /* MergeLeft */:\n            case 10 /* MergeRight */:\n                var colStep = operation == 9 /* MergeLeft */ ? -1 : 1;\n                for (var colIndex = this.col + colStep; colIndex >= 0 && colIndex < this.cells[this.row].length; colIndex += colStep) {\n                    var cell = this.getCell(this.row, colIndex);\n                    if (cell.td && !cell.spanLeft) {\n                        var leftCell = colIndex < this.col ? cell : currentCell;\n                        var rightCell = colIndex < this.col ? currentCell : cell;\n                        if (leftCell.td.rowSpan == rightCell.td.rowSpan) {\n                            moveChildren(rightCell.td, leftCell.td);\n                            rightCell.td = null;\n                            rightCell.spanLeft = true;\n                        }\n                        break;\n                    }\n                }\n                break;\n            case 4 /* DeleteTable */:\n                this.cells = null;\n                break;\n            case 12 /* SplitVertically */:\n                if (currentCell.td.rowSpan > 1) {\n                    this.getCell(this.row + 1, this.col).td = cloneNode(currentCell.td);\n                }\n                else {\n                    var splitRow = currentRow.map(function (cell) {\n                        return {\n                            td: cell == currentCell ? cloneNode(cell.td) : null,\n                            spanAbove: cell != currentCell,\n                            spanLeft: cell.spanLeft,\n                        };\n                    });\n                    this.cells.splice(this.row + 1, 0, splitRow);\n                }\n                break;\n            case 11 /* SplitHorizontally */:\n                if (currentCell.td.colSpan > 1) {\n                    this.getCell(this.row, this.col + 1).td = cloneNode(currentCell.td);\n                }\n                else {\n                    this.forEachCellOfCurrentColumn(function (cell, row) {\n                        row.splice(_this.col + 1, 0, {\n                            td: row == currentRow ? cloneNode(cell.td) : null,\n                            spanAbove: cell.spanAbove,\n                            spanLeft: row != currentRow,\n                        });\n                    });\n                }\n                break;\n        }\n    };\n    /**\n     * Loop each cell of current column and invoke a callback function\n     * @param callback The callback function to invoke\n     */\n    VTable.prototype.forEachCellOfCurrentColumn = function (callback) {\n        this.forEachCellOfColumn(this.col, callback);\n    };\n    /**\n     * Loop each cell of current row and invoke a callback function\n     * @param callback The callback function to invoke\n     */\n    VTable.prototype.forEachCellOfCurrentRow = function (callback) {\n        this.forEachCellOfRow(this.row, callback);\n    };\n    /**\n     * Get a table cell using its row and column index. This function will always return an object\n     * even if the given indexes don't exist in table.\n     * @param row The row index\n     * @param col The column index\n     */\n    VTable.prototype.getCell = function (row, col) {\n        return (this.cells && this.cells[row] && this.cells[row][col]) || {};\n    };\n    /**\n     * Get current HTML table cell object. If the current table cell is a virtual expanded cell, return its root cell\n     */\n    VTable.prototype.getCurrentTd = function () {\n        return this.getTd(this.row, this.col);\n    };\n    VTable.prototype.getTd = function (row, col) {\n        if (this.cells) {\n            row = Math.min(this.cells.length - 1, row);\n            col = this.cells[row] ? Math.min(this.cells[row].length - 1, col) : col;\n            if (!isNaN(row) && !isNaN(col)) {\n                while (row >= 0 && col >= 0) {\n                    var cell = this.getCell(row, col);\n                    if (cell.td) {\n                        return cell.td;\n                    }\n                    else if (cell.spanLeft) {\n                        col--;\n                    }\n                    else if (cell.spanAbove) {\n                        row--;\n                    }\n                    else {\n                        break;\n                    }\n                }\n            }\n        }\n        return null;\n    };\n    VTable.prototype.forEachCellOfColumn = function (col, callback) {\n        for (var i = 0; i < this.cells.length; i++) {\n            callback(this.getCell(i, col), this.cells[i], i);\n        }\n    };\n    VTable.prototype.forEachCellOfRow = function (row, callback) {\n        for (var i = 0; i < this.cells[row].length; i++) {\n            callback(this.getCell(row, i), i);\n        }\n    };\n    VTable.prototype.recalcSpans = function (row, col) {\n        var td = this.getCell(row, col).td;\n        if (td) {\n            td.colSpan = this.countSpanLeft(row, col);\n            td.rowSpan = this.countSpanAbove(row, col);\n            if (td.colSpan == 1) {\n                td.removeAttribute('colSpan');\n            }\n            if (td.rowSpan == 1) {\n                td.removeAttribute('rowSpan');\n            }\n        }\n    };\n    VTable.prototype.countSpanLeft = function (row, col) {\n        var result = 1;\n        for (var i = col + 1; i < this.cells[row].length; i++) {\n            var cell = this.getCell(row, i);\n            if (cell.td || !cell.spanLeft) {\n                break;\n            }\n            result++;\n        }\n        return result;\n    };\n    VTable.prototype.countSpanAbove = function (row, col) {\n        var result = 1;\n        for (var i = row + 1; i < this.cells.length; i++) {\n            var cell = this.getCell(i, col);\n            if (cell.td || !cell.spanAbove) {\n                break;\n            }\n            result++;\n        }\n        return result;\n    };\n    return VTable;\n}());\nexports.default = VTable;\nfunction getTableFromTd(td) {\n    var result = td;\n    for (; result && result.tagName != 'TABLE'; result = result.parentElement) { }\n    return result;\n}\nfunction getBorderStyle(style) {\n    return 'solid 1px ' + (style || 'transparent');\n}\n/**\n * Clone a table cell\n * @param cell The cell to clone\n */\nfunction cloneCell(cell) {\n    return {\n        td: cloneNode(cell.td),\n        spanAbove: cell.spanAbove,\n        spanLeft: cell.spanLeft,\n    };\n}\n/**\n * Clone a node without its children.\n * @param node The node to clone\n */\nfunction cloneNode(node) {\n    var newNode = node ? node.cloneNode(false /*deep*/) : null;\n    if (isHTMLTableCellElement_1.default(newNode)) {\n        newNode.removeAttribute('id');\n        if (!newNode.firstChild) {\n            newNode.appendChild(node.ownerDocument.createElement('br'));\n        }\n    }\n    return newNode;\n}\n/**\n * Move all children from one node to another\n * @param fromNode The source node to move children from\n * @param toNode Target node. If not passed, children nodes of source node will be removed\n */\nfunction moveChildren(fromNode, toNode) {\n    while (fromNode.firstChild) {\n        if (toNode) {\n            toNode.appendChild(fromNode.firstChild);\n        }\n        else {\n            fromNode.removeChild(fromNode.firstChild);\n        }\n    }\n}\n//# sourceMappingURL=VTable.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar safeInstanceOf_1 = require(\"./safeInstanceOf\");\n/**\n * Check if the given object is HTMLTableCellElement\n * @param obj The object to check\n */\nfunction isHTMLTableCellElement(obj) {\n    return safeInstanceOf_1.default(obj, 'HTMLTableCellElement');\n}\nexports.default = isHTMLTableCellElement;\n//# sourceMappingURL=isHTMLTableCellElement.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar safeInstanceOf_1 = require(\"./safeInstanceOf\");\n/**\n * Check if the given object is HTMLTableElement\n * @param obj The object to check\n */\nfunction isHTMLTableElement(obj) {\n    return safeInstanceOf_1.default(obj, 'HTMLTableElement');\n}\nexports.default = isHTMLTableElement;\n//# sourceMappingURL=isHTMLTableElement.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * A ClientRect of all 0 is possible. i.e. chrome returns a ClientRect of 0 when the cursor is on an empty p\n * We validate that and only return a rect when the passed in ClientRect is valid\n */\nfunction normalizeRect(clientRect) {\n    var _a = clientRect || { left: 0, right: 0, top: 0, bottom: 0 }, left = _a.left, right = _a.right, top = _a.top, bottom = _a.bottom;\n    return left + right + top + bottom > 0\n        ? {\n            left: Math.round(left),\n            right: Math.round(right),\n            top: Math.round(top),\n            bottom: Math.round(bottom),\n        }\n        : null;\n}\nexports.default = normalizeRect;\n//# sourceMappingURL=normalizeRect.js.map","\"use strict\";\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n            r[k] = a[j];\n    return r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar changeElementTag_1 = require(\"../utils/changeElementTag\");\nvar getListTypeFromNode_1 = require(\"./getListTypeFromNode\");\nvar getTagOfNode_1 = require(\"../utils/getTagOfNode\");\nvar isBlockElement_1 = require(\"../utils/isBlockElement\");\nvar isNodeEmpty_1 = require(\"../utils/isNodeEmpty\");\nvar Position_1 = require(\"../selection/Position\");\nvar queryElements_1 = require(\"../utils/queryElements\");\nvar splitParentNode_1 = require(\"../utils/splitParentNode\");\nvar toArray_1 = require(\"../utils/toArray\");\nvar unwrap_1 = require(\"../utils/unwrap\");\nvar VListItem_1 = require(\"./VListItem\");\nvar wrap_1 = require(\"../utils/wrap\");\n/**\n * Represent a bullet or a numbering list\n *\n * @example\n * A VList is a logical representation of list items, it contains an item array with node and list type stack.\n * e.g. We have a list like this\n * ```html\n * <ol>\n *   <li>item 1</li>\n *   <li>item 2</li>\n *   <ul>\n *     <li>item 2.1</li>\n *     <li>item 2.2</li>\n *   <ul>\n * </ol>\n * ```\n *\n * A VList of this list will be like this:\n * ```javascript\n * {\n *   rootList: (OL node),\n *   items: [{\n *       node: (LI node with 'item 1'),\n *       listTypes: [null, OL],\n *     }, {\n *       node: (LI node with 'item 2'),\n *       listTypes: [null, OL],\n *     }, {\n *       node: (LI node with 'item 2.1),\n *       listTypes: [null, OL, UL],\n *     }, {\n *       node: (LI node with 'item 2.2'),\n *       listTypes: [null, OL, UL],\n *     }\n *   ]\n * }\n * ```\n *\n * When we want to outdent item 2.1, we just need to remove the last \"UL\" from listTypes of item 2.1, then\n * the writeBack() function will handle everything related to DOM change\n */\nvar VList = /** @class */ (function () {\n    /**\n     * Create a new instance of VList class\n     * @param rootList The root list element, can be either OL or UL tag\n     */\n    function VList(rootList) {\n        this.rootList = rootList;\n        this.items = [];\n        if (!rootList) {\n            throw new Error('rootList must not be null');\n        }\n        // Before populate items, we need to normalize the list to make sure it is in a correct format\n        // otherwise further action may mass thing up.\n        //\n        // There are two kinds of normalization to perform.\n        // 1. Move nodes directly under OL/UL into a LI node, unless it is an orphan node\n        // Please see comment for VListItem.isOrphanItem() for more information about orphan node\n        // e.g.:\n        // ```HTML\n        // <ol>\n        //   <li>item 1</li>\n        //   <div>item 2</div>\n        // </ol>\n        // ```\n        // After this step, it should become:\n        // ```html\n        // <ol>\n        //   <li>item 1\n        //     <div>item 2</div>\n        //   <li>\n        // </ol>\n        // ```\n        moveChildNodesToLi(this.rootList);\n        queryElements_1.default(this.rootList, 'ol,ul', moveChildNodesToLi);\n        // 2. Move LI node embeded into another LI node out to directly under OL/UL node\n        // Ideally browser we do this for us automatically when out the HTML into DOM. However after\n        // step 1, it is possible that we move some LI node into another one. e.g:\n        // ```HTML\n        // <ol>\n        //   <li>item 1</li>\n        //   <div>\n        //     item 1.1\n        //     <li>item 3</li>\n        //   </div>\n        // </ol>\n        // ```\n        // See that the second LI tag is not directly under OL, so after step 1, this will become:\n        // ```html\n        // <ol>\n        //   <li>item 1\n        //     <div>\n        //       item 1.1\n        //       <li>item 2</li>\n        //     </div>\n        //   <li>\n        // </ol>\n        // ```\n        // Now we have a LI tag embeded into another LI tag. So we need step 2 to move the inner LI tag out to be:\n        // ```html\n        // <ol>\n        //   <li>item1\n        //     <div>item 1.1</div>\n        //   </li>\n        //   <li><div>item2</div></li>\n        // </ol>\n        // ```\n        queryElements_1.default(this.rootList, 'li', moveLiToList);\n        this.populateItems(this.rootList);\n    }\n    /**\n     * Check if this list contains the given node\n     * @param node The node to check\n     */\n    VList.prototype.contains = function (node) {\n        // We don't check if the node is contained by this.rootList here, because after some operation,\n        // it is possible a node is logically contained by this list but the container list item hasn't\n        // been put under this.rootList in DOM tree yet.\n        return this.items.some(function (item) { return item.contains(node); });\n    };\n    /**\n     * Get the first or last node of this list\n     * @param isLast true to get last node, false to get first node\n     */\n    VList.prototype.getFirstOrLastNode = function (isLast) {\n        var item = this.items[isLast ? this.items.length - 1 : 0];\n        return item === null || item === void 0 ? void 0 : item.getNode();\n    };\n    /**\n     * Write the result back into DOM tree\n     * After that, this VList becomes unavailable because we set this.rootList to null\n     */\n    VList.prototype.writeBack = function () {\n        if (!this.rootList) {\n            throw new Error('rootList must not be null');\n        }\n        var listStack = [this.rootList.ownerDocument.createDocumentFragment()];\n        this.items.forEach(function (item) { return item.writeBack(listStack); });\n        this.rootList.parentNode.replaceChild(listStack[0], this.rootList);\n        // Set rootList to null to avoid this to be called again for the same VList, because\n        // after change the rootList may not be available any more (e.g. outdent all items).\n        this.rootList = null;\n    };\n    /**\n     * Set indentation of the given range of this list\n     * @param start Start position to operate from\n     * @param end End positon to operate to\n     * @param indentation Indent or outdent\n     */\n    VList.prototype.setIndentation = function (start, end, indentation) {\n        this.findListItems(start, end, function (item) {\n            return indentation == 1 /* Decrease */ ? item.outdent() : item.indent();\n        });\n    };\n    /**\n     * Change list type of the given range of this list.\n     * If some of the items are not real list item yet, this will make them to be list item with given type\n     * If all items in the given range are already in the type to change to, this becomes an outdent operation\n     * @param start Start position to operate from\n     * @param end End position to operate to\n     * @param targetType Target list type\n     */\n    VList.prototype.changeListType = function (start, end, targetType) {\n        var needChangeType = false;\n        this.findListItems(start, end, function (item) {\n            needChangeType = needChangeType || item.getListType() != targetType;\n        });\n        this.findListItems(start, end, function (item) {\n            return needChangeType ? item.changeListType(targetType) : item.outdent();\n        });\n    };\n    /**\n     * Append a new item to this VList\n     * @param node node of the item to append. If it is not wrapped with LI tag, it will be wrapped\n     * @param type Type of this list item, can be ListType.None\n     */\n    VList.prototype.appendItem = function (node, type) {\n        var newListNode = node;\n        var nodeTag = getTagOfNode_1.default(node);\n        if (nodeTag != 'LI' && nodeTag != 'TABLE') {\n            newListNode = changeElementTag_1.default(node, 'LI');\n        }\n        else if (nodeTag == 'TABLE') {\n            newListNode = wrap_1.default(node, 'li');\n        }\n        this.items.push(type == 0 /* None */ ? new VListItem_1.default(newListNode) : new VListItem_1.default(newListNode, type));\n    };\n    /**\n     * Merge the given VList into current VList.\n     * - All list items will be removed from the given VList and added into this list.\n     * - The root node of the given VList will be removed from DOM tree\n     * - If there are orphan items in the given VList, they will be merged into the last item\n     *   of this list if any.\n     * @param list The vList to merge from\n     */\n    VList.prototype.mergeVList = function (list) {\n        var _this = this;\n        var _a;\n        if (list && list != this) {\n            var originalLength = this.items.length;\n            list.items.forEach(function (item) { return _this.items.push(item); });\n            list.items.splice(0, list.items.length);\n            this.mergeOrphanNodesAfter(originalLength - 1);\n            (_a = list.rootList.parentNode) === null || _a === void 0 ? void 0 : _a.removeChild(list.rootList);\n        }\n    };\n    VList.prototype.mergeOrphanNodesAfter = function (startIndex) {\n        var item = this.items[startIndex];\n        if (item && !item.isOrphanItem()) {\n            for (var i = startIndex + 1; i <= this.items.length; i++) {\n                if (!item || !item.canMerge(this.items[i])) {\n                    item.mergeItems(this.items.splice(startIndex + 1, i - startIndex - 1));\n                    break;\n                }\n            }\n        }\n    };\n    VList.prototype.findListItems = function (start, end, callback) {\n        if (this.items.length == 0) {\n            return [];\n        }\n        var listStartPos = new Position_1.default(this.items[0].getNode(), 0 /* Begin */);\n        var listEndPos = new Position_1.default(this.items[this.items.length - 1].getNode(), -1 /* End */);\n        var startIndex = listStartPos.isAfter(start) ? 0 : -1;\n        var endIndex = this.items.length - (end.isAfter(listEndPos) ? 1 : 0);\n        this.items.forEach(function (item, index) {\n            startIndex = item.contains(start.node) ? index : startIndex;\n            endIndex = item.contains(end.node) ? index : endIndex;\n        });\n        startIndex = endIndex < this.items.length ? Math.max(0, startIndex) : startIndex;\n        endIndex = startIndex >= 0 ? Math.min(this.items.length - 1, endIndex) : endIndex;\n        var result = startIndex <= endIndex ? this.items.slice(startIndex, endIndex + 1) : [];\n        if (callback) {\n            result.forEach(callback);\n            this.mergeOrphanNodesAfter(endIndex);\n        }\n        return result;\n    };\n    VList.prototype.populateItems = function (list, listTypes) {\n        if (listTypes === void 0) { listTypes = []; }\n        var type = getListTypeFromNode_1.default(list);\n        for (var item = list.firstChild; !!item; item = item.nextSibling) {\n            var newListTypes = __spreadArrays(listTypes, [type]);\n            if (getListTypeFromNode_1.isListElement(item)) {\n                this.populateItems(item, newListTypes);\n            }\n            else if (item.nodeType != 3 /* Text */ || item.nodeValue.trim() != '') {\n                this.items.push(new (VListItem_1.default.bind.apply(VListItem_1.default, __spreadArrays([void 0, item], newListTypes)))());\n            }\n        }\n    };\n    return VList;\n}());\nexports.default = VList;\n//Normalization\n// Step 1: Move all non-LI direct children under list into LI\n// e.g.\n// From: <ul><li>line 1</li>line 2</ul>\n// To:   <ul><li>line 1<div>line 2</div></li></ul>\nfunction moveChildNodesToLi(list) {\n    var currentItem = null;\n    toArray_1.default(list.childNodes).forEach(function (child) {\n        if (getTagOfNode_1.default(child) == 'LI') {\n            currentItem = child;\n        }\n        else if (getListTypeFromNode_1.isListElement(child)) {\n            currentItem = null;\n        }\n        else if (currentItem && !isNodeEmpty_1.default(child, true /*trimContent*/)) {\n            currentItem.appendChild(isBlockElement_1.default(child) ? child : wrap_1.default(child));\n        }\n    });\n}\n// Step 2: Move nested LI up to under list directly\n// e.g.\n// From: <ul><li>line 1<li>line 2</li>line 3</li></ul>\n// To:   <ul><li>line 1</li><li>line 2<div>line 3</div></li></ul>\nfunction moveLiToList(li) {\n    while (!getListTypeFromNode_1.isListElement(li.parentNode)) {\n        splitParentNode_1.default(li, true /*splitBefore*/);\n        var furtherNodes = toArray_1.default(li.parentNode.childNodes).slice(1);\n        if (furtherNodes.length > 0) {\n            if (!isBlockElement_1.default(furtherNodes[0])) {\n                furtherNodes = [wrap_1.default(furtherNodes)];\n            }\n            furtherNodes.forEach(function (node) { return li.appendChild(node); });\n        }\n        unwrap_1.default(li.parentNode);\n    }\n}\n//# sourceMappingURL=VList.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ContentTraverser_1 = require(\"../contentTraverser/ContentTraverser\");\nvar createRange_1 = require(\"../selection/createRange\");\nvar Position_1 = require(\"../selection/Position\");\nvar getLeafSibling_1 = require(\"../utils/getLeafSibling\");\n/**\n * Get all block elements covered by the selection under this region\n */\nfunction getSelectedBlockElementsInRegion(region) {\n    if (!region) {\n        return [];\n    }\n    var nodeBefore = region.nodeBefore, nodeAfter = region.nodeAfter, rootNode = region.rootNode, skipTags = region.skipTags, fullSelectionEnd = region.fullSelectionEnd, fullSelectionStart = region.fullSelectionStart;\n    var startNode = nodeBefore\n        ? getLeafSibling_1.getNextLeafSibling(region.rootNode, nodeBefore, region.skipTags)\n        : rootNode.firstChild;\n    var endNode = nodeAfter\n        ? getLeafSibling_1.getPreviousLeafSibling(rootNode, nodeAfter, skipTags)\n        : rootNode.lastChild;\n    var blocks = [];\n    if (startNode && endNode) {\n        var regionRange = createRange_1.default(startNode, endNode);\n        var regionStart = Position_1.default.getStart(regionRange).normalize();\n        var regionEnd = Position_1.default.getEnd(regionRange).normalize();\n        if (!fullSelectionStart.isAfter(regionEnd) && !regionStart.isAfter(fullSelectionEnd)) {\n            var start = fullSelectionStart.isAfter(regionStart)\n                ? fullSelectionStart\n                : regionStart;\n            var end = fullSelectionEnd.isAfter(regionEnd) ? regionEnd : fullSelectionEnd;\n            var range = createRange_1.default(start, end);\n            var traverser = ContentTraverser_1.default.createSelectionTraverser(rootNode, range, skipTags);\n            for (var block = traverser === null || traverser === void 0 ? void 0 : traverser.currentBlockElement; !!block; block = traverser.getNextBlockElement()) {\n                blocks.push(block);\n            }\n        }\n    }\n    return blocks;\n}\nexports.default = getSelectedBlockElementsInRegion;\n//# sourceMappingURL=getSelectedBlockElementsInRegion.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar contains_1 = require(\"../utils/contains\");\nvar Position_1 = require(\"./Position\");\n/**\n * Get path of the given selection range related to the given rootNode\n * @param rootNode The root node where the path start from\n * @param range The range of selection\n */\nfunction getSelectionPath(rootNode, range) {\n    if (!range) {\n        return null;\n    }\n    var selectionPath = {\n        start: getPositionPath(Position_1.default.getStart(range), rootNode),\n        end: getPositionPath(Position_1.default.getEnd(range), rootNode),\n    };\n    return selectionPath;\n}\nexports.default = getSelectionPath;\n/**\n * Get the path of the node relative to rootNode.\n * The path of the node is an array of integer indecies into the childNodes of the given node.\n *\n * The node path will be what the node path will be on a _normalized_ dom\n * (e.g. empty text nodes will be ignored and adjacent text nodes will be concatenated)\n *\n * @param rootNode the node the path will be relative to\n * @param position the position to get indexes from. Follows the same semantics\n * as selectionRange (if node is of type Text, it is an offset into the text of that node.\n * If node is of type Element, it is the index of a child in that Element node.)\n */\nfunction getPositionPath(position, rootNode) {\n    if (!position || !rootNode) {\n        return [];\n    }\n    var node = position.node, offset = position.offset;\n    var result = [];\n    var parent;\n    if (!contains_1.default(rootNode, node, true)) {\n        return [];\n    }\n    if (node.nodeType == 3 /* Text */) {\n        parent = node.parentNode;\n        while (node.previousSibling && node.previousSibling.nodeType == 3 /* Text */) {\n            offset += node.previousSibling.nodeValue.length;\n            node = node.previousSibling;\n        }\n        result.unshift(offset);\n    }\n    else {\n        parent = node;\n        node = node.childNodes[offset];\n    }\n    do {\n        offset = 0;\n        var isPreviousText = false;\n        for (var c = parent.firstChild; c && c != node; c = c.nextSibling) {\n            if (c.nodeType == 3 /* Text */) {\n                if (c.nodeValue.length == 0 || isPreviousText) {\n                    continue;\n                }\n                isPreviousText = true;\n            }\n            else {\n                isPreviousText = false;\n            }\n            offset++;\n        }\n        result.unshift(offset);\n        node = parent;\n        parent = parent.parentNode;\n    } while (node && node != rootNode);\n    return result;\n}\n//# sourceMappingURL=getSelectionPath.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar canMoveCurrentSnapshot_1 = require(\"./canMoveCurrentSnapshot\");\n/**\n * Clear all snapshots after the current one\n * @param snapshots The snapshots data structure to clear\n */\nfunction clearProceedingSnapshots(snapshots) {\n    if (canMoveCurrentSnapshot_1.default(snapshots, 1)) {\n        var removedSize = 0;\n        for (var i = snapshots.currentIndex + 1; i < snapshots.snapshots.length; i++) {\n            removedSize += snapshots.snapshots[i].length;\n        }\n        snapshots.snapshots.splice(snapshots.currentIndex + 1);\n        snapshots.totalSize -= removedSize;\n    }\n}\nexports.default = clearProceedingSnapshots;\n//# sourceMappingURL=clearProceedingSnapshots.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// Inheritable CSS properties\n// Ref: https://www.w3.org/TR/CSS21/propidx.html\nvar INHERITABLE_PROPERTIES = ('border-spacing,caption-side,color,' +\n    'cursor,direction,empty-cells,font-family,font-size,font-style,font-variant,font-weight,' +\n    'font,letter-spacing,line-height,list-style-image,list-style-position,list-style-type,' +\n    'list-style,orphans,quotes,text-align,text-indent,text-transform,visibility,white-space,' +\n    'widows,word-spacing').split(',');\n/**\n * Get inheritable CSS style values from the given element\n * @param element The element to get style from\n */\nfunction getInheritableStyles(element) {\n    var win = element && element.ownerDocument && element.ownerDocument.defaultView;\n    var styles = win && win.getComputedStyle(element);\n    var result = {};\n    INHERITABLE_PROPERTIES.forEach(function (name) { return (result[name] = (styles && styles.getPropertyValue(name)) || ''); });\n    return result;\n}\nexports.default = getInheritableStyles;\n//# sourceMappingURL=getInheritableStyles.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar START_FRAGMENT = '<!--StartFragment-->';\nvar END_FRAGMENT = '<!--EndFragment-->';\n/**\n * Build DOM tree from the given HTML string\n * @param html Source HTML string\n * @param preserveFragmentOnly If there is fragment markup (&lt;!--StartFragment--&gt; and &lt;!--EndFragment--&gt;),\n * only preserve content between these markups\n * @param fragmentHandler An optional callback to do customized fragment handling\n */\nfunction htmlToDom(html, preserveFragmentOnly, fragmentHandler) {\n    var parser = new DOMParser();\n    var doc = parser.parseFromString(html || '', 'text/html');\n    if (doc && doc.body && doc.body.firstChild) {\n        // 1. Filter out html code outside of Fragment tags if need\n        if (preserveFragmentOnly) {\n            (fragmentHandler || defaultFragmentTrimmer)(doc, html);\n        }\n        return doc;\n    }\n    else {\n        return null;\n    }\n}\nexports.default = htmlToDom;\nfunction defaultFragmentTrimmer(doc, sourceHtml) {\n    var html = splitWithFragment(sourceHtml)[0];\n    doc.body.innerHTML = html;\n}\n/**\n * Split the HTML string using its fragment info\n * @param html Source html string\n * @returns [String within fragment, String before fragment, String after fragment]\n */\nfunction splitWithFragment(html) {\n    var startIndex = html.indexOf(START_FRAGMENT);\n    var endIndex = html.lastIndexOf(END_FRAGMENT);\n    if (startIndex >= 0 && endIndex >= 0 && endIndex >= startIndex + START_FRAGMENT.length) {\n        var before = html.substr(0, startIndex);\n        var after = html.substr(endIndex + END_FRAGMENT.length);\n        html = html.substring(startIndex + START_FRAGMENT.length, endIndex);\n        return [html, before, after];\n    }\n    else {\n        return [html, null, null];\n    }\n}\nexports.splitWithFragment = splitWithFragment;\n//# sourceMappingURL=htmlToDom.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction nativeClone(source, existingObj) {\n    return Object.assign(existingObj || {}, source);\n}\nfunction customClone(source, existingObj) {\n    var result = existingObj || {};\n    if (source) {\n        for (var _i = 0, _a = Object.keys(source); _i < _a.length; _i++) {\n            var key = _a[_i];\n            result[key] = source[key];\n        }\n    }\n    return result;\n}\n/**\n * @internal\n */\nexports.cloneObject = Object.assign ? nativeClone : customClone;\n//# sourceMappingURL=cloneObject.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar normalizeContentColor_1 = require(\"../darkMode/normalizeContentColor\");\n// TODO: Rename to DarkmodePlugin in next major release\n/**\n * Copy plugin, hijacks copy events to normalize the content to the clipboard.\n */\nvar CopyPlugin = /** @class */ (function () {\n    function CopyPlugin() {\n        var _this = this;\n        this.onExtract = function (isCut) { return function (event) {\n            // if it's dark mode...\n            if (_this.editor && _this.editor.isDarkMode()) {\n                // get whatever the current selection range is\n                var selectionRange = _this.editor.getSelectionRange();\n                if (selectionRange && !selectionRange.collapsed) {\n                    var clipboardEvent = event;\n                    var copyFragment = _this.editor.getSelectionRange().cloneContents();\n                    var containerDiv = _this.editor.getDocument().createElement('div');\n                    // Leverage script execution policy on CEDs to try and prevent XSS\n                    containerDiv.contentEditable = 'true';\n                    containerDiv.appendChild(copyFragment);\n                    // revert just this selected range to light mode colors\n                    normalizeContentColor_1.default(containerDiv);\n                    // put it on the clipboard\n                    clipboardEvent.clipboardData.setData('text/html', containerDiv.innerHTML);\n                    clipboardEvent.clipboardData.setData('text/plain', containerDiv.innerText);\n                    // if it's cut, delete the contents\n                    if (isCut) {\n                        _this.editor.getSelectionRange().deleteContents();\n                    }\n                    event.preventDefault();\n                }\n            }\n        }; };\n    }\n    /**\n     * Get a friendly name of  this plugin\n     */\n    CopyPlugin.prototype.getName = function () {\n        return 'Copy';\n    };\n    /**\n     * Initialize this plugin. This should only be called from Editor\n     * @param editor Editor instance\n     */\n    CopyPlugin.prototype.initialize = function (editor) {\n        this.editor = editor;\n        this.eventDisposer = editor.addDomEventHandler({\n            copy: this.onExtract(false),\n            cut: this.onExtract(true),\n        });\n    };\n    /**\n     * Dispose this plugin\n     */\n    CopyPlugin.prototype.dispose = function () {\n        this.eventDisposer();\n        this.eventDisposer = null;\n        this.editor = null;\n    };\n    return CopyPlugin;\n}());\nexports.default = CopyPlugin;\n//# sourceMappingURL=CopyPlugin.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar roosterjs_editor_dom_1 = require(\"roosterjs-editor-dom\");\n/**\n * @internal\n */\nfunction normalizeContentColor(root) {\n    var allChildElements = root.getElementsByTagName('*');\n    roosterjs_editor_dom_1.toArray(allChildElements).forEach(function (e) {\n        var element = e;\n        if (element.dataset) {\n            // Reset color styles based on the content of the ogsc/ogsb data element.\n            // If those data properties are empty or do not exist, set them anyway to clear the content.\n            element.style.color = isDataAttributeSettable(element.dataset.ogsc)\n                ? element.dataset.ogsc\n                : '';\n            element.style.backgroundColor = isDataAttributeSettable(element.dataset.ogsb)\n                ? element.dataset.ogsb\n                : '';\n            // Some elements might have set attribute colors. We need to reset these as well.\n            if (isDataAttributeSettable(element.dataset.ogac)) {\n                element.setAttribute('color', element.dataset.ogac);\n            }\n            else {\n                element.removeAttribute('color');\n            }\n            if (isDataAttributeSettable(element.dataset.ogab)) {\n                element.setAttribute('bgcolor', element.dataset.ogab);\n            }\n            else {\n                element.removeAttribute('bgcolor');\n            }\n            // Clean up any remaining data attributes.\n            if (element.dataset.ogsc) {\n                delete element.dataset.ogsc;\n            }\n            if (element.dataset.ogsb) {\n                delete element.dataset.ogsb;\n            }\n            if (element.dataset.ogac) {\n                delete element.dataset.ogac;\n            }\n            if (element.dataset.ogab) {\n                delete element.dataset.ogab;\n            }\n        }\n    });\n}\nexports.default = normalizeContentColor;\nfunction isDataAttributeSettable(newStyle) {\n    return newStyle && newStyle != 'undefined' && newStyle != 'null';\n}\n//# sourceMappingURL=normalizeContentColor.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar roosterjs_editor_dom_1 = require(\"roosterjs-editor-dom\");\nvar CONTAINER_HTML = '<div contenteditable style=\"width: 1px; height: 1px; overflow: hidden; position: fixed; top: 0; left; 0; -webkit-user-select: text\"></div>';\n/**\n * Core paste plugin for handling onPaste event and extract the pasted content\n */\nvar CorePastePlugin = /** @class */ (function () {\n    function CorePastePlugin() {\n        var _this = this;\n        this.onPaste = function (event) {\n            roosterjs_editor_dom_1.extractClipboardEvent(event, function (items) {\n                if (items.html === undefined) {\n                    // Can't get pasted HTML directly, need to use a temp DIV to retrieve pasted content.\n                    // This is mostly for IE\n                    var originalSelectionRange_1 = _this.editor.getSelectionRange();\n                    var tempDiv_1 = _this.editor.getCustomData('PasteDiv', _this.createTempDivForIE, function (pasteDiv) { return pasteDiv.parentNode.removeChild(pasteDiv); });\n                    tempDiv_1.style.display = '';\n                    tempDiv_1.focus();\n                    _this.editor.runAsync(function () {\n                        // restore original selection range in editor\n                        _this.editor.select(originalSelectionRange_1);\n                        items.html = tempDiv_1.innerHTML;\n                        tempDiv_1.style.display = 'none';\n                        tempDiv_1.innerHTML = '';\n                        _this.paste(items);\n                    });\n                }\n                else {\n                    _this.paste(items);\n                }\n            });\n        };\n        this.createTempDivForIE = function () {\n            var pasteDiv = roosterjs_editor_dom_1.fromHtml(CONTAINER_HTML, _this.editor.getDocument())[0];\n            _this.editor.insertNode(pasteDiv, {\n                position: 4 /* Outside */,\n            });\n            return pasteDiv;\n        };\n    }\n    CorePastePlugin.prototype.getName = function () {\n        return 'CorePaste';\n    };\n    CorePastePlugin.prototype.initialize = function (editor) {\n        this.editor = editor;\n        this.disposer = this.editor.addDomEventHandler('paste', this.onPaste);\n    };\n    CorePastePlugin.prototype.dispose = function () {\n        this.disposer();\n        this.disposer = null;\n        this.editor = null;\n    };\n    CorePastePlugin.prototype.paste = function (items) {\n        var _this = this;\n        var clipboardData = {\n            types: items.types,\n            image: items.image,\n            text: items.text,\n            rawHtml: items.html,\n            // Will be set later\n            snapshotBeforePaste: null,\n            imageDataUri: null,\n            // TODO: deprecated properties\n            html: null,\n            originalFormat: null,\n        };\n        if (clipboardData.image) {\n            var reader_1 = new FileReader();\n            reader_1.onload = function () {\n                clipboardData.imageDataUri = reader_1.result;\n                _this.editor.paste(clipboardData);\n            };\n            reader_1.onerror = function () {\n                clipboardData.image = null;\n                _this.editor.paste(clipboardData);\n            };\n            reader_1.readAsDataURL(clipboardData.image);\n        }\n        else {\n            this.editor.paste(clipboardData);\n        }\n    };\n    return CorePastePlugin;\n}());\nexports.default = CorePastePlugin;\n//# sourceMappingURL=CorePastePlugin.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar roosterjs_editor_dom_1 = require(\"roosterjs-editor-dom\");\n/**\n * DOMEventPlugin handles customized DOM events, including:\n * 1. IME state management\n * 2. Selection management\n * 3. Cut and Drop management\n * 4. Pending format state management\n * 5. Scroll container and scroll event management\n */\nvar DOMEventPlugin = /** @class */ (function () {\n    function DOMEventPlugin(disableRestoreSelectionOnFocus) {\n        var _this = this;\n        this.disableRestoreSelectionOnFocus = disableRestoreSelectionOnFocus;\n        this.inIme = false;\n        this.onNativeEvent = function (e) {\n            _this.editor.runAsync(function () {\n                _this.editor.addUndoSnapshot(function () { }, e.type == 'cut' ? \"Cut\" /* Cut */ : \"Drop\" /* Drop */);\n            });\n        };\n        this.onFocus = function () {\n            if (_this.disableRestoreSelectionOnFocus) {\n                if (_this.cachedPosition && _this.cachedFormatState) {\n                    var range = _this.editor.getSelectionRange();\n                    if (range.collapsed &&\n                        roosterjs_editor_dom_1.Position.getStart(range).normalize().equalTo(_this.cachedPosition)) {\n                        _this.restorePendingFormatState();\n                    }\n                    else {\n                        _this.clear();\n                    }\n                }\n            }\n            else {\n                _this.editor.restoreSavedRange();\n            }\n        };\n        this.onBlur = function () {\n            _this.editor.saveSelectionRange();\n        };\n        this.onScroll = function (e) {\n            _this.editor.triggerPluginEvent(15 /* Scroll */, {\n                rawEvent: e,\n                scrollContainer: _this.editor.getScrollContainer(),\n            });\n        };\n    }\n    DOMEventPlugin.prototype.getName = function () {\n        return 'DOMEvent';\n    };\n    DOMEventPlugin.prototype.initialize = function (editor) {\n        var _a;\n        var _this = this;\n        this.editor = editor;\n        this.disposer = editor.addDomEventHandler((_a = {\n                // 1. IME state management\n                compositionstart: function () { return (_this.inIme = true); },\n                compositionend: function (rawEvent) {\n                    _this.inIme = false;\n                    editor.triggerPluginEvent(3 /* CompositionEnd */, {\n                        rawEvent: rawEvent,\n                    });\n                },\n                // 2. Cut and drop management\n                drop: this.onNativeEvent,\n                cut: this.onNativeEvent,\n                // 3. Selection mangement\n                focus: this.onFocus\n            },\n            _a[roosterjs_editor_dom_1.Browser.isIEOrEdge ? 'beforedeactivate' : 'blur'] = this.onBlur,\n            _a));\n        this.editor.getScrollContainer().addEventListener('scroll', this.onScroll);\n    };\n    DOMEventPlugin.prototype.dispose = function () {\n        this.editor.getScrollContainer().removeEventListener('scroll', this.onScroll);\n        this.disposer();\n        this.disposer = null;\n        this.editor = null;\n        this.clear();\n    };\n    /**\n     * Handle events triggered from editor\n     * @param event PluginEvent object\n     */\n    DOMEventPlugin.prototype.onPluginEvent = function (event) {\n        switch (event.eventType) {\n            case 13 /* PendingFormatStateChanged */:\n                // Got PendingFormatStateChagned event, cache current position and pending format\n                this.cachedPosition = this.getCurrentPosition();\n                this.cachedFormatState = event.formatState;\n                break;\n            case 0 /* KeyDown */:\n            case 4 /* MouseDown */:\n            case 6 /* ContentChanged */:\n                // If content or position is changed (by keyboard, mouse, or code),\n                // check if current position is still the same with the cached one (if exist),\n                // and clear cached format if position is changed since it is out-of-date now\n                if (this.cachedPosition &&\n                    !this.cachedPosition.equalTo(this.getCurrentPosition())) {\n                    this.clear();\n                }\n                break;\n        }\n    };\n    /**\n     * Restore cached pending format state (if exist) to current selection\n     */\n    DOMEventPlugin.prototype.restorePendingFormatState = function () {\n        var _this = this;\n        if (this.cachedFormatState) {\n            var formatState_1 = roosterjs_editor_dom_1.getPendableFormatState(this.editor.getDocument());\n            Object.keys(roosterjs_editor_dom_1.PendableFormatCommandMap).forEach(function (key) {\n                if (_this.cachedFormatState[key] != formatState_1[key]) {\n                    _this.editor\n                        .getDocument()\n                        .execCommand(roosterjs_editor_dom_1.PendableFormatCommandMap[key], false, null);\n                }\n            });\n            this.cachedPosition = this.getCurrentPosition();\n        }\n    };\n    /**\n     * Check if editor is in IME input sequence\n     * @returns True if editor is in IME input sequence, otherwise false\n     */\n    DOMEventPlugin.prototype.isInIME = function () {\n        return this.inIme;\n    };\n    DOMEventPlugin.prototype.clear = function () {\n        this.cachedPosition = null;\n        this.cachedFormatState = null;\n    };\n    DOMEventPlugin.prototype.getCurrentPosition = function () {\n        var range = this.editor.getSelectionRange();\n        return range && roosterjs_editor_dom_1.Position.getStart(range).normalize();\n    };\n    return DOMEventPlugin;\n}());\nexports.default = DOMEventPlugin;\n//# sourceMappingURL=DOMEventPlugin.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar isCtrlOrMetaPressed_1 = require(\"../eventApi/isCtrlOrMetaPressed\");\n/**\n * Edit Component helps handle Content edit features\n */\nvar EditPlugin = /** @class */ (function () {\n    function EditPlugin() {\n        this.featureMap = {};\n        this.autoCompleteSnapshot = null;\n        this.autoCompleteChangeSource = null;\n    }\n    EditPlugin.prototype.getName = function () {\n        return 'Edit';\n    };\n    EditPlugin.prototype.initialize = function (editor) {\n        var _this = this;\n        this.editor = editor;\n        this.addFeature({\n            keys: [8 /* BACKSPACE */],\n            shouldHandleEvent: function () { return _this.autoCompleteSnapshot !== null; },\n            handleEvent: function (event, editor) {\n                event.rawEvent.preventDefault();\n                editor.setContent(_this.autoCompleteSnapshot, false /*triggerContentChangedEvent*/);\n            },\n        });\n    };\n    EditPlugin.prototype.dispose = function () {\n        this.editor = null;\n    };\n    /**\n     * Handle events triggered from editor\n     * @param event PluginEvent object\n     */\n    EditPlugin.prototype.onPluginEvent = function (event) {\n        var contentChanged = false;\n        var currentFeature = this.findFeature(event);\n        switch (event.eventType) {\n            case 6 /* ContentChanged */:\n                contentChanged = this.autoCompleteChangeSource != event.source;\n                break;\n            case 4 /* MouseDown */:\n            case 0 /* KeyDown */:\n                contentChanged = true;\n                break;\n        }\n        if (currentFeature) {\n            currentFeature.handleEvent(event, this.editor);\n        }\n        if (contentChanged) {\n            this.autoCompleteSnapshot = null;\n            this.autoCompleteChangeSource = null;\n        }\n    };\n    /**\n     * Add a Content Edit feature\n     * @param feature The feature to add\n     */\n    EditPlugin.prototype.addFeature = function (feature) {\n        var _this = this;\n        feature.keys.forEach(function (key) {\n            var array = _this.featureMap[key] || [];\n            array.push(feature);\n            _this.featureMap[key] = array;\n        });\n    };\n    /**\n     * Perform an auto complete action in the callback, save a snapsnot of content before the action,\n     * and trigger ContentChangedEvent with the change source if specified\n     * @param callback The auto complete callback, return value will be used as data field of ContentChangedEvent\n     * @param changeSource Chagne source of ContentChangedEvent. If not passed, no ContentChangedEvent will be  triggered\n     */\n    EditPlugin.prototype.performAutoComplete = function (callback, changeSource) {\n        var _this = this;\n        this.editor.addUndoSnapshot(function (start, end, snapshot) {\n            var data = callback();\n            _this.autoCompleteSnapshot = snapshot;\n            _this.autoCompleteChangeSource = changeSource;\n            return data;\n        }, changeSource);\n    };\n    EditPlugin.prototype.findFeature = function (event) {\n        var _this = this;\n        var hasFunctionKey = false;\n        var features;\n        var ctrlOrMeta = false;\n        if (event.eventType == 0 /* KeyDown */) {\n            var rawEvent = event.rawEvent;\n            ctrlOrMeta = isCtrlOrMetaPressed_1.default(rawEvent);\n            hasFunctionKey = ctrlOrMeta || rawEvent.altKey;\n            features = this.featureMap[rawEvent.which];\n        }\n        else if (event.eventType == 6 /* ContentChanged */) {\n            features = this.featureMap[2048 /* CONTENTCHANGED */];\n        }\n        return (features &&\n            features.filter(function (feature) {\n                return (feature.allowFunctionKeys || !hasFunctionKey) &&\n                    feature.shouldHandleEvent(event, _this.editor, ctrlOrMeta);\n            })[0]);\n    };\n    return EditPlugin;\n}());\nexports.default = EditPlugin;\n//# sourceMappingURL=EditPlugin.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar roosterjs_editor_dom_1 = require(\"roosterjs-editor-dom\");\nvar cacheGetContentSearcher_1 = require(\"../eventApi/cacheGetContentSearcher\");\n/**\n * FirefoxTypeAfterLink Component helps handle typing event when cursor is right after a link.\n * When typing/pasting after a link, browser may put the new charactor inside link.\n * This plugin overrides this behavior to always insert outside of link.\n *\n * TODO: Rename this file in next major release since it is not only applied to Firefox now\n */\nvar FirefoxTypeAfterLink = /** @class */ (function () {\n    function FirefoxTypeAfterLink() {\n    }\n    FirefoxTypeAfterLink.prototype.getName = function () {\n        return 'FirefoxTypeAfterLink';\n    };\n    FirefoxTypeAfterLink.prototype.initialize = function (editor) {\n        this.editor = editor;\n    };\n    FirefoxTypeAfterLink.prototype.dispose = function () {\n        this.editor = null;\n    };\n    /**\n     * Handle events triggered from editor\n     * @param event PluginEvent object\n     */\n    FirefoxTypeAfterLink.prototype.onPluginEvent = function (event) {\n        if ((roosterjs_editor_dom_1.Browser.isFirefox && event.eventType == 1 /* KeyPress */) ||\n            event.eventType == 9 /* BeforePaste */) {\n            var range = this.editor.getSelectionRange();\n            if (range && range.collapsed && this.editor.getElementAtCursor('A[href]')) {\n                var searcher = cacheGetContentSearcher_1.cacheGetContentSearcher(event, this.editor);\n                var inlineElement = searcher.getInlineElementBefore();\n                if (inlineElement instanceof roosterjs_editor_dom_1.LinkInlineElement) {\n                    this.editor.select(new roosterjs_editor_dom_1.Position(inlineElement.getContainerNode(), -3 /* After */));\n                }\n            }\n        }\n    };\n    return FirefoxTypeAfterLink;\n}());\nexports.default = FirefoxTypeAfterLink;\n//# sourceMappingURL=FirefoxTypeAfterLink.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar cacheGetEventData_1 = require(\"./cacheGetEventData\");\nvar clearEventDataCache_1 = require(\"./clearEventDataCache\");\nvar CONTENTSEARCHER_KEY = 'CONTENTSEARCHER';\n/**\n * Try get existing PositionContentSearcher from an event. If there isn't one, create a new one from editor.\n * @param event The plugin event, it stores the event cached data for looking up.\n * If passed as null, we will create a new PositionContentSearcher\n * @param editor The editor instance\n * @returns The PositionContentSearcher object\n */\nfunction cacheGetContentSearcher(event, editor) {\n    return cacheGetEventData_1.default(event, CONTENTSEARCHER_KEY, function () { return editor.getContentSearcherOfCursor(); });\n}\nexports.cacheGetContentSearcher = cacheGetContentSearcher;\n/**\n * Clear the PositionContentSearcher in a plugin event.\n * This is called when the content is changed\n * @param event The plugin event\n */\nfunction clearContentSearcherCache(event) {\n    clearEventDataCache_1.default(event, CONTENTSEARCHER_KEY);\n}\nexports.clearContentSearcherCache = clearContentSearcherCache;\n//# sourceMappingURL=cacheGetContentSearcher.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Clear a cached object by its key from an event object\n * @param event The event object\n * @param key The cache key\n */\nfunction clearEventDataCache(event, key) {\n    if (event && event.eventDataCache && event.eventDataCache.hasOwnProperty(key)) {\n        delete event.eventDataCache[key];\n    }\n}\nexports.default = clearEventDataCache;\n//# sourceMappingURL=clearEventDataCache.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * MouseUp Component helps handle mouse up event\n * this can trigger mouse up event after mousedown happens in editor\n * even mouse up is happening outside editor\n */\nvar MouseUpPlugin = /** @class */ (function () {\n    function MouseUpPlugin() {\n        var _this = this;\n        this.onMouseUp = function (rawEvent) {\n            if (_this.editor) {\n                _this.removeMouseUpEventListener();\n                _this.editor.triggerPluginEvent(5 /* MouseUp */, {\n                    rawEvent: rawEvent,\n                });\n            }\n        };\n    }\n    MouseUpPlugin.prototype.getName = function () {\n        return 'MouseUp';\n    };\n    MouseUpPlugin.prototype.initialize = function (editor) {\n        this.editor = editor;\n    };\n    MouseUpPlugin.prototype.dispose = function () {\n        this.removeMouseUpEventListener();\n        this.editor = null;\n    };\n    /**\n     * Handle events triggered from editor\n     * @param event PluginEvent object\n     */\n    MouseUpPlugin.prototype.onPluginEvent = function (event) {\n        if (event.eventType == 4 /* MouseDown */ && !this.mouseUpEventListerAdded) {\n            this.editor\n                .getDocument()\n                .addEventListener('mouseup', this.onMouseUp, true /*setCapture*/);\n            this.mouseUpEventListerAdded = true;\n        }\n    };\n    MouseUpPlugin.prototype.removeMouseUpEventListener = function () {\n        if (this.mouseUpEventListerAdded) {\n            this.mouseUpEventListerAdded = false;\n            this.editor.getDocument().removeEventListener('mouseup', this.onMouseUp, true);\n        }\n    };\n    return MouseUpPlugin;\n}());\nexports.default = MouseUpPlugin;\n//# sourceMappingURL=MouseUpPlugin.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar roosterjs_editor_dom_1 = require(\"roosterjs-editor-dom\");\n/**\n * Typing Component helps to ensure typing is always happening under a DOM container\n */\nvar TypeInContainerPlugin = /** @class */ (function () {\n    function TypeInContainerPlugin() {\n    }\n    TypeInContainerPlugin.prototype.getName = function () {\n        return 'TypeInContainer';\n    };\n    TypeInContainerPlugin.prototype.initialize = function (editor) {\n        this.editor = editor;\n    };\n    TypeInContainerPlugin.prototype.dispose = function () {\n        this.editor = null;\n    };\n    /**\n     * Handle events triggered from editor\n     * @param event PluginEvent object\n     */\n    TypeInContainerPlugin.prototype.onPluginEvent = function (event) {\n        if (event.eventType == 1 /* KeyPress */) {\n            this.onKeyPress(event);\n        }\n    };\n    /**\n     * Ensure we are typing in an HTML Element inside editor, and apply default format if current block is empty\n     * @param node Current node\n     * @param event (optional) The keyboard event that we are ensuring is typing in an element.\n     * @returns A new position to select\n     */\n    TypeInContainerPlugin.prototype.ensureTypeInElement = function (position, event) {\n        var result = position.normalize();\n        var block = this.editor.getBlockElementAtNode(result.node);\n        var formatNode;\n        if (block) {\n            formatNode = block.collapseToSingleElement();\n            // if the block is empty, apply default format\n            // Otherwise, leave it as it is as we don't want to change the style for existing data\n            // unless the block was just created by the keyboard event (e.g. ctrl+a & start typing)\n            var shouldSetNodeStyles = roosterjs_editor_dom_1.isNodeEmpty(formatNode) ||\n                (event && this.wasNodeJustCreatedByKeyboardEvent(event, formatNode));\n            formatNode = formatNode && shouldSetNodeStyles ? formatNode : null;\n        }\n        else {\n            // Only reason we don't get the selection block is that we have an empty content div\n            // which can happen when users removes everything (i.e. select all and DEL, or backspace from very end to begin)\n            // The fix is to add a DIV wrapping, apply default format and move cursor over\n            formatNode = roosterjs_editor_dom_1.fromHtml(roosterjs_editor_dom_1.Browser.isEdge ? '<div><span><br></span></div>' : '<div><br></div>', this.editor.getDocument())[0];\n            this.editor.insertNode(formatNode, {\n                position: 1 /* End */,\n                updateCursor: false,\n                replaceSelection: false,\n                insertOnNewLine: false,\n            });\n            // element points to a wrapping node we added \"<div><br></div>\". We should move the selection left to <br>\n            result = new roosterjs_editor_dom_1.Position(formatNode.firstChild, 0 /* Begin */);\n        }\n        if (formatNode) {\n            roosterjs_editor_dom_1.applyFormat(formatNode, this.editor.getDefaultFormat(), this.editor.isDarkMode());\n        }\n        return result;\n    };\n    TypeInContainerPlugin.prototype.onKeyPress = function (event) {\n        var _this = this;\n        // If normalization was not possible before the keypress,\n        // check again after the keyboard event has been processed by browser native behaviour.\n        //\n        // This handles the case where the keyboard event that first inserts content happens when\n        // there is already content under the selection (e.g. Ctrl+a -> type new content).\n        //\n        // Only scheudle when the range is not collapsed to catch this edge case.\n        var range = this.editor.getSelectionRange();\n        if (!range || this.editor.contains(roosterjs_editor_dom_1.findClosestElementAncestor(range.startContainer))) {\n            return;\n        }\n        if (range.collapsed) {\n            this.tryNormalizeTyping(event, range);\n        }\n        else if (!range.collapsed) {\n            this.editor.runAsync(function () {\n                _this.tryNormalizeTyping(event);\n            });\n        }\n    };\n    /**\n     * When typing goes directly under content div, many things can go wrong\n     * We fix it by wrapping it with a div and reposition cursor within the div\n     */\n    TypeInContainerPlugin.prototype.tryNormalizeTyping = function (event, range) {\n        var position = this.ensureTypeInElement(roosterjs_editor_dom_1.Position.getStart(range || this.editor.getSelectionRange()), event);\n        this.editor.select(position);\n    };\n    TypeInContainerPlugin.prototype.wasNodeJustCreatedByKeyboardEvent = function (event, formatNode) {\n        return (roosterjs_editor_dom_1.isNode(event.rawEvent.target) &&\n            event.rawEvent.target.contains(formatNode) &&\n            event.rawEvent.key === formatNode.innerText);\n    };\n    return TypeInContainerPlugin;\n}());\nexports.default = TypeInContainerPlugin;\n//# sourceMappingURL=TypeInContainerPlugin.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar isCtrlOrMetaPressed_1 = require(\"../eventApi/isCtrlOrMetaPressed\");\nvar UndoSnapshots_1 = require(\"./UndoSnapshots\");\nvar KEY_BACKSPACE = 8;\nvar KEY_DELETE = 46;\nvar KEY_SPACE = 32;\nvar KEY_ENTER = 13;\nvar KEY_PAGEUP = 33;\nvar KEY_DOWN = 40;\n/**\n * Provides snapshot based undo service for Editor\n */\nvar Undo = /** @class */ (function () {\n    /**\n     * Create an instance of Undo\n     * @param preserveSnapshots True to preserve the snapshots after dispose, this allows\n     * this object to be reused when editor is disposed and created again\n     * @param maxBufferSize The max buffer size for snapshots. Default value is 10MB\n     */\n    function Undo(preserveSnapshots, maxBufferSize) {\n        if (maxBufferSize === void 0) { maxBufferSize = 1e7; }\n        this.preserveSnapshots = preserveSnapshots;\n        this.maxBufferSize = maxBufferSize;\n    }\n    /**\n     * Get a friendly name of  this plugin\n     */\n    Undo.prototype.getName = function () {\n        return 'Undo';\n    };\n    /**\n     * Initialize this plugin. This should only be called from Editor\n     * @param editor Editor instance\n     */\n    Undo.prototype.initialize = function (editor) {\n        this.editor = editor;\n    };\n    /**\n     * Dispose this plugin\n     */\n    Undo.prototype.dispose = function () {\n        this.editor = null;\n        if (!this.preserveSnapshots) {\n            this.clear();\n        }\n    };\n    /**\n     * Handle events triggered from editor\n     * @param event PluginEvent object\n     */\n    Undo.prototype.onPluginEvent = function (event) {\n        // if editor is in IME, don't do anything\n        if (this.editor.isInIME()) {\n            return;\n        }\n        switch (event.eventType) {\n            case 10 /* EditorReady */:\n                if (!this.preserveSnapshots || (!this.canUndo() && !this.canRedo())) {\n                    // Only add initial snapshot when we don't need to preserve snapshots or there is no existing snapshot\n                    // Otherwise preserved undo/redo state may be ruined\n                    this.addUndoSnapshot();\n                }\n                break;\n            case 0 /* KeyDown */:\n                this.onKeyDown(event.rawEvent);\n                break;\n            case 1 /* KeyPress */:\n                this.onKeyPress(event.rawEvent);\n                break;\n            case 3 /* CompositionEnd */:\n                this.clearRedoForInput();\n                this.addUndoSnapshot();\n                break;\n            case 6 /* ContentChanged */:\n                if (!this.isRestoring) {\n                    this.clearRedoForInput();\n                }\n                break;\n        }\n    };\n    /**\n     * Clear all existing undo snapshots\n     */\n    Undo.prototype.clear = function () {\n        this.undoSnapshots = null;\n        this.hasNewContent = false;\n    };\n    /**\n     * Restore an undo snapshot to editor\n     */\n    Undo.prototype.undo = function () {\n        if (this.hasNewContent) {\n            this.addUndoSnapshot();\n        }\n        this.restoreSnapshot(-1 /*previousSnapshot*/);\n    };\n    /**\n     * Restore a redo snapshot to editor\n     */\n    Undo.prototype.redo = function () {\n        this.restoreSnapshot(1 /*nextSnapshot*/);\n    };\n    /**\n     * Whether there is a snapshot for undo\n     */\n    Undo.prototype.canUndo = function () {\n        return this.hasNewContent || this.getSnapshotsManager().canMove(-1 /*previousSnapshot*/);\n    };\n    /**\n     * Whether there is a snapshot for redo\n     */\n    Undo.prototype.canRedo = function () {\n        return this.getSnapshotsManager().canMove(1 /*nextSnapshot*/);\n    };\n    /**\n     * Add an undo snapshot\n     */\n    Undo.prototype.addUndoSnapshot = function () {\n        var snapshot = this.editor.getContent(false /*triggerExtractContentEvent*/, true /* includeSelectionMarker */);\n        this.getSnapshotsManager().addSnapshot(snapshot);\n        this.hasNewContent = false;\n        return snapshot;\n    };\n    Undo.prototype.getSnapshotsManager = function () {\n        if (!this.undoSnapshots) {\n            this.undoSnapshots = new UndoSnapshots_1.default(this.maxBufferSize);\n        }\n        return this.undoSnapshots;\n    };\n    Undo.prototype.restoreSnapshot = function (delta) {\n        var snapshot = this.getSnapshotsManager().move(delta);\n        if (snapshot != null) {\n            try {\n                this.isRestoring = true;\n                this.editor.setContent(snapshot);\n            }\n            finally {\n                this.isRestoring = false;\n            }\n        }\n    };\n    Undo.prototype.onKeyDown = function (evt) {\n        // Handle backspace/delete when there is a selection to take a snapshot\n        // since we want the state prior to deletion restorable\n        if (evt.which == KEY_BACKSPACE || evt.which == KEY_DELETE) {\n            var selectionRange = this.editor.getSelectionRange();\n            // Add snapshot when\n            // 1. Something has been selected (not collapsed), or\n            // 2. It has a different key code from the last keyDown event (to prevent adding too many snapshot when keeping press the same key), or\n            // 3. Ctrl/Meta key is pressed so that a whole word will be deleted\n            if (selectionRange &&\n                (!selectionRange.collapsed ||\n                    this.lastKeyPress != evt.which ||\n                    isCtrlOrMetaPressed_1.default(evt))) {\n                this.addUndoSnapshot();\n            }\n            // Since some content is deleted, always set hasNewContent to true so that we will take undo snapshot next time\n            this.hasNewContent = true;\n            this.lastKeyPress = evt.which;\n        }\n        else if (evt.which >= KEY_PAGEUP && evt.which <= KEY_DOWN) {\n            // PageUp, PageDown, Home, End, Left, Right, Up, Down\n            if (this.hasNewContent) {\n                this.addUndoSnapshot();\n            }\n            this.lastKeyPress = 0;\n        }\n    };\n    Undo.prototype.onKeyPress = function (evt) {\n        if (evt.metaKey) {\n            // if metaKey is pressed, simply return since no actual effect will be taken on the editor.\n            // this is to prevent changing hasNewContent to true when meta + v to paste on Safari.\n            return;\n        }\n        var range = this.editor.getSelectionRange();\n        if ((range && !range.collapsed) ||\n            (evt.which == KEY_SPACE && this.lastKeyPress != KEY_SPACE) ||\n            evt.which == KEY_ENTER) {\n            this.addUndoSnapshot();\n            if (evt.which == KEY_ENTER) {\n                // Treat ENTER as new content so if there is no input after ENTER and undo,\n                // we restore the snapshot before ENTER\n                this.hasNewContent = true;\n            }\n        }\n        else {\n            this.clearRedoForInput();\n        }\n        this.lastKeyPress = evt.which;\n    };\n    Undo.prototype.clearRedoForInput = function () {\n        this.getSnapshotsManager().clearRedo();\n        this.lastKeyPress = 0;\n        this.hasNewContent = true;\n    };\n    return Undo;\n}());\nexports.default = Undo;\n//# sourceMappingURL=Undo.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar isModifierKey_1 = require(\"./isModifierKey\");\n/**\n * Returns true when the event was fired from a key that produces a character value, otherwise false\n * This detection is not 100% accurate. event.key is not fully supported by all browsers, and in some browsers (e.g. IE),\n * event.key is longer than 1 for num pad input. But here we just want to improve performance as much as possible.\n * So if we missed some case here it is still acceptable.\n * @param event The keyboard event object\n */\nfunction isCharacterValue(event) {\n    return !isModifierKey_1.default(event) && event.key && event.key.length == 1;\n}\nexports.default = isCharacterValue;\n//# sourceMappingURL=isCharacterValue.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar CTRL_CHARCODE = 'Control';\nvar ALT_CHARCODE = 'Alt';\nvar META_CHARCODE = 'Meta';\n/**\n * Returns true when the event was fired from a modifier key, otherwise false\n * @param event The keyboard event object\n */\nfunction isModifierKey(event) {\n    var isCtrlKey = event.ctrlKey || event.key === CTRL_CHARCODE;\n    var isAltKey = event.altKey || event.key === ALT_CHARCODE;\n    var isMetaKey = event.metaKey || event.key === META_CHARCODE;\n    return isCtrlKey || isAltKey || isMetaKey;\n}\nexports.default = isModifierKey;\n//# sourceMappingURL=isModifierKey.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar roosterjs_editor_dom_1 = require(\"roosterjs-editor-dom\");\nvar DARK_MODE_DEFAULT_FORMAT = {\n    backgroundColors: {\n        darkModeColor: 'rgb(51,51,51)',\n        lightModeColor: 'rgb(255,255,255)',\n    },\n    textColors: {\n        darkModeColor: 'rgb(255,255,255)',\n        lightModeColor: 'rgb(0,0,0)',\n    },\n};\nfunction calculateDefaultFormat(node, baseFormat, inDarkMode) {\n    if (inDarkMode) {\n        if (!baseFormat.backgroundColors) {\n            baseFormat.backgroundColors = DARK_MODE_DEFAULT_FORMAT.backgroundColors;\n        }\n        if (!baseFormat.textColors) {\n            baseFormat.textColors = DARK_MODE_DEFAULT_FORMAT.textColors;\n        }\n    }\n    if (baseFormat && Object.keys(baseFormat).length === 0) {\n        return {};\n    }\n    baseFormat = baseFormat || {};\n    var fontFamily = baseFormat.fontFamily, fontSize = baseFormat.fontSize, textColor = baseFormat.textColor, textColors = baseFormat.textColors, backgroundColor = baseFormat.backgroundColor, backgroundColors = baseFormat.backgroundColors, bold = baseFormat.bold, italic = baseFormat.italic, underline = baseFormat.underline;\n    var currentStyles = fontFamily && fontSize && (textColor || textColors) ? null : roosterjs_editor_dom_1.getComputedStyles(node);\n    return {\n        fontFamily: fontFamily || currentStyles[0],\n        fontSize: fontSize || currentStyles[1],\n        get textColor() {\n            return textColors\n                ? inDarkMode\n                    ? textColors.darkModeColor\n                    : textColors.lightModeColor\n                : textColor || currentStyles[2];\n        },\n        textColors: textColors,\n        get backgroundColor() {\n            return backgroundColors\n                ? inDarkMode\n                    ? backgroundColors.darkModeColor\n                    : backgroundColors.lightModeColor\n                : backgroundColor || '';\n        },\n        backgroundColors: backgroundColors,\n        bold: bold,\n        italic: italic,\n        underline: underline,\n    };\n}\nexports.calculateDefaultFormat = calculateDefaultFormat;\n//# sourceMappingURL=calculateDefaultFormat.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar roosterjs_editor_dom_1 = require(\"roosterjs-editor-dom\");\n/**\n * Check if the editor has focus now\n * @param core The EditorCore object\n * @returns True if the editor has focus, otherwise false\n */\nexports.hasFocus = function (core) {\n    var activeElement = core.document.activeElement;\n    return (activeElement && roosterjs_editor_dom_1.contains(core.contentDiv, activeElement, true /*treatSameNodeAsContain*/));\n};\n//# sourceMappingURL=hasFocus.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar roosterjs_editor_dom_1 = require(\"roosterjs-editor-dom\");\n/**\n * Collapse all selected blocks, return single HTML elements for each block\n * @param editor The editor instance\n * @param forEachCallback A callback function to invoke for each of the collapsed element\n */\nfunction collapseSelectedBlocked(editor, forEachCallback) {\n    var traverser = editor.getSelectionTraverser();\n    var block = traverser && traverser.currentBlockElement;\n    var blocks = [];\n    while (block) {\n        if (!isEmptyBlockUnderTR(block)) {\n            blocks.push(block);\n        }\n        block = traverser.getNextBlockElement();\n    }\n    blocks.forEach(function (block) {\n        var element = block.collapseToSingleElement();\n        forEachCallback(element);\n    });\n}\nexports.default = collapseSelectedBlocked;\nfunction isEmptyBlockUnderTR(block) {\n    var startNode = block.getStartNode();\n    return (block instanceof roosterjs_editor_dom_1.StartEndBlockElement &&\n        startNode == block.getEndNode() &&\n        startNode.nodeType == 3 /* Text */ &&\n        ['TR', 'TABLE'].indexOf(roosterjs_editor_dom_1.getTagOfNode(startNode.parentNode)) >= 0);\n}\n//# sourceMappingURL=collapseSelectedBlocks.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar applyInlineStyle_1 = require(\"../utils/applyInlineStyle\");\n/**\n * Set background color at current selection\n * @param editor The editor instance\n * @param color One of two options:\n * The color string, can be any of the predefined color names (e.g, 'red')\n * or hexadecimal color string (e.g, '#FF0000') or rgb value (e.g, 'rgb(255, 0, 0)') supported by browser.\n * Currently there's no validation to the string, if the passed string is invalid, it won't take affect\n * Alternatively, you can pass a @typedef ModeIndepenentColor. If in light mode, the lightModeColor property will be used.\n * If in dark mode, the darkModeColor will be used and the lightModeColor will be used when converting back to light mode.\n **/\nfunction setBackgroundColor(editor, color) {\n    if (typeof color === 'string') {\n        var trimmedColor_1 = color.trim();\n        applyInlineStyle_1.default(editor, function (element, isInnerNode) {\n            element.style.backgroundColor = isInnerNode ? '' : trimmedColor_1;\n        });\n    }\n    else {\n        var darkMode_1 = editor.isDarkMode();\n        var appliedColor_1 = darkMode_1 ? color.darkModeColor : color.lightModeColor;\n        applyInlineStyle_1.default(editor, function (element, isInnerNode) {\n            element.style.backgroundColor = isInnerNode ? '' : appliedColor_1;\n            if (darkMode_1) {\n                element.dataset.ogsb = color.lightModeColor;\n            }\n        });\n    }\n}\nexports.default = setBackgroundColor;\n//# sourceMappingURL=setBackgroundColor.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar applyInlineStyle_1 = require(\"../utils/applyInlineStyle\");\n/**\n * Set font name at selection\n * @param editor The editor instance\n * @param fontName The fontName string, should be a valid CSS font-family style.\n * Currently there's no validation to the string, if the passed string is invalid, it won't take affect\n */\nfunction setFontName(editor, fontName) {\n    fontName = fontName.trim();\n    // The browser provided execCommand creates a HTML <font> tag with face attribute. <font> is not HTML5 standard\n    // (http://www.w3schools.com/tags/tag_font.asp). Use applyInlineStyle which gives flexibility on applying inline style\n    // for here, we use CSS font-family style\n    applyInlineStyle_1.default(editor, function (element, isInnerNode) {\n        element.style.fontFamily = isInnerNode ? '' : fontName;\n    });\n}\nexports.default = setFontName;\n//# sourceMappingURL=setFontName.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar applyInlineStyle_1 = require(\"../utils/applyInlineStyle\");\nvar roosterjs_editor_dom_1 = require(\"roosterjs-editor-dom\");\n/**\n * Set font size at selection\n * @param editor The editor instance\n * @param fontSize The fontSize string, should be a valid CSS font-size style.\n * Currently there's no validation to the string, if the passed string is invalid, it won't take affect\n */\nfunction setFontSize(editor, fontSize) {\n    fontSize = fontSize.trim();\n    // The browser provided execCommand only accepts 1-7 point value. In addition, it uses HTML <font> tag with size attribute.\n    // <font> is not HTML5 standard (http://www.w3schools.com/tags/tag_font.asp). Use applyInlineStyle which gives flexibility on applying inline style\n    // for here, we use CSS font-size style\n    applyInlineStyle_1.default(editor, function (element, isInnerNode) {\n        element.style.fontSize = isInnerNode ? '' : fontSize;\n        var lineHeight = roosterjs_editor_dom_1.getComputedStyle(element, 'line-height');\n        if (lineHeight != 'normal') {\n            element.style.lineHeight = 'normal';\n        }\n    });\n}\nexports.default = setFontSize;\n//# sourceMappingURL=setFontSize.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar applyInlineStyle_1 = require(\"../utils/applyInlineStyle\");\n/**\n * Set text color at selection\n * @param editor The editor instance\n * @param color One of two options:\n * The color string, can be any of the predefined color names (e.g, 'red')\n * or hexadecimal color string (e.g, '#FF0000') or rgb value (e.g, 'rgb(255, 0, 0)') supported by browser.\n * Currently there's no validation to the string, if the passed string is invalid, it won't take affect\n * Alternatively, you can pass a @typedef ModeIndepenentColor. If in light mode, the lightModeColor property will be used.\n * If in dark mode, the darkModeColor will be used and the lightModeColor will be used when converting back to light mode.\n */\nfunction setTextColor(editor, color) {\n    if (typeof color === 'string') {\n        var trimmedColor_1 = color.trim();\n        applyInlineStyle_1.default(editor, function (element, isInnerNode) {\n            element.style.color = isInnerNode ? '' : trimmedColor_1;\n        });\n    }\n    else {\n        var darkMode_1 = editor.isDarkMode();\n        var appliedColor_1 = darkMode_1 ? color.darkModeColor : color.lightModeColor;\n        applyInlineStyle_1.default(editor, function (element, isInnerNode) {\n            element.style.color = isInnerNode ? '' : appliedColor_1;\n            if (darkMode_1) {\n                element.dataset.ogsc = color.lightModeColor;\n            }\n        });\n    }\n}\nexports.default = setTextColor;\n//# sourceMappingURL=setTextColor.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar execCommand_1 = require(\"../utils/execCommand\");\n/**\n * Toggle bold at selection\n * If selection is collapsed, it will only affect the following input after caret\n * If selection contains only bold text, the bold style will be removed\n * If selection contains only normal text, bold style will be added to the whole selected text\n * If selection contains both bold and normal text, bold stle will be added to the whole selected text\n * @param editor The editor instance\n */\nfunction toggleBold(editor) {\n    execCommand_1.default(editor, \"bold\" /* Bold */);\n}\nexports.default = toggleBold;\n//# sourceMappingURL=toggleBold.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar execCommand_1 = require(\"../utils/execCommand\");\n/**\n * Toggle italic at selection\n * If selection is collapsed, it will only affect the input after caret\n * If selection contains only italic text, the italic style will be removed\n * If selection contains only normal text, italic style will be added to the whole selected text\n * If selection contains both italic and normal text, italic stlye will be added to the whole selected text\n * @param editor The editor instance\n */\nfunction toggleItalic(editor) {\n    execCommand_1.default(editor, \"italic\" /* Italic */);\n}\nexports.default = toggleItalic;\n//# sourceMappingURL=toggleItalic.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar execCommand_1 = require(\"../utils/execCommand\");\n/**\n * Toggle underline at selection\n * If selection is collapsed, it will only affect the input after caret\n * If selection contains only underlined text, the underline style will be removed\n * If selection contains only normal text, underline style will be added to the whole selected text\n * If selection contains both underlined and normal text, the underline style will be added to the whole selected text\n * @param editor The editor instance\n */\nfunction toggleUnderline(editor) {\n    execCommand_1.default(editor, \"underline\" /* Underline */);\n}\nexports.default = toggleUnderline;\n//# sourceMappingURL=toggleUnderline.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * @internal\n * Split selection into regions, and perform a block-wise formatting action for each region.\n */\nfunction blockFormat(editor, callback) {\n    editor.focus();\n    editor.addUndoSnapshot(function (start, end) {\n        var regions = editor.getSelectedRegions();\n        regions.forEach(function (region) { return callback(region, start, end); });\n        editor.select(start, end);\n    }, \"Format\" /* Format */);\n}\nexports.default = blockFormat;\n//# sourceMappingURL=blockFormat.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar blockFormat_1 = require(\"../utils/blockFormat\");\nvar roosterjs_editor_dom_1 = require(\"roosterjs-editor-dom\");\n/**\n * @internal\n */\nfunction experimentToggleListType(editor, listType) {\n    blockFormat_1.default(editor, function (region, start, end) {\n        var vList = roosterjs_editor_dom_1.createVListFromRegion(region, true /*includeSiblingLists*/);\n        if (vList) {\n            vList.changeListType(start, end, listType);\n            vList.writeBack();\n        }\n    });\n}\nexports.default = experimentToggleListType;\n//# sourceMappingURL=experimentToggleListType.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar roosterjs_editor_dom_1 = require(\"roosterjs-editor-dom\");\nvar ZERO_WIDTH_SPACE = '&#8203;';\nvar UNWRAPPABLE_NODES = 'LI,THEAD,TBODY,TR,TD,TH'.split(',');\nvar DEFAULT_STYLER = function (_) { };\n/**\n * Toggle a tag at selection, if selection already contains elements of such tag,\n * the elements will be untagge and other elements will take no affect\n * @param editor The editor instance\n * @param tag The tag name\n * @param styler (Optional) The styler for setting the style for the blockquote element\n * @param wrapFunction (Optional) The wrap function\n * @param unwrapFunction (Optional) The unwrap function\n */\nfunction toggleTagCore(editor, tag, styler, wrapFunction, unwrapFunction) {\n    if (wrapFunction === void 0) { wrapFunction = function (nodes) { return roosterjs_editor_dom_1.wrap(nodes, tag); }; }\n    if (unwrapFunction === void 0) { unwrapFunction = roosterjs_editor_dom_1.unwrap; }\n    editor.focus();\n    editor.addUndoSnapshot(function (start, end) {\n        var result;\n        var range = editor.getSelectionRange();\n        if (range &&\n            editor.queryElements(tag, 1 /* OnSelection */, unwrapFunction).length == 0) {\n            var startNode = roosterjs_editor_dom_1.Position.getStart(range).normalize().node;\n            var startBlock = editor.getBlockElementAtNode(startNode);\n            var endNode = roosterjs_editor_dom_1.Position.getEnd(range).normalize().node;\n            var endBlock = editor.getBlockElementAtNode(endNode);\n            var nodes = startBlock && endBlock\n                ? editor.collapseNodes(startBlock.getStartNode(), endBlock.getEndNode(), true /*canSplitParent*/)\n                : [];\n            if (nodes.length == 0) {\n                // Selection is collapsed and blockElement is null, we need to create an empty div.\n                // In case of IE and Edge, we insert ZWS to put cursor in the div, otherwise insert BR node.\n                nodes = roosterjs_editor_dom_1.fromHtml(\"<DIV>\" + (roosterjs_editor_dom_1.Browser.isIEOrEdge ? ZERO_WIDTH_SPACE : '<BR>') + \"</DIV>\", editor.getDocument());\n                editor.insertNode(nodes[0]);\n                editor.select(nodes[0], 0 /* Begin */);\n            }\n            else if (nodes.length == 1) {\n                var tag_1 = roosterjs_editor_dom_1.getTagOfNode(nodes[0]);\n                if (tag_1 == 'BR') {\n                    nodes = [roosterjs_editor_dom_1.wrap(nodes[0])];\n                }\n                else if (tag_1 == 'LI' || tag_1 == 'TD') {\n                    nodes = roosterjs_editor_dom_1.toArray(nodes[0].childNodes);\n                }\n            }\n            else {\n                while (nodes[0] &&\n                    editor.contains(nodes[0].parentNode) &&\n                    nodes.some(function (node) { return UNWRAPPABLE_NODES.indexOf(roosterjs_editor_dom_1.getTagOfNode(node)) >= 0; })) {\n                    nodes = [roosterjs_editor_dom_1.splitBalancedNodeRange(nodes)];\n                }\n            }\n            result = wrapFunction(nodes);\n            (styler || DEFAULT_STYLER)(result);\n        }\n        if (!editor.select(start, end) && result) {\n            editor.select(result);\n        }\n        return result;\n    }, \"Format\" /* Format */);\n}\nexports.default = toggleTagCore;\n//# sourceMappingURL=toggleTagCore.js.map","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"./ContentEdit\"));\n__export(require(\"./CustomReplace\"));\n__export(require(\"./HyperLink\"));\n__export(require(\"./ImageResize\"));\n__export(require(\"./Paste\"));\n__export(require(\"./Picker\"));\n__export(require(\"./TableResize\"));\n__export(require(\"./Watermark\"));\n__export(require(\"./Entity\"));\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar roosterjs_editor_dom_1 = require(\"roosterjs-editor-dom\");\n/**\n * Get default feature set of ContentEdit plugin\n */\nfunction getDefaultContentEditFeatures() {\n    return {\n        autoLink: true,\n        indentWhenTab: true,\n        outdentWhenShiftTab: true,\n        outdentWhenBackspaceOnEmptyFirstLine: true,\n        outdentWhenEnterOnEmptyLine: roosterjs_editor_dom_1.Browser.isIE || roosterjs_editor_dom_1.Browser.isChrome,\n        mergeInNewLineWhenBackspaceOnFirstChar: false,\n        unquoteWhenBackspaceOnEmptyFirstLine: true,\n        unquoteWhenEnterOnEmptyLine: true,\n        autoBullet: true,\n        tabInTable: true,\n        upDownInTable: roosterjs_editor_dom_1.Browser.isChrome || roosterjs_editor_dom_1.Browser.isSafari,\n        insertLineBeforeStructuredNodeFeature: false,\n        defaultShortcut: true,\n        unlinkWhenBackspaceAfterLink: false,\n        noCycleCursorMove: roosterjs_editor_dom_1.Browser.isChrome,\n        smartOrderedList: false,\n        smartOrderedListStyles: ['lower-alpha', 'lower-roman', 'decimal'],\n        markdownBold: true,\n        markdownItalic: true,\n        markdownStrikethru: true,\n        markdownInlineCode: true,\n    };\n}\nexports.getDefaultContentEditFeatures = getDefaultContentEditFeatures;\n//# sourceMappingURL=ContentEditFeatures.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/** NodeId attribute */\nvar NODE_ID_ATTRIBUTE_NAME = 'NodeId';\n/**\n * @internal\n * Create an empty CustomData\n */\nfunction createCustomData() {\n    return {\n        dict: {},\n        nextNodeId: 1,\n    };\n}\nexports.createCustomData = createCustomData;\n/**\n * @internal\n * Sets the specified object data\n */\nfunction setObject(customData, element, key, value) {\n    // Get the id for the element\n    if (element.nodeType == 1 /* Element */) {\n        var id = getAndSetNodeId(customData, element);\n        if (id != '') {\n            // Get the values for the element\n            if (!customData.dict[id]) {\n                // First time dictionary creation\n                customData.dict[id] = {};\n            }\n            customData.dict[id][key] = value;\n        }\n    }\n}\nexports.setObject = setObject;\n/**\n * @internal\n * Reads the specified object data\n */\nfunction getObject(customData, element, key) {\n    if (element.nodeType == 1 /* Element */) {\n        var id = getAndSetNodeId(customData, element);\n        if (id != '') {\n            return customData.dict[id] && customData.dict[id][key];\n        }\n    }\n    return null;\n}\nexports.getObject = getObject;\n/**\n * Get the unique id for the specified node...\n */\nfunction getAndSetNodeId(customData, element) {\n    var id = element.getAttribute(NODE_ID_ATTRIBUTE_NAME);\n    if (!id) {\n        id = customData.nextNodeId.toString();\n        customData.nextNodeId++;\n        element.setAttribute(NODE_ID_ATTRIBUTE_NAME, id);\n    }\n    return id;\n}\n//# sourceMappingURL=CustomData.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * @internal\n * create an empty LevelLists\n */\nfunction createLevelLists() {\n    return {\n        listsMetadata: {},\n        currentUniqueListId: -1,\n    };\n}\nexports.createLevelLists = createLevelLists;\n//# sourceMappingURL=LevelLists.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * @internal\n */\nexports.WORD_ORDERED_LIST_SELECTOR = 'div.ListContainerWrapper > ul[class^=\"BulletListStyle\"]';\n/**\n * @internal\n */\nexports.WORD_UNORDERED_LIST_SELECTOR = 'div.ListContainerWrapper > ol[class^=\"NumberListStyle\"]';\n/**\n * @internal\n */\nexports.WORD_ONLINE_IDENTIFYING_SELECTOR = exports.WORD_ORDERED_LIST_SELECTOR + \",\" + exports.WORD_UNORDERED_LIST_SELECTOR;\n/**\n * @internal\n */\nexports.LIST_CONTAINER_ELEMENT_CLASS_NAME = 'ListContainerWrapper';\n/**\n * @internal\n */\nexports.UNORDERED_LIST_TAG_NAME = 'UL';\n/**\n * @internal\n */\nexports.ORDERED_LIST_TAG_NAME = 'OL';\nvar TEXT_CONTAINER_ELEMENT_CLASS_NAME = 'OutlineElement';\n/**\n * @internal\n */\nexports.WAC_IDENTIFING_SELECTOR = \"ul[class^=\\\"BulletListStyle\\\"]>.\" + TEXT_CONTAINER_ELEMENT_CLASS_NAME + \",ol[class^=\\\"NumberListStyle\\\"]>.\" + TEXT_CONTAINER_ELEMENT_CLASS_NAME;\n//# sourceMappingURL=constants.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar getEntityFromElement_1 = require(\"./getEntityFromElement\");\nvar EntityInfo_1 = require(\"./EntityInfo\");\n/**\n * Get all entities with given entity type and id from an editor\n * @param editor The editor to get entity from\n * @param type (Optional) Type of the entity. If not specified, it will return all entities from this editor\n * @param id (Optional) Id of the entity. If not specified, it will return all entities of the given type\n */\nfunction getEntities(editor, type, id) {\n    var selector = EntityInfo_1.getEntitySelector(type, id);\n    var nodes = editor.queryElements(selector);\n    var allEntities = nodes.map(function (node) { return getEntityFromElement_1.default(node); });\n    return allEntities.filter(function (e) { return !!e; });\n}\nexports.default = getEntities;\n//# sourceMappingURL=getEntities.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar getEntityFromElement_1 = require(\"./getEntityFromElement\");\n/**\n * @internal\n * Try to trigger an EntityOperation event with a given element. An event will only be\n * triggered when the specified is an element root element.\n * @param editor The editor which contains the entity\n * @param element The root element of the entity\n * @param operation Operation of the EntityOperation event\n * @param rawEvent (Optional) Original UI event which causes this event\n */\nfunction tryTriggerEntityEvent(editor, element, operation, rawEvent) {\n    var entity = element && getEntityFromElement_1.default(element);\n    if (entity) {\n        if (operation == 0 /* NewEntity */ && entity.isReadonly) {\n            element.contentEditable = 'false';\n        }\n        editor.triggerPluginEvent(16 /* EntityOperation */, {\n            operation: operation,\n            rawEvent: rawEvent,\n            entity: entity,\n        });\n    }\n}\nexports.default = tryTriggerEntityEvent;\n//# sourceMappingURL=tryTriggerEntityEvent.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar EntityInfo_1 = require(\"./EntityInfo\");\nvar roosterjs_editor_dom_1 = require(\"roosterjs-editor-dom\");\n/**\n * Wrap a node and become an entity element\n * @param editor The editor to insert entity into.\n * @param type Type of the entity\n * @param contentNode Root element of the entity\n * @param isBlock Whether the entity will be shown as a block\n * @param isReadonly Whether the entity will be a readonly entity\n */\nfunction createEntityWrapper(editor, type, contentNode, isBlock, isReadonly) {\n    var wrapper = roosterjs_editor_dom_1.wrap(contentNode, isBlock ? 'DIV' : 'SPAN');\n    wrapper.className = EntityInfo_1.serializeEntityInfo(editor, type, isReadonly);\n    // For inline & readonly entity, we need to set display to \"inline-block\" otherwise\n    // there will be some weird behavior when move cursor around the entity node.\n    // And we should only do this for readonly entity since \"inline-block\" has some side effect\n    // in IE that there will be a resize border around the inline-block element. We made some\n    // workaround for readonly entity for this issue but for editable entity, keep it as \"inline\"\n    // will just work fine.\n    if (!isBlock && isReadonly) {\n        wrapper.style.display = 'inline-block';\n    }\n    return wrapper;\n}\nexports.default = createEntityWrapper;\n//# sourceMappingURL=createEntityWrapper.js.map","const CssHandlers = {\r\n    object: (obj: any, result: string[]) => {\r\n        for (const key in obj) {\r\n            if (obj[key]) {\r\n                result.push(key);\r\n            }\r\n        }\r\n    },\r\n    string: (str: string, result: string[]) => result.push(str)\r\n};\r\n\r\nexport function css(...args: (string | any)[]): string {\r\n    const result: string[] = [];\r\n    for (const arg of args) {\r\n        const handler = CssHandlers[typeof arg];\r\n        if (arg && handler) {\r\n            handler(arg, result);\r\n        }\r\n    }\r\n\r\n    return result.join(' ');\r\n}\r\n\r\nfunction reduceObject<T>(object: any, callback: (key: string) => boolean): T {\r\n    if (!object) {\r\n        return object;\r\n    }\r\n\r\n    return Object.keys(object).reduce(\r\n        (result: T, key: string) => {\r\n            if (callback(key)) {\r\n                result[key] = object[key];\r\n            }\r\n            return result;\r\n        },\r\n        {} as T\r\n    );\r\n}\r\n\r\nexport function getDataAndAriaProps<T>(props: any): T {\r\n    return reduceObject(props || {}, propName => propName.indexOf('data-') === 0 || propName.indexOf('aria-') === 0);\r\n}\r\n","export const Base64Svgs = {\r\n    // Note: just a simple SVG spinner (based on Office Fabric Spinner), decode Base64 to see the code\r\n    RoosterJsReactSpinner: \"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiI+PHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJyZ2IoMCwgMTIwLCAyMTIpIiBzdHJva2Utd2lkdGg9IjEuNSIgZD0iTSAxNC41IDggQSA2LjUgNi41IDAgMCAwIDggMS41IiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiIgLz48cGF0aCBmaWxsPSJub25lIiBzdHJva2U9InJnYigxOTksIDIyNCwgMjQ0KSIgc3Ryb2tlLXdpZHRoPSIxLjUiIGQ9Ik0gNy45OTk5OTk5OTk5OTk5OTkgMS41IEEgNi41IDYuNSAwIDEgMCAxNC41IDgiIHNoYXBlLXJlbmRlcmluZz0iZ2VvbWV0cmljUHJlY2lzaW9uIiAvPjwvc3ZnPg==\"\r\n};\r\n","export { default as createEditorViewState } from './utils/createEditorViewState';\r\nexport { default as createFormatState } from './utils/createFormatState';\r\nexport { default as EditorViewState } from './schema/EditorViewState';\r\nexport { default as FocusOutShell, FocusOutShellProps, FocusOutShellState, FocusEventHandler } from './components/FocusOutShell';\r\nexport { default as LeanRooster, LeanRoosterProps, LeanRoosterInitialOptions, LeanRoosterModes } from './components/LeanRooster';\r\n","import { CommandBarButton, IButton, IButtonProps } from \"office-ui-fabric-react/lib/Button\";\r\nimport { DirectionalHint } from \"office-ui-fabric-react/lib/ContextualMenu\";\r\nimport { Icon } from \"office-ui-fabric-react/lib/Icon\";\r\nimport { TooltipHost } from \"office-ui-fabric-react/lib/Tooltip\";\r\nimport { IRenderFunction } from \"office-ui-fabric-react/lib/Utilities\";\r\nimport * as React from \"react\";\r\nimport { css } from \"roosterjs-react-common\";\r\n\r\nimport { RoosterCommandBarButton } from \"../schema/RoosterCommandBarSchema\";\r\n\r\nexport interface IconOnRenderDelegateOptions {\r\n    customCacheKey?: string;\r\n    highContrastAssetName?: string;\r\n    assets?: { name: string; className?: string }[];\r\n    tooltipDirectionHint?: DirectionalHint;\r\n}\r\n\r\nexport type ButtonOnRenderDelegate = (item: RoosterCommandBarButton) => JSX.Element;\r\nconst OnRenderDelegateCache: { [key: string]: ButtonOnRenderDelegate } = {};\r\n\r\nexport function getIconOnRenderDelegate(highContrastAssetName: string = null, ...assets: { name: string; className?: string }[]): ButtonOnRenderDelegate {\r\n    return getIconButtonOnRenderDelegate({ highContrastAssetName, assets });\r\n}\r\n\r\nexport function getIconOnRenderDelegateWithCustomCacheKey(\r\n    customCacheKey: string,\r\n    highContrastAssetName: string = null,\r\n    ...assets: { name: string; className?: string }[]\r\n): ButtonOnRenderDelegate {\r\n    return getIconButtonOnRenderDelegate({ customCacheKey, highContrastAssetName, assets });\r\n}\r\n\r\nexport function getIconButtonOnRenderDelegate(options?: IconOnRenderDelegateOptions): ButtonOnRenderDelegate {\r\n    const { customCacheKey, assets, highContrastAssetName, tooltipDirectionHint } = options || ({} as IconOnRenderDelegateOptions);\r\n    const cacheKey = customCacheKey != null ? customCacheKey : assets ? assets.map(a => a.name).join(\".\") : \"\";\r\n    if (!OnRenderDelegateCache[cacheKey]) {\r\n        const iconClassName = \"stacked-icon\";\r\n        let onRenderIcon: IRenderFunction<IButtonProps> = undefined;\r\n        if (assets && assets.length > 1) {\r\n            onRenderIcon = () => (\r\n                <div className=\"stacked-icon-container\">\r\n                    {assets.map((asset, i) => (\r\n                        <Icon key={i} iconName={asset.name} className={css(iconClassName, asset.className || `${iconClassName}-${asset.name}`)} />\r\n                    ))}\r\n                    {highContrastAssetName && <Icon iconName={highContrastAssetName} className={css(iconClassName, \"high-contrast-icon\")} />}\r\n                </div>\r\n            );\r\n        }\r\n\r\n        let cmdButton: IButton = null;\r\n        OnRenderDelegateCache[cacheKey] = (item: RoosterCommandBarButton): JSX.Element => (\r\n            <TooltipHost hostClassName=\"command-button-tool-tip\" content={item.name} key={item.key} directionalHint={tooltipDirectionHint}>\r\n                <CommandBarButton\r\n                    componentRef={ref => (cmdButton = ref)}\r\n                    {...item as any}\r\n                    ariaLabel={item.name}\r\n                    menuProps={\r\n                        item.subMenuProps && {\r\n                            ...item.subMenuProps,\r\n                            onDismiss: ev => {\r\n                                item.subMenuProps.onDismiss(ev);\r\n                                cmdButton.dismissMenu();\r\n                            }\r\n                        }\r\n                    }\r\n                    className={css(\"rooster-command-bar-button\", item.buttonClassName)}\r\n                    onRenderIcon={onRenderIcon}\r\n                />\r\n            </TooltipHost>\r\n        );\r\n    }\r\n\r\n    return OnRenderDelegateCache[cacheKey];\r\n}\r\n","module.exports = __WEBPACK_EXTERNAL_MODULE__115__;","import { DefaultButton } from \"office-ui-fabric-react/lib/Button\";\r\nimport { DirectionalHint, IContextualMenuItem } from \"office-ui-fabric-react/lib/ContextualMenu\";\r\nimport { FocusZoneDirection } from \"office-ui-fabric-react/lib/FocusZone\";\r\nimport { IIconProps } from \"office-ui-fabric-react/lib/Icon\";\r\nimport * as React from \"react\";\r\nimport {\r\n    removeLink,\r\n    setBackgroundColor,\r\n    setIndentation,\r\n    setTextColor,\r\n    toggleBold,\r\n    toggleBullet,\r\n    toggleCodeBlock,\r\n    toggleHeader,\r\n    toggleItalic,\r\n    toggleNumbering,\r\n    toggleStrikethrough,\r\n    toggleUnderline\r\n} from \"roosterjs-editor-api\";\r\nimport { Editor } from \"roosterjs-editor-core\";\r\nimport { FormatState, Indentation } from \"roosterjs-editor-types\";\r\nimport { setNonCompatIndentation, toggleNonCompatBullet, toggleNonCompatNumbering } from \"roosterjs-react-common\";\r\n\r\nimport {\r\n    RoosterCommandBarButtonInternal,\r\n    RoosterCommandBarProps,\r\n    RoosterCommandBarState\r\n} from \"../schema/RoosterCommandBarSchema\";\r\nimport { ColorInfo, FontColorInfoList, HighlightColorInfoList } from \"./OutOfBoxCommandBarButtons.ColorInfo\";\r\n\r\nexport const RoosterCommandBarIconClassName = \"rooster-command-bar-icon\";\r\nexport const RoosterCommandBarButtonRootClassName = \"rooster-command-button-root\";\r\n\r\nexport const RoosterCommandBarStringKeys = {\r\n    LinkPrompt: \"linkPrompt\"\r\n};\r\n\r\nexport const RoosterCommmandBarButtonKeys = {\r\n    Header: \"header\",\r\n    Bold: \"bold\",\r\n    Italic: \"italic\",\r\n    Underline: \"underline\",\r\n    BulletedList: \"bulleted-list\",\r\n    NumberedList: \"numbered-list\",\r\n    Link: \"link\",\r\n    Highlight: \"highlight\",\r\n    ClearFormat: \"clear-format\",\r\n    Emoji: \"emoji\",\r\n    InsertImage: \"insert-image\",\r\n    Indent: \"indent\",\r\n    Outdent: \"outdent\",\r\n    Strikethrough: \"strikethrough\",\r\n    FontColor: \"font-color\",\r\n    Unlink: \"unlink\",\r\n    Code: \"code\"\r\n};\r\n\r\nconst RenderOptionsNoCustomCacheKey: string = null; // buttons that are not menu based don't need custom cache keys\r\n\r\nexport const OutOfBoxCommandBarButtons: RoosterCommandBarButtonInternal[] = [\r\n    {\r\n        key: RoosterCommmandBarButtonKeys.Bold,\r\n        name: \"Bold\",\r\n        iconProps: _getIconProps(\"Bold\"),\r\n        canCheck: true,\r\n        getChecked: (formatState: FormatState) => formatState.isBold,\r\n        handleChange: (editor: Editor) => toggleBold(editor)\r\n    },\r\n    {\r\n        key: RoosterCommmandBarButtonKeys.Italic,\r\n        name: \"Italic\",\r\n        iconProps: _getIconProps(\"Italic\"),\r\n        canCheck: true,\r\n        getChecked: (formatState: FormatState) => formatState.isItalic,\r\n        handleChange: (editor: Editor) => toggleItalic(editor)\r\n    },\r\n    {\r\n        key: RoosterCommmandBarButtonKeys.Underline,\r\n        name: \"Underline\",\r\n        iconProps: _getIconProps(\"Underline\"),\r\n        canCheck: true,\r\n        getChecked: (formatState: FormatState) => formatState.isUnderline,\r\n        handleChange: (editor: Editor) => toggleUnderline(editor)\r\n    },\r\n    {\r\n        key: RoosterCommmandBarButtonKeys.BulletedList,\r\n        name: \"Bulleted list\",\r\n        iconProps: _getIconProps(\"BulletedList\"),\r\n        onRenderOptions: {\r\n            customCacheKey: RenderOptionsNoCustomCacheKey,\r\n            highContrastAssetName: \"BulletedList\",\r\n            assets: [{ name: \"BulletedListText\" }, { name: \"BulletedListBullet\" }]\r\n        },\r\n        canCheck: true,\r\n        getChecked: (formatState: FormatState) => formatState.isBullet,\r\n        handleChange: (editor: Editor, props: RoosterCommandBarProps) => (props.disableListWorkaround ? toggleNonCompatBullet : toggleBullet)(editor)\r\n    },\r\n    {\r\n        key: RoosterCommmandBarButtonKeys.NumberedList,\r\n        name: \"Numbered list\",\r\n        iconProps: _getIconProps(\"NumberedList\"),\r\n        onRenderOptions: {\r\n            customCacheKey: RenderOptionsNoCustomCacheKey,\r\n            highContrastAssetName: \"NumberedList\",\r\n            assets: [{ name: \"NumberedListText\" }, { name: \"NumberedListNumber\" }]\r\n        },\r\n        canCheck: true,\r\n        getChecked: (formatState: FormatState) => formatState.isNumbering,\r\n        handleChange: (editor: Editor, props: RoosterCommandBarProps) => (props.disableListWorkaround ? toggleNonCompatNumbering : toggleNumbering)(editor)\r\n    },\r\n    {\r\n        key: RoosterCommmandBarButtonKeys.Highlight,\r\n        name: \"Highlight\",\r\n        iconProps: _getIconProps(\"Highlight\"),\r\n        onRenderOptions: {\r\n            highContrastAssetName: \"FabricTextHighlightComposite\",\r\n            assets: [{ name: \"FontColorSwatch\", className: \"highlight-swatch\" }, { name: \"FabricTextHighlight\" }]\r\n        },\r\n        subMenuProps: {\r\n            className: \"rooster-command-bar-color-container\",\r\n            shouldFocusOnMount: true,\r\n            directionalHint: DirectionalHint.bottomLeftEdge,\r\n            focusZoneProps: { direction: FocusZoneDirection.bidirectional },\r\n            items: HighlightColorInfoList.map(\r\n                (color: ColorInfo) =>\r\n                    ({\r\n                        className: \"rooster-command-bar-color-item\",\r\n                        key: color.key,\r\n                        title: color.title,\r\n                        onRender: _colorCellOnRender,\r\n                        data: color,\r\n                        handleChange: _handleChangeForHighlight\r\n                    } as IContextualMenuItem)\r\n            )\r\n        }\r\n    },\r\n    {\r\n        key: RoosterCommmandBarButtonKeys.FontColor,\r\n        name: \"Font color\",\r\n        iconProps: _getIconProps(\"FontColor\"),\r\n        onRenderOptions: { highContrastAssetName: \"FontColor\", assets: [{ name: \"FontColorSwatch\", className: \"color-swatch\" }, { name: \"FontColorA\" }] },\r\n        subMenuProps: {\r\n            className: \"rooster-command-bar-color-container\",\r\n            shouldFocusOnMount: true,\r\n            directionalHint: DirectionalHint.bottomLeftEdge,\r\n            focusZoneProps: { direction: FocusZoneDirection.bidirectional },\r\n            items: FontColorInfoList.map(\r\n                (color: ColorInfo) =>\r\n                    ({\r\n                        className: \"rooster-command-bar-color-item\",\r\n                        key: color.key,\r\n                        title: color.title,\r\n                        onRender: _colorCellOnRender,\r\n                        data: color,\r\n                        handleChange: _handleChangeForFontColor\r\n                    } as IContextualMenuItem)\r\n            )\r\n        }\r\n    },\r\n    {\r\n        key: RoosterCommmandBarButtonKeys.Emoji,\r\n        name: \"Emoji\",\r\n        iconProps: { className: `${RoosterCommandBarIconClassName} rooster-emoji` } as IIconProps,\r\n        handleChange: (editor: Editor, props: RoosterCommandBarProps) => props.emojiPlugin.startEmoji()\r\n    },\r\n    {\r\n        key: RoosterCommmandBarButtonKeys.Outdent,\r\n        name: \"Decrease indent\",\r\n        iconProps: _getIconProps(\"DecreaseIndentLegacy\"),\r\n        onRenderOptions: {\r\n            customCacheKey: RenderOptionsNoCustomCacheKey,\r\n            highContrastAssetName: \"DecreaseIndentLegacy\",\r\n            assets: [{ name: \"DecreaseIndentText\" }, { name: \"DecreaseIndentArrow\" }]\r\n        },\r\n        handleChange: (editor: Editor, props: RoosterCommandBarProps) => (props.disableListWorkaround ? setNonCompatIndentation : setIndentation)(editor, Indentation.Decrease)\r\n    },\r\n    {\r\n        key: RoosterCommmandBarButtonKeys.Indent,\r\n        name: \"Increase indent\",\r\n        iconProps: _getIconProps(\"IncreaseIndentLegacy\"),\r\n        onRenderOptions: {\r\n            customCacheKey: RenderOptionsNoCustomCacheKey,\r\n            highContrastAssetName: \"IncreaseIndentLegacy\",\r\n            assets: [{ name: \"IncreaseIndentText\" }, { name: \"IncreaseIndentArrow\" }]\r\n        },\r\n        handleChange: (editor: Editor, props: RoosterCommandBarProps) => (props.disableListWorkaround ? setNonCompatIndentation : setIndentation)(editor, Indentation.Increase)\r\n    },\r\n    {\r\n        key: RoosterCommmandBarButtonKeys.Strikethrough,\r\n        name: \"Strikethrough\",\r\n        iconProps: _getIconProps(\"Strikethrough\"),\r\n        getChecked: (formatState: FormatState) => formatState.isStrikeThrough,\r\n        handleChange: (editor: Editor) => toggleStrikethrough(editor)\r\n    },\r\n    {\r\n        key: RoosterCommmandBarButtonKeys.Header,\r\n        name: \"Header\",\r\n        iconProps: _getIconProps(\"FontSize\"),\r\n        onRenderOptions: { assets: [{ name: \"FontSize\" }] },\r\n        subMenuProps: {\r\n            shouldFocusOnMount: true,\r\n            directionalHint: DirectionalHint.bottomLeftEdge,\r\n            items: [\r\n                {\r\n                    key: \"header1\",\r\n                    name: \"Header 1\",\r\n                    className: \"rooster-command-bar-header1\",\r\n                    headerLevel: 1,\r\n                    canCheck: true,\r\n                    getChecked: _getCheckedForHeader,\r\n                    isContextMenuItem: true,\r\n                    handleChange: _handleChangeForHeader,\r\n                    iconProps: null\r\n                },\r\n                {\r\n                    key: \"header2\",\r\n                    name: \"Header 2\",\r\n                    className: \"rooster-command-bar-header2\",\r\n                    headerLevel: 2,\r\n                    canCheck: true,\r\n                    getChecked: _getCheckedForHeader,\r\n                    isContextMenuItem: true,\r\n                    handleChange: _handleChangeForHeader,\r\n                    iconProps: null\r\n                },\r\n                {\r\n                    key: \"header3\",\r\n                    name: \"Header 3\",\r\n                    className: \"rooster-command-bar-header3\",\r\n                    headerLevel: 3,\r\n                    canCheck: true,\r\n                    getChecked: _getCheckedForHeader,\r\n                    isContextMenuItem: true,\r\n                    handleChange: _handleChangeForHeader,\r\n                    iconProps: null\r\n                }\r\n            ] as RoosterCommandBarButtonInternal[]\r\n        }\r\n    },\r\n    {\r\n        key: RoosterCommmandBarButtonKeys.Code,\r\n        name: \"Code\",\r\n        iconProps: _getIconProps(\"Embed\"),\r\n        handleChange: (editor: Editor) => toggleCodeBlock(editor)\r\n    },\r\n    {\r\n        key: RoosterCommmandBarButtonKeys.ClearFormat,\r\n        name: \"Clear format\",\r\n        iconProps: _getIconProps(\"ClearFormatting\"),\r\n        onRenderOptions: {\r\n            customCacheKey: RenderOptionsNoCustomCacheKey,\r\n            highContrastAssetName: \"ClearFormatting\",\r\n            assets: [{ name: \"ClearFormattingA\" }, { name: \"ClearFormattingEraser\" }]\r\n        },\r\n        handleChange: (editor: Editor, props: RoosterCommandBarProps) => props.roosterCommandBarPlugin.clearFormat()\r\n    },\r\n    {\r\n        key: RoosterCommmandBarButtonKeys.InsertImage,\r\n        name: \"Insert image\",\r\n        iconProps: _getIconProps(\"Photo2\"),\r\n        onRenderOptions: { customCacheKey: RenderOptionsNoCustomCacheKey, assets: [{ name: \"Photo2Fill\" }, { name: \"Photo2\" }] } // reuse Photo2 as the high contrast icon\r\n    },\r\n    {\r\n        key: RoosterCommmandBarButtonKeys.Link,\r\n        name: \"Link\",\r\n        iconProps: _getIconProps(\"Link\"),\r\n        handleChange: (editor: Editor, props: RoosterCommandBarProps) => props.roosterCommandBarPlugin.promptForLink()\r\n    },\r\n    {\r\n        key: RoosterCommmandBarButtonKeys.Unlink,\r\n        name: \"Unlink\",\r\n        iconProps: _getIconProps(\"RemoveLink\"),\r\n        onRenderOptions: { customCacheKey: RenderOptionsNoCustomCacheKey, highContrastAssetName: \"RemoveLink\", assets: [{ name: \"RemoveLinkChain\" }, { name: \"RemoveLinkX\" }] },\r\n        getDisabled: (formatState: FormatState) => !formatState.canUnlink,\r\n        handleChange: (editor: Editor) => removeLink(editor)\r\n    }\r\n];\r\nOutOfBoxCommandBarButtons.forEach((button: RoosterCommandBarButtonInternal) => {\r\n    const asset = { name: button.name };\r\n    button.onRenderOptions = button.onRenderOptions || { customCacheKey: RenderOptionsNoCustomCacheKey, assets: [asset] };\r\n    button.className = RoosterCommandBarButtonRootClassName;\r\n});\r\n\r\nexport const OutOfBoxCommandBarButtonMap = OutOfBoxCommandBarButtons.reduce(\r\n    (result: { [key: string]: RoosterCommandBarButtonInternal }, item: RoosterCommandBarButtonInternal) => {\r\n        result[item.key] = item;\r\n        return result;\r\n    },\r\n    {} as { [key: string]: RoosterCommandBarButtonInternal }\r\n);\r\n\r\nfunction _getIconProps(iconName: string): IIconProps {\r\n    return { className: RoosterCommandBarIconClassName, iconName };\r\n}\r\n\r\nfunction _getCheckedForHeader(formatState: FormatState): boolean {\r\n    return formatState.headerLevel === this.headerLevel;\r\n}\r\n\r\nfunction _handleChangeForHeader(editor: Editor, props: RoosterCommandBarProps, state: RoosterCommandBarState): void {\r\n    if (state.formatState.headerLevel === this.headerLevel) {\r\n        toggleHeader(editor, 0);\r\n    } else {\r\n        toggleHeader(editor, this.headerLevel);\r\n    }\r\n}\r\n\r\nfunction _colorCellOnRender(item: IContextualMenuItem): JSX.Element {\r\n    const { color, cellBorderColor } = item.data as ColorInfo;\r\n    return (\r\n        <DefaultButton className=\"rooster-command-bar-color-button\" title={item.title} key={item.key} onClick={ev => item.onClick(ev as React.MouseEvent<HTMLElement>, item)}>\r\n            {cellBorderColor && <div className=\"rooster-command-bar-color-cell-border\" style={{ borderColor: cellBorderColor }} />}\r\n            <svg className=\"rooster-command-bar-color-cell\" viewBox=\"0 0 30 30\" fill={color} focusable=\"false\">\r\n                <rect width=\"100%\" height=\"100%\" />\r\n            </svg>\r\n        </DefaultButton>\r\n    );\r\n}\r\n\r\nfunction _handleChangeForFontColor(editor: Editor): void {\r\n    const { color } = this.data as ColorInfo;\r\n    setTextColor(editor, color);\r\n}\r\n\r\nfunction _handleChangeForHighlight(editor: Editor): void {\r\n    const { color } = this.data as ColorInfo;\r\n    const selection = editor.getSelection();\r\n    let backwards = false;\r\n    if (!selection.isCollapsed) {\r\n        const range = editor.getDocument().createRange();\r\n        range.setStart(selection.anchorNode, selection.anchorOffset);\r\n        range.setEnd(selection.focusNode, selection.focusOffset);\r\n        backwards = range.collapsed;\r\n    }\r\n\r\n    setBackgroundColor(editor, color);\r\n    if (backwards) {\r\n        selection.collapseToStart();\r\n    } else {\r\n        selection.collapseToEnd();\r\n    }\r\n}\r\n","import * as Styles from \"./LinkDialog.scss.g\";\r\n\r\nimport { DefaultButton, PrimaryButton } from \"office-ui-fabric-react/lib/Button\";\r\nimport { Dialog, DialogFooter, DialogType } from \"office-ui-fabric-react/lib/Dialog\";\r\nimport { ITextField, TextField } from \"office-ui-fabric-react/lib/TextField\";\r\nimport { css, KeyCodes } from \"office-ui-fabric-react/lib/Utilities\";\r\nimport * as React from \"react\";\r\nimport * as ReactDOM from \"react-dom\";\r\nimport { createLink } from \"roosterjs-editor-api\";\r\nimport { Editor } from \"roosterjs-editor-core\";\r\nimport { NullFunction, Strings } from \"roosterjs-react-common\";\r\n\r\nexport const InsertLinkStringKeys = {\r\n    LinkFieldLabel: \"linkFieldLabel\",\r\n    Title: \"linkPromptTitle\",\r\n    InsertButton: \"insertLinkText\",\r\n    CancelButton: \"cancelLinkText\"\r\n};\r\n\r\nexport interface LinkDialogProps {\r\n    className?: string;\r\n    onDismiss?: (ev: React.FocusEvent<HTMLElement>) => void;\r\n    editor: Editor;\r\n    strings?: Strings;\r\n    selectionRange?: Range;\r\n}\r\n\r\nexport interface LinkDialogState {\r\n    insertButtonDisabled: boolean;\r\n}\r\n\r\nclass LinkDialog extends React.PureComponent<LinkDialogProps, LinkDialogState> {\r\n    private linkField: ITextField;\r\n    private linkInserted: boolean;\r\n\r\n    constructor(props: LinkDialogProps) {\r\n        super(props);\r\n\r\n        this.state = { insertButtonDisabled: true };\r\n    }\r\n\r\n    public render(): JSX.Element {\r\n        const { strings = {}, className } = this.props;\r\n\r\n        return (\r\n            <Dialog\r\n                onDismiss={this.dismissDialog}\r\n                dialogContentProps={{ type: DialogType.normal, title: strings[InsertLinkStringKeys.Title] }}\r\n                hidden={false}\r\n                modalProps={{ isBlocking: true }}\r\n                className={css(Styles.modal, className)}\r\n            >\r\n                <TextField\r\n                    label={strings[InsertLinkStringKeys.LinkFieldLabel] || \"Link\"}\r\n                    componentRef={this.onLinkFieldRef}\r\n                    onKeyDown={this.onLinkFieldKeyDown}\r\n                    required={true}\r\n                    onChange={this.onLinkFieldChanged}\r\n                />\r\n                <DialogFooter>\r\n                    <PrimaryButton onClick={this.insertLink} text={strings[InsertLinkStringKeys.InsertButton] || \"Insert\"} disabled={this.state.insertButtonDisabled} />\r\n                    <DefaultButton onClick={this.dismissDialog} text={strings[InsertLinkStringKeys.CancelButton] || \"Cancel\"} />\r\n                </DialogFooter>\r\n            </Dialog>\r\n        );\r\n    }\r\n\r\n    public componentDidMount(): void {\r\n        this.linkField && this.linkField.focus();\r\n    }\r\n\r\n    private onLinkFieldRef = (ref: ITextField): void => {\r\n        this.linkField = ref;\r\n    };\r\n\r\n    private onLinkFieldChanged = (_e: any, newValue: string): void => {\r\n        this.setState({ insertButtonDisabled: newValue.trim().length === 0 });\r\n    };\r\n\r\n    private onLinkFieldKeyDown = (ev: React.KeyboardEvent<HTMLInputElement>): void => {\r\n        if (ev.which === KeyCodes.enter) {\r\n            this.insertLink();\r\n            ev.preventDefault();\r\n            ev.stopPropagation();\r\n        }\r\n    };\r\n\r\n    private insertLink = (): void => {\r\n        const { editor, selectionRange } = this.props;\r\n\r\n        if (!this.linkField || !editor || editor.isDisposed()) {\r\n            return;\r\n        }\r\n\r\n        editor && !editor.isDisposed() && editor.select(selectionRange);\r\n        this.linkInserted = true; // don't need to restore the selection after dismiss if we're changing selection into a link\r\n        createLink(editor, this.linkField.value);\r\n        this.dismissDialog();\r\n    };\r\n\r\n    private dismissDialog = (ev?: React.MouseEvent<HTMLButtonElement>): void => {\r\n        const { editor, onDismiss = NullFunction, selectionRange } = this.props;\r\n        onDismiss(ev as any);\r\n        !this.linkInserted && editor && !editor.isDisposed() && editor.select(selectionRange);\r\n    };\r\n}\r\n\r\nexport function createLinkDialog(doc: Document, props: LinkDialogProps, calloutClassName?: string): () => void {\r\n    const { editor, onDismiss } = props;\r\n\r\n    let container = doc.createElement(\"div\");\r\n    doc.body.appendChild(container);\r\n    const dispose = (): void => {\r\n        if (container) {\r\n            ReactDOM.unmountComponentAtNode(container);\r\n\r\n            // hack to clear placeholder and also for Firefox, to get cursor visible again\r\n            container.setAttribute(\"tabindex\", \"0\");\r\n            calloutClassName && container.setAttribute(\"class\", calloutClassName);\r\n            container.focus();\r\n            editor && !editor.isDisposed() && editor.focus();\r\n\r\n            container.parentElement.removeChild(container);\r\n            container = null;\r\n        }\r\n    };\r\n\r\n    // for the case that selection isn't tracked, we need to save the selection before bringing up the dialog\r\n    // and from there, we need to restore it before converting the selected text into a link or restore\r\n    // the selection if the dialog was cancelled\r\n    const selectionRange = editor && !editor.isDisposed() ? editor.getSelectionRange() : null;\r\n    ReactDOM.render(\r\n        <LinkDialog\r\n            {...props}\r\n            selectionRange={selectionRange}\r\n            onDismiss={(ev: React.FocusEvent<HTMLElement>): void => {\r\n                dispose();\r\n                onDismiss && onDismiss(ev);\r\n            }}\r\n            className={css(calloutClassName, props.className)}\r\n        />,\r\n        container\r\n    );\r\n\r\n    return dispose;\r\n}\r\n","module.exports = __WEBPACK_EXTERNAL_MODULE__118__;","module.exports = __WEBPACK_EXTERNAL_MODULE__119__;","module.exports = __WEBPACK_EXTERNAL_MODULE__120__;","import { Strings } from \"roosterjs-react-common\";\r\n\r\nimport Emoji from \"../schema/Emoji\";\r\nimport { forEachEmoji } from \"./emojiList\";\r\n\r\nexport function searchEmojis(search: string, strings: Strings): Emoji[] {\r\n    const shortcutMatch = matchShortcut(search);\r\n    search = search.toLowerCase();\r\n    const fullMatch: Emoji[] = shortcutMatch ? [shortcutMatch] : [];\r\n    const partialMatch: Emoji[] = [];\r\n    const partialSearch = \" \" + (search[0] == \":\" ? search.substr(1) : search);\r\n    forEachEmoji(emoji => {\r\n        const keywords = strings[emoji.keywords] || \"\";\r\n        const searchableKeywords = emoji.keywords ? \" \" + keywords.toLowerCase() + \" \" : \"\";\r\n        const index = searchableKeywords.indexOf(partialSearch);\r\n        if (index >= 0) {\r\n            (searchableKeywords[index + partialSearch.length] == \" \" ? fullMatch : partialMatch).push(emoji);\r\n        }\r\n        return true;\r\n    });\r\n\r\n    return fullMatch.concat(partialMatch);\r\n}\r\n\r\nexport function matchShortcut(search: string): Emoji {\r\n    let result: Emoji;\r\n    search = \" \" + search + \" \";\r\n    forEachEmoji((emoji: Emoji) => {\r\n        if (emoji.shortcut && (\" \" + emoji.shortcut + \" \").indexOf(search) >= 0) {\r\n            result = emoji;\r\n            return false;\r\n        }\r\n        return true;\r\n    });\r\n    return result;\r\n}\r\n","/* tslint:disable */\nimport { loadStyles } from '@microsoft/load-themed-styles';\nloadStyles([{\"rawString\":\".rooster-emoji-pane{padding:1px}.rooster-emoji-pane button{outline:0;position:relative}.rooster-emoji-pane .rooster-emoji-selected{background-color:#eaeaea}@media screen and (-ms-high-contrast: active){.rooster-emoji-pane .rooster-emoji-selected{background-color:Highlight;color:HighlightText;-ms-high-contrast-adjust:none}}.is-focusVisible .rooster-emoji-pane.quick-picker .rooster-emoji-selected::after,.is-focusVisible .rooster-emoji-pane button:focus::after{content:\\\"\\\";position:absolute;left:0px;top:0px;bottom:0px;right:0px;z-index:1;border-width:1px;border-style:solid;border-color:#fff;-o-border-image:initial;border-image:initial;outline:#666 solid 1px}.emoji_27c960a4{background:#fff;font-size:18px;width:40px;height:40px;border:0}.emoji_27c960a4::-moz-focus-inner{border:0}.emojiTextInput_27c960a4{padding:6px}.fullList_27c960a4{position:relative}.quickPicker_27c960a4{overflow-y:hidden}.partialList_27c960a4,.fullListBody_27c960a4{max-height:245px;overflow:hidden;overflow-y:scroll}.fullListBody_27c960a4{height:245px}.fullListContentContainer_27c960a4{margin:43px 0 1px 0}.partialListContent_27c960a4,.fullListContent_27c960a4{width:282px;padding:0 1px}.tooltip_27c960a4{padding:8px}\"}]);\nexport const emoji = \"emoji_27c960a4\";\nexport const emojiTextInput = \"emojiTextInput_27c960a4\";\nexport const fullList = \"fullList_27c960a4\";\nexport const quickPicker = \"quickPicker_27c960a4\";\nexport const partialList = \"partialList_27c960a4\";\nexport const fullListBody = \"fullListBody_27c960a4\";\nexport const fullListContentContainer = \"fullListContentContainer_27c960a4\";\nexport const partialListContent = \"partialListContent_27c960a4\";\nexport const fullListContent = \"fullListContent_27c960a4\";\nexport const tooltip = \"tooltip_27c960a4\";","export * from 'roosterjs-html-sanitizer';\r\nexport * from 'roosterjs-editor-types';\r\nexport * from 'roosterjs-editor-dom';\r\nexport * from 'roosterjs-editor-core';\r\nexport * from 'roosterjs-editor-api';\r\nexport * from 'roosterjs-editor-plugins';\r\n\r\n//export * from 'roosterjs-plugin-image-resize';\r\n\r\nexport * from 'roosterjs-react-common';\r\nexport * from 'roosterjs-react-command-bar';\r\nexport * from 'roosterjs-react-editor';\r\nexport * from 'roosterjs-react-emoji';\r\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar contains_1 = require(\"../utils/contains\");\nvar getBlockElementAtNode_1 = require(\"../blockElements/getBlockElementAtNode\");\nvar getInlineElementAtNode_1 = require(\"../inlineElements/getInlineElementAtNode\");\nvar getFirstLastBlockElement_1 = require(\"../blockElements/getFirstLastBlockElement\");\nvar getFirstLastInlineElement_1 = require(\"../inlineElements/getFirstLastInlineElement\");\n/**\n * provides scoper for traversing the entire editor body starting from the beginning\n */\nvar BodyScoper = /** @class */ (function () {\n    /**\n     * Construct a new instance of BodyScoper class\n     * @param rootNode Root node of the body\n     * @param startNode The node to start from. If not passed, it will start from the beginning of the body\n     */\n    function BodyScoper(rootNode, startNode) {\n        this.rootNode = rootNode;\n        this.startNode = contains_1.default(rootNode, startNode) ? startNode : null;\n    }\n    /**\n     * Get the start block element\n     */\n    BodyScoper.prototype.getStartBlockElement = function () {\n        return this.startNode\n            ? getBlockElementAtNode_1.default(this.rootNode, this.startNode)\n            : getFirstLastBlockElement_1.getFirstBlockElement(this.rootNode);\n    };\n    /**\n     * Get the start inline element\n     */\n    BodyScoper.prototype.getStartInlineElement = function () {\n        return this.startNode\n            ? getInlineElementAtNode_1.default(this.rootNode, this.startNode)\n            : getFirstLastInlineElement_1.getFirstInlineElement(this.rootNode);\n    };\n    /**\n     * Since the scope is global, all blocks under the root node are in scope\n     */\n    BodyScoper.prototype.isBlockInScope = function (blockElement) {\n        return contains_1.default(this.rootNode, blockElement.getStartNode());\n    };\n    /**\n     * Since we're at body scope, inline elements never need to be trimmed\n     */\n    BodyScoper.prototype.trimInlineElement = function (inlineElement) {\n        return inlineElement;\n    };\n    return BodyScoper;\n}());\nexports.default = BodyScoper;\n//# sourceMappingURL=BodyScoper.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar EmptyInlineElement_1 = require(\"../inlineElements/EmptyInlineElement\");\nvar getBlockElementAtNode_1 = require(\"../blockElements/getBlockElementAtNode\");\nvar getInlineElementAtNode_1 = require(\"../inlineElements/getInlineElementAtNode\");\nvar isRange_1 = require(\"../typeUtils/isRange\");\nvar NodeBlockElement_1 = require(\"../blockElements/NodeBlockElement\");\nvar Position_1 = require(\"../selection/Position\");\nvar getInlineElementBeforeAfter_1 = require(\"../inlineElements/getInlineElementBeforeAfter\");\nvar getFirstLastInlineElement_1 = require(\"../inlineElements/getFirstLastInlineElement\");\n/**\n * This provides traversing content in a selection start block\n * This is commonly used for those cursor context sensitive plugin,\n * they want to know text being typed at cursor\n * This provides a scope for parsing from cursor position up to begin of the selection block\n */\nvar SelectionBlockScoper = /** @class */ (function () {\n    /**\n     * Create a new instance of SelectionBlockScoper class\n     * @param rootNode The root node of the whole scope\n     * @param position Position of the selection start\n     * @param startFrom Where to start, can be Begin, End, SelectionStart\n     */\n    function SelectionBlockScoper(rootNode, position, startFrom) {\n        this.rootNode = rootNode;\n        this.startFrom = startFrom;\n        position = isRange_1.default(position) ? Position_1.default.getStart(position) : position;\n        this.position = position.normalize();\n        this.block = getBlockElementAtNode_1.default(this.rootNode, this.position.node);\n    }\n    /**\n     * Get the start block element\n     */\n    SelectionBlockScoper.prototype.getStartBlockElement = function () {\n        return this.block;\n    };\n    /**\n     * Get the start inline element\n     * The start inline refers to inline before the selection start\n     *  The reason why we choose the one before rather after is, when cursor is at the end of a paragragh,\n     * the one after likely will point to inline in next paragragh which may be null if the cursor is at bottom of editor\n     */\n    SelectionBlockScoper.prototype.getStartInlineElement = function () {\n        if (this.block) {\n            switch (this.startFrom) {\n                case 0 /* Begin */:\n                case 1 /* End */:\n                case 2 /* DomEnd */:\n                    return getFirstLastInlineElementFromBlockElement(this.block, this.startFrom == 0 /* Begin */);\n                case 3 /* SelectionStart */:\n                    // Get the inline before selection start point, and ensure it falls in the selection block\n                    var startInline = getInlineElementBeforeAfter_1.getInlineElementAfter(this.rootNode, this.position);\n                    return startInline && this.block.contains(startInline.getContainerNode())\n                        ? startInline\n                        : new EmptyInlineElement_1.default(this.position, this.block);\n            }\n        }\n        return null;\n    };\n    /**\n     * Check if the given block element is in current scope\n     * @param blockElement The block element to check\n     */\n    SelectionBlockScoper.prototype.isBlockInScope = function (blockElement) {\n        return this.block && blockElement ? this.block.equals(blockElement) : false;\n    };\n    /**\n     * Trim the incoming inline element, and return an inline element\n     * This just tests and return the inline element if it is in block\n     * This is a block scoper, which is not like selection scoper where it may cut an inline element in half\n     * A block scoper does not cut an inline in half\n     */\n    SelectionBlockScoper.prototype.trimInlineElement = function (inlineElement) {\n        return this.block && inlineElement && this.block.contains(inlineElement.getContainerNode())\n            ? inlineElement\n            : null;\n    };\n    return SelectionBlockScoper;\n}());\nexports.default = SelectionBlockScoper;\n/**\n * Get first/last InlineElement of the given BlockElement\n * @param block The BlockElement to get InlineElement from\n * @param isFirst True to get first InlineElement, false to get last InlineElement\n */\nfunction getFirstLastInlineElementFromBlockElement(block, isFirst) {\n    if (block instanceof NodeBlockElement_1.default) {\n        var blockNode = block.getStartNode();\n        return isFirst ? getFirstLastInlineElement_1.getFirstInlineElement(blockNode) : getFirstLastInlineElement_1.getLastInlineElement(blockNode);\n    }\n    else {\n        return getInlineElementAtNode_1.default(block, isFirst ? block.getStartNode() : block.getEndNode());\n    }\n}\n//# sourceMappingURL=SelectionBlockScoper.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar getBlockElementAtNode_1 = require(\"../blockElements/getBlockElementAtNode\");\nvar PartialInlineElement_1 = require(\"../inlineElements/PartialInlineElement\");\nvar Position_1 = require(\"../selection/Position\");\nvar getInlineElementBeforeAfter_1 = require(\"../inlineElements/getInlineElementBeforeAfter\");\n/**\n * This is selection scoper that provide a start inline as the start of the selection\n * and checks if a block falls in the selection (isBlockInScope)\n * last trimInlineElement to trim any inline element to return a partial that falls in the selection\n */\nvar SelectionScoper = /** @class */ (function () {\n    /**\n     * Create a new instance of SelectionScoper class\n     * @param rootNode The root node of the content\n     * @param range The selection range to scope to\n     */\n    function SelectionScoper(rootNode, range) {\n        this.rootNode = rootNode;\n        this.start = Position_1.default.getStart(range).normalize();\n        this.end = Position_1.default.getEnd(range).normalize();\n    }\n    /**\n     * Provide a start block as the first block after the cursor\n     */\n    SelectionScoper.prototype.getStartBlockElement = function () {\n        if (!this.startBlock) {\n            this.startBlock = getBlockElementAtNode_1.default(this.rootNode, this.start.node);\n        }\n        return this.startBlock;\n    };\n    /**\n     * Provide a start inline as the first inline after the cursor\n     */\n    SelectionScoper.prototype.getStartInlineElement = function () {\n        if (!this.startInline) {\n            this.startInline = this.trimInlineElement(getInlineElementBeforeAfter_1.getInlineElementAfter(this.rootNode, this.start));\n        }\n        return this.startInline;\n    };\n    /**\n     * Checks if a block completely falls in the selection\n     * @param block The BlockElement to check\n     */\n    SelectionScoper.prototype.isBlockInScope = function (block) {\n        if (!block) {\n            return false;\n        }\n        var inScope = false;\n        var selStartBlock = this.getStartBlockElement();\n        if (this.start.equalTo(this.end)) {\n            inScope = selStartBlock && selStartBlock.equals(block);\n        }\n        else {\n            var selEndBlock = getBlockElementAtNode_1.default(this.rootNode, this.end.node);\n            // There are three cases that are considered as \"block in scope\"\n            // 1) The start of selection falls on the block\n            // 2) The end of selection falls on the block\n            // 3) the block falls in-between selection start and end\n            inScope =\n                selStartBlock &&\n                    selEndBlock &&\n                    (block.equals(selStartBlock) ||\n                        block.equals(selEndBlock) ||\n                        (block.isAfter(selStartBlock) && selEndBlock.isAfter(block)));\n        }\n        return inScope;\n    };\n    /**\n     * Trim an incoming inline. If it falls completely outside selection, return null\n     * otherwise return a partial that represents the portion that falls in the selection\n     * @param inline The InlineElement to check\n     */\n    SelectionScoper.prototype.trimInlineElement = function (inline) {\n        if (!inline || this.start.equalTo(this.end)) {\n            return null;\n        }\n        // Temp code. Will be changed to using InlineElement.getStart/EndPosition() soon\n        var start = inline.getStartPosition();\n        var end = inline.getEndPosition();\n        if (start.isAfter(this.end) || this.start.isAfter(end)) {\n            return null;\n        }\n        var startPartial = false;\n        var endPartial = false;\n        if (this.start.isAfter(start)) {\n            start = this.start;\n            startPartial = true;\n        }\n        if (end.isAfter(this.end)) {\n            end = this.end;\n            endPartial = true;\n        }\n        return start.isAfter(end) || start.equalTo(end)\n            ? null\n            : startPartial || endPartial\n                ? new PartialInlineElement_1.default(inline, startPartial && start, endPartial && end)\n                : inline;\n    };\n    return SelectionScoper;\n}());\nexports.default = SelectionScoper;\n//# sourceMappingURL=SelectionScoper.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ContentTraverser_1 = require(\"./ContentTraverser\");\nvar createRange_1 = require(\"../selection/createRange\");\n// White space matching regex. It matches following chars:\n// \\s: white space\n// \\u00A0: no-breaking white space\n// \\u200B: zero width space\n// \\u3000: full width space (which can come from JPN IME)\nvar WHITESPACE_REGEX = /[\\s\\u00A0\\u200B\\u3000]+([^\\s\\u00A0\\u200B\\u3000]*)$/i;\n/**\n * The class that helps search content around a position\n */\nvar PositionContentSearcher = /** @class */ (function () {\n    /**\n     * Create a new CursorData instance\n     * @param rootNode Root node of the whole scope\n     * @param position Start position\n     */\n    function PositionContentSearcher(rootNode, position) {\n        this.rootNode = rootNode;\n        this.position = position;\n        // The cached text before position that has been read so far\n        this.text = '';\n        // All inline elements before position that have been read so far\n        this.inlineElements = [];\n    }\n    /**\n     * Get the word before position. The word is determined by scanning backwards till the first white space, the portion\n     * between position and the white space is the word before position\n     * @returns The word before position\n     */\n    PositionContentSearcher.prototype.getWordBefore = function () {\n        var _this = this;\n        if (!this.word) {\n            this.traverse(function () { return _this.word; });\n        }\n        return this.word;\n    };\n    /**\n     * Get the inline element before position\n     * @returns The inlineElement before position\n     */\n    PositionContentSearcher.prototype.getInlineElementBefore = function () {\n        if (!this.inlineBefore) {\n            this.traverse(null);\n        }\n        return this.inlineBefore;\n    };\n    /**\n     * Get the inline element after position\n     * @returns The inline element after position\n     */\n    PositionContentSearcher.prototype.getInlineElementAfter = function () {\n        if (!this.inlineAfter) {\n            this.inlineAfter = ContentTraverser_1.default.createBlockTraverser(this.rootNode, this.position).currentInlineElement;\n        }\n        return this.inlineAfter;\n    };\n    /**\n     * Get X number of chars before position\n     * The actual returned chars may be less than what is requested.\n     * @param length The length of string user want to get, the string always ends at the position,\n     * so this length determins the start position of the string\n     * @returns The actual string we get as a sub string, or the whole string before position when\n     * there is not enough chars in the string\n     */\n    PositionContentSearcher.prototype.getSubStringBefore = function (length) {\n        var _this = this;\n        if (this.text.length < length) {\n            this.traverse(function () { return _this.text.length >= length; });\n        }\n        return this.text.substr(Math.max(0, this.text.length - length));\n    };\n    /**\n     * Try to get a range matches the given text before the position\n     * @param text The text to match against\n     * @param exactMatch Whether it is an exact match\n     * @returns The range for the matched text, null if unable to find a match\n     */\n    PositionContentSearcher.prototype.getRangeFromText = function (text, exactMatch) {\n        if (!text) {\n            return null;\n        }\n        var startPosition;\n        var endPosition;\n        var textIndex = text.length - 1;\n        this.forEachTextInlineElement(function (textInline) {\n            var nodeContent = textInline.getTextContent() || '';\n            var nodeIndex = nodeContent.length - 1;\n            for (; nodeIndex >= 0 && textIndex >= 0; nodeIndex--) {\n                if (text.charCodeAt(textIndex) == nodeContent.charCodeAt(nodeIndex)) {\n                    textIndex--;\n                    // on first time when end is matched, set the end of range\n                    if (!endPosition) {\n                        endPosition = textInline.getStartPosition().move(nodeIndex + 1);\n                    }\n                }\n                else if (exactMatch || endPosition) {\n                    // Mismatch found when exact match or end already match, so return since matching failed\n                    return true;\n                }\n            }\n            // when textIndex == -1, we have a successful complete match\n            if (textIndex == -1) {\n                startPosition = textInline.getStartPosition().move(nodeIndex + 1);\n                return true;\n            }\n            return false;\n        });\n        return startPosition && endPosition && createRange_1.default(startPosition, endPosition);\n    };\n    /**\n     * Get text section before position till stop condition is met.\n     * This offers consumers to retrieve text section by section\n     * The section essentially is just an inline element which has Container element\n     * so that the consumer can remember it for anchoring popup or verification purpose\n     * when position moves out of context etc.\n     * @param stopFunc The callback stop function\n     */\n    PositionContentSearcher.prototype.forEachTextInlineElement = function (callback) {\n        // We cache all text sections read so far\n        // Every time when you ask for textSection, we start with the cached first\n        // and resort to further reading once we exhausted with the cache\n        if (!this.inlineElements.some(callback)) {\n            this.traverse(callback);\n        }\n    };\n    /**\n     * Get first non textual inline element before position\n     * @returns First non textutal inline element before position or null if no such element exists\n     */\n    PositionContentSearcher.prototype.getNearestNonTextInlineElement = function () {\n        var _this = this;\n        if (!this.nearestNonTextInlineElement) {\n            this.traverse(function () { return _this.nearestNonTextInlineElement; });\n        }\n        return this.nearestNonTextInlineElement;\n    };\n    /**\n     * Continue traversing backward till stop condition is met or begin of block is reached\n     */\n    PositionContentSearcher.prototype.traverse = function (callback) {\n        this.traverser =\n            this.traverser || ContentTraverser_1.default.createBlockTraverser(this.rootNode, this.position);\n        if (!this.traverser || this.traversingComplete) {\n            return;\n        }\n        var previousInline = this.traverser.getPreviousInlineElement();\n        while (!this.traversingComplete) {\n            this.inlineBefore = this.inlineBefore || previousInline;\n            if (previousInline && previousInline.isTextualInlineElement()) {\n                var textContent = previousInline.getTextContent();\n                // build the word before position if it is not built yet\n                if (!this.word) {\n                    // Match on the white space, the portion after space is on the index of 1 of the matched result\n                    // (index at 0 is whole match result, index at 1 is the word)\n                    var matches = WHITESPACE_REGEX.exec(textContent);\n                    if (matches && matches.length == 2) {\n                        this.word = matches[1] + this.text;\n                    }\n                }\n                this.text = textContent + this.text;\n                this.inlineElements.push(previousInline);\n                // Check if stop condition is met\n                if (callback && callback(previousInline)) {\n                    break;\n                }\n            }\n            else {\n                this.nearestNonTextInlineElement = previousInline;\n                this.traversingComplete = true;\n                if (!this.word) {\n                    // if parsing is done, whatever we get so far in this.cachedText should also be in this.cachedWordBeforeCursor\n                    this.word = this.text;\n                }\n                // When a non-textual inline element, or null is seen, we consider parsing complete\n                // TODO: we may need to change this if there is a future need to parse beyond text, i.e.\n                // we have aaa @someone bbb<position>, and we want to read the text before @someone\n                break;\n            }\n            previousInline = this.traverser.getPreviousInlineElement();\n        }\n    };\n    return PositionContentSearcher;\n}());\nexports.default = PositionContentSearcher;\n//# sourceMappingURL=PositionContentSearcher.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Apply format to an HTML element\n * @param element The HTML element to apply format to\n * @param format The format to apply\n */\nfunction applyFormat(element, format, isDarkMode) {\n    if (format) {\n        var elementStyle = element.style;\n        var fontFamily = format.fontFamily, fontSize = format.fontSize, textColor = format.textColor, textColors = format.textColors, backgroundColor = format.backgroundColor, backgroundColors = format.backgroundColors, bold = format.bold, italic = format.italic, underline = format.underline;\n        if (fontFamily) {\n            elementStyle.fontFamily = fontFamily;\n        }\n        if (fontSize) {\n            elementStyle.fontSize = fontSize;\n        }\n        if (textColor || textColors) {\n            if (textColors && isDarkMode) {\n                element.dataset.ogsc = textColors.lightModeColor;\n            }\n            elementStyle.color = textColor;\n        }\n        if (backgroundColor || backgroundColors) {\n            if (backgroundColors && isDarkMode) {\n                element.dataset.ogsb = backgroundColors.lightModeColor;\n            }\n            elementStyle.backgroundColor = backgroundColor;\n        }\n        if (bold) {\n            elementStyle.fontWeight = 'bold';\n        }\n        if (italic) {\n            elementStyle.fontStyle = 'italic';\n        }\n        if (underline) {\n            elementStyle.textDecoration = 'underline';\n        }\n    }\n}\nexports.default = applyFormat;\n//# sourceMappingURL=applyFormat.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar toArray_1 = require(\"./toArray\");\nvar Browser_1 = require(\"./Browser\");\n// HTML header to indicate where is the HTML content started from.\n// Sample header:\n// Version:0.9\n// StartHTML:71\n// EndHTML:170\n// StartFragment:140\n// EndFragment:160\n// StartSelection:140\n// EndSelection:160\nvar CLIPBOARD_HTML_HEADER_REGEX = /^Version:[0-9\\.]+\\s+StartHTML:\\s*([0-9]+)\\s+EndHTML:\\s*([0-9]+)\\s+/i;\n/**\n * Extract a Clipboard event\n * @param event The paste event\n * @param callback Callback function when data is ready\n * @param fallbackHtmlRetriever If direct HTML retriving is not support (e.g. Internet Explorer), as a fallback,\n * using this helper function to retrieve HTML content\n * @returns An object with the following properties:\n *  types: Available types from the clipboard event\n *  text: Plain text from the clipboard event\n *  image: Image file from the clipboard event\n *  html: Html string from the clipboard event. When set to null, it means there's no HTML found from the event.\n *   When set to undefined, it means can't retrieve HTML string, there may be HTML string but direct retrieving is\n *   not supported by browser.\n */\nfunction extractClipboardEvent(event, callback) {\n    var dataTransfer = event.clipboardData ||\n        event.target.ownerDocument.defaultView.clipboardData;\n    var result = {\n        types: dataTransfer.types ? toArray_1.default(dataTransfer.types) : [],\n        text: dataTransfer.getData('text'),\n        image: getImage(dataTransfer),\n        html: undefined,\n    };\n    if (event.clipboardData && event.clipboardData.items) {\n        event.preventDefault();\n        var items = event.clipboardData.items;\n        for (var i = 0; i < items.length; i++) {\n            var item = items[i];\n            if (item.type && item.type.indexOf('text/html') == 0) {\n                item.getAsString(function (html) {\n                    result.html = Browser_1.Browser.isEdge ? workaroundForEdge(html) : html;\n                    callback(result);\n                });\n                return;\n            }\n        }\n        // No HTML content found, set html to null\n        result.html = null;\n    }\n    callback(result);\n}\nexports.default = extractClipboardEvent;\nfunction getImage(dataTransfer) {\n    // Chrome, Firefox, Edge support dataTransfer.items\n    var fileCount = dataTransfer.items ? dataTransfer.items.length : 0;\n    for (var i = 0; i < fileCount; i++) {\n        var item = dataTransfer.items[i];\n        if (item.type && item.type.indexOf('image/') == 0) {\n            return item.getAsFile();\n        }\n    }\n    // IE, Safari support dataTransfer.files\n    fileCount = dataTransfer.files ? dataTransfer.files.length : 0;\n    for (var i = 0; i < fileCount; i++) {\n        var file = dataTransfer.files.item(i);\n        if (file.type && file.type.indexOf('image/') == 0) {\n            return file;\n        }\n    }\n    return null;\n}\n/**\n * Edge sometimes doesn't remove the headers, which cause we paste more things then expected.\n * So we need to remove it in our code\n * @param html The HTML string got from clipboard\n */\nfunction workaroundForEdge(html) {\n    var headerValues = CLIPBOARD_HTML_HEADER_REGEX.exec(html);\n    if (headerValues && headerValues.length == 3) {\n        var start = parseInt(headerValues[1]);\n        var end = parseInt(headerValues[2]);\n        if (start > 0 && end > start) {\n            html = html.substring(start, end);\n        }\n    }\n    return html;\n}\n//# sourceMappingURL=extractClipboardEvent.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * A map from pendable format name to document command\n */\nexports.PendableFormatCommandMap = {\n    /**\n     * Bold\n     */\n    isBold: \"bold\" /* Bold */,\n    /**\n     * Italic\n     */\n    isItalic: \"italic\" /* Italic */,\n    /**\n     * Underline\n     */\n    isUnderline: \"underline\" /* Underline */,\n    /**\n     * StrikeThrough\n     */\n    isStrikeThrough: \"strikeThrough\" /* StrikeThrough */,\n    /**\n     * Subscript\n     */\n    isSubscript: \"subscript\" /* Subscript */,\n    /**\n     * Superscript\n     */\n    isSuperscript: \"superscript\" /* Superscript */,\n};\n/**\n * Get Pendable Format State at cursor.\n * @param document The HTML Document to get format state from\n * @returns A PendableFormatState object which contains the values of pendable format states\n */\nfunction getPendableFormatState(document) {\n    var keys = Object.keys(exports.PendableFormatCommandMap);\n    return keys.reduce(function (state, key) {\n        state[key] = document.queryCommandState(exports.PendableFormatCommandMap[key]);\n        return state;\n    }, {});\n}\nexports.default = getPendableFormatState;\n//# sourceMappingURL=getPendableFormatState.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar getComputedStyles_1 = require(\"./getComputedStyles\");\n/**\n * Check if the given element is using right-to-left layout\n * @param element An HTML element to check\n * @returns True if the given element is using right-to-left layout, otherwise false\n */\nfunction isRtl(element) {\n    return getComputedStyles_1.getComputedStyle(element, 'direction') == 'rtl';\n}\nexports.default = isRtl;\n//# sourceMappingURL=isRtl.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// http exclude matching regex\n// invalid URL example (in paricular on IE and Edge):\n// - http://www.bing.com%00, %00 before ? (question mark) is considered invalid. IE/Edge throws invalid argument exception\n// - http://www.bing.com%1, %1 is invalid\n// - http://www.bing.com%g, %g is invalid (IE and Edge expects a two hex value after a %)\n// - http://www.bing.com%, % as ending is invalid (IE and Edge expects a two hex value after a %)\n// All above % cases if they're after ? (question mark) is then considered valid again\n// Similar for @, it needs to be after / (forward slash), or ? (question mark). Otherwise IE/Edge will throw security exception\n// - http://www.bing.com@name, @name before ? (question mark) is considered invalid\n// - http://www.bing.com/@name, is valid sine it is after / (forward slash)\n// - http://www.bing.com?@name, is also valid sinve it is after ? (question mark)\n// The regex below is essentially a break down of:\n// ^[^?]+%[^0-9a-f]+ => to exclude URL like www.bing.com%%\n// ^[^?]+%[0-9a-f][^0-9a-f]+ => to exclude URL like www.bing.com%1\n// ^[^?]+%00 => to exclude URL like www.bing.com%00\n// ^[^?]+%$ => to exclude URL like www.bing.com%\n// ^https?:\\/\\/[^?\\/]+@ => to exclude URL like http://www.bing.com@name\n// ^www\\.[^?\\/]+@ => to exclude URL like www.bing.com@name\n// , => to exclude url like www.bing,,com\nvar httpExcludeRegEx = /^[^?]+%[^0-9a-f]+|^[^?]+%[0-9a-f][^0-9a-f]+|^[^?]+%00|^[^?]+%$|^https?:\\/\\/[^?\\/]+@|^www\\.[^?\\/]+@/i;\n// via https://tools.ietf.org/html/rfc1035 Page 7\nvar labelRegEx = '[a-z0-9](?:[a-z0-9-]*[a-z0-9])?'; // We're using case insensitive regexes below so don't bother including A-Z\nvar domainNameRegEx = \"(?:\" + labelRegEx + \"\\\\.)*\" + labelRegEx;\nvar domainPortRegEx = domainNameRegEx + \"(?:\\\\:[0-9]+)?\";\nvar domainPortWithUrlRegEx = domainPortRegEx + \"(?:[\\\\/\\\\?]\\\\S*)?\";\nvar linkMatchRules = {\n    http: {\n        match: new RegExp(\"^(?:microsoft-edge:)?http:\\\\/\\\\/\" + domainPortWithUrlRegEx + \"|www\\\\.\" + domainPortWithUrlRegEx, 'i'),\n        except: httpExcludeRegEx,\n        normalizeUrl: function (url) {\n            return new RegExp('^(?:microsoft-edge:)?http:\\\\/\\\\/', 'i').test(url) ? url : 'http://' + url;\n        },\n    },\n    https: {\n        match: new RegExp(\"^(?:microsoft-edge:)?https:\\\\/\\\\/\" + domainPortWithUrlRegEx, 'i'),\n        except: httpExcludeRegEx,\n    },\n    mailto: { match: new RegExp('^mailto:\\\\S+@\\\\S+\\\\.\\\\S+', 'i') },\n    notes: { match: new RegExp('^notes:\\\\/\\\\/\\\\S+', 'i') },\n    file: { match: new RegExp('^file:\\\\/\\\\/\\\\/?\\\\S+', 'i') },\n    unc: { match: new RegExp('^\\\\\\\\\\\\\\\\\\\\S+', 'i') },\n    ftp: {\n        match: new RegExp(\"^ftp:\\\\/\\\\/\" + domainPortWithUrlRegEx + \"|ftp\\\\.\" + domainPortWithUrlRegEx, 'i'),\n        normalizeUrl: function (url) { return (new RegExp('^ftp:\\\\/\\\\/', 'i').test(url) ? url : 'ftp://' + url); },\n    },\n    news: { match: new RegExp(\"^news:(\\\\/\\\\/)?\" + domainPortWithUrlRegEx, 'i') },\n    telnet: { match: new RegExp(\"^telnet:(\\\\/\\\\/)?\" + domainPortWithUrlRegEx, 'i') },\n    gopher: { match: new RegExp(\"^gopher:\\\\/\\\\/\" + domainPortWithUrlRegEx, 'i') },\n    wais: { match: new RegExp(\"^wais:(\\\\/\\\\/)?\" + domainPortWithUrlRegEx, 'i') },\n};\n/**\n * Try to match a given string with link match rules, return matched link\n * @param url Input url to match\n * @param option Link match option, exact or partial. If it is exact match, we need\n * to check the length of matched link and url\n * @param rules Optional link match rules, if not passed, only the default link match\n * rules will be applied\n * @returns The matched link data, or null if no match found.\n * The link data includes an original url and a normalized url\n */\nfunction matchLink(url) {\n    if (url) {\n        for (var _i = 0, _a = Object.keys(linkMatchRules); _i < _a.length; _i++) {\n            var schema = _a[_i];\n            var rule = linkMatchRules[schema];\n            var matches = url.match(rule.match);\n            if (matches && matches[0] == url && (!rule.except || !rule.except.test(url))) {\n                return {\n                    scheme: schema,\n                    originalUrl: url,\n                    normalizedUrl: rule.normalizeUrl ? rule.normalizeUrl(url) : url,\n                };\n            }\n        }\n    }\n    return null;\n}\nexports.default = matchLink;\n//# sourceMappingURL=matchLink.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar changeElementTag_1 = require(\"./changeElementTag\");\nvar contains_1 = require(\"./contains\");\nvar createRange_1 = require(\"../selection/createRange\");\nvar findClosestElementAncestor_1 = require(\"./findClosestElementAncestor\");\nvar getBlockElementAtNode_1 = require(\"../blockElements/getBlockElementAtNode\");\nvar getTagOfNode_1 = require(\"./getTagOfNode\");\nvar isNodeEmpty_1 = require(\"./isNodeEmpty\");\nvar isPositionAtBeginningOf_1 = require(\"../selection/isPositionAtBeginningOf\");\nvar isVoidHtmlElement_1 = require(\"./isVoidHtmlElement\");\nvar Position_1 = require(\"../selection/Position\");\nvar queryElements_1 = require(\"./queryElements\");\nvar splitTextNode_1 = require(\"./splitTextNode\");\nvar toArray_1 = require(\"./toArray\");\nvar unwrap_1 = require(\"./unwrap\");\nvar VTable_1 = require(\"../table/VTable\");\nvar wrap_1 = require(\"./wrap\");\nvar splitParentNode_1 = require(\"./splitParentNode\");\nvar adjustSteps = [handleHyperLink, handleStructuredNode, handleParagraph, handleVoidElement];\n/**\n * Adjust the given position and return a better position (if any) or the given position\n * which will be the best one for inserting the given node.\n * @param root Root node of the scope\n * @param nodeToInsert The node about to be inserted\n * @param position The original position to insert the node\n */\nfunction adjustNodeInsertPosition(root, nodeToInsert, position) {\n    adjustSteps.forEach(function (handler) {\n        position = handler(root, nodeToInsert, position);\n    });\n    return position;\n}\nexports.default = adjustNodeInsertPosition;\nfunction handleHyperLink(root, nodeToInsert, position) {\n    var blockElement = getBlockElementAtNode_1.default(root, position.node);\n    if (blockElement) {\n        // Find the first <A> tag within current block which covers current selection\n        // If there are more than one nested, let's handle the first one only since that is not a common scenario.\n        var anchor = queryElements_1.default(root, 'a[href]', null /*forEachCallback*/, 1 /* OnSelection */, createRange_1.default(position)).filter(function (a) { return blockElement.contains(a); })[0];\n        // If this is about to insert node to an empty A tag, clear the A tag and reset position\n        if (anchor && isNodeEmpty_1.default(anchor)) {\n            position = new Position_1.default(anchor, -2 /* Before */);\n            safeRemove(anchor);\n            anchor = null;\n        }\n        // If this is about to insert nodes which contains A tag into another A tag, need to break current A tag\n        // otherwise we will have nested A tags which is a wrong HTML structure\n        if (anchor &&\n            nodeToInsert.querySelector &&\n            nodeToInsert.querySelector('a[href]')) {\n            var normalizedPosition = position.normalize();\n            var parentNode = normalizedPosition.node.parentNode;\n            var nextNode = normalizedPosition.node.nodeType == 3 /* Text */\n                ? splitTextNode_1.default(normalizedPosition.node, normalizedPosition.offset, false /*returnFirstPart*/)\n                : normalizedPosition.isAtEnd\n                    ? normalizedPosition.node.nextSibling\n                    : normalizedPosition.node;\n            var splitter = root.ownerDocument.createTextNode('');\n            parentNode.insertBefore(splitter, nextNode);\n            while (contains_1.default(anchor, splitter)) {\n                splitter = splitParentNode_1.splitBalancedNodeRange(splitter);\n            }\n            position = new Position_1.default(splitter, -2 /* Before */);\n            safeRemove(splitter);\n        }\n    }\n    return position;\n}\nfunction handleStructuredNode(root, nodeToInsert, position) {\n    var rootNodeToInsert = nodeToInsert;\n    if (rootNodeToInsert.nodeType == 11 /* DocumentFragment */) {\n        var rootNodes = toArray_1.default(rootNodeToInsert.childNodes).filter(function (n) { return getTagOfNode_1.default(n) != 'BR'; });\n        rootNodeToInsert = rootNodes.length == 1 ? rootNodes[0] : null;\n    }\n    var tag = getTagOfNode_1.default(rootNodeToInsert);\n    var hasBrNextToRoot = tag && getTagOfNode_1.default(rootNodeToInsert.nextSibling) == 'BR';\n    var listItem = findClosestElementAncestor_1.default(position.node, root, 'LI');\n    var listNode = listItem && findClosestElementAncestor_1.default(listItem, root, 'OL,UL');\n    var tdNode = findClosestElementAncestor_1.default(position.node, root, 'TD,TH');\n    var trNode = tdNode && findClosestElementAncestor_1.default(tdNode, root, 'TR');\n    if (tag == 'LI') {\n        tag = listNode ? getTagOfNode_1.default(listNode) : 'UL';\n        rootNodeToInsert = wrap_1.default(rootNodeToInsert, tag);\n    }\n    if ((tag == 'OL' || tag == 'UL') && getTagOfNode_1.default(rootNodeToInsert.firstChild) == 'LI') {\n        var shouldInsertListAsText = !rootNodeToInsert.firstChild.nextSibling && !hasBrNextToRoot;\n        if (hasBrNextToRoot && rootNodeToInsert.parentNode) {\n            safeRemove(rootNodeToInsert.nextSibling);\n        }\n        if (shouldInsertListAsText) {\n            unwrap_1.default(rootNodeToInsert.firstChild);\n            unwrap_1.default(rootNodeToInsert);\n        }\n        else if (getTagOfNode_1.default(listNode) == tag) {\n            unwrap_1.default(rootNodeToInsert);\n            position = new Position_1.default(listItem, isPositionAtBeginningOf_1.default(position, listItem)\n                ? -2 /* Before */\n                : -3 /* After */);\n        }\n    }\n    else if (tag == 'TABLE' && trNode) {\n        // When inserting a table into a table, if these tables have the same column count, and\n        // current position is at beginning of a row, then merge these two tables\n        var newTable = new VTable_1.default(rootNodeToInsert);\n        var currentTable = new VTable_1.default(tdNode);\n        if (currentTable.col == 0 &&\n            tdNode == currentTable.getCell(currentTable.row, 0).td &&\n            newTable.cells[0] &&\n            newTable.cells[0].length == currentTable.cells[0].length &&\n            isPositionAtBeginningOf_1.default(position, tdNode)) {\n            if (getTagOfNode_1.default(rootNodeToInsert.firstChild) == 'TBODY' &&\n                !rootNodeToInsert.firstChild.nextSibling) {\n                unwrap_1.default(rootNodeToInsert.firstChild);\n            }\n            unwrap_1.default(rootNodeToInsert);\n            position = new Position_1.default(trNode, -3 /* After */);\n        }\n    }\n    return position;\n}\nfunction handleParagraph(root, nodeToInsert, position) {\n    if (getTagOfNode_1.default(position.node) == 'P') {\n        // Insert into a P tag may cause issues when the inserted content contains any block element.\n        // Change P tag to DIV to make sure it works well\n        var pos = position.normalize();\n        var div = changeElementTag_1.default(position.node, 'div');\n        if (pos.node != div) {\n            position = pos;\n        }\n    }\n    return position;\n}\nfunction handleVoidElement(root, nodeToInsert, position) {\n    if (isVoidHtmlElement_1.default(position.node)) {\n        position = new Position_1.default(position.node, position.isAtEnd ? -3 /* After */ : -2 /* Before */);\n    }\n    return position;\n}\nfunction safeRemove(node) {\n    if (node && node.parentNode) {\n        node.parentNode.removeChild(node);\n    }\n}\n//# sourceMappingURL=adjustNodeInsertPosition.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ContentTraverser_1 = require(\"../contentTraverser/ContentTraverser\");\n/**\n * get block element's text content.\n * @param rootNode Root node that the get the textContent of.\n * @returns text content of given text content.\n */\nfunction getTextContent(rootNode) {\n    var traverser = ContentTraverser_1.default.createBodyTraverser(rootNode);\n    var block = traverser && traverser.currentBlockElement;\n    var textContent = [];\n    while (block) {\n        textContent.push(block.getTextContent());\n        block = traverser.getNextBlockElement();\n    }\n    return textContent.join('\\n');\n}\nexports.default = getTextContent;\n//# sourceMappingURL=getTextContent.js.map","\"use strict\";\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n            r[k] = a[j];\n    return r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar contains_1 = require(\"../utils/contains\");\nvar getListTypeFromNode_1 = require(\"./getListTypeFromNode\");\nvar getTagOfNode_1 = require(\"../utils/getTagOfNode\");\nvar isBlockElement_1 = require(\"../utils/isBlockElement\");\nvar toArray_1 = require(\"../utils/toArray\");\nvar unwrap_1 = require(\"../utils/unwrap\");\nvar wrap_1 = require(\"../utils/wrap\");\nvar orderListStyles = [null, 'lower-alpha', 'lower-roman'];\n/**\n * @internal\n * !!! Never directly create instance of this class. It should be created within VList class !!!\n *\n * Represent a list item.\n *\n * A list item is normally wrapped using a LI tag. But this class is only a logical item,\n * it can be a LI tag, or another other type of node which means it is actually not a list item.\n * That can happen after we do \"outdent\" on a 1-level list item, then it becomes not a list item.\n * @internal\n */\nvar VListItem = /** @class */ (function () {\n    /**\n     * Construct a new instance of VListItem class\n     * @param node The DOM node for this item\n     * @param listTypes An array represnets list types of all parent and current level.\n     * Skip this parameter for a non-list item.\n     */\n    function VListItem(node) {\n        var listTypes = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            listTypes[_i - 1] = arguments[_i];\n        }\n        this.node = node;\n        if (!node) {\n            throw new Error('node must not be null');\n        }\n        // Always add a None list type in front of all other types to represent non-list scenario.\n        this.listTypes = __spreadArrays([0 /* None */], listTypes);\n    }\n    /**\n     * Get type of current list item\n     */\n    VListItem.prototype.getListType = function () {\n        return this.listTypes[this.listTypes.length - 1];\n    };\n    /**\n     * Get DOM node of this list item\n     */\n    VListItem.prototype.getNode = function () {\n        return this.node;\n    };\n    /**\n     * Check if a given node is contained by this list item\n     * @param node The node to check\n     */\n    VListItem.prototype.contains = function (node) {\n        return contains_1.default(this.node, node, true /*treateSameNodeAsContain*/);\n    };\n    /**\n     * Check if this item is an orphan item.\n     *\n     * Orphan item is not a normal case but could happen. It represents the DOM nodes directly under OL/UL tag\n     * and are in front of all other LI tags so that they cannot be merged into any existing LI tags.\n     *\n     * For example:\n     * ```html\n     * <ol>\n     *   <div>Orphan node</div>\n     *   <li>first item</li>\n     * </ol>\n     * ```\n     * Here the first DIV tag is an orphan item.\n     *\n     * There can also be nodes directly under OL/UL but between other LI tags in source HTML which should not be\n     * treated as orphan item because they can be merged into their previous LI tag. But when we build VList,\n     * those nodes will be merged into LI, so that ideally here they should not exist.\n     */\n    VListItem.prototype.isOrphanItem = function () {\n        return getTagOfNode_1.default(this.node) != 'LI';\n    };\n    /**\n     * Check if the given item can be merged into this item.\n     * An item can be merged when it is an orphan item and its list type stack is exactly the same with current one.\n     * @param item The item to check\n     */\n    VListItem.prototype.canMerge = function (item) {\n        if (!(item === null || item === void 0 ? void 0 : item.isOrphanItem()) || this.listTypes.length != item.listTypes.length) {\n            return false;\n        }\n        return this.listTypes.every(function (type, index) { return item.listTypes[index] == type; });\n    };\n    /**\n     * Merge items into this item.\n     * @example Before merge:\n     * ```html\n     * <ol>\n     *   <li>Current item</li>\n     *   <div>line 1</div>\n     *   <div>line 2</div>\n     * </ol>\n     * ```\n     * After merge then two DIVs into LI:\n     * ```html\n     * <ol>\n     *   <li>Current item\n     *     <div>line 1</div>\n     *     <div>line 2</div>\n     *   </li>\n     * </ol>\n     * ```\n     * @param items The items to merge\n     */\n    VListItem.prototype.mergeItems = function (items) {\n        var _this = this;\n        var nodesToWrap = (items === null || items === void 0 ? void 0 : items.map(function (item) { return item.node; })) || [];\n        var targetNodes = wrapIfNotBlockNode(nodesToWrap, true /*checkFirst*/, false /*checkLast*/);\n        targetNodes.forEach(function (node) { return _this.node.appendChild(node); });\n    };\n    /**\n     * Indent this item\n     * If this is not an list item, it will be no op\n     */\n    VListItem.prototype.indent = function () {\n        var listType = this.getListType();\n        if (listType != 0 /* None */) {\n            this.listTypes.push(listType);\n        }\n    };\n    /**\n     * Outdent this item\n     * If this item is already not an list item, it will be no op\n     */\n    VListItem.prototype.outdent = function () {\n        if (this.listTypes.length > 1) {\n            this.listTypes.pop();\n        }\n    };\n    /**\n     * Change list type of this item\n     * @param targetType The target list type to change to\n     */\n    VListItem.prototype.changeListType = function (targetType) {\n        if (targetType == 0 /* None */) {\n            this.listTypes = [targetType];\n        }\n        else {\n            this.outdent();\n            this.listTypes.push(targetType);\n        }\n    };\n    /**\n     * Write the change result back into DOM\n     * @param listStack current stack of list elements\n     */\n    VListItem.prototype.writeBack = function (listStack) {\n        var doc = this.node.ownerDocument;\n        var nextLevel = 1;\n        // 1. Determine list elements that we can reuse\n        // e.g.:\n        //    passed in listStack: Fragment > OL > UL > OL\n        //    local listTypes:     null     > OL > UL > UL > OL\n        //    then Fragment > OL > UL can be reused\n        for (; nextLevel < listStack.length; nextLevel++) {\n            if (getListTypeFromNode_1.default(listStack[nextLevel]) !== this.listTypes[nextLevel]) {\n                listStack.splice(nextLevel);\n                break;\n            }\n        }\n        // 2. Add new list elements\n        // e.g.:\n        //    passed in listStack: Fragment > OL > UL\n        //    local listTypes:     null     > OL > UL > UL > OL\n        //    then we need to create a UL and a OL tag\n        for (; nextLevel < this.listTypes.length; nextLevel++) {\n            var listType = this.listTypes[nextLevel];\n            var newList = doc.createElement(listType == 1 /* Ordered */ ? 'ol' : 'ul');\n            if (listType == 1 /* Ordered */) {\n                newList.style.listStyleType =\n                    orderListStyles[(nextLevel - 1) % orderListStyles.length];\n            }\n            listStack[listStack.length - 1].appendChild(newList);\n            listStack.push(newList);\n        }\n        // 3. Add current node into deepest list element\n        listStack[listStack.length - 1].appendChild(this.node);\n        // 4. If this is not a list item now, need to unwrap the LI node and do proper handling\n        if (this.listTypes.length <= 1) {\n            wrapIfNotBlockNode(getTagOfNode_1.default(this.node) == 'LI' ? getChildrenAndUnwrap(this.node) : [this.node], true /*checkFirst*/, true /*checkLast*/);\n        }\n    };\n    return VListItem;\n}());\nexports.default = VListItem;\nfunction wrapIfNotBlockNode(nodes, checkFirst, checkLast) {\n    if (nodes.length > 0 &&\n        (!checkFirst || !isBlockElement_1.default(nodes[0])) &&\n        (!checkLast || !isBlockElement_1.default(nodes[nodes.length]))) {\n        nodes = [wrap_1.default(nodes)];\n    }\n    return nodes;\n}\nfunction getChildrenAndUnwrap(node) {\n    var result = toArray_1.default(node.childNodes);\n    unwrap_1.default(node);\n    return result;\n}\n//# sourceMappingURL=VListItem.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar findClosestElementAncestor_1 = require(\"../utils/findClosestElementAncestor\");\nvar getSelectedBlockElementsInRegion_1 = require(\"../region/getSelectedBlockElementsInRegion\");\nvar isNodeInRegion_1 = require(\"../region/isNodeInRegion\");\nvar shouldSkipNode_1 = require(\"../utils/shouldSkipNode\");\nvar VList_1 = require(\"./VList\");\nvar getLeafSibling_1 = require(\"../utils/getLeafSibling\");\nvar getListTypeFromNode_1 = require(\"./getListTypeFromNode\");\nvar ListSelector = 'ol,ul';\n/**\n * @internal\n * @param region The region to get VList from\n * @param includeSiblingLists True to also try get lists before and after the selection and merge them together,\n * false to only include the list for the selected blocks\n * @param startNode (Optional) When specified, try get VList which will contain this node.\n * If not specified, get VList from selection of this region\n */\nfunction createVListFromRegion(region, includeSiblingLists, startNode) {\n    if (!region) {\n        return null;\n    }\n    var nodes = [];\n    if (startNode) {\n        var list = getRootListNode(region, startNode);\n        if (list) {\n            nodes.push(list);\n        }\n    }\n    else {\n        var blocks = getSelectedBlockElementsInRegion_1.default(region);\n        blocks.forEach(function (block) {\n            var list = getRootListNode(region, block.getStartNode());\n            if (list) {\n                if (nodes[nodes.length - 1] != list) {\n                    nodes.push(list);\n                }\n            }\n            else {\n                nodes.push(block.collapseToSingleElement());\n            }\n        });\n        if (includeSiblingLists) {\n            tryIncludeSiblingNode(region, nodes, false /*isNext*/);\n            tryIncludeSiblingNode(region, nodes, true /*isNext*/);\n        }\n        nodes = nodes.filter(function (node) { return !shouldSkipNode_1.default(node, true /*ignoreSpace*/); });\n    }\n    var vList = null;\n    if (nodes.length > 0) {\n        var firstNode = nodes.shift();\n        vList = getListTypeFromNode_1.isListElement(firstNode)\n            ? new VList_1.default(firstNode)\n            : createVListFromItemNode(firstNode);\n        nodes.forEach(function (node) {\n            if (getListTypeFromNode_1.isListElement(node)) {\n                vList.mergeVList(new VList_1.default(node));\n            }\n            else {\n                vList.appendItem(node, 0 /* None */);\n            }\n        });\n    }\n    return vList;\n}\nexports.default = createVListFromRegion;\nfunction tryIncludeSiblingNode(region, nodes, isNext) {\n    var node = nodes[isNext ? nodes.length - 1 : 0];\n    node = getLeafSibling_1.getLeafSibling(region.rootNode, node, isNext, region.skipTags, true /*ignoreSpace*/);\n    node = getRootListNode(region, node);\n    if (isNodeInRegion_1.default(region, node) && getListTypeFromNode_1.isListElement(node)) {\n        if (isNext) {\n            nodes.push(node);\n        }\n        else {\n            nodes.unshift(node);\n        }\n    }\n}\nfunction getRootListNode(region, node) {\n    var list = findClosestElementAncestor_1.default(node, region.rootNode, ListSelector);\n    if (list) {\n        var ancestor = void 0;\n        while ((ancestor = findClosestElementAncestor_1.default(list.parentNode, region.rootNode, ListSelector))) {\n            list = ancestor;\n        }\n    }\n    return list;\n}\nfunction createVListFromItemNode(node) {\n    var _a;\n    // Create a temporary OL root element for this list.\n    var listNode = node.ownerDocument.createElement('ol'); // Either OL or UL is ok here\n    (_a = node.parentNode) === null || _a === void 0 ? void 0 : _a.insertBefore(listNode, node);\n    // Create the VList and append items\n    var vList = new VList_1.default(listNode);\n    vList.appendItem(node, 0 /* None */);\n    return vList;\n}\n//# sourceMappingURL=createVListFromRegion.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar contains_1 = require(\"../utils/contains\");\nvar findClosestElementAncestor_1 = require(\"../utils/findClosestElementAncestor\");\nvar Position_1 = require(\"../selection/Position\");\nvar queryElements_1 = require(\"../utils/queryElements\");\nvar regionTypeData_1 = require(\"./regionTypeData\");\nvar getLeafSibling_1 = require(\"../utils/getLeafSibling\");\n/**\n * Get regions impacted by the given range under the root node\n * @param root Root node to get regions from\n * @param range A selection range. Regions will be created acording to this range. Each region will be\n * fully or partially covered by this range.\n * @param type Type of region. Currently we only support TABLE region.\n */\nfunction getRegionsFromRange(root, range, type) {\n    var regions = [];\n    if (root && range) {\n        var _a = regionTypeData_1.default[type], innerSelector = _a.innerSelector, skipTags = _a.skipTags;\n        var boundaryTree = buildBoundaryTree(root, range, type);\n        var start = findClosestElementAncestor_1.default(range.startContainer, root, innerSelector) || root;\n        var end = findClosestElementAncestor_1.default(range.endContainer, root, innerSelector) || root;\n        var creator = getRegionCreator(range, skipTags);\n        regions = iterateNodes(creator, boundaryTree, start, end)[0];\n    }\n    return regions.filter(function (r) { return !!r; });\n}\nexports.default = getRegionsFromRange;\n/**\n * @internal export for test only\n */\nfunction getRegionCreator(fullRange, skipTags) {\n    var fullSelectionStart = Position_1.default.getStart(fullRange).normalize();\n    var fullSelectionEnd = Position_1.default.getEnd(fullRange).normalize();\n    return function (rootNode, nodeBefore, nodeAfter) {\n        return areNodesValid(rootNode, nodeBefore, nodeAfter, skipTags)\n            ? {\n                rootNode: rootNode,\n                nodeBefore: nodeBefore,\n                nodeAfter: nodeAfter,\n                skipTags: skipTags,\n                fullSelectionStart: fullSelectionStart,\n                fullSelectionEnd: fullSelectionEnd,\n            }\n            : null;\n    };\n}\nexports.getRegionCreator = getRegionCreator;\n/**\n * Step 1: Build boundary tree\n * @param root Root node of the whole scope, normally this will be the root of editable scope\n * @param range Existing selected full range\n * @param type Type of region to create\n */\nfunction buildBoundaryTree(root, range, type) {\n    var allBoundaries = [{ innerNode: root, children: [] }];\n    var _a = regionTypeData_1.default[type], outerSelector = _a.outerSelector, innerSelector = _a.innerSelector;\n    var inSelectionOuterNode = queryElements_1.default(root, outerSelector, null /*callback*/, 2 /* InSelection */, range);\n    // According to https://www.w3.org/TR/selectors-api/#queryselectorall, the result of querySelectorAll\n    // is in document order, which is what we expect. So we don't need to sort the result here.\n    queryElements_1.default(root, innerSelector, function (thisInnerNode) {\n        var thisOuterNode = findClosestElementAncestor_1.default(thisInnerNode, root, outerSelector);\n        if (thisOuterNode && inSelectionOuterNode.indexOf(thisOuterNode) < 0) {\n            var boundary = { innerNode: thisInnerNode, children: [] };\n            for (var i = allBoundaries.length - 1; i >= 0; i--) {\n                var _a = allBoundaries[i], innerNode = _a.innerNode, children = _a.children;\n                if (contains_1.default(innerNode, thisOuterNode)) {\n                    var child = children.filter(function (c) { return c.outerNode == thisOuterNode; })[0];\n                    if (!child) {\n                        child = { outerNode: thisOuterNode, boundaries: [] };\n                        children.push(child);\n                    }\n                    child.boundaries.push(boundary);\n                    break;\n                }\n            }\n            allBoundaries.push(boundary);\n        }\n    }, 1 /* OnSelection */, range);\n    return allBoundaries[0];\n}\n/**\n * Step 2: Recursively iterate all boundaries and create regions\n * @param creator A region creator function to help create region\n * @param boundary Current root boundary\n * @param start A node where full range start from. This may not be the direct node container of range.startContenter.\n * It is the nearest ancestor which satisfies the InnerSelector of the given region type\n * @param end A node where full range end from. This may not be the direct node container of range.endContenter.\n * It is the nearest ancestor which satisfies the InnerSelector of the given region type\n * @param started Whether we have already hit the start node\n */\nfunction iterateNodes(creator, boundary, start, end, started) {\n    var _a;\n    started = started || boundary.innerNode == start;\n    var ended = false;\n    var children = boundary.children, innerNode = boundary.innerNode;\n    var regions = [];\n    if (children.length == 0) {\n        regions.push(creator(innerNode));\n    }\n    else {\n        // Need to run one more time to add region after all children\n        for (var i = 0; i <= children.length && !ended; i++) {\n            var _b = children[i] || {}, outerNode = _b.outerNode, boundaries = _b.boundaries;\n            var previousOuterNode = (_a = children[i - 1]) === null || _a === void 0 ? void 0 : _a.outerNode;\n            if (started) {\n                regions.push(creator(innerNode, previousOuterNode, outerNode));\n            }\n            boundaries === null || boundaries === void 0 ? void 0 : boundaries.forEach(function (child) {\n                var _a;\n                var newRegions;\n                _a = iterateNodes(creator, child, start, end, started), newRegions = _a[0], started = _a[1], ended = _a[2];\n                regions = regions.concat(newRegions);\n            });\n        }\n    }\n    return [regions, started, ended || innerNode == end];\n}\n/**\n * Check if the given nodes combination is valid to create a region.\n * A combination is valid when:\n * 1. Root node is not null and is not empty. And\n * 2. For nodeBefore and nodeAfter, each of them should be either null or contained by root node. And\n * 3. If none of nodeBefore and nodeAfter is null, the should not contain each other, and there should be\n * node between them.\n * @param root Root node of region\n * @param nodeBefore The boundary node before the region under root\n * @param nodeAfter The boundary node after the region under root\n * @param skipTags Tags to skip\n */\nfunction areNodesValid(root, nodeBefore, nodeAfter, skipTags) {\n    if (!root || !root.firstChild) {\n        return false;\n    }\n    else {\n        var firstNodeOfRegion = nodeBefore && getLeafSibling_1.getNextLeafSibling(root, nodeBefore, skipTags);\n        var lastNodeOfRegion = nodeAfter && getLeafSibling_1.getPreviousLeafSibling(root, nodeAfter, skipTags);\n        var firstNodeValid = !nodeBefore || (contains_1.default(root, nodeBefore) && contains_1.default(root, firstNodeOfRegion));\n        var lastNodeValid = !nodeAfter || (contains_1.default(root, nodeAfter) && contains_1.default(root, lastNodeOfRegion));\n        var bothValid = !nodeBefore ||\n            !nodeAfter ||\n            (!contains_1.default(nodeBefore, nodeAfter, true /*treatSameAsContain*/) &&\n                !contains_1.default(nodeBefore, lastNodeOfRegion, true /*treatSameAsContain*/) &&\n                !contains_1.default(nodeAfter, nodeBefore, true /*treatSameAsContain*/) &&\n                !contains_1.default(nodeAfter, firstNodeOfRegion, true /*treatSameAsContain*/));\n        return firstNodeValid && lastNodeValid && bothValid;\n    }\n}\n//# sourceMappingURL=getRegionsFromRange.js.map","\"use strict\";\nvar _a;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar regionTypeData = (_a = {},\n    _a[0 /* Table */] = {\n        skipTags: ['TABLE'],\n        outerSelector: 'table',\n        innerSelector: 'td,th',\n    },\n    _a);\n/**\n * @internal\n */\nexports.default = regionTypeData;\n//# sourceMappingURL=regionTypeData.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar collapseNodes_1 = require(\"../utils/collapseNodes\");\nvar isNodeInRegion_1 = require(\"./isNodeInRegion\");\n/**\n * Collapse nodes within this region to their common ascenstor node under this region\n * @param region The region to collapse nodes in.\n * @param nodes Nodes to collapse. All nodes not contained by the given region will be ignored.\n */\nfunction collapseNodesInRegion(region, nodes) {\n    nodes = nodes && nodes.filter(function (node) { return isNodeInRegion_1.default(region, node); });\n    if (!nodes || nodes.length == 0) {\n        return [];\n    }\n    var firstNode = nodes[0];\n    var lastNode = nodes[nodes.length - 1];\n    if (isNodeInRegion_1.default(region, firstNode) && isNodeInRegion_1.default(region, lastNode)) {\n        return collapseNodes_1.default(region.rootNode, firstNode, lastNode, true /*canSplitParent*/);\n    }\n    else {\n        return [];\n    }\n}\nexports.default = collapseNodesInRegion;\n//# sourceMappingURL=collapseNodesInRegion.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar createRange_1 = require(\"./createRange\");\nvar normalizeRect_1 = require(\"../utils/normalizeRect\");\n/**\n * Get bounding rect of this position\n * @param position The positioin to get rect from\n */\nfunction getPositionRect(position) {\n    if (!position) {\n        return null;\n    }\n    var range = createRange_1.default(position);\n    // 1) try to get rect using range.getBoundingClientRect()\n    var rect = range.getBoundingClientRect && normalizeRect_1.default(range.getBoundingClientRect());\n    if (rect) {\n        return rect;\n    }\n    // 2) try to get rect using range.getClientRects\n    position = position.normalize();\n    var rects = range.getClientRects && range.getClientRects();\n    rect = rects && rects.length == 1 && normalizeRect_1.default(rects[0]);\n    if (rect) {\n        return rect;\n    }\n    // 3) if node is text node, try inserting a SPAN and get the rect of SPAN for others\n    if (position.node.nodeType == 3 /* Text */) {\n        var document_1 = position.node.ownerDocument;\n        var span = document_1.createElement('SPAN');\n        span.innerHTML = '\\u200b';\n        range = createRange_1.default(position);\n        range.insertNode(span);\n        rect = span.getBoundingClientRect && normalizeRect_1.default(span.getBoundingClientRect());\n        span.parentNode.removeChild(span);\n        if (rect) {\n            return rect;\n        }\n    }\n    // 4) try getBoundingClientRect on element\n    var element = position.element;\n    if (element && element.getBoundingClientRect) {\n        rect = normalizeRect_1.default(element.getBoundingClientRect());\n        if (rect) {\n            return rect;\n        }\n    }\n    return null;\n}\nexports.default = getPositionRect;\n//# sourceMappingURL=getPositionRect.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar getSelectionPath_1 = require(\"./getSelectionPath\");\n/**\n * Get inner Html of a root node with a selection path which can be used for restore selection.\n * The result string can be used by setHtmlWithSelectionPath() to restore the HTML and selection.\n * @param rootNode Root node to get inner Html from\n * @param range The range of selection. If pass null, no selection path will be added\n * @returns Inner HTML of the root node, followed by HTML comment contains selection path if the given range is valid\n */\nfunction getHtmlWithSelectionPath(rootNode, range) {\n    if (!rootNode) {\n        return '';\n    }\n    var content = rootNode.innerHTML;\n    var selectionPath = range && getSelectionPath_1.default(rootNode, range);\n    return selectionPath ? content + \"<!--\" + JSON.stringify(selectionPath) + \"-->\" : content;\n}\nexports.default = getHtmlWithSelectionPath;\n//# sourceMappingURL=getHtmlWithSelectionPath.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar createRange_1 = require(\"./createRange\");\n/**\n * Restore inner Html of a root element from given html string. If the string contains selection path,\n * remove the selection path and return a range represented by the path\n * @param root The root element\n * @param html The html to restore\n * @returns A selection range if the html contains a valid selection path, otherwise null\n */\nfunction setHtmlWithSelectionPath(rootNode, html) {\n    rootNode.innerHTML = html || '';\n    var path = null;\n    var pathComment = rootNode.lastChild;\n    try {\n        path =\n            pathComment &&\n                pathComment.nodeType == 8 /* Comment */ &&\n                JSON.parse(pathComment.nodeValue);\n        if (path && path.end && path.end.length > 0 && path.start && path.start.length > 0) {\n            rootNode.removeChild(pathComment);\n        }\n        else {\n            path = null;\n        }\n    }\n    catch (_a) { }\n    return path && createRange_1.default(rootNode, path.start, path.end);\n}\nexports.default = setHtmlWithSelectionPath;\n//# sourceMappingURL=setHtmlWithSelectionPath.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar clearProceedingSnapshots_1 = require(\"./clearProceedingSnapshots\");\n/**\n * Add a new snapshot to the given snapshots data structure\n * @param snapshots The snapshots data structure to add new snapshot into\n * @param snapshot The snapshot to add\n */\nfunction addSnapshot(snapshots, snapshot) {\n    if (snapshots.currentIndex < 0 || snapshot != snapshots.snapshots[snapshots.currentIndex]) {\n        clearProceedingSnapshots_1.default(snapshots);\n        snapshots.snapshots.push(snapshot);\n        snapshots.currentIndex++;\n        snapshots.totalSize += snapshot.length;\n        var removeCount = 0;\n        while (removeCount < snapshots.snapshots.length &&\n            snapshots.totalSize > snapshots.maxSize) {\n            snapshots.totalSize -= snapshots.snapshots[removeCount].length;\n            removeCount++;\n        }\n        if (removeCount > 0) {\n            snapshots.snapshots.splice(0, removeCount);\n            snapshots.currentIndex -= removeCount;\n        }\n    }\n}\nexports.default = addSnapshot;\n//# sourceMappingURL=addSnapshot.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar canMoveCurrentSnapshot_1 = require(\"./canMoveCurrentSnapshot\");\n/**\n * Move current snapshot with the given step if can move this step. Otherwise no action and return null\n * @param snapshots The snapshots data structure to move\n * @param step The step to move\n * @returns If can move with the given step, returns the snapshot after move, otherwise null\n */\nfunction moveCurrentSnapsnot(snapshots, step) {\n    if (canMoveCurrentSnapshot_1.default(snapshots, step)) {\n        snapshots.currentIndex += step;\n        return snapshots.snapshots[snapshots.currentIndex];\n    }\n    else {\n        return null;\n    }\n}\nexports.default = moveCurrentSnapsnot;\n//# sourceMappingURL=moveCurrentSnapsnot.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Create initial snapshots\n * @param maxSize max size of all snapshots\n */\nfunction createSnapshots(maxSize) {\n    return {\n        snapshots: [],\n        totalSize: 0,\n        currentIndex: -1,\n        maxSize: maxSize,\n    };\n}\nexports.default = createSnapshots;\n//# sourceMappingURL=createSnapshots.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar getInheritableStyles_1 = require(\"./getInheritableStyles\");\nvar htmlToDom_1 = require(\"./htmlToDom\");\nvar isHTMLElement_1 = require(\"../typeUtils/isHTMLElement\");\nvar cloneObject_1 = require(\"./cloneObject\");\nvar getAllowedValues_1 = require(\"./getAllowedValues\");\n/**\n * HTML sanitizer class provides two featuers:\n * 1. Convert global CSS to inline CSS\n * 2. Sanitize an HTML document, remove unnecessary/dangerous attribute/nodes\n */\nvar HtmlSanitizer = /** @class */ (function () {\n    /**\n     * Construct a new instance of HtmlSanitizer\n     * @param options Options for HtmlSanitizer\n     */\n    function HtmlSanitizer(options) {\n        options = options || {};\n        this.elementCallbacks = cloneObject_1.cloneObject(options.elementCallbacks);\n        this.styleCallbacks = getAllowedValues_1.getStyleCallbacks(options.styleCallbacks);\n        this.attributeCallbacks = cloneObject_1.cloneObject(options.attributeCallbacks);\n        this.allowedTags = getAllowedValues_1.getAllowedTags(options.additionalAllowedTags);\n        this.allowedAttributes = getAllowedValues_1.getAllowedAttributes(options.additionalAllowAttributes);\n        this.allowedCssClassesRegex = getAllowedValues_1.getAllowedCssClassesRegex(options.additionalAllowedCssClasses);\n        this.defaultStyleValues = getAllowedValues_1.getDefaultStyleValues(options.additionalDefaultStyleValues);\n        this.additionalGlobalStyleNodes = options.additionalGlobalStyleNodes || [];\n        this.allowPreserveWhiteSpace = options.allowPreserveWhiteSpace;\n    }\n    /**\n     * Convert global CSS to inline CSS if any\n     * @param html HTML source\n     * @param additionalStyleNodes (Optional) additional HTML STYLE elements used as global CSS\n     */\n    HtmlSanitizer.convertInlineCss = function (html, additionalStyleNodes) {\n        var sanitizer = new HtmlSanitizer({\n            additionalGlobalStyleNodes: additionalStyleNodes,\n        });\n        return sanitizer.exec(html, true /*convertCssOnly*/);\n    };\n    /**\n     * Sanitize HTML string, remove any unuseful HTML node/attribute/CSS.\n     * @param html HTML source string\n     * @param options Options used for this sanitizing process\n     */\n    HtmlSanitizer.sanitizeHtml = function (html, options) {\n        options = options || {};\n        var sanitizer = new HtmlSanitizer(options);\n        var currentStyles = isHTMLElement_1.default(options.currentElementOrStyle)\n            ? getInheritableStyles_1.default(options.currentElementOrStyle)\n            : options.currentElementOrStyle;\n        return sanitizer.exec(html, options.convertCssOnly, options.preserveFragmentOnly, currentStyles);\n    };\n    /**\n     * Sanitize HTML string\n     * This function will do the following work:\n     * 1. Convert global CSS into inline CSS\n     * 2. Remove dangerous HTML tags and attributes\n     * 3. Remove useless CSS properties\n     * @param html The input HTML\n     * @param convertInlineCssOnly Whether only convert inline css and skip html content sanitizing\n     * @param preserveFragmentOnly If set to true, only preserve the html content between &lt;!--StartFragment--&gt; and &lt;!--Endfragment--&gt;\n     * @param currentStyles Current inheritable CSS styles\n     */\n    HtmlSanitizer.prototype.exec = function (html, convertCssOnly, preserveFragmentOnly, currentStyles) {\n        var doc = htmlToDom_1.default(html, preserveFragmentOnly);\n        if (doc) {\n            this.convertGlobalCssToInlineCss(doc);\n            if (!convertCssOnly) {\n                this.sanitize(doc.body, currentStyles);\n            }\n        }\n        return (doc && doc.body && doc.body.innerHTML) || '';\n    };\n    /**\n     * Sanitize an HTML element, remove unnecessary or dangerous elements/attribute/CSS rules\n     * @param rootNode Root node to sanitize\n     * @param currentStyles Current CSS styles. Inheritable styles in the given node which has\n     * the same value with current styles will be ignored.\n     */\n    HtmlSanitizer.prototype.sanitize = function (rootNode, currentStyles) {\n        if (!rootNode) {\n            return '';\n        }\n        currentStyles = cloneObject_1.cloneObject(currentStyles, getInheritableStyles_1.default(null));\n        this.processNode(rootNode, currentStyles, {});\n    };\n    /**\n     * Convert global CSS into inline CSS\n     * @param rootNode The HTML Document\n     */\n    HtmlSanitizer.prototype.convertGlobalCssToInlineCss = function (rootNode) {\n        var styleNodes = toArray(rootNode.querySelectorAll('style'));\n        var styleSheets = this.additionalGlobalStyleNodes\n            .reverse()\n            .map(function (node) { return node.sheet; })\n            .concat(styleNodes.map(function (node) { return node.sheet; }).reverse())\n            .filter(function (sheet) { return sheet; });\n        for (var _i = 0, styleSheets_1 = styleSheets; _i < styleSheets_1.length; _i++) {\n            var styleSheet = styleSheets_1[_i];\n            var _loop_1 = function (j) {\n                // Skip any none-style rule, i.e. @page\n                var styleRule = styleSheet.cssRules[j];\n                var text = styleRule && styleRule.style ? styleRule.style.cssText : null;\n                if (styleRule.type != CSSRule.STYLE_RULE || !text || !styleRule.selectorText) {\n                    return \"continue\";\n                }\n                // Make sure the selector is not empty\n                for (var _i = 0, _a = styleRule.selectorText.split(','); _i < _a.length; _i++) {\n                    var selector = _a[_i];\n                    if (!selector || !selector.trim() || selector.indexOf(':') >= 0) {\n                        continue;\n                    }\n                    var nodes = toArray(rootNode.querySelectorAll(selector));\n                    // Always put existing styles after so that they have higher priority\n                    // Which means if both global style and inline style apply to the same element,\n                    // inline style will have higher priority\n                    nodes.forEach(function (node) {\n                        return node.setAttribute('style', text + (node.getAttribute('style') || ''));\n                    });\n                }\n            };\n            for (var j = styleSheet.cssRules.length - 1; j >= 0; j--) {\n                _loop_1(j);\n            }\n        }\n        styleNodes.forEach(function (node) {\n            if (node.parentNode) {\n                node.parentNode.removeChild(node);\n            }\n        });\n    };\n    HtmlSanitizer.prototype.processNode = function (node, currentStyle, context) {\n        var nodeType = node.nodeType;\n        var isElement = nodeType == 1 /* Element */;\n        var isText = nodeType == 3 /* Text */;\n        var isFragment = nodeType == 11 /* DocumentFragment */;\n        var element = node;\n        var tag = isElement ? element.tagName.toUpperCase() : '';\n        if ((isElement && !this.allowElement(element, tag, context)) ||\n            (isText && /^[\\r\\n]*$/g.test(node.nodeValue) && !currentStyle.insidePRE) ||\n            (!isElement && !isText && !isFragment)) {\n            node.parentNode.removeChild(node);\n        }\n        else if (isText &&\n            !this.allowPreserveWhiteSpace &&\n            currentStyle['white-space'] == 'pre') {\n            node.nodeValue = node.nodeValue.replace(/^ /gm, '\\u00A0').replace(/ {2}/g, ' \\u00A0');\n        }\n        else if (isElement || isFragment) {\n            var thisStyle = cloneObject_1.cloneObject(currentStyle);\n            if (isElement) {\n                this.processAttributes(element, context);\n                this.processCss(element, tag, thisStyle, context);\n                // Special handling for PRE tag, need to preserve \\r\\n inside PRE\n                if (tag == 'PRE') {\n                    thisStyle.insidePRE = 'true';\n                }\n            }\n            var child = element.firstChild;\n            var next = void 0;\n            for (; child; child = next) {\n                next = child.nextSibling;\n                this.processNode(child, thisStyle, context);\n            }\n        }\n    };\n    HtmlSanitizer.prototype.processCss = function (element, tag, thisStyle, context) {\n        var _this = this;\n        var styleNode = element.getAttributeNode('style');\n        if (!styleNode) {\n            return;\n        }\n        var source = styleNode.value.split(';');\n        var result = source.filter(function (style) {\n            var pair;\n            if (!style || style.trim() == '' || (pair = style.split(':')).length != 2) {\n                return false;\n            }\n            var name = pair[0].trim().toLowerCase();\n            var value = pair[1].trim().toLowerCase();\n            var callback = _this.styleCallbacks[name];\n            var isInheritable = thisStyle[name] != undefined;\n            var keep = (!callback || callback(value, element, context)) &&\n                value != 'inherit' &&\n                value.indexOf('expression') < 0 &&\n                name.substr(0, 1) != '-' &&\n                _this.defaultStyleValues[name] != value &&\n                ((isInheritable && value != thisStyle[name]) ||\n                    (!isInheritable && value != 'initial' && value != 'normal'));\n            if (keep && isInheritable) {\n                thisStyle[name] = value;\n            }\n            return keep && (_this.allowPreserveWhiteSpace || name != 'white-space');\n        });\n        if (source.length != result.length) {\n            if (result.length > 0) {\n                element.setAttribute('style', result.map(function (s) { return s.trim(); }).join('; '));\n            }\n            else {\n                element.removeAttribute('style');\n            }\n        }\n    };\n    HtmlSanitizer.prototype.processAttributes = function (element, context) {\n        for (var i = element.attributes.length - 1; i >= 0; i--) {\n            var attribute = element.attributes[i];\n            var name_1 = attribute.name.toLowerCase().trim();\n            var value = attribute.value;\n            var callback = this.attributeCallbacks[name_1];\n            var newValue = callback\n                ? callback(value, element, context)\n                : this.allowedAttributes.indexOf(name_1) >= 0 || name_1.indexOf('data-') == 0\n                    ? value\n                    : null;\n            if (name_1 == 'class' && this.allowedCssClassesRegex) {\n                newValue = this.processCssClass(value, newValue);\n            }\n            if (newValue === null ||\n                newValue === undefined ||\n                newValue.match(/s\\n*c\\n*r\\n*i\\n*p\\n*t\\n*:/i) // match script: with any NewLine inside. Browser will ignore those NewLine char and still treat it as script prefix\n            ) {\n                element.removeAttribute(name_1);\n            }\n            else {\n                attribute.value = newValue;\n            }\n        }\n    };\n    HtmlSanitizer.prototype.processCssClass = function (originalValue, calculatedValue) {\n        var _this = this;\n        var originalClasses = originalValue ? originalValue.split(' ') : [];\n        var calculatedClasses = calculatedValue ? calculatedValue.split(' ') : [];\n        originalClasses.forEach(function (className) {\n            if (_this.allowedCssClassesRegex.test(className) &&\n                calculatedClasses.indexOf(className) < 0) {\n                calculatedClasses.push(className);\n            }\n        });\n        return calculatedClasses.length > 0 ? calculatedClasses.join(' ') : null;\n    };\n    HtmlSanitizer.prototype.allowElement = function (element, tag, context) {\n        var callback = this.elementCallbacks[tag];\n        return callback\n            ? callback(element, context)\n            : this.allowedTags.indexOf(tag) >= 0 || tag.indexOf(':') > 0;\n    };\n    return HtmlSanitizer;\n}());\nexports.default = HtmlSanitizer;\nfunction toArray(list) {\n    return [].slice.call(list);\n}\n//# sourceMappingURL=HtmlSanitizer.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar cloneObject_1 = require(\"./cloneObject\");\nvar ALLOWED_HTML_TAGS = ('BODY,H1,H2,H3,H4,H5,H6,FORM,P,BR,NOBR,HR,ACRONYM,ABBR,ADDRESS,B,' +\n    'BDI,BDO,BIG,BLOCKQUOTE,CENTER,CITE,CODE,DEL,DFN,EM,FONT,I,INS,KBD,MARK,METER,PRE,PROGRESS,' +\n    'Q,RP,RT,RUBY,S,SAMP,SMALL,STRIKE,STRONG,SUB,SUP,TEMPLATE,TIME,TT,U,VAR,WBR,XMP,INPUT,TEXTAREA,' +\n    'BUTTON,SELECT,OPTGROUP,OPTION,LABEL,FIELDSET,LEGEND,DATALIST,OUTPUT,IMG,MAP,AREA,CANVAS,FIGCAPTION,' +\n    'FIGURE,PICTURE,A,NAV,UL,OL,LI,DIR,UL,DL,DT,DD,MENU,MENUITEM,TABLE,CAPTION,TH,TR,TD,THEAD,TBODY,' +\n    'TFOOT,COL,COLGROUP,DIV,SPAN,HEADER,FOOTER,MAIN,SECTION,ARTICLE,ASIDE,DETAILS,DIALOG,SUMMARY,DATA').split(',');\nvar ALLOWED_HTML_ATTRIBUTES = ('accept,align,alt,checked,cite,color,cols,colspan,contextmenu,' +\n    'coords,datetime,default,dir,dirname,disabled,download,face,headers,height,hidden,high,href,' +\n    'hreflang,ismap,kind,label,lang,list,low,max,maxlength,media,min,multiple,open,optimum,pattern,' +\n    'placeholder,readonly,rel,required,reversed,rows,rowspan,scope,selected,shape,size,sizes,span,' +\n    'spellcheck,src,srclang,srcset,start,step,style,tabindex,target,title,translate,type,usemap,value,' +\n    'width,wrap').split(',');\nvar DEFAULT_STYLE_VALUES = {\n    'background-color': 'transparent',\n    'border-bottom-color': 'rgb(0, 0, 0)',\n    'border-bottom-style': 'none',\n    'border-bottom-width': '0px',\n    'border-image-outset': '0',\n    'border-image-repeat': 'stretch',\n    'border-image-slice': '100%',\n    'border-image-source': 'none',\n    'border-image-width': '1',\n    'border-left-color': 'rgb(0, 0, 0)',\n    'border-left-style': 'none',\n    'border-left-width': '0px',\n    'border-right-color': 'rgb(0, 0, 0)',\n    'border-right-style': 'none',\n    'border-right-width': '0px',\n    'border-top-color': 'rgb(0, 0, 0)',\n    'border-top-style': 'none',\n    'border-top-width': '0px',\n    'outline-color': 'transparent',\n    'outline-style': 'none',\n    'outline-width': '0px',\n    overflow: 'visible',\n    'text-decoration': 'none',\n    '-webkit-text-stroke-width': '0px',\n    'word-wrap': 'break-word',\n    'margin-left': '0px',\n    'margin-right': '0px',\n    padding: '0px',\n    'padding-top': '0px',\n    'padding-left': '0px',\n    'padding-right': '0px',\n    'padding-bottom': '0px',\n    border: '0px',\n    'border-top': '0px',\n    'border-left': '0px',\n    'border-right': '0px',\n    'border-bottom': '0px',\n    'vertical-align': 'baseline',\n    float: 'none',\n};\n// This is to preserve entity related CSS classes when paste.\nvar ALLOWED_CSS_CLASSES = [];\n/**\n * @internal\n */\nfunction getAllowedTags(additionalTags) {\n    return unique(ALLOWED_HTML_TAGS.concat(additionalTags || [])).map(function (tag) { return tag.toUpperCase(); });\n}\nexports.getAllowedTags = getAllowedTags;\n/**\n * @internal\n */\nfunction getAllowedAttributes(additionalAttributes) {\n    return unique(ALLOWED_HTML_ATTRIBUTES.concat(additionalAttributes || [])).map(function (attr) {\n        return attr.toLocaleLowerCase();\n    });\n}\nexports.getAllowedAttributes = getAllowedAttributes;\n/**\n * @internal\n */\nfunction getAllowedCssClassesRegex(additionalCssClasses) {\n    var patterns = ALLOWED_CSS_CLASSES.concat(additionalCssClasses || []);\n    return patterns.length > 0 ? new RegExp(patterns.join('|')) : null;\n}\nexports.getAllowedCssClassesRegex = getAllowedCssClassesRegex;\n/**\n * @internal\n */\nfunction getDefaultStyleValues(additionalDefaultStyles) {\n    var result = cloneObject_1.cloneObject(DEFAULT_STYLE_VALUES);\n    if (additionalDefaultStyles) {\n        Object.keys(additionalDefaultStyles).forEach(function (name) {\n            var value = additionalDefaultStyles[name];\n            if (value !== null && value !== undefined) {\n                result[name] = value;\n            }\n            else {\n                delete result[name];\n            }\n        });\n    }\n    return result;\n}\nexports.getDefaultStyleValues = getDefaultStyleValues;\n/**\n * @internal\n */\nfunction getStyleCallbacks(callbacks) {\n    var result = cloneObject_1.cloneObject(callbacks);\n    result.position = result.position || removeValue;\n    result.width = result.width || removeWidthForLiAndDiv;\n    return result;\n}\nexports.getStyleCallbacks = getStyleCallbacks;\nfunction removeValue() {\n    return null;\n}\nfunction removeWidthForLiAndDiv(value, element) {\n    var tag = element.tagName;\n    return !(tag == 'LI' || tag == 'DIV');\n}\nfunction unique(array) {\n    return array.filter(function (value, index, self) { return self.indexOf(value) == index; });\n}\n//# sourceMappingURL=getAllowedValues.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Create default value of HtmlSanitizerOptions with every property set\n */\nfunction createDefaultHtmlSanitizerOptions() {\n    return {\n        elementCallbacks: {},\n        attributeCallbacks: {},\n        styleCallbacks: {},\n        additionalAllowedTags: [],\n        additionalAllowAttributes: [],\n        additionalAllowedCssClasses: [],\n        additionalDefaultStyleValues: {},\n        additionalGlobalStyleNodes: [],\n        allowPreserveWhiteSpace: false,\n    };\n}\nexports.default = createDefaultHtmlSanitizerOptions;\n//# sourceMappingURL=createDefaultHtmlSanitizerOptions.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Chain all callback for an attribute together\n * @param map The source callback map\n * @param name Name of the property to chain\n * @param newCallback A new callback to process the given name on the given map.\n * If the same property got multiple callbacks, the final return value will be the return\n * value of the latest callback\n */\nfunction chainSanitizerCallback(map, name, newCallback) {\n    if (!map[name]) {\n        map[name] = newCallback;\n    }\n    else {\n        var originalCallback_1 = map[name];\n        map[name] = function () {\n            var args = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                args[_i] = arguments[_i];\n            }\n            originalCallback_1.apply(void 0, args);\n            return newCallback.apply(void 0, args);\n        };\n    }\n}\nexports.default = chainSanitizerCallback;\n//# sourceMappingURL=chainSanitizerCallback.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar safeInstanceOf_1 = require(\"./safeInstanceOf\");\n/**\n * Check if the given object is DocumentFragment\n * @param obj The object to check\n */\nfunction isDocumentFragment(obj) {\n    return safeInstanceOf_1.default(obj, 'DocumentFragment');\n}\nexports.default = isDocumentFragment;\n//# sourceMappingURL=isDocumentFragment.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar safeInstanceOf_1 = require(\"./safeInstanceOf\");\n/**\n * Check if the given object is HTMLOListElement\n * @param obj The object to check\n */\nfunction isHTMLOListElement(obj) {\n    return safeInstanceOf_1.default(obj, 'HTMLOListElement');\n}\nexports.default = isHTMLOListElement;\n//# sourceMappingURL=isHTMLOListElement.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar DocumentCommand_1 = require(\"./browser/DocumentCommand\");\nexports.DocumentCommand = DocumentCommand_1.DocumentCommand;\nvar DocumentPosition_1 = require(\"./browser/DocumentPosition\");\nexports.DocumentPosition = DocumentPosition_1.DocumentPosition;\nvar NodeType_1 = require(\"./browser/NodeType\");\nexports.NodeType = NodeType_1.NodeType;\n// Enum\nvar Alignment_1 = require(\"./enum/Alignment\");\nexports.Alignment = Alignment_1.Alignment;\nvar ChangeSource_1 = require(\"./enum/ChangeSource\");\nexports.ChangeSource = ChangeSource_1.ChangeSource;\nvar ContentPosition_1 = require(\"./enum/ContentPosition\");\nexports.ContentPosition = ContentPosition_1.ContentPosition;\nvar Direction_1 = require(\"./enum/Direction\");\nexports.Direction = Direction_1.Direction;\nvar EntityOperation_1 = require(\"./enum/EntityOperation\");\nexports.EntityOperation = EntityOperation_1.EntityOperation;\nvar FontSizeChange_1 = require(\"./enum/FontSizeChange\");\nexports.FontSizeChange = FontSizeChange_1.FontSizeChange;\nvar Indentation_1 = require(\"./enum/Indentation\");\nexports.Indentation = Indentation_1.Indentation;\nvar ListType_1 = require(\"./enum/ListType\");\nexports.ListType = ListType_1.ListType;\nvar PasteOption_1 = require(\"./enum/PasteOption\");\nexports.PasteOption = PasteOption_1.PasteOption;\nvar PositionType_1 = require(\"./enum/PositionType\");\nexports.PositionType = PositionType_1.PositionType;\nvar QueryScope_1 = require(\"./enum/QueryScope\");\nexports.QueryScope = QueryScope_1.QueryScope;\nvar RegionType_1 = require(\"./enum/RegionType\");\nexports.RegionType = RegionType_1.RegionType;\nvar TableOperation_1 = require(\"./enum/TableOperation\");\nexports.TableOperation = TableOperation_1.TableOperation;\nvar PluginEventType_1 = require(\"./event/PluginEventType\");\nexports.PluginEventType = PluginEventType_1.PluginEventType;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Command strings for Document.execCommand() API\n * https://developer.mozilla.org/en-US/docs/Web/API/Document/execCommand\n */\nvar DocumentCommand;\n(function (DocumentCommand) {\n    /**\n     * Changes the browser auto-link behavior (Internet Explorer only)\n     */\n    DocumentCommand[\"AutoUrlDetect\"] = \"AutoUrlDetect\";\n    /**\n     * Changes the document background color. In styleWithCss mode, it affects the background color of the containing block instead.\n     * This requires a &lt;color&gt; value string to be passed in as a value argument. Note that Internet Explorer uses this to set the\n     * text background color.\n     */\n    DocumentCommand[\"BackColor\"] = \"backColor\";\n    /**\n     * Toggles bold on/off for the selection or at the insertion point. Internet Explorer uses the &lt;strong&gt; tag instead of &lt;b&gt;.\n     */\n    DocumentCommand[\"Bold\"] = \"bold\";\n    /**\n     * Clears all authentication credentials from the cache.\n     */\n    DocumentCommand[\"ClearAuthenticationCache\"] = \"ClearAuthenticationCache\";\n    /**\n     * Makes the content document either read-only or editable. This requires a boolean true/false as the value argument.\n     * (Not supported by Internet Explorer.)\n     */\n    DocumentCommand[\"ContentReadOnly\"] = \"contentReadOnly\";\n    /**\n     * Copies the current selection to the clipboard. Conditions of having this behavior enabled vary from one browser to another,\n     * and have evolved over time. Check the compatibility table to determine if you can use it in your case.\n     */\n    DocumentCommand[\"Copy\"] = \"copy\";\n    /**\n     * Creates an hyperlink from the selection, but only if there is a selection. Requires a URI string as a value argument for the\n     * hyperlink's href. The URI must contain at least a single character, which may be whitespace.\n     * (Internet Explorer will create a link with a null value.)\n     */\n    DocumentCommand[\"CreateLink\"] = \"createLink\";\n    /**\n     * Removes the current selection and copies it to the clipboard. When this behavior is enabled varies between browsers,\n     * and its conditions have evolved over time. Check the compatibility table for usage details.\n     */\n    DocumentCommand[\"Cut\"] = \"cut\";\n    /**\n     * Adds a &lt;small&gt; tag around the selection or at the insertion point. (Not supported by Internet Explorer.)\n     */\n    DocumentCommand[\"DecreaseFontSize\"] = \"decreaseFontSize\";\n    /**\n     * Changes the paragraph separator used when new paragraphs are created in editable text regions. See Differences in markup\n     * generation for more details.\n     */\n    DocumentCommand[\"DefaultParagraphSeparator\"] = \"defaultParagraphSeparator\";\n    /**\n     * Deletes the current selection.\n     */\n    DocumentCommand[\"Delete\"] = \"delete\";\n    /**\n     * Enables or disables the table row/column insertion and deletion controls. (Not supported by Internet Explorer.)\n     */\n    DocumentCommand[\"EnableInlineTableEditing\"] = \"enableInlineTableEditing\";\n    /**\n     * Enables or disables the resize handles on images and other resizable objects. (Not supported by Internet Explorer.)\n     */\n    DocumentCommand[\"EnableObjectResizing\"] = \"enableObjectResizing\";\n    /**\n     * Changes the font name for the selection or at the insertion point. This requires a font name string (like \"Arial\")\n     * as a value argument.\n     */\n    DocumentCommand[\"FontName\"] = \"fontName\";\n    /**\n     * Changes the font size for the selection or at the insertion point. This requires an integer from 1-7 as a value argument.\n     */\n    DocumentCommand[\"FontSize\"] = \"fontSize\";\n    /**\n     * Changes a font color for the selection or at the insertion point. This requires a hexidecimal color value string\n     * as a value argument.\n     */\n    DocumentCommand[\"ForeColor\"] = \"foreColor\";\n    /**\n     * Adds an HTML block-level element around the line containing the current selection, replacing the block element containing\n     * the line if one exists (in Firefox, &lt;blockquote&gt; is the exception — it will wrap any containing block element).\n     * Requires a tag-name string as a value argument. Virtually all block-level elements can be used.\n     * (Internet Explorer supports only heading tags H1–H6, ADDRESS, and PRE, which must be wrapped in angle brackets, such as \"&lt;H1&gt;\".)\n     */\n    DocumentCommand[\"FormatBlock\"] = \"formatBlock\";\n    /**\n     * Deletes the character ahead of the cursor's position, identical to hitting the Delete key on a Windows keyboard.\n     */\n    DocumentCommand[\"ForwardDelete\"] = \"forwardDelete\";\n    /**\n     * Adds a heading element around a selection or insertion point line. Requires the tag-name stringas a value argument (i.e. \"H1\", \"H6\").\n     * (Not supported by Internet Explorer and Safari.)\n     */\n    DocumentCommand[\"Heading\"] = \"heading\";\n    /**\n     * Changes the background color for the selection or at the insertion point. Requires a color value string as a value argument.\n     * useCSS must be true for this to function. (Not supported by Internet Explorer.)\n     */\n    DocumentCommand[\"HiliteColor\"] = \"hiliteColor\";\n    /**\n     * Adds a &lt;big&gt; tag around the selection or at the insertion point. (Not supported by Internet Explorer.)\n     */\n    DocumentCommand[\"IncreaseFontSize\"] = \"increaseFontSize\";\n    /**\n     * Indents the line containing the selection or insertion point. In Firefox, if the selection spans multiple lines at different\n     * levels of indentation, only the least indented lines in the selection will be indented.\n     */\n    DocumentCommand[\"Indent\"] = \"indent\";\n    /**\n     * Controls whether the Enter key inserts a &lt;br&gt; element, or splits the current block element into two.\n     * (Not supported by Internet Explorer.)\n     */\n    DocumentCommand[\"InsertBrOnReturn\"] = \"insertBrOnReturn\";\n    /**\n     * Inserts a &lt;hr&gt; element at the insertion point, or replaces the selection with it.\n     */\n    DocumentCommand[\"InsertHorizontalRule\"] = \"insertHorizontalRule\";\n    /**\n     * Inserts an HTML string at the insertion point (deletes selection). Requires a valid HTML string as a value argument.\n     * (Not supported by Internet Explorer.)\n     */\n    DocumentCommand[\"InsertHTML\"] = \"insertHTML\";\n    /**\n     * Inserts an image at the insertion point (deletes selection). Requires a URL string for the image's src as a value argument.\n     * The requirements for this string are the same as createLink.\n     */\n    DocumentCommand[\"InsertImage\"] = \"insertImage\";\n    /**\n     * Creates a numbered ordered list for the selection or at the insertion point.\n     */\n    DocumentCommand[\"InsertOrderedList\"] = \"insertOrderedList\";\n    /**\n     * Creates a bulleted unordered list for the selection or at the insertion point.\n     */\n    DocumentCommand[\"InsertUnorderedList\"] = \"insertUnorderedList\";\n    /**\n     * Inserts a paragraph around the selection or the current line.\n     * (Internet Explorer inserts a paragraph at the insertion point and deletes the selection.)\n     */\n    DocumentCommand[\"InsertParagraph\"] = \"insertParagraph\";\n    /**\n     * Inserts the given plain text at the insertion point (deletes selection).\n     */\n    DocumentCommand[\"InsertText\"] = \"insertText\";\n    /**\n     * Toggles italics on/off for the selection or at the insertion point.\n     * (Internet Explorer uses the &lt;em&gt; element instead of &lt;i&gt;.)\n     */\n    DocumentCommand[\"Italic\"] = \"italic\";\n    /**\n     * Centers the selection or insertion point.\n     */\n    DocumentCommand[\"JustifyCenter\"] = \"justifyCenter\";\n    /**\n     * Justifies the selection or insertion point.\n     */\n    DocumentCommand[\"JustifyFull\"] = \"justifyFull\";\n    /**\n     * Justifies the selection or insertion point to the left.\n     */\n    DocumentCommand[\"JustifyLeft\"] = \"justifyLeft\";\n    /**\n     * Right-justifies the selection or the insertion point.\n     */\n    DocumentCommand[\"JustifyRight\"] = \"justifyRight\";\n    /**\n     * Outdents the line containing the selection or insertion point.\n     */\n    DocumentCommand[\"Outdent\"] = \"outdent\";\n    /**\n     * Pastes the clipboard contents at the insertion point (replaces current selection). Disabled for web content. See [1].\n     */\n    DocumentCommand[\"Paste\"] = \"paste\";\n    /**\n     * Redoes the previous undo command.\n     */\n    DocumentCommand[\"Redo\"] = \"redo\";\n    /**\n     * Removes all formatting from the current selection.\n     */\n    DocumentCommand[\"RemoveFormat\"] = \"removeFormat\";\n    /**\n     * Selects all of the content of the editable region.\n     */\n    DocumentCommand[\"SelectAll\"] = \"selectAll\";\n    /**\n     * Toggles strikethrough on/off for the selection or at the insertion point.\n     */\n    DocumentCommand[\"StrikeThrough\"] = \"strikeThrough\";\n    /**\n     * Toggles subscript on/off for the selection or at the insertion point.\n     */\n    DocumentCommand[\"Subscript\"] = \"subscript\";\n    /**\n     * Toggles superscript on/off for the selection or at the insertion point.\n     */\n    DocumentCommand[\"Superscript\"] = \"superscript\";\n    /**\n     * Toggles underline on/off for the selection or at the insertion point.\n     */\n    DocumentCommand[\"Underline\"] = \"underline\";\n    /**\n     * Undoes the last executed command.\n     */\n    DocumentCommand[\"Undo\"] = \"undo\";\n    /**\n     * Removes the anchor element from a selected hyperlink.\n     */\n    DocumentCommand[\"Unlink\"] = \"unlink\";\n    /**\n     * Replaces the useCSS command. true modifies/generates style attributes in markup, false generates presentational elements.\n     */\n    DocumentCommand[\"StyleWithCSS\"] = \"styleWithCSS\";\n})(DocumentCommand = exports.DocumentCommand || (exports.DocumentCommand = {}));\n//# sourceMappingURL=DocumentCommand.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * The is essentially an enum representing result from browser compareDocumentPosition API\n * https://developer.mozilla.org/en-US/docs/Web/API/Node/compareDocumentPosition\n */\nvar DocumentPosition;\n(function (DocumentPosition) {\n    /**\n     * Same node\n     */\n    DocumentPosition[DocumentPosition[\"Same\"] = 0] = \"Same\";\n    /**\n     * Node is disconnected from document\n     */\n    DocumentPosition[DocumentPosition[\"Disconnected\"] = 1] = \"Disconnected\";\n    /**\n     * Node is preceding the comparing node\n     */\n    DocumentPosition[DocumentPosition[\"Preceding\"] = 2] = \"Preceding\";\n    /**\n     * Node is following the comparing node\n     */\n    DocumentPosition[DocumentPosition[\"Following\"] = 4] = \"Following\";\n    /**\n     * Node contains the comparing node\n     */\n    DocumentPosition[DocumentPosition[\"Contains\"] = 8] = \"Contains\";\n    /**\n     * Node is contained by the comparing node\n     */\n    DocumentPosition[DocumentPosition[\"ContainedBy\"] = 16] = \"ContainedBy\";\n})(DocumentPosition = exports.DocumentPosition || (exports.DocumentPosition = {}));\n//# sourceMappingURL=DocumentPosition.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * The is essentially an enum represents the type of the node\n * https://developer.mozilla.org/en-US/docs/Web/API/Node/nodeType\n * Values not listed here are deprecated.\n */\nvar NodeType;\n(function (NodeType) {\n    /**\n     * An Element node such as &lt;p&gt; or &lt;div&gt;.\n     */\n    NodeType[NodeType[\"Element\"] = 1] = \"Element\";\n    /**\n     * The actual Text of Element or Attr.\n     */\n    NodeType[NodeType[\"Text\"] = 3] = \"Text\";\n    /**\n     * A ProcessingInstruction of an XML document such as &lt;?xml-stylesheet ... ?&gt; declaration.\n     */\n    NodeType[NodeType[\"ProcessingInstruction\"] = 7] = \"ProcessingInstruction\";\n    /**\n     * A Comment node.\n     */\n    NodeType[NodeType[\"Comment\"] = 8] = \"Comment\";\n    /**\n     * A Document node.\n     */\n    NodeType[NodeType[\"Document\"] = 9] = \"Document\";\n    /**\n     * A DocumentType node e.g. &lt;!DOCTYPE html&gt; for HTML5 documents.\n     */\n    NodeType[NodeType[\"DocumentType\"] = 10] = \"DocumentType\";\n    /**\n     * A DocumentFragment node.\n     */\n    NodeType[NodeType[\"DocumentFragment\"] = 11] = \"DocumentFragment\";\n})(NodeType = exports.NodeType || (exports.NodeType = {}));\n//# sourceMappingURL=NodeType.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * enum for setting block alignment, used by setAlignment API\n */\nvar Alignment;\n(function (Alignment) {\n    /**\n     * Align left\n     */\n    Alignment[Alignment[\"Left\"] = 0] = \"Left\";\n    /**\n     * Align center\n     */\n    Alignment[Alignment[\"Center\"] = 1] = \"Center\";\n    /**\n     * Align right\n     */\n    Alignment[Alignment[\"Right\"] = 2] = \"Right\";\n})(Alignment = exports.Alignment || (exports.Alignment = {}));\n//# sourceMappingURL=Alignment.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Possible change sources. Here are the predefined sources.\n * It can also be other string if the change source can't fall into these sources.\n */\nvar ChangeSource;\n(function (ChangeSource) {\n    /**\n     * Content changed by auto link\n     */\n    ChangeSource[\"AutoLink\"] = \"AutoLink\";\n    /**\n     * Content changed by create link\n     */\n    ChangeSource[\"CreateLink\"] = \"CreateLink\";\n    /**\n     * Content changed by format\n     */\n    ChangeSource[\"Format\"] = \"Format\";\n    /**\n     * Content changed by image resize\n     */\n    ChangeSource[\"ImageResize\"] = \"ImageResize\";\n    /**\n     * Content changed by paste\n     */\n    ChangeSource[\"Paste\"] = \"Paste\";\n    /**\n     * Content changed by setContent API\n     */\n    ChangeSource[\"SetContent\"] = \"SetContent\";\n    /**\n     * Content changed by cut operation\n     */\n    ChangeSource[\"Cut\"] = \"Cut\";\n    /**\n     * Content changed by drag & drop operation\n     */\n    ChangeSource[\"Drop\"] = \"Drop\";\n    /**\n     * Insert a new entity into editor\n     */\n    ChangeSource[\"InsertEntity\"] = \"InsertEntity\";\n})(ChangeSource = exports.ChangeSource || (exports.ChangeSource = {}));\n//# sourceMappingURL=ChangeSource.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * The position. Mostly used for content insertion and traversing\n * On insertion, we will need to specify where we want the content to be placed (begin, end, selection or outside)\n * On content traversing, we will need to specify the start position of traversing\n */\nvar ContentPosition;\n(function (ContentPosition) {\n    /**\n     * Begin of the container\n     */\n    ContentPosition[ContentPosition[\"Begin\"] = 0] = \"Begin\";\n    /**\n     * End of the container\n     */\n    ContentPosition[ContentPosition[\"End\"] = 1] = \"End\";\n    /**\n     * End of the content div domain.\n     */\n    ContentPosition[ContentPosition[\"DomEnd\"] = 2] = \"DomEnd\";\n    /**\n     * Selection start\n     */\n    ContentPosition[ContentPosition[\"SelectionStart\"] = 3] = \"SelectionStart\";\n    /**\n     * Outside of editor\n     */\n    ContentPosition[ContentPosition[\"Outside\"] = 4] = \"Outside\";\n    /**\n     * Manually defined range\n     */\n    ContentPosition[ContentPosition[\"Range\"] = 5] = \"Range\";\n})(ContentPosition = exports.ContentPosition || (exports.ContentPosition = {}));\n//# sourceMappingURL=ContentPosition.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * enum for setting block direction, used by setDirection API\n */\nvar Direction;\n(function (Direction) {\n    /**\n     * Left to right\n     */\n    Direction[Direction[\"LeftToRight\"] = 0] = \"LeftToRight\";\n    /**\n     * Right to left\n     */\n    Direction[Direction[\"RightToLeft\"] = 1] = \"RightToLeft\";\n})(Direction = exports.Direction || (exports.Direction = {}));\n//# sourceMappingURL=Direction.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Define possible operations to an entity\n */\nvar EntityOperation;\n(function (EntityOperation) {\n    /**\n     * Notify plugins that there is a new plugin was added into editor.\n     * Plugin can handle this event to entity hydration.\n     * This event will be only fired once for each entity DOM node.\n     * After undo, or copy/paste, since new DOM nodes were added, this event will be fired\n     * for those entites represented by newly added nodes.\n     */\n    EntityOperation[EntityOperation[\"NewEntity\"] = 0] = \"NewEntity\";\n    /**\n     * Notify plugins that user is clicking target to an entity\n     */\n    EntityOperation[EntityOperation[\"Click\"] = 1] = \"Click\";\n    /**\n     * Notify plugins that user is triggering context menu to an entity\n     */\n    EntityOperation[EntityOperation[\"ContextMenu\"] = 2] = \"ContextMenu\";\n    /**\n     * Notify plugins that user is escaping from an entity by pressing ESC key\n     */\n    EntityOperation[EntityOperation[\"Escape\"] = 3] = \"Escape\";\n    /**\n     * Notify plugins that user is removing an entity from its start position using DELETE key\n     */\n    EntityOperation[EntityOperation[\"RemoveFromStart\"] = 4] = \"RemoveFromStart\";\n    /**\n     * Notify plugins that user is remove an entity from its end position using BACKSPACE key\n     */\n    EntityOperation[EntityOperation[\"RemoveFromEnd\"] = 5] = \"RemoveFromEnd\";\n    /**\n     * Notify plugins that an entity is being overwritten.\n     * This can be causes by key in, cut, paste, delete, backspace ... on a selection\n     * which contains some entites.\n     */\n    EntityOperation[EntityOperation[\"Overwrite\"] = 6] = \"Overwrite\";\n    /**\n     * Notify plugins that an entity is being partially overwritten.\n     * This happens when user selected part of the entity then do key press, or cut, paste, delete, backspace, ...\n     */\n    EntityOperation[EntityOperation[\"PartialOverwrite\"] = 7] = \"PartialOverwrite\";\n    /**\n     * Notify plugins that editor is generating HTML content for save.\n     * Plugin should use this event to remove any temporary content, and only leave DOM nodes that\n     * should be saved as HTML string.\n     * This event will provide a cloned DOM tree for each entity, do NOT compare the DOM nodes with cached nodes\n     * because it will always return false.\n     */\n    EntityOperation[EntityOperation[\"ReplaceTemporaryContent\"] = 8] = \"ReplaceTemporaryContent\";\n})(EntityOperation = exports.EntityOperation || (exports.EntityOperation = {}));\n//# sourceMappingURL=EntityOperation.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * The enum used for increase or decrease font size\n * Used by setFontSize API\n */\nvar FontSizeChange;\n(function (FontSizeChange) {\n    /**\n     * Increase font size\n     */\n    FontSizeChange[FontSizeChange[\"Increase\"] = 0] = \"Increase\";\n    /**\n     * Decrease font size\n     */\n    FontSizeChange[FontSizeChange[\"Decrease\"] = 1] = \"Decrease\";\n})(FontSizeChange = exports.FontSizeChange || (exports.FontSizeChange = {}));\n//# sourceMappingURL=FontSizeChange.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * The enum used for increase or decrease indentation of a block\n * Used by setIndentation API\n */\nvar Indentation;\n(function (Indentation) {\n    /**\n     * Increase indentation\n     */\n    Indentation[Indentation[\"Increase\"] = 0] = \"Increase\";\n    /**\n     * Decrease indentation\n     */\n    Indentation[Indentation[\"Decrease\"] = 1] = \"Decrease\";\n})(Indentation = exports.Indentation || (exports.Indentation = {}));\n//# sourceMappingURL=Indentation.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Type of list (numbering or bullet)\n */\nvar ListType;\n(function (ListType) {\n    /**\n     * None list type\n     * It means this is not a list\n     */\n    ListType[ListType[\"None\"] = 0] = \"None\";\n    /**\n     * Ordered List type (numbering list)\n     * Represented by \"OL\" tag\n     */\n    ListType[ListType[\"Ordered\"] = 1] = \"Ordered\";\n    /**\n     * Unordered List type (bullet list)\n     * Represented by \"UL\" tag\n     */\n    ListType[ListType[\"Unordered\"] = 2] = \"Unordered\";\n})(ListType = exports.ListType || (exports.ListType = {}));\n//# sourceMappingURL=ListType.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Paste option\n */\nvar PasteOption;\n(function (PasteOption) {\n    /**\n     * Paste html with content type \"text/html\"\n     */\n    PasteOption[PasteOption[\"PasteHtml\"] = 0] = \"PasteHtml\";\n    /**\n     * Paste plain text with content type \"text/plain\"\n     */\n    PasteOption[PasteOption[\"PasteText\"] = 1] = \"PasteText\";\n    /**\n     * Paste image from clipboard with content type \"image/*\"\n     */\n    PasteOption[PasteOption[\"PasteImage\"] = 2] = \"PasteImage\";\n})(PasteOption = exports.PasteOption || (exports.PasteOption = {}));\n//# sourceMappingURL=PasteOption.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Represent the type of a position\n */\nvar PositionType;\n(function (PositionType) {\n    /**\n     * At the begninning of a node\n     */\n    PositionType[PositionType[\"Begin\"] = 0] = \"Begin\";\n    /**\n     * At the endo of a node\n     */\n    PositionType[PositionType[\"End\"] = -1] = \"End\";\n    /**\n     * Before a node\n     */\n    PositionType[PositionType[\"Before\"] = -2] = \"Before\";\n    /**\n     * After a node\n     */\n    PositionType[PositionType[\"After\"] = -3] = \"After\";\n})(PositionType = exports.PositionType || (exports.PositionType = {}));\n//# sourceMappingURL=PositionType.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Query scope for queryElements() API\n */\nvar QueryScope;\n(function (QueryScope) {\n    /**\n     * Query from the whole body of root node. This is default value.\n     */\n    QueryScope[QueryScope[\"Body\"] = 0] = \"Body\";\n    /**\n     * Query elements on a given selction (intersect)\n     * The result element can contain the selection, contain part of selection, or inside selection\n     */\n    QueryScope[QueryScope[\"OnSelection\"] = 1] = \"OnSelection\";\n    /**\n     * Query elements inside a given selection only\n     */\n    QueryScope[QueryScope[\"InSelection\"] = 2] = \"InSelection\";\n})(QueryScope = exports.QueryScope || (exports.QueryScope = {}));\n//# sourceMappingURL=QueryScope.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Type of all possible regions. Currently we only support region of Table\n */\nvar RegionType;\n(function (RegionType) {\n    /**\n     * Region splitted by Table\n     */\n    RegionType[RegionType[\"Table\"] = 0] = \"Table\";\n})(RegionType = exports.RegionType || (exports.RegionType = {}));\n//# sourceMappingURL=RegionType.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Operations used by editTable() API\n */\nvar TableOperation;\n(function (TableOperation) {\n    /**\n     * Insert a row above current row\n     */\n    TableOperation[TableOperation[\"InsertAbove\"] = 0] = \"InsertAbove\";\n    /**\n     * Insert a row below current row\n     */\n    TableOperation[TableOperation[\"InsertBelow\"] = 1] = \"InsertBelow\";\n    /**\n     * Insert a column on the left of current column\n     */\n    TableOperation[TableOperation[\"InsertLeft\"] = 2] = \"InsertLeft\";\n    /**\n     * Insert a column on the right of current column\n     */\n    TableOperation[TableOperation[\"InsertRight\"] = 3] = \"InsertRight\";\n    /**\n     * Delete the whole table\n     */\n    TableOperation[TableOperation[\"DeleteTable\"] = 4] = \"DeleteTable\";\n    /**\n     * Delete current column\n     */\n    TableOperation[TableOperation[\"DeleteColumn\"] = 5] = \"DeleteColumn\";\n    /**\n     * Delete current row\n     */\n    TableOperation[TableOperation[\"DeleteRow\"] = 6] = \"DeleteRow\";\n    /**\n     * Merge current row with the row above\n     */\n    TableOperation[TableOperation[\"MergeAbove\"] = 7] = \"MergeAbove\";\n    /**\n     * Merge current row with the row below\n     */\n    TableOperation[TableOperation[\"MergeBelow\"] = 8] = \"MergeBelow\";\n    /**\n     * Merge current column with the column on the left\n     */\n    TableOperation[TableOperation[\"MergeLeft\"] = 9] = \"MergeLeft\";\n    /**\n     * Merge current column with the column on the right\n     */\n    TableOperation[TableOperation[\"MergeRight\"] = 10] = \"MergeRight\";\n    /**\n     * Split current table cell horizontally\n     */\n    TableOperation[TableOperation[\"SplitHorizontally\"] = 11] = \"SplitHorizontally\";\n    /**\n     * Split current table cell vertically\n     */\n    TableOperation[TableOperation[\"SplitVertically\"] = 12] = \"SplitVertically\";\n})(TableOperation = exports.TableOperation || (exports.TableOperation = {}));\n//# sourceMappingURL=TableOperation.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Editor plugin event type\n */\nvar PluginEventType;\n(function (PluginEventType) {\n    /**\n     * HTML KeyDown event\n     */\n    PluginEventType[PluginEventType[\"KeyDown\"] = 0] = \"KeyDown\";\n    /**\n     * HTML KeyPress event\n     */\n    PluginEventType[PluginEventType[\"KeyPress\"] = 1] = \"KeyPress\";\n    /**\n     * HTML KeyUp event\n     */\n    PluginEventType[PluginEventType[\"KeyUp\"] = 2] = \"KeyUp\";\n    /**\n     * HTML CompositionEnd event\n     */\n    PluginEventType[PluginEventType[\"CompositionEnd\"] = 3] = \"CompositionEnd\";\n    /**\n     * HTML MouseDown event\n     */\n    PluginEventType[PluginEventType[\"MouseDown\"] = 4] = \"MouseDown\";\n    /**\n     * HTML MouseUp event\n     */\n    PluginEventType[PluginEventType[\"MouseUp\"] = 5] = \"MouseUp\";\n    /**\n     * Content changed event\n     */\n    PluginEventType[PluginEventType[\"ContentChanged\"] = 6] = \"ContentChanged\";\n    /**\n     * @deprecated Use ExtractContentWithDom instead.\n     * Extract Content event\n     * This event is triggered when getContent() is called with triggerExtractContentEvent = true\n     * Plugin can handle this event to remove the UI only markups to return clean HTML\n     */\n    PluginEventType[PluginEventType[\"ExtractContent\"] = 7] = \"ExtractContent\";\n    /**\n     * Extract Content with a DOM tree event\n     * This event is triggered when getContent() is called with triggerExtractContentEvent = true\n     * Plugin can handle this event to remove the UI only markups to return clean HTML\n     * by operating on a cloned DOM tree\n     */\n    PluginEventType[PluginEventType[\"ExtractContentWithDom\"] = 8] = \"ExtractContentWithDom\";\n    /**\n     * Before Paste event, provide a chance to change paste content\n     */\n    PluginEventType[PluginEventType[\"BeforePaste\"] = 9] = \"BeforePaste\";\n    /**\n     * Let plugin know editor is ready now\n     */\n    PluginEventType[PluginEventType[\"EditorReady\"] = 10] = \"EditorReady\";\n    /**\n     * Let plugin know editor is about to dispose\n     */\n    PluginEventType[PluginEventType[\"BeforeDispose\"] = 11] = \"BeforeDispose\";\n    /**\n     * HTML Input / TextInput event\n     */\n    PluginEventType[PluginEventType[\"Input\"] = 12] = \"Input\";\n    /**\n     * Pending format state (bold, italic, underline, ... with collapsed selection) is changed\n     */\n    PluginEventType[PluginEventType[\"PendingFormatStateChanged\"] = 13] = \"PendingFormatStateChanged\";\n    /**\n     * Dark mode state is changed\n     */\n    PluginEventType[PluginEventType[\"DarkModeChanged\"] = 14] = \"DarkModeChanged\";\n    /**\n     * Scroll event triggered by scroll container\n     */\n    PluginEventType[PluginEventType[\"Scroll\"] = 15] = \"Scroll\";\n    /**\n     * Operating on an entity. See enum EntityOperation for more details about each operation\n     */\n    PluginEventType[PluginEventType[\"EntityOperation\"] = 16] = \"EntityOperation\";\n})(PluginEventType = exports.PluginEventType || (exports.PluginEventType = {}));\n//# sourceMappingURL=PluginEventType.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Key numbers used for ContentEditFeature\n */\nvar Keys;\n(function (Keys) {\n    Keys[Keys[\"NULL\"] = 0] = \"NULL\";\n    Keys[Keys[\"BACKSPACE\"] = 8] = \"BACKSPACE\";\n    Keys[Keys[\"TAB\"] = 9] = \"TAB\";\n    Keys[Keys[\"ENTER\"] = 13] = \"ENTER\";\n    Keys[Keys[\"ESCAPE\"] = 27] = \"ESCAPE\";\n    Keys[Keys[\"SPACE\"] = 32] = \"SPACE\";\n    Keys[Keys[\"LEFT\"] = 37] = \"LEFT\";\n    Keys[Keys[\"UP\"] = 38] = \"UP\";\n    Keys[Keys[\"RIGHT\"] = 39] = \"RIGHT\";\n    Keys[Keys[\"DOWN\"] = 40] = \"DOWN\";\n    Keys[Keys[\"DELETE\"] = 46] = \"DELETE\";\n    Keys[Keys[\"EIGHT_ASTIRISK\"] = 56] = \"EIGHT_ASTIRISK\";\n    Keys[Keys[\"B\"] = 66] = \"B\";\n    Keys[Keys[\"I\"] = 73] = \"I\";\n    Keys[Keys[\"U\"] = 85] = \"U\";\n    Keys[Keys[\"Y\"] = 89] = \"Y\";\n    Keys[Keys[\"Z\"] = 90] = \"Z\";\n    Keys[Keys[\"COMMA\"] = 188] = \"COMMA\";\n    Keys[Keys[\"DASH_UNDERSCORE\"] = 189] = \"DASH_UNDERSCORE\";\n    Keys[Keys[\"PERIOD\"] = 190] = \"PERIOD\";\n    Keys[Keys[\"FORWARDSLASH\"] = 191] = \"FORWARDSLASH\";\n    Keys[Keys[\"GRAVE_TILDE\"] = 192] = \"GRAVE_TILDE\";\n    Keys[Keys[\"Ctrl\"] = 256] = \"Ctrl\";\n    Keys[Keys[\"Meta\"] = 512] = \"Meta\";\n    Keys[Keys[\"Shift\"] = 1024] = \"Shift\";\n    Keys[Keys[\"CONTENTCHANGED\"] = 2048] = \"CONTENTCHANGED\";\n    Keys[Keys[\"MOUSEDOWN\"] = 4096] = \"MOUSEDOWN\";\n})(Keys = exports.Keys || (exports.Keys = {}));\n//# sourceMappingURL=ContentEditFeature.js.map","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar adjustBrowserBehavior_1 = require(\"./adjustBrowserBehavior\");\nvar createEditorCore_1 = require(\"./createEditorCore\");\nvar mapPluginEvents_1 = require(\"./mapPluginEvents\");\nvar normalizeContentColor_1 = require(\"../darkMode/normalizeContentColor\");\nvar calculateDefaultFormat_1 = require(\"../coreAPI/calculateDefaultFormat\");\nvar convertContentToDarkMode_1 = require(\"../darkMode/convertContentToDarkMode\");\nvar roosterjs_editor_dom_1 = require(\"roosterjs-editor-dom\");\n/**\n * RoosterJs core editor class\n */\nvar Editor = /** @class */ (function () {\n    //#region Lifecycle\n    /**\n     * Creates an instance of Editor\n     * @param contentDiv The DIV HTML element which will be the container element of editor\n     * @param options An optional options object to customize the editor\n     */\n    function Editor(contentDiv, options) {\n        var _this = this;\n        if (options === void 0) { options = {}; }\n        // 1. Make sure all parameters are valid\n        if (roosterjs_editor_dom_1.getTagOfNode(contentDiv) != 'DIV') {\n            throw new Error('contentDiv must be an HTML DIV element');\n        }\n        // 2. Store options values to local variables\n        this.core = createEditorCore_1.default(contentDiv, options);\n        this.enableExperimentFeatures = options.enableExperimentFeatures;\n        // 3. Initialize plugins\n        this.core.plugins.forEach(function (plugin) { return plugin.initialize(_this); });\n        // 4. Ensure initial content and its format\n        this.setContent(options.initialContent || contentDiv.innerHTML || '', false /*triggerContentChangedEvent*/);\n        // 5. Create event handler to bind DOM events\n        this.eventDisposers = mapPluginEvents_1.default(this.core);\n        // 6. Add additional content edit features to the editor if specified\n        if (options.additionalEditFeatures) {\n            options.additionalEditFeatures.forEach(function (feature) { return _this.addContentEditFeature(feature); });\n        }\n        // 7. Make the container editable and set its selection styles\n        if (!options.omitContentEditableAttributeChanges && !contentDiv.isContentEditable) {\n            contentDiv.setAttribute('contenteditable', 'true');\n            var styles = contentDiv.style;\n            styles.userSelect = styles.msUserSelect = styles.webkitUserSelect = 'text';\n            this.contenteditableChanged = true;\n        }\n        // 8. Do proper change for browsers to disable some browser-specified behaviors.\n        adjustBrowserBehavior_1.default(this.core.document);\n        // 9. Let plugins know that we are ready\n        this.triggerPluginEvent(10 /* EditorReady */, {}, true /*broadcast*/);\n        // 10. Before give editor to user, make sure there is at least one DIV element to accept typing\n        this.core.corePlugins.typeInContainer.ensureTypeInElement(this.getFocusedPosition() || new roosterjs_editor_dom_1.Position(contentDiv, 0 /* Begin */));\n    }\n    /**\n     * Dispose this editor, dispose all plugins and custom data\n     */\n    Editor.prototype.dispose = function () {\n        this.triggerPluginEvent(11 /* BeforeDispose */, {}, true /*broadcast*/);\n        this.core.plugins.forEach(function (plugin) { return plugin.dispose(); });\n        this.eventDisposers.forEach(function (disposer) { return disposer(); });\n        this.eventDisposers = null;\n        for (var _i = 0, _a = Object.keys(this.core.customData); _i < _a.length; _i++) {\n            var key = _a[_i];\n            var data = this.core.customData[key];\n            if (data && data.disposer) {\n                data.disposer(data.value);\n            }\n            delete this.core.customData[key];\n        }\n        if (this.contenteditableChanged) {\n            var styles = this.core.contentDiv.style;\n            styles.userSelect = styles.msUserSelect = styles.webkitUserSelect = '';\n            this.core.contentDiv.removeAttribute('contenteditable');\n        }\n        this.core = null;\n    };\n    /**\n     * Get whether this editor is disposed\n     * @returns True if editor is disposed, otherwise false\n     */\n    Editor.prototype.isDisposed = function () {\n        return !this.core;\n    };\n    //#endregion\n    //#region Node API\n    /**\n     * Insert node into editor\n     * @param node The node to insert\n     * @param option Insert options. Default value is:\n     *  position: ContentPosition.SelectionStart\n     *  updateCursor: true\n     *  replaceSelection: true\n     *  insertOnNewLine: false\n     * @returns true if node is inserted. Otherwise false\n     */\n    Editor.prototype.insertNode = function (node, option) {\n        // DocumentFragment type nodes become empty after they're inserted.\n        // Therefore, we get the list of nodes to transform prior to their insertion.\n        var darkModeOptions = this.getDarkModeOptions();\n        var darkModeTransform = this.isDarkMode()\n            ? convertContentToDarkMode_1.convertContentToDarkMode(node, darkModeOptions && darkModeOptions.onExternalContentTransform\n                ? darkModeOptions.onExternalContentTransform\n                : undefined)\n            : null;\n        var result = node ? this.core.api.insertNode(this.core, node, option) : false;\n        if (result && darkModeTransform) {\n            darkModeTransform();\n        }\n        return result;\n    };\n    /**\n     * Delete a node from editor content\n     * @param node The node to delete\n     * @returns true if node is deleted. Otherwise false\n     */\n    Editor.prototype.deleteNode = function (node) {\n        // Only remove the node when it falls within editor\n        if (node && this.contains(node)) {\n            node.parentNode.removeChild(node);\n            return true;\n        }\n        return false;\n    };\n    /**\n     * Replace a node in editor content with another node\n     * @param existingNode The existing node to be replaced\n     * @param new node to replace to\n     * @param transformColorForDarkMode (optional) Whether to transform new node to dark mode. Default is false\n     * @returns true if node is replaced. Otherwise false\n     */\n    Editor.prototype.replaceNode = function (existingNode, toNode, transformColorForDarkMode) {\n        // Transform the new node to replace to\n        var darkModeTransform = null;\n        if (transformColorForDarkMode) {\n            var darkModeOptions = this.getDarkModeOptions();\n            darkModeTransform = this.isDarkMode()\n                ? convertContentToDarkMode_1.convertContentToDarkMode(toNode, darkModeOptions && darkModeOptions.onExternalContentTransform\n                    ? darkModeOptions.onExternalContentTransform\n                    : undefined)\n                : null;\n        }\n        // Only replace the node when it falls within editor\n        if (existingNode && toNode && this.contains(existingNode)) {\n            existingNode.parentNode.replaceChild(toNode, existingNode);\n            if (darkModeTransform) {\n                darkModeTransform();\n            }\n            return true;\n        }\n        return false;\n    };\n    /**\n     * Get InlineElement at given node\n     * @param node The node to create InlineElement\n     * @returns The InlineElement result\n     */\n    Editor.prototype.getInlineElementAtNode = function (node) {\n        return roosterjs_editor_dom_1.getInlineElementAtNode(this.core.contentDiv, node);\n    };\n    /**\n     * Get BlockElement at given node\n     * @param node The node to create InlineElement\n     * @returns The BlockElement result\n     */\n    Editor.prototype.getBlockElementAtNode = function (node) {\n        return roosterjs_editor_dom_1.getBlockElementAtNode(this.core.contentDiv, node);\n    };\n    Editor.prototype.contains = function (arg) {\n        return roosterjs_editor_dom_1.contains(this.core.contentDiv, arg);\n    };\n    Editor.prototype.queryElements = function (selector, scopeOrCallback, callback) {\n        if (scopeOrCallback === void 0) { scopeOrCallback = 0 /* Body */; }\n        var scope = scopeOrCallback instanceof Function ? 0 /* Body */ : scopeOrCallback;\n        callback = scopeOrCallback instanceof Function ? scopeOrCallback : callback;\n        var range = scope == 0 /* Body */ ? null : this.getSelectionRange();\n        return roosterjs_editor_dom_1.queryElements(this.core.contentDiv, selector, callback, scope, range);\n    };\n    /**\n     * Collapse nodes within the given start and end nodes to their common ascenstor node,\n     * split parent nodes if necessary\n     * @param start The start node\n     * @param end The end node\n     * @param canSplitParent True to allow split parent node there are nodes before start or after end under the same parent\n     * and the returned nodes will be all nodes from start trhough end after splitting\n     * False to disallow split parent\n     * @returns When cansplitParent is true, returns all node from start through end after splitting,\n     * otherwise just return start and end\n     */\n    Editor.prototype.collapseNodes = function (start, end, canSplitParent) {\n        return roosterjs_editor_dom_1.collapseNodes(this.core.contentDiv, start, end, canSplitParent);\n    };\n    //#endregion\n    //#region Content API\n    /**\n     * Check whether the editor contains any visible content\n     * @param trim Whether trime the content string before check. Default is false\n     * @returns True if there's no visible content, otherwise false\n     */\n    Editor.prototype.isEmpty = function (trim) {\n        return roosterjs_editor_dom_1.isNodeEmpty(this.core.contentDiv, trim);\n    };\n    /**\n     * Get current editor content as HTML string\n     * @param triggerExtractContentEvent Whether trigger ExtractContent event to all plugins\n     * before return. Use this parameter to remove any temporary content added by plugins.\n     * @param includeSelectionMarker Set to true if need include selection marker inside the content.\n     * When restore this content, editor will set the selection to the position marked by these markers.\n     * This parameter will be ignored when triggerExtractContentEvent is set to true\n     * @returns HTML string representing current editor content\n     */\n    Editor.prototype.getContent = function (triggerExtractContentEvent, includeSelectionMarker) {\n        if (triggerExtractContentEvent === void 0) { triggerExtractContentEvent = true; }\n        if (includeSelectionMarker === void 0) { includeSelectionMarker = false; }\n        var content = '';\n        var isDarkMode = this.core.inDarkMode;\n        if (triggerExtractContentEvent || isDarkMode) {\n            var clonedRoot = this.core.contentDiv.cloneNode(true /*deep*/);\n            var path = includeSelectionMarker && this.getSelectionPath();\n            var range = path && roosterjs_editor_dom_1.createRange(clonedRoot, path.start, path.end);\n            if (isDarkMode) {\n                normalizeContentColor_1.default(clonedRoot);\n            }\n            if (triggerExtractContentEvent) {\n                this.triggerPluginEvent(8 /* ExtractContentWithDom */, {\n                    clonedRoot: clonedRoot,\n                }, true /*broadcast*/);\n                // TODO: Deprecated ExtractContentEvent once we have entity API ready in next major release\n                content = this.triggerPluginEvent(7 /* ExtractContent */, { content: clonedRoot.innerHTML }, true /*broadcast*/).content;\n            }\n            else if (range) {\n                // range is not null, which means we want to include a selection path in the content\n                content = roosterjs_editor_dom_1.getHtmlWithSelectionPath(clonedRoot, range);\n            }\n            else {\n                content = clonedRoot.innerHTML;\n            }\n        }\n        else {\n            content = roosterjs_editor_dom_1.getHtmlWithSelectionPath(this.core.contentDiv, includeSelectionMarker && this.getSelectionRange());\n        }\n        return content;\n    };\n    /**\n     * Get plain text content inside editor\n     * @returns The text content inside editor\n     */\n    Editor.prototype.getTextContent = function () {\n        return roosterjs_editor_dom_1.getTextContent(this.core.contentDiv);\n    };\n    /**\n     * Set HTML content to this editor. All existing content will be replaced. A ContentChanged event will be triggered\n     * @param content HTML content to set in\n     * @param triggerContentChangedEvent True to trigger a ContentChanged event. Default value is true\n     */\n    Editor.prototype.setContent = function (content, triggerContentChangedEvent) {\n        if (triggerContentChangedEvent === void 0) { triggerContentChangedEvent = true; }\n        var contentDiv = this.core.contentDiv;\n        var contentChanged = false;\n        if (contentDiv.innerHTML != content) {\n            var range = roosterjs_editor_dom_1.setHtmlWithSelectionPath(contentDiv, content);\n            this.select(range);\n            contentChanged = true;\n        }\n        // Convert content even if it hasn't changed.\n        if (this.core.inDarkMode) {\n            var darkModeOptions = this.getDarkModeOptions();\n            var convertFunction = convertContentToDarkMode_1.convertContentToDarkMode(contentDiv, darkModeOptions && darkModeOptions.onExternalContentTransform\n                ? darkModeOptions.onExternalContentTransform\n                : undefined, true /* skipRootElement */);\n            if (convertFunction) {\n                convertFunction();\n                contentChanged = true;\n            }\n        }\n        if (triggerContentChangedEvent && contentChanged) {\n            this.triggerContentChangedEvent();\n        }\n    };\n    /**\n     * Insert HTML content into editor\n     * @param HTML content to insert\n     * @param option Insert options. Default value is:\n     *  position: ContentPosition.SelectionStart\n     *  updateCursor: true\n     *  replaceSelection: true\n     *  insertOnNewLine: false\n     */\n    Editor.prototype.insertContent = function (content, option) {\n        if (content) {\n            var allNodes = roosterjs_editor_dom_1.fromHtml(content, this.core.document);\n            // If it is to insert on new line, and there are more than one node in the collection, wrap all nodes with\n            // a parent DIV before calling insertNode on each top level sub node. Otherwise, every sub node may get wrapped\n            // separately to show up on its own line\n            if (option && option.insertOnNewLine && allNodes.length > 1) {\n                allNodes = [roosterjs_editor_dom_1.wrap(allNodes)];\n            }\n            var fragment_1 = this.core.document.createDocumentFragment();\n            allNodes.forEach(function (node) { return fragment_1.appendChild(node); });\n            this.insertNode(fragment_1, option);\n        }\n    };\n    /**\n     * Paste into editor using a clipboardData object\n     * @param clipboardData Clipboard data retrieved from clipboard\n     * @param pasteAsText Force pasting as plain text. Default value is false\n     * @param applyCurrentStyle True if apply format of current selection to the pasted content,\n     * false to keep original foramt.  Default value is false. When pasteAsText is true, this parameter is ignored\n     */\n    Editor.prototype.paste = function (clipboardData, pasteAsText, applyCurrentFormat) {\n        var _this = this;\n        var range = this.getSelectionRange();\n        var pos = range && roosterjs_editor_dom_1.Position.getStart(range);\n        if (clipboardData && pos) {\n            if (clipboardData.snapshotBeforePaste) {\n                // Restore original content before paste a new one\n                this.setContent(clipboardData.snapshotBeforePaste);\n            }\n            else {\n                clipboardData.snapshotBeforePaste = this.getContent(false /*triggerExtractContentEvent*/, true /*includeSelectionMarker*/);\n            }\n            var fragment_2 = this.core.api.createPasteFragment(this.core, clipboardData, pos, pasteAsText, applyCurrentFormat);\n            this.addUndoSnapshot(function () {\n                _this.insertNode(fragment_2);\n                return clipboardData;\n            }, \"Paste\" /* Paste */);\n        }\n    };\n    //#endregion\n    //#region Focus and Selection\n    /**\n     * Get current selection range from Editor.\n     * It does a live pull on the selection, if nothing retrieved, return whatever we have in cache.\n     * @returns current selection range, or null if editor never got focus before\n     */\n    Editor.prototype.getSelectionRange = function () {\n        return this.core.api.getSelectionRange(this.core, true /*tryGetFromCache*/);\n    };\n    /**\n     * Get current selection in a serializable format\n     * It does a live pull on the selection, if nothing retrieved, return whatever we have in cache.\n     * @returns current selection path, or null if editor never got focus before\n     */\n    Editor.prototype.getSelectionPath = function () {\n        var range = this.getSelectionRange();\n        return range && roosterjs_editor_dom_1.getSelectionPath(this.core.contentDiv, range);\n    };\n    /**\n     * Check if focus is in editor now\n     * @returns true if focus is in editor, otherwise false\n     */\n    Editor.prototype.hasFocus = function () {\n        return this.core.api.hasFocus(this.core);\n    };\n    /**\n     * Focus to this editor, the selection was restored to where it was before, no unexpected scroll.\n     */\n    Editor.prototype.focus = function () {\n        this.core.api.focus(this.core);\n    };\n    Editor.prototype.select = function (arg1, arg2, arg3, arg4) {\n        var range = !arg1\n            ? null\n            : roosterjs_editor_dom_1.isRange(arg1)\n                ? arg1\n                : Array.isArray(arg1.start) && Array.isArray(arg1.end)\n                    ? roosterjs_editor_dom_1.createRange(this.core.contentDiv, arg1.start, arg1.end)\n                    : roosterjs_editor_dom_1.createRange(arg1, arg2, arg3, arg4);\n        return this.contains(range) && this.core.api.selectRange(this.core, range);\n    };\n    /**\n     * Get current selection\n     * @return current selection object\n     */\n    Editor.prototype.getSelection = function () {\n        return this.core.document.defaultView.getSelection();\n    };\n    /**\n     * Save the current selection in editor so that when focus again, the selection can be restored\n     */\n    Editor.prototype.saveSelectionRange = function () {\n        this.core.cachedSelectionRange = this.core.api.getSelectionRange(this.core, false /*tryGetFromCache*/);\n    };\n    /**\n     * Restore the saved selection range and clear it\n     */\n    Editor.prototype.restoreSavedRange = function () {\n        this.select(this.core.cachedSelectionRange);\n        this.core.cachedSelectionRange = null;\n    };\n    /**\n     * Get current focused position. Return null if editor doesn't have focus at this time.\n     */\n    Editor.prototype.getFocusedPosition = function () {\n        var sel = this.getSelection();\n        if (this.contains(sel && sel.focusNode)) {\n            return new roosterjs_editor_dom_1.Position(sel.focusNode, sel.focusOffset);\n        }\n        var range = this.getSelectionRange();\n        if (range) {\n            return roosterjs_editor_dom_1.Position.getStart(range);\n        }\n        return null;\n    };\n    /**\n     * Get a rect representing the location of the cursor.\n     * @returns a Rect object representing cursor location\n     */\n    Editor.prototype.getCursorRect = function () {\n        var position = this.getFocusedPosition();\n        return position && roosterjs_editor_dom_1.getPositionRect(position);\n    };\n    /**\n     * Get an HTML element from current cursor position.\n     * When expectedTags is not specified, return value is the current node (if it is HTML element)\n     * or its parent node (if current node is a Text node).\n     * When expectedTags is specified, return value is the first anscestor of current node which has\n     * one of the expected tags.\n     * If no element found within editor by the given tag, return null.\n     * @param selector Optional, an HTML selector to find HTML element with.\n     * @param startFrom Start search from this node. If not specified, start from current focused position\n     */\n    Editor.prototype.getElementAtCursor = function (selector, startFrom) {\n        if (!startFrom) {\n            var position = this.getFocusedPosition();\n            startFrom = position && position.node;\n        }\n        return startFrom && roosterjs_editor_dom_1.findClosestElementAncestor(startFrom, this.core.contentDiv, selector);\n    };\n    /**\n     * Check if this position is at beginning of the editor.\n     * This will return true if all nodes between the beginning of target node and the position are empty.\n     * @param position The position to check\n     * @returns True if position is at beginning of the editor, otherwise false\n     */\n    Editor.prototype.isPositionAtBeginning = function (position) {\n        return roosterjs_editor_dom_1.isPositionAtBeginningOf(position, this.core.contentDiv);\n    };\n    /**\n     * Get impacted regions from selection\n     */\n    Editor.prototype.getSelectedRegions = function (type) {\n        if (type === void 0) { type = 0 /* Table */; }\n        // Make sure there is a wrpper around cursor first, otherwise there will be no valid region\n        this.core.corePlugins.typeInContainer.ensureTypeInElement(this.getFocusedPosition() || new roosterjs_editor_dom_1.Position(this.core.contentDiv, 0 /* Begin */));\n        var range = this.getSelectionRange();\n        return range ? roosterjs_editor_dom_1.getRegionsFromRange(this.core.contentDiv, range, type) : [];\n    };\n    Editor.prototype.addDomEventHandler = function (nameOrMap, handler) {\n        var _this = this;\n        if (nameOrMap instanceof Object) {\n            var handlers_1 = Object.keys(nameOrMap)\n                .map(function (eventName) {\n                return nameOrMap[eventName] &&\n                    _this.core.api.attachDomEvent(_this.core, eventName, null /*pluginEventType*/, nameOrMap[eventName]);\n            })\n                .filter(function (x) { return x; });\n            return function () { return handlers_1.forEach(function (handler) { return handler(); }); };\n        }\n        else {\n            return this.core.api.attachDomEvent(this.core, nameOrMap, null /*pluginEventType*/, handler);\n        }\n    };\n    /**\n     * Trigger an event to be dispatched to all plugins\n     * @param eventType Type of the event\n     * @param data data of the event with given type, this is the rest part of PluginEvent with the given type\n     * @param broadcast indicates if the event needs to be dispatched to all plugins\n     * True means to all, false means to allow exclusive handling from one plugin unless no one wants that\n     * @returns the event object which is really passed into plugins. Some plugin may modify the event object so\n     * the result of this function provides a chance to read the modified result\n     */\n    Editor.prototype.triggerPluginEvent = function (eventType, data, broadcast) {\n        var event = __assign({ eventType: eventType }, data);\n        this.core.api.triggerEvent(this.core, event, broadcast);\n        return event;\n    };\n    /**\n     * @deprecated Use triggerPluginEvent instead\n     */\n    Editor.prototype.triggerEvent = function (pluginEvent, broadcast) {\n        if (broadcast === void 0) { broadcast = true; }\n        this.core.api.triggerEvent(this.core, pluginEvent, broadcast);\n    };\n    /**\n     * Trigger a ContentChangedEvent\n     * @param source Source of this event, by default is 'SetContent'\n     * @param data additional data for this event\n     */\n    Editor.prototype.triggerContentChangedEvent = function (source, data) {\n        if (source === void 0) { source = \"SetContent\" /* SetContent */; }\n        this.triggerPluginEvent(6 /* ContentChanged */, {\n            source: source,\n            data: data,\n        });\n    };\n    //#endregion\n    //#region Undo API\n    /**\n     * Undo last edit operation\n     */\n    Editor.prototype.undo = function () {\n        this.focus();\n        this.core.corePlugins.undo.undo();\n    };\n    /**\n     * Redo next edit operation\n     */\n    Editor.prototype.redo = function () {\n        this.focus();\n        this.core.corePlugins.undo.redo();\n    };\n    /**\n     * Add undo snapshot, and execute a format callback function, then add another undo snapshot, then trigger\n     * ContentChangedEvent with given change source.\n     * If this function is called nested, undo snapshot will only be added in the outside one\n     * @param callback The callback function to perform formatting, returns a data object which will be used as\n     * the data field in ContentChangedEvent if changeSource is not null.\n     * @param changeSource The change source to use when fire ContentChangedEvent. When the value is not null,\n     * a ContentChangedEvent will be fired with change source equal to this value\n     */\n    Editor.prototype.addUndoSnapshot = function (callback, changeSource) {\n        this.core.api.editWithUndo(this.core, callback, changeSource);\n    };\n    /**\n     * Perform an auto complete action in the callback, save a snapsnot of content before the action,\n     * and trigger ContentChangedEvent with the change source if specified\n     * @param callback The auto complete callback, return value will be used as data field of ContentChangedEvent\n     * @param changeSource Chagne source of ContentChangedEvent. If not passed, no ContentChangedEvent will be  triggered\n     */\n    Editor.prototype.performAutoComplete = function (callback, changeSource) {\n        this.core.corePlugins.edit.performAutoComplete(callback, changeSource);\n    };\n    /**\n     * Whether there is an available undo snapshot\n     */\n    Editor.prototype.canUndo = function () {\n        return this.core.corePlugins.undo.canUndo();\n    };\n    /**\n     * Whether there is an available redo snapshot\n     */\n    Editor.prototype.canRedo = function () {\n        return this.core.corePlugins.undo.canRedo();\n    };\n    //#endregion\n    //#region Misc\n    /**\n     * Get document which contains this editor\n     * @returns The HTML document which contains this editor\n     */\n    Editor.prototype.getDocument = function () {\n        return this.core.document;\n    };\n    /**\n     * Get the scroll container of the editor\n     */\n    Editor.prototype.getScrollContainer = function () {\n        return this.core.scrollContainer;\n    };\n    /**\n     * Get custom data related to this editor\n     * @param key Key of the custom data\n     * @param getter Getter function. If custom data for the given key doesn't exist,\n     * call this function to get one and store it if it is specified. Otherwise return undefined\n     * @param disposer An optional disposer function to dispose this custom data when\n     * dispose editor.\n     */\n    Editor.prototype.getCustomData = function (key, getter, disposer) {\n        return this.core.api.getCustomData(this.core, key, getter, disposer);\n    };\n    /**\n     * Check if editor is in IME input sequence\n     * @returns True if editor is in IME input sequence, otherwise false\n     */\n    Editor.prototype.isInIME = function () {\n        return this.core.corePlugins.domEvent.isInIME();\n    };\n    /**\n     * Get default format of this editor\n     * @returns Default format object of this editor\n     */\n    Editor.prototype.getDefaultFormat = function () {\n        return this.core.defaultFormat;\n    };\n    /**\n     * Get a content traverser for the whole editor\n     * @param startNode The node to start from. If not passed, it will start from the beginning of the body\n     */\n    Editor.prototype.getBodyTraverser = function (startNode) {\n        return roosterjs_editor_dom_1.ContentTraverser.createBodyTraverser(this.core.contentDiv, startNode);\n    };\n    /**\n     * Get a content traverser for current selection\n     */\n    Editor.prototype.getSelectionTraverser = function () {\n        var range = this.getSelectionRange();\n        return (range &&\n            roosterjs_editor_dom_1.ContentTraverser.createSelectionTraverser(this.core.contentDiv, this.getSelectionRange()));\n    };\n    /**\n     * Get a content traverser for current block element start from specified position\n     * @param startFrom Start position of the traverser. Default value is ContentPosition.SelectionStart\n     */\n    Editor.prototype.getBlockTraverser = function (startFrom) {\n        if (startFrom === void 0) { startFrom = 3 /* SelectionStart */; }\n        var range = this.getSelectionRange();\n        return (range && roosterjs_editor_dom_1.ContentTraverser.createBlockTraverser(this.core.contentDiv, range, startFrom));\n    };\n    /**\n     * Get a text traverser of current selection\n     */\n    Editor.prototype.getContentSearcherOfCursor = function () {\n        var range = this.getSelectionRange();\n        return range && new roosterjs_editor_dom_1.PositionContentSearcher(this.core.contentDiv, roosterjs_editor_dom_1.Position.getStart(range));\n    };\n    /**\n     * Run a callback function asynchronously\n     * @param callback The callback function to run\n     */\n    Editor.prototype.runAsync = function (callback) {\n        var _this = this;\n        var win = this.core.contentDiv.ownerDocument.defaultView || window;\n        win.requestAnimationFrame(function () {\n            if (!_this.isDisposed() && callback) {\n                callback();\n            }\n        });\n    };\n    /**\n     * Set DOM attribute of editor content DIV\n     * @param name Name of the attribute\n     * @param value Value of the attribute\n     */\n    Editor.prototype.setEditorDomAttribute = function (name, value) {\n        if (value === null) {\n            this.core.contentDiv.removeAttribute(name);\n        }\n        else {\n            this.core.contentDiv.setAttribute(name, value);\n        }\n    };\n    /**\n     * get DOM attribute of editor content DIV\n     * @param name Name of the attribute\n     */\n    Editor.prototype.getEditorDomAttribute = function (name) {\n        return this.core.contentDiv.getAttribute(name);\n    };\n    /**\n     * Add a Content Edit feature. This is mostly called from ContentEdit plugin\n     * @param feature The feature to add\n     */\n    Editor.prototype.addContentEditFeature = function (feature) {\n        this.core.corePlugins.edit.addFeature(feature);\n    };\n    /**\n     * Get style based format state from current selection, including font name/size and colors\n     */\n    Editor.prototype.getStyleBasedFormatState = function (node) {\n        if (!node) {\n            var range = this.getSelectionRange();\n            node = range && roosterjs_editor_dom_1.Position.getStart(range).normalize().node;\n        }\n        return this.core.api.getStyleBasedFormatState(this.core, node);\n    };\n    //#endregion\n    //#region Dark mode APIs\n    /**\n     * Set the dark mode state and transforms the content to match the new state.\n     * @param nextDarkMode The next status of dark mode. True if the editor should be in dark mode, false if not.\n     */\n    Editor.prototype.setDarkModeState = function (nextDarkMode) {\n        if (this.isDarkMode() == nextDarkMode) {\n            return;\n        }\n        var currentContent = this.getContent(undefined /* triggerContentChangedEvent */, true /* getSelectionMarker */);\n        this.core.inDarkMode = nextDarkMode;\n        this.core.defaultFormat = calculateDefaultFormat_1.calculateDefaultFormat(this.core.contentDiv, this.core.defaultFormat, this.core.inDarkMode);\n        this.setContent(currentContent);\n        this.triggerPluginEvent(14 /* DarkModeChanged */, {\n            changedToDarkMode: nextDarkMode,\n        });\n    };\n    /**\n     * Check if the editor is in dark mode\n     * @returns True if the editor is in dark mode, otherwise false\n     */\n    Editor.prototype.isDarkMode = function () {\n        return this.core.inDarkMode;\n    };\n    /**\n     * Returns the dark mode options set on the editor\n     * @returns A DarkModeOptions object\n     */\n    Editor.prototype.getDarkModeOptions = function () {\n        return this.core.darkModeOptions;\n    };\n    /**\n     * Whether experiment features can be used\n     */\n    Editor.prototype.useExperimentFeatures = function () {\n        return !!this.enableExperimentFeatures;\n    };\n    return Editor;\n}());\nexports.default = Editor;\n//# sourceMappingURL=Editor.js.map","\"use strict\";\nvar _a, _b;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar roosterjs_editor_dom_1 = require(\"roosterjs-editor-dom\");\nvar COMMANDS = roosterjs_editor_dom_1.Browser.isFirefox\n    ? (_a = {},\n        /**\n         * Disable these object resizing for firefox since other browsers don't have these behaviors\n         */\n        _a[\"enableObjectResizing\" /* EnableObjectResizing */] = false,\n        _a[\"enableInlineTableEditing\" /* EnableInlineTableEditing */] = false,\n        _a) : roosterjs_editor_dom_1.Browser.isIE\n    ? (_b = {},\n        /**\n         * Change the default paragraph separater to DIV. This is mainly for IE since its default setting is P\n         */\n        _b[\"defaultParagraphSeparator\" /* DefaultParagraphSeparator */] = 'div',\n        /**\n         * Disable auto link feature in IE since we have our own implementation\n         */\n        _b[\"AutoUrlDetect\" /* AutoUrlDetect */] = false,\n        _b) : {};\n/**\n * Execute document command to adjust browser default behavior\n */\nfunction adjustBrowserBehavior(document) {\n    Object.keys(COMMANDS).forEach(function (command) {\n        // Catch any possible exception since this should not block the initialization of editor\n        try {\n            document.execCommand(command, false, COMMANDS[command]);\n        }\n        catch (_a) { }\n    });\n}\nexports.default = adjustBrowserBehavior;\n//# sourceMappingURL=adjustBrowserBehavior.js.map","\"use strict\";\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n            r[k] = a[j];\n    return r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar CopyPlugin_1 = require(\"../corePlugins/CopyPlugin\");\nvar CorePastePlugin_1 = require(\"../corePlugins/CorePastePlugin\");\nvar DOMEventPlugin_1 = require(\"../corePlugins/DOMEventPlugin\");\nvar EditPlugin_1 = require(\"../corePlugins/EditPlugin\");\nvar FirefoxTypeAfterLink_1 = require(\"../corePlugins/FirefoxTypeAfterLink\");\nvar MouseUpPlugin_1 = require(\"../corePlugins/MouseUpPlugin\");\nvar TypeInContainerPlugin_1 = require(\"../corePlugins/TypeInContainerPlugin\");\nvar Undo_1 = require(\"../undo/Undo\");\nvar attachDomEvent_1 = require(\"../coreAPI/attachDomEvent\");\nvar roosterjs_editor_dom_1 = require(\"roosterjs-editor-dom\");\nvar calculateDefaultFormat_1 = require(\"../coreAPI/calculateDefaultFormat\");\nvar createPasteFragment_1 = require(\"../coreAPI/createPasteFragment\");\nvar editWithUndo_1 = require(\"../coreAPI/editWithUndo\");\nvar focus_1 = require(\"../coreAPI/focus\");\nvar getCustomData_1 = require(\"../coreAPI/getCustomData\");\nvar getSelectionRange_1 = require(\"../coreAPI/getSelectionRange\");\nvar getStyleBasedFormatState_1 = require(\"../coreAPI/getStyleBasedFormatState\");\nvar hasFocus_1 = require(\"../coreAPI/hasFocus\");\nvar insertNode_1 = require(\"../coreAPI/insertNode\");\nvar selectRange_1 = require(\"../coreAPI/selectRange\");\nvar triggerEvent_1 = require(\"../coreAPI/triggerEvent\");\n/**\n * Create core object for editor\n * @param contentDiv The DIV element used for editor\n * @param options Options to create an editor\n */\nfunction createEditorCore(contentDiv, options) {\n    var corePlugins = {\n        undo: options.undo || new Undo_1.default(),\n        edit: new EditPlugin_1.default(),\n        typeInContainer: new TypeInContainerPlugin_1.default(),\n        mouseUp: new MouseUpPlugin_1.default(),\n        domEvent: new DOMEventPlugin_1.default(options.disableRestoreSelectionOnFocus),\n        firefoxTypeAfterLink: new FirefoxTypeAfterLink_1.default(),\n        copyPlugin: !roosterjs_editor_dom_1.Browser.isIE && new CopyPlugin_1.default(),\n        pastePlugin: new CorePastePlugin_1.default(),\n    };\n    var allPlugins = buildPluginList(corePlugins, options.plugins);\n    var eventHandlerPlugins = allPlugins.filter(function (plugin) { return plugin.onPluginEvent || plugin.willHandleEventExclusively; });\n    return {\n        contentDiv: contentDiv,\n        scrollContainer: options.scrollContainer || contentDiv,\n        document: contentDiv.ownerDocument,\n        defaultFormat: calculateDefaultFormat_1.calculateDefaultFormat(contentDiv, options.defaultFormat, options.inDarkMode),\n        corePlugins: corePlugins,\n        currentUndoSnapshot: null,\n        customData: createCustomData(options.customData || {}),\n        cachedSelectionRange: null,\n        plugins: allPlugins,\n        eventHandlerPlugins: eventHandlerPlugins,\n        api: createCoreApiMap(options.coreApiOverride),\n        defaultApi: createCoreApiMap(),\n        inDarkMode: options.inDarkMode,\n        darkModeOptions: options.darkModeOptions,\n    };\n}\nexports.default = createEditorCore;\nfunction buildPluginList(corePlugins, plugins) {\n    return __spreadArrays([\n        corePlugins.typeInContainer,\n        corePlugins.edit,\n        corePlugins.mouseUp\n    ], (plugins || []), [\n        corePlugins.firefoxTypeAfterLink,\n        corePlugins.undo,\n        corePlugins.domEvent,\n        corePlugins.copyPlugin,\n        corePlugins.pastePlugin,\n    ]).filter(function (plugin) { return !!plugin; });\n}\nfunction createCoreApiMap(map) {\n    map = map || {};\n    return {\n        attachDomEvent: map.attachDomEvent || attachDomEvent_1.attachDomEvent,\n        editWithUndo: map.editWithUndo || editWithUndo_1.editWithUndo,\n        focus: map.focus || focus_1.focus,\n        getCustomData: map.getCustomData || getCustomData_1.getCustomData,\n        getSelectionRange: map.getSelectionRange || getSelectionRange_1.getSelectionRange,\n        getStyleBasedFormatState: map.getStyleBasedFormatState || getStyleBasedFormatState_1.getStyleBasedFormatState,\n        hasFocus: map.hasFocus || hasFocus_1.hasFocus,\n        insertNode: map.insertNode || insertNode_1.insertNode,\n        createPasteFragment: map.createPasteFragment || createPasteFragment_1.createPasteFragment,\n        select: map.select || selectRange_1.select,\n        selectRange: map.selectRange || selectRange_1.selectRange,\n        triggerEvent: map.triggerEvent || triggerEvent_1.triggerEvent,\n    };\n}\nfunction createCustomData(initValue) {\n    return Object.keys(initValue).reduce(function (result, key) {\n        result[key] = {\n            value: initValue[key],\n        };\n        return result;\n    }, {});\n}\n//# sourceMappingURL=createEditorCore.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar roosterjs_editor_dom_1 = require(\"roosterjs-editor-dom\");\n// Max stack size that cannot be exceeded. When exceeded, old undo history will be dropped\n// to keep size under limit. This is kept at 10MB\nvar MAXSIZELIMIT = 1e7;\n/**\n * A class to help manage undo snapshots\n */\nvar UndoSnapshots = /** @class */ (function () {\n    function UndoSnapshots(maxSize) {\n        if (maxSize === void 0) { maxSize = MAXSIZELIMIT; }\n        this.maxSize = maxSize;\n        this.snapshots = roosterjs_editor_dom_1.createSnapshots(maxSize);\n    }\n    /**\n     * Check whether can move current undo snapshot with the given step\n     * @param step The step to check, can be positive, negative or 0\n     * @returns True if can move current snapshot with the given step, otherwise false\n     */\n    UndoSnapshots.prototype.canMove = function (delta) {\n        return roosterjs_editor_dom_1.canMoveCurrentSnapshot(this.snapshots, delta);\n    };\n    /**\n     * Move current snapshot with the given step if can move this step. Otherwise no action and return null\n     * @param step The step to move\n     * @returns If can move with the given step, returns the snapshot after move, otherwise null\n     */\n    UndoSnapshots.prototype.move = function (delta) {\n        return roosterjs_editor_dom_1.moveCurrentSnapsnot(this.snapshots, delta);\n    };\n    /**\n     * Add a new undo snapshot\n     * @param snapshot The snapshot to add\n     */\n    UndoSnapshots.prototype.addSnapshot = function (snapshot) {\n        roosterjs_editor_dom_1.addSnapshot(this.snapshots, snapshot);\n    };\n    /**\n     * Clear all undo snapshots after the current one\n     */\n    UndoSnapshots.prototype.clearRedo = function () {\n        roosterjs_editor_dom_1.clearProceedingSnapshots(this.snapshots);\n    };\n    return UndoSnapshots;\n}());\nexports.default = UndoSnapshots;\n//# sourceMappingURL=UndoSnapshots.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar isCharacterValue_1 = require(\"../eventApi/isCharacterValue\");\n/**\n * Attach a DOM event to the editor content DIV\n * @param core The EditorCore object\n * @param eventName The DOM event name\n * @param pluginEventType Optional event type. When specified, editor will trigger a plugin event with this name when the DOM event is triggered\n * @param beforeDispatch Optional callback function to be invoked when the DOM event is triggered before trigger plugin event\n */\nexports.attachDomEvent = function (core, eventName, pluginEventType, beforeDispatch) {\n    var onEvent = function (event) {\n        // Stop propagation of a printable keyboard event (a keyboard event which is caused by printable char input).\n        // This detection is not 100% accurate. event.key is not fully supported by all browsers, and in some browsers (e.g. IE),\n        // event.key is longer than 1 for num pad input. But here we just want to improve performance as much as possible.\n        // So if we missed some case here it is still acceptable.\n        if ((isKeyboardEvent(event) && isCharacterValue_1.default(event)) ||\n            pluginEventType == 12 /* Input */) {\n            event.stopPropagation();\n        }\n        if (beforeDispatch) {\n            beforeDispatch(event);\n        }\n        if (pluginEventType != null) {\n            core.api.triggerEvent(core, {\n                eventType: pluginEventType,\n                rawEvent: event,\n            }, false /*broadcast*/);\n        }\n    };\n    core.contentDiv.addEventListener(eventName, onEvent);\n    return function () {\n        core.contentDiv.removeEventListener(eventName, onEvent);\n    };\n};\nfunction isKeyboardEvent(e) {\n    return e.type == 'keydown' || e.type == 'keypress' || e.type == 'keyup';\n}\n//# sourceMappingURL=attachDomEvent.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar roosterjs_editor_dom_1 = require(\"roosterjs-editor-dom\");\nvar START_FRAGMENT = '<!--StartFragment-->';\nvar END_FRAGMENT = '<!--EndFragment-->';\nvar NBSP_HTML = '\\u00A0';\nexports.createPasteFragment = function (core, clipboardData, position, pasteAsText, applyCurrentStyle) {\n    var _a, _b;\n    // Step 1: Prepare BeforePasteEvent object\n    var event = createBeforePasteEvent(core, clipboardData, pasteAsText);\n    var fragment = event.fragment, pasteOption = event.pasteOption, sanitizingOption = event.sanitizingOption;\n    var rawHtml = clipboardData.rawHtml, text = clipboardData.text, imageDataUri = clipboardData.imageDataUri;\n    var doc;\n    // Step 2: Fill the BeforePasteEvent object, especially the fragment for paste\n    if (pasteOption == 2 /* PasteImage */ && imageDataUri) {\n        var img = core.document.createElement('img');\n        img.style.maxWidth = '100%';\n        img.src = imageDataUri;\n        fragment.appendChild(img);\n    }\n    else if (pasteOption == 0 /* PasteHtml */ &&\n        rawHtml && ((_a = (doc = new DOMParser().parseFromString(rawHtml, 'text/html'))) === null || _a === void 0 ? void 0 : _a.body)) {\n        // Save HTML node attributes and META attributes so that plugin can query\n        var attributes = (_b = doc.querySelector('html')) === null || _b === void 0 ? void 0 : _b.attributes;\n        (attributes ? roosterjs_editor_dom_1.toArray(attributes) : []).reduce(function (attrs, attr) {\n            attrs[attr.name] = attr.value;\n            return attrs;\n        }, event.htmlAttributes);\n        roosterjs_editor_dom_1.toArray(doc.querySelectorAll('meta')).reduce(function (attrs, meta) {\n            attrs[meta.name] = meta.content;\n            return attrs;\n        }, event.htmlAttributes);\n        // Move all STYLE nodes into header, and save them into sanitizing options.\n        // Because if we directly move them into a fragment, all sheets under STYLE will be lost.\n        processStyles(doc, function (style) {\n            doc.head.appendChild(style);\n            sanitizingOption.additionalGlobalStyleNodes.push(style);\n        });\n        var startIndex = rawHtml.indexOf(START_FRAGMENT);\n        var endIndex = rawHtml.lastIndexOf(END_FRAGMENT);\n        if (startIndex >= 0 && endIndex >= startIndex + START_FRAGMENT.length) {\n            event.htmlBefore = rawHtml.substr(0, startIndex);\n            event.htmlAfter = rawHtml.substr(endIndex + END_FRAGMENT.length);\n            doc.body.innerHTML = clipboardData.html = rawHtml.substring(startIndex + START_FRAGMENT.length, endIndex);\n            // Remove style nodes just added by setting innerHTML of body since we already have all\n            // style nodes in header.\n            // Here we use doc.body instead of doc because we only want to remove STYLE nodes under BODY\n            // and the nodes under HEAD are still used when convert global CSS to inline\n            processStyles(doc.body, function (style) { var _a; return (_a = style.parentNode) === null || _a === void 0 ? void 0 : _a.removeChild(style); });\n        }\n        while (doc.body.firstChild) {\n            fragment.appendChild(doc.body.firstChild);\n        }\n        if (applyCurrentStyle && position) {\n            var format_1 = getCurrentFormat(core, position.node);\n            roosterjs_editor_dom_1.applyTextStyle(fragment, function (node) { return roosterjs_editor_dom_1.applyFormat(node, format_1); });\n        }\n    }\n    else if (text) {\n        text.split('\\n').forEach(function (line, index, lines) {\n            line = line\n                .replace(/^ /g, NBSP_HTML)\n                .replace(/\\r/g, '')\n                .replace(/ {2}/g, ' ' + NBSP_HTML);\n            var node = line == '' ? document.createElement('br') : document.createTextNode(line);\n            fragment.appendChild(index == 0 || index == lines.length - 1 ? node : roosterjs_editor_dom_1.wrap(node));\n        });\n    }\n    // Step 3: Trigger BeforePasteEvent so that plugins can do proper change before paste\n    core.api.triggerEvent(core, event, true /*broadcast*/);\n    // Step 4. Sanitize the fragment before paste to make sure the content is safe\n    var sanitizer = new roosterjs_editor_dom_1.HtmlSanitizer(event.sanitizingOption);\n    sanitizer.convertGlobalCssToInlineCss(fragment);\n    sanitizer.sanitize(fragment, position && roosterjs_editor_dom_1.getInheritableStyles(position.element));\n    return fragment;\n};\nfunction getCurrentFormat(core, node) {\n    var pendableFormat = roosterjs_editor_dom_1.getPendableFormatState(core.document);\n    var styleBasedForamt = core.api.getStyleBasedFormatState(core, node);\n    return {\n        fontFamily: styleBasedForamt.fontName,\n        fontSize: styleBasedForamt.fontSize,\n        textColor: styleBasedForamt.textColor,\n        backgroundColor: styleBasedForamt.backgroundColor,\n        textColors: styleBasedForamt.textColors,\n        backgroundColors: styleBasedForamt.backgroundColors,\n        bold: pendableFormat.isBold,\n        italic: pendableFormat.isItalic,\n        underline: pendableFormat.isUnderline,\n    };\n}\nfunction createBeforePasteEvent(core, clipboardData, pasteAsText) {\n    var pasteOption = pasteAsText\n        ? 1 /* PasteText */\n        : clipboardData.text || !clipboardData.image\n            ? 0 /* PasteHtml */\n            : 2 /* PasteImage */;\n    var fragment = core.document.createDocumentFragment();\n    return {\n        eventType: 9 /* BeforePaste */,\n        clipboardData: clipboardData,\n        pasteOption: pasteOption,\n        fragment: fragment,\n        sanitizingOption: roosterjs_editor_dom_1.createDefaultHtmlSanitizerOptions(),\n        htmlBefore: '',\n        htmlAfter: '',\n        htmlAttributes: {},\n    };\n}\nfunction processStyles(node, callback) {\n    var styles = node.querySelectorAll('style');\n    for (var i = 0; i < styles.length; i++) {\n        callback(styles[i]);\n    }\n}\n//# sourceMappingURL=createPasteFragment.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar roosterjs_editor_dom_1 = require(\"roosterjs-editor-dom\");\n/**\n * Call an editing callback with adding undo snapshots around, and trigger a ContentChanged event if change source is specified.\n * Undo snapshot will not be added if this call is nested inside another editWithUndo() call.\n * @param core The EditorCore object\n * @param callback The editing callback, accepting current selection start and end position, returns an optional object used as the data field of ContentChangedEvent.\n * @param changeSource The ChangeSource string of ContentChangedEvent. @default ChangeSource.Format. Set to null to avoid triggering ContentChangedEvent\n */\nexports.editWithUndo = function (core, callback, changeSource) {\n    var isNested = core.currentUndoSnapshot !== null;\n    var data;\n    if (!isNested) {\n        core.currentUndoSnapshot = core.corePlugins.undo.addUndoSnapshot();\n    }\n    try {\n        if (callback) {\n            var range = core.api.getSelectionRange(core, true /*tryGetFromCache*/);\n            data = callback(range && roosterjs_editor_dom_1.Position.getStart(range).normalize(), range && roosterjs_editor_dom_1.Position.getEnd(range).normalize(), core.currentUndoSnapshot);\n            if (!isNested) {\n                core.corePlugins.undo.addUndoSnapshot();\n            }\n        }\n    }\n    finally {\n        if (!isNested) {\n            core.currentUndoSnapshot = null;\n        }\n    }\n    if (callback && changeSource) {\n        var event_1 = {\n            eventType: 6 /* ContentChanged */,\n            source: changeSource,\n            data: data,\n        };\n        core.api.triggerEvent(core, event_1, true /*broadcast*/);\n    }\n};\n//# sourceMappingURL=editWithUndo.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar roosterjs_editor_dom_1 = require(\"roosterjs-editor-dom\");\n/**\n * Focus to editor. If there is a cached selection range, use it as current selection\n * @param core The EditorCore object\n */\nexports.focus = function (core) {\n    if (!core.api.hasFocus(core) || !core.api.getSelectionRange(core, false /*tryGetFromCache*/)) {\n        // Focus (document.activeElement indicates) and selection are mostly in sync, but could be out of sync in some extreme cases.\n        // i.e. if you programmatically change window selection to point to a non-focusable DOM element (i.e. tabindex=-1 etc.).\n        // On Chrome/Firefox, it does not change document.activeElement. On Edge/IE, it change document.activeElement to be body\n        // Although on Chrome/Firefox, document.activeElement points to editor, you cannot really type which we don't want (no cursor).\n        // So here we always do a live selection pull on DOM and make it point in Editor. The pitfall is, the cursor could be reset\n        // to very begin to of editor since we don't really have last saved selection (created on blur which does not fire in this case).\n        // It should be better than the case you cannot type\n        if (!core.cachedSelectionRange ||\n            !core.api.selectRange(core, core.cachedSelectionRange, true /*skipSameRange*/)) {\n            var node = roosterjs_editor_dom_1.getFirstLeafNode(core.contentDiv) || core.contentDiv;\n            core.api.selectRange(core, roosterjs_editor_dom_1.createRange(node, 0 /* Begin */), true /*skipSameRange*/);\n        }\n    }\n    // remember to clear cachedSelectionRange\n    core.cachedSelectionRange = null;\n    // This is more a fallback to ensure editor gets focus if it didn't manage to move focus to editor\n    if (!core.api.hasFocus(core)) {\n        core.contentDiv.focus();\n    }\n};\n//# sourceMappingURL=focus.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Get custom data related with this editor\n * @param core The EditorCore object\n * @param key Key of the custom data\n * @param getter Getter function. If custom data for the given key doesn't exist,\n * call this function to get one and store it if it is specified. Otherwise return undefined\n * @param disposer An optional disposer function to dispose this custom data when\n * dispose editor.\n */\nexports.getCustomData = function (core, key, getter, disposer) {\n    return (core.customData[key] = core.customData[key] || {\n        value: getter ? getter() : undefined,\n        disposer: disposer,\n    }).value;\n};\n//# sourceMappingURL=getCustomData.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar roosterjs_editor_dom_1 = require(\"roosterjs-editor-dom\");\n/**\n * Get current or cached selection range\n * @param core The EditorCore object\n * @param tryGetFromCache Set to true to retrieve the selection range from cache if editor doesn't own the focus now\n * @returns A Range object of the selection range\n */\nexports.getSelectionRange = function (core, tryGetFromCache) {\n    var result = null;\n    if (!tryGetFromCache || core.api.hasFocus(core)) {\n        var selection = core.document.defaultView.getSelection();\n        if (selection && selection.rangeCount > 0) {\n            var range = selection.getRangeAt(0);\n            if (roosterjs_editor_dom_1.contains(core.contentDiv, range)) {\n                result = range;\n            }\n        }\n    }\n    if (!result && tryGetFromCache) {\n        result = core.cachedSelectionRange;\n    }\n    return result;\n};\n//# sourceMappingURL=getSelectionRange.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar roosterjs_editor_dom_1 = require(\"roosterjs-editor-dom\");\nvar ORIGINAL_STYLE_COLOR_SELECTOR = '[data-ogsc],[data-ogac]';\nvar ORIGINAL_STYLE_BACK_COLOR_SELECTOR = '[data-ogsb],[data-ogab]';\n/**\n * Get style based format state from current selection, including font name/size and colors\n * @param core The EditorCore objects\n * @param node The node to get style from\n */\nexports.getStyleBasedFormatState = function (core, node) {\n    if (!node) {\n        return {};\n    }\n    var styles = node ? roosterjs_editor_dom_1.getComputedStyles(node) : [];\n    var isDarkMode = core.inDarkMode;\n    var root = core.contentDiv;\n    var ogTextColorNode = isDarkMode && roosterjs_editor_dom_1.findClosestElementAncestor(node, root, ORIGINAL_STYLE_COLOR_SELECTOR);\n    var ogBackgroundColorNode = isDarkMode && roosterjs_editor_dom_1.findClosestElementAncestor(node, root, ORIGINAL_STYLE_BACK_COLOR_SELECTOR);\n    return {\n        fontName: styles[0],\n        fontSize: styles[1],\n        textColor: styles[2],\n        backgroundColor: styles[3],\n        textColors: ogTextColorNode\n            ? {\n                darkModeColor: styles[2],\n                lightModeColor: ogTextColorNode.dataset.ogsc || ogTextColorNode.dataset.ogac,\n            }\n            : undefined,\n        backgroundColors: ogBackgroundColorNode\n            ? {\n                darkModeColor: styles[3],\n                lightModeColor: ogBackgroundColorNode.dataset.ogsb || ogBackgroundColorNode.dataset.ogab,\n            }\n            : undefined,\n    };\n};\n//# sourceMappingURL=getStyleBasedFormatState.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar roosterjs_editor_dom_1 = require(\"roosterjs-editor-dom\");\nfunction getInitialRange(core, option) {\n    // Selection start replaces based on the current selection.\n    // Range inserts based on a provided range.\n    // Both have the potential to use the current selection to restore cursor position\n    // So in both cases we need to store the selection state.\n    var range = core.api.getSelectionRange(core, true /*tryGetFromCache*/);\n    var rangeToRestore = null;\n    if (option.position == 5 /* Range */) {\n        rangeToRestore = range;\n        range = option.range;\n    }\n    else if (range) {\n        rangeToRestore = range.cloneRange();\n    }\n    return { range: range, rangeToRestore: rangeToRestore };\n}\n/**\n * Insert a DOM node into editor content\n * @param core The EditorCore object. No op if null.\n * @param option An insert option object to specify how to insert the node\n */\nexports.insertNode = function (core, node, option) {\n    option = option || {\n        position: 3 /* SelectionStart */,\n        insertOnNewLine: false,\n        updateCursor: true,\n        replaceSelection: true,\n    };\n    var contentDiv = core.contentDiv;\n    if (option.updateCursor) {\n        core.api.focus(core);\n    }\n    switch (option.position) {\n        case 0 /* Begin */:\n        case 1 /* End */: {\n            var isBegin = option.position == 0 /* Begin */;\n            var block = roosterjs_editor_dom_1.getFirstLastBlockElement(contentDiv, isBegin);\n            var insertedNode_1;\n            if (block) {\n                var refNode = isBegin ? block.getStartNode() : block.getEndNode();\n                if (option.insertOnNewLine ||\n                    refNode.nodeType == 3 /* Text */ ||\n                    roosterjs_editor_dom_1.isVoidHtmlElement(refNode)) {\n                    // For insert on new line, or refNode is text or void html element (HR, BR etc.)\n                    // which cannot have children, i.e. <div>hello<br>world</div>. 'hello', 'world' are the\n                    // first and last node. Insert before 'hello' or after 'world', but still inside DIV\n                    if (roosterjs_editor_dom_1.safeInstanceOf(node, 'DocumentFragment')) {\n                        // if the node to be inserted is DocumentFragment, use its childNodes as insertedNode\n                        // because insertBefore() returns an empty DocumentFragment\n                        insertedNode_1 = roosterjs_editor_dom_1.toArray(node.childNodes);\n                        refNode.parentNode.insertBefore(node, isBegin ? refNode : refNode.nextSibling);\n                    }\n                    else {\n                        insertedNode_1 = refNode.parentNode.insertBefore(node, isBegin ? refNode : refNode.nextSibling);\n                    }\n                }\n                else {\n                    // if the refNode can have child, use appendChild (which is like to insert as first/last child)\n                    // i.e. <div>hello</div>, the content will be inserted before/after hello\n                    insertedNode_1 = refNode.insertBefore(node, isBegin ? refNode.firstChild : null);\n                }\n            }\n            else {\n                // No first block, this can happen when editor is empty. Use appendChild to insert the content in contentDiv\n                insertedNode_1 = contentDiv.appendChild(node);\n            }\n            // Final check to see if the inserted node is a block. If not block and the ask is to insert on new line,\n            // add a DIV wrapping\n            if (insertedNode_1 && option.insertOnNewLine) {\n                var nodes = Array.isArray(insertedNode_1) ? insertedNode_1 : [insertedNode_1];\n                if (!roosterjs_editor_dom_1.isBlockElement(nodes[0]) || !roosterjs_editor_dom_1.isBlockElement(nodes[nodes.length - 1])) {\n                    roosterjs_editor_dom_1.wrap(nodes);\n                }\n            }\n            break;\n        }\n        case 2 /* DomEnd */:\n            // Use appendChild to insert the node at the end of the content div.\n            var insertedNode = contentDiv.appendChild(node);\n            // Final check to see if the inserted node is a block. If not block and the ask is to insert on new line,\n            // add a DIV wrapping\n            if (insertedNode && option.insertOnNewLine && !roosterjs_editor_dom_1.isBlockElement(insertedNode)) {\n                roosterjs_editor_dom_1.wrap(insertedNode);\n            }\n            break;\n        case 5 /* Range */:\n        case 3 /* SelectionStart */:\n            var _a = getInitialRange(core, option), range = _a.range, rangeToRestore = _a.rangeToRestore;\n            if (!range) {\n                return;\n            }\n            // if to replace the selection and the selection is not collapsed, remove the the content at selection first\n            if (option.replaceSelection && !range.collapsed) {\n                range.deleteContents();\n            }\n            var pos = roosterjs_editor_dom_1.Position.getStart(range);\n            var blockElement = void 0;\n            if (option.insertOnNewLine &&\n                (blockElement = roosterjs_editor_dom_1.getBlockElementAtNode(contentDiv, pos.normalize().node))) {\n                pos = new roosterjs_editor_dom_1.Position(blockElement.getEndNode(), -3 /* After */);\n            }\n            else {\n                pos = roosterjs_editor_dom_1.adjustNodeInsertPosition(contentDiv, node, pos);\n            }\n            var nodeForCursor = node.nodeType == 11 /* DocumentFragment */ ? node.lastChild : node;\n            range = roosterjs_editor_dom_1.createRange(pos);\n            range.insertNode(node);\n            if (option.updateCursor && nodeForCursor) {\n                rangeToRestore = roosterjs_editor_dom_1.createRange(new roosterjs_editor_dom_1.Position(nodeForCursor, -3 /* After */).normalize());\n            }\n            core.api.selectRange(core, rangeToRestore);\n            break;\n        case 4 /* Outside */:\n            core.contentDiv.parentNode.insertBefore(node, contentDiv.nextSibling);\n            break;\n    }\n    return true;\n};\n//# sourceMappingURL=insertNode.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar roosterjs_editor_dom_1 = require(\"roosterjs-editor-dom\");\nvar hasFocus_1 = require(\"./hasFocus\");\n/**\n * Change the editor selection to the given range\n * @param core The EditorCore object\n * @param range The range to select\n * @param skipSameRange When set to true, do nothing if the given range is the same with current selection\n * in editor, otherwise it will always remove current selection ranage and set to the given one.\n * This parameter is always treat as true in Edge to avoid some weird runtime exception.\n */\nexports.selectRange = function (core, range, skipSameRange) {\n    var selection;\n    var needAddRange = true;\n    if (!roosterjs_editor_dom_1.contains(core.contentDiv, range) ||\n        !(selection = core.document.defaultView.getSelection())) {\n        return false;\n    }\n    if (selection.rangeCount > 0) {\n        // Workaround IE exception 800a025e\n        try {\n            var currentRange = void 0;\n            // Do not remove/add range if current selection is the same with target range\n            // Without this check, execCommand() may fail in Edge since we changed the selection\n            if ((skipSameRange || roosterjs_editor_dom_1.Browser.isEdge) &&\n                (currentRange = selection.rangeCount == 1 ? selection.getRangeAt(0) : null) &&\n                currentRange.startContainer == range.startContainer &&\n                currentRange.startOffset == range.startOffset &&\n                currentRange.endContainer == range.endContainer &&\n                currentRange.endOffset == range.endOffset) {\n                needAddRange = false;\n            }\n            else {\n                selection.removeAllRanges();\n            }\n        }\n        catch (e) { }\n    }\n    if (needAddRange) {\n        selection.addRange(range);\n    }\n    if (!hasFocus_1.hasFocus(core)) {\n        core.cachedSelectionRange = range;\n    }\n    if (range.collapsed) {\n        // If selected, and current selection is collapsed,\n        // need to restore pending format state if exists.\n        core.corePlugins.domEvent.restorePendingFormatState();\n    }\n    return true;\n};\n/**\n * @deprecated Only for compatibility with existing code, don't use ths function, use selectRange instead\n */\nexports.select = function (core, arg1, arg2, arg3, arg4) {\n    var range = roosterjs_editor_dom_1.isRange(arg1) ? arg1 : roosterjs_editor_dom_1.createRange(arg1, arg2, arg3, arg4);\n    return core.api.selectRange(core, range);\n};\n//# sourceMappingURL=selectRange.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Trigger a plugin event\n * @param core The EditorCore object\n * @param pluginEvent The event object to trigger\n * @param broadcast Set to true to skip the shouldHandleEventExclusively check\n */\nexports.triggerEvent = function (core, pluginEvent, broadcast) {\n    if (broadcast ||\n        !core.eventHandlerPlugins.some(function (plugin) { return handledExclusively(pluginEvent, plugin); })) {\n        core.eventHandlerPlugins.forEach(function (plugin) {\n            if (plugin.onPluginEvent) {\n                plugin.onPluginEvent(pluginEvent);\n            }\n        });\n    }\n};\nfunction handledExclusively(event, plugin) {\n    if (plugin.onPluginEvent &&\n        plugin.willHandleEventExclusively &&\n        plugin.willHandleEventExclusively(event)) {\n        plugin.onPluginEvent(event);\n        return true;\n    }\n    return false;\n}\n//# sourceMappingURL=triggerEvent.js.map","\"use strict\";\nvar _a;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar roosterjs_editor_dom_1 = require(\"roosterjs-editor-dom\");\nvar EVENT_MAPPING = (_a = {\n        keypress: 1 /* KeyPress */,\n        keydown: 0 /* KeyDown */,\n        keyup: 2 /* KeyUp */,\n        mousedown: 4 /* MouseDown */\n    },\n    _a[roosterjs_editor_dom_1.Browser.isIE ? 'textinput' : 'input'] = 12 /* Input */,\n    _a);\n/**\n * Map DOM events to editor plugin events\n * @param core The EditorCore object\n */\nfunction mapPluginEvents(core) {\n    return Object.keys(EVENT_MAPPING).map(function (pluginEvent) {\n        return core.api.attachDomEvent(core, pluginEvent, EVENT_MAPPING[pluginEvent]);\n    });\n}\nexports.default = mapPluginEvents;\n//# sourceMappingURL=mapPluginEvents.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar roosterjs_editor_dom_1 = require(\"roosterjs-editor-dom\");\n/**\n * Converter for dark mode that runs all child elements of a node through the content transform function.\n * @param node The node containing HTML elements to convert.\n * @param skipRootElement Optional parameter to skip the root element of the Node passed in, if applicable.\n */\nfunction convertContentToDarkMode(node, onExternalContentTransform, skipRootElement) {\n    var childElements = [];\n    // Get a list of all the decendents of a node.\n    // querySelectorAll doesn't return a live list when called on an HTMLElement\n    // So we use getElementsByTagName instead for HTMLElement types.\n    if (roosterjs_editor_dom_1.isHTMLElement(node)) {\n        childElements = Array.prototype.slice.call(node.getElementsByTagName('*'));\n        if (!skipRootElement) {\n            childElements.unshift(node);\n        }\n    }\n    else if (roosterjs_editor_dom_1.isDocumentFragment(node)) {\n        childElements = Array.prototype.slice.call(node.querySelectorAll('*'));\n    }\n    return childElements.length > 0\n        ? function () {\n            childElements.forEach(function (element) {\n                if (onExternalContentTransform) {\n                    onExternalContentTransform(element);\n                }\n                else {\n                    element.style.color = null;\n                    element.style.backgroundColor = null;\n                }\n            });\n        }\n        : null;\n}\nexports.convertContentToDarkMode = convertContentToDarkMode;\n//# sourceMappingURL=convertContentToDarkMode.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar cacheGetEventData_1 = require(\"./cacheGetEventData\");\nvar CACHE_KEY_PREFIX = 'GET_ELEMENT_AT_CURSOR_';\n/**\n * Get an HTML element at cursor from event cache if it exists.\n * If an selector is specified, return the nearest ancestor of current node\n * which matches the selector, or null if no match found in editor.\n * @param editor The editor instance\n * @param event Event object to get cached object from\n * @param selector The expected selector. If null, return the element at cursor\n * @returns The element at cursor or the nearest ancestor with the tag name is specified\n */\nfunction cacheGetElementAtCursor(editor, event, selector) {\n    return cacheGetEventData_1.default(event, CACHE_KEY_PREFIX + selector, function () {\n        return editor.getElementAtCursor(selector);\n    });\n}\nexports.default = cacheGetElementAtCursor;\n//# sourceMappingURL=cacheGetElementAtCursor.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar applyInlineStyle_1 = require(\"../utils/applyInlineStyle\");\nvar roosterjs_editor_dom_1 = require(\"roosterjs-editor-dom\");\n/**\n * Default font size sequence, in pt. Suggest editor UI use this sequence as your font size list,\n * So that when increase/decrease font size, the font size can match the sequence of your font size picker\n */\nexports.FONT_SIZES = [8, 9, 10, 11, 12, 14, 16, 18, 20, 22, 24, 26, 28, 36, 48, 72];\nvar MIN_FONT_SIZE = 1;\nvar MAX_FONT_SIZE = 1000;\n/**\n * Increase or decrease font size in selection\n * @param editor The editor instance\n * @param change Whether increase or decrease font size\n * @param fontSizes A sorted font size array, in pt. Default value is FONT_SIZES\n */\nfunction changeFontSize(editor, change, fontSizes) {\n    if (fontSizes === void 0) { fontSizes = exports.FONT_SIZES; }\n    var changeBase = change == 0 /* Increase */ ? 1 : -1;\n    applyInlineStyle_1.default(editor, function (element) {\n        var pt = parseFloat(roosterjs_editor_dom_1.getComputedStyle(element, 'font-size'));\n        element.style.fontSize = getNewFontSize(pt, changeBase, fontSizes) + 'pt';\n        var lineHeight = roosterjs_editor_dom_1.getComputedStyle(element, 'line-height');\n        if (lineHeight != 'normal') {\n            element.style.lineHeight = 'normal';\n        }\n    });\n}\nexports.default = changeFontSize;\nfunction getNewFontSize(pt, changeBase, fontSizes) {\n    pt = changeBase == 1 ? Math.floor(pt) : Math.ceil(pt);\n    var last = fontSizes[fontSizes.length - 1];\n    if (pt <= fontSizes[0]) {\n        pt = Math.max(pt + changeBase, MIN_FONT_SIZE);\n    }\n    else if (pt > last || (pt == last && changeBase == 1)) {\n        pt = pt / 10;\n        pt = changeBase == 1 ? Math.floor(pt) : Math.ceil(pt);\n        pt = Math.min(Math.max((pt + changeBase) * 10, last), MAX_FONT_SIZE);\n    }\n    else if (changeBase == 1) {\n        for (var i = 0; i < fontSizes.length; i++) {\n            if (pt < fontSizes[i]) {\n                pt = fontSizes[i];\n                break;\n            }\n        }\n    }\n    else {\n        for (var i = fontSizes.length - 1; i >= 0; i--) {\n            if (pt > fontSizes[i]) {\n                pt = fontSizes[i];\n                break;\n            }\n        }\n    }\n    return pt;\n}\nexports.getNewFontSize = getNewFontSize;\n//# sourceMappingURL=changeFontSize.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar collapseSelectedBlocks_1 = require(\"../utils/collapseSelectedBlocks\");\nvar roosterjs_editor_dom_1 = require(\"roosterjs-editor-dom\");\nexports.TAGS_TO_UNWRAP = 'B,I,U,STRONG,EM,SUB,SUP,STRIKE,FONT,CENTER,H1,H2,H3,H4,H5,H6,UL,OL,LI,SPAN,P,BLOCKQUOTE,CODE,S,PRE'.split(',');\nexports.TAGS_TO_STOP_UNWRAP = ['TD', 'TH', 'TR', 'TABLE', 'TBODY', 'THEAD'];\nexports.ATTRIBUTES_TO_PRESERVE = ['href'];\n/**\n * Clear all formats of selected blocks.\n * When selection is collapsed, only clear format of current block.\n * @param editor The editor instance\n * @param tagsToUnwrap Optional. A string array contains HTML tags in upper case which we will unwrap when clear format\n * @param tagsToStopUnwrap Optional. A string array contains HTML tags in upper case which we will stop unwrap if these tags are hit\n */\nfunction clearBlockFormat(editor, tagsToUnwrap, tagsToStopUnwrap, attributesToPreserve) {\n    if (tagsToUnwrap === void 0) { tagsToUnwrap = exports.TAGS_TO_UNWRAP; }\n    if (tagsToStopUnwrap === void 0) { tagsToStopUnwrap = exports.TAGS_TO_STOP_UNWRAP; }\n    if (attributesToPreserve === void 0) { attributesToPreserve = exports.ATTRIBUTES_TO_PRESERVE; }\n    editor.focus();\n    editor.addUndoSnapshot(function (start, end) {\n        var groups = [{}];\n        var stopUnwrapSelector = tagsToStopUnwrap.join(',');\n        // 1. Collapse the selected blocks and get first and last element\n        collapseSelectedBlocks_1.default(editor, function (element) {\n            var group = groups[groups.length - 1];\n            var td = editor.getElementAtCursor(stopUnwrapSelector, element);\n            if (td != group.td && group.first) {\n                groups.push((group = {}));\n            }\n            group.td = td;\n            group.first = group.first || element;\n            group.last = element;\n        });\n        groups\n            .filter(function (group) { return group.first; })\n            .forEach(function (group) {\n            // 2. Collapse with first and last element to make them under same parent\n            var nodes = editor.collapseNodes(group.first, group.last, true /*canSplitParent*/);\n            // 3. Continue collapse until we can't collapse any more (hit root node, or a table)\n            if (canCollapse(tagsToStopUnwrap, nodes[0])) {\n                while (editor.contains(nodes[0].parentNode) &&\n                    canCollapse(tagsToStopUnwrap, nodes[0].parentNode)) {\n                    nodes = [roosterjs_editor_dom_1.splitBalancedNodeRange(nodes)];\n                }\n            }\n            // 4. Clear formats of the nodes\n            nodes.forEach(function (node) {\n                return clearNodeFormat(node, tagsToUnwrap, tagsToStopUnwrap, attributesToPreserve);\n            });\n            // 5. Clear CSS of container TD if exist\n            if (group.td) {\n                var styles = group.td.getAttribute('style') || '';\n                var styleArray = styles.split(';');\n                styleArray = styleArray.filter(function (style) { return style.trim().toLowerCase().indexOf('border') == 0; });\n                styles = styleArray.join(';');\n                if (styles) {\n                    group.td.setAttribute('style', styles);\n                }\n                else {\n                    group.td.removeAttribute('style');\n                }\n            }\n        });\n        editor.select(start, end);\n    }, \"Format\" /* Format */);\n}\nexports.default = clearBlockFormat;\nfunction clearNodeFormat(node, tagsToUnwrap, tagsToStopUnwrap, attributesToPreserve) {\n    if (node.nodeType != 1 /* Element */ || roosterjs_editor_dom_1.getTagOfNode(node) == 'BR') {\n        return false;\n    }\n    // 1. Recursively clear format of all its child nodes\n    var allChildrenAreBlock = roosterjs_editor_dom_1.toArray(node.childNodes)\n        .map(function (n) { return clearNodeFormat(n, tagsToUnwrap, tagsToStopUnwrap, attributesToPreserve); })\n        .reduce(function (previousValue, value) { return previousValue && value; }, true);\n    if (!canCollapse(tagsToStopUnwrap, node)) {\n        return false;\n    }\n    var returnBlockElement = roosterjs_editor_dom_1.isBlockElement(node);\n    // 2. If we should unwrap this tag, put it into an array and unwrap it later\n    if (tagsToUnwrap.indexOf(roosterjs_editor_dom_1.getTagOfNode(node)) >= 0 || allChildrenAreBlock) {\n        if (returnBlockElement && !allChildrenAreBlock) {\n            roosterjs_editor_dom_1.wrap(node);\n        }\n        roosterjs_editor_dom_1.unwrap(node);\n    }\n    else {\n        // 3. Otherwise, remove all attributes\n        clearAttribute(node, attributesToPreserve);\n    }\n    return returnBlockElement;\n}\nfunction clearAttribute(element, attributesToPreserve) {\n    for (var _i = 0, _a = roosterjs_editor_dom_1.toArray(element.attributes); _i < _a.length; _i++) {\n        var attr = _a[_i];\n        if (attributesToPreserve.indexOf(attr.name.toLowerCase()) < 0 &&\n            attr.name.indexOf('data-') != 0) {\n            element.removeAttribute(attr.name);\n        }\n    }\n}\nfunction canCollapse(tagsToStopUnwrap, node) {\n    return tagsToStopUnwrap.indexOf(roosterjs_editor_dom_1.getTagOfNode(node)) < 0;\n}\n//# sourceMappingURL=clearBlockFormat.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar execCommand_1 = require(\"../utils/execCommand\");\nvar setBackgroundColor_1 = require(\"./setBackgroundColor\");\nvar setFontName_1 = require(\"./setFontName\");\nvar setFontSize_1 = require(\"./setFontSize\");\nvar setTextColor_1 = require(\"./setTextColor\");\nvar toggleBold_1 = require(\"./toggleBold\");\nvar toggleItalic_1 = require(\"./toggleItalic\");\nvar toggleUnderline_1 = require(\"./toggleUnderline\");\nvar STYLES_TO_REMOVE = ['font', 'text-decoration', 'color', 'background'];\n/**\n * Clear the format in current selection, after cleaning, the format will be\n * changed to default format. The format that get cleaned include B/I/U/font name/\n * font size/text color/background color/align left/align right/align center/superscript/subscript\n * @param editor The editor instance\n */\nfunction clearFormat(editor) {\n    editor.focus();\n    editor.addUndoSnapshot(function () {\n        execCommand_1.default(editor, \"removeFormat\" /* RemoveFormat */);\n        editor.queryElements('[class]', 1 /* OnSelection */, function (node) {\n            return node.removeAttribute('class');\n        });\n        var defaultFormat = editor.getDefaultFormat();\n        var isDefaultFormatEmpty = Object.keys(defaultFormat).length === 0;\n        editor.queryElements('[style]', 2 /* InSelection */, function (node) {\n            STYLES_TO_REMOVE.forEach(function (style) { return node.style.removeProperty(style); });\n            // when default format is empty, keep the HTML minimum by removing style attribute if there's no style\n            // (note: because default format is empty, we're not adding style back in)\n            if (isDefaultFormatEmpty && node.getAttribute('style') === '') {\n                node.removeAttribute('style');\n            }\n        });\n        if (!isDefaultFormatEmpty) {\n            if (defaultFormat.fontFamily) {\n                setFontName_1.default(editor, defaultFormat.fontFamily);\n            }\n            if (defaultFormat.fontSize) {\n                setFontSize_1.default(editor, defaultFormat.fontSize);\n            }\n            if (defaultFormat.textColor) {\n                if (defaultFormat.textColors) {\n                    setTextColor_1.default(editor, defaultFormat.textColors);\n                }\n                else {\n                    setTextColor_1.default(editor, defaultFormat.textColor);\n                }\n            }\n            if (defaultFormat.backgroundColor) {\n                if (defaultFormat.backgroundColors) {\n                    setBackgroundColor_1.default(editor, defaultFormat.backgroundColors);\n                }\n                else {\n                    setBackgroundColor_1.default(editor, defaultFormat.backgroundColor);\n                }\n            }\n            if (defaultFormat.bold) {\n                toggleBold_1.default(editor);\n            }\n            if (defaultFormat.italic) {\n                toggleItalic_1.default(editor);\n            }\n            if (defaultFormat.underline) {\n                toggleUnderline_1.default(editor);\n            }\n        }\n    }, \"Format\" /* Format */);\n}\nexports.default = clearFormat;\n//# sourceMappingURL=clearFormat.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar roosterjs_editor_dom_1 = require(\"roosterjs-editor-dom\");\n// Regex matching Uri scheme\nvar URI_REGEX = /^[a-zA-Z]+:/i;\n// Regex matching begin of email address\nvar MAILTO_REGEX = /^[\\w.%+-]+@/i;\n// Regex matching begin of ftp, i.e. ftp.microsoft.com\nvar FTP_REGEX = /^ftp\\./i;\nvar TEMP_TITLE = 'istemptitle';\nfunction applyLinkPrefix(url) {\n    if (!url) {\n        return url;\n    }\n    // Add link prefix per rule:\n    // (a) if the url always starts with a URI scheme, leave it as it is\n    // (b) if the url is an email address, xxx@... add mailto: prefix\n    // (c) if the url starts with ftp., add ftp:// prefix\n    // (d) rest, add http:// prefix\n    var prefix = '';\n    if (url.search(URI_REGEX) < 0) {\n        if (url.search(MAILTO_REGEX) == 0) {\n            prefix = 'mailto:';\n        }\n        else if (url.search(FTP_REGEX) == 0) {\n            prefix = 'ftp://';\n        }\n        else {\n            // fallback to http://\n            prefix = 'http://';\n        }\n    }\n    return prefix + url;\n}\n/**\n * Insert a hyperlink at cursor.\n * When there is a selection, hyperlink will be applied to the selection,\n * otherwise a hyperlink will be inserted to the cursor position.\n * @param editor Editor object\n * @param link Link address, can be http(s), mailto, notes, file, unc, ftp, news, telnet, gopher, wais.\n * When protocol is not specified, a best matched protocol will be predicted.\n * @param altText Optional alt text of the link, will be shown when hover on the link\n * @param displayText Optional display text for the link.\n * If specified, the display text of link will be replaced with this text.\n * If not specified and there wasn't a link, the link url will be used as display text.\n */\nfunction createLink(editor, link, altText, displayText) {\n    editor.focus();\n    var url = (checkXss(link) || '').trim();\n    if (url) {\n        var linkData = roosterjs_editor_dom_1.matchLink(url);\n        // matchLink can match most links, but not all, i.e. if you pass link a link as \"abc\", it won't match\n        // we know in that case, users will want to insert a link like http://abc\n        // so we have separate logic in applyLinkPrefix to add link prefix depending on the format of the link\n        // i.e. if the link starts with something like abc@xxx, we will add mailto: prefix\n        // if the link starts with ftp.xxx, we will add ftp:// link. For more, see applyLinkPrefix\n        var normalizedUrl_1 = linkData ? linkData.normalizedUrl : applyLinkPrefix(url);\n        var originalUrl_1 = linkData ? linkData.originalUrl : url;\n        editor.addUndoSnapshot(function () {\n            var range = editor.getSelectionRange();\n            var anchor = null;\n            if (range && range.collapsed) {\n                anchor = getAnchorNodeAtCursor(editor);\n                // If there is already a link, just change its href\n                if (anchor) {\n                    anchor.href = normalizedUrl_1;\n                    // Change text content if it is specified\n                    updateAnchorDisplayText(anchor, displayText);\n                }\n                else {\n                    anchor = editor.getDocument().createElement('A');\n                    anchor.textContent = displayText || originalUrl_1;\n                    anchor.href = normalizedUrl_1;\n                    editor.insertNode(anchor);\n                }\n            }\n            else {\n                // the selection is not collapsed, use browser execCommand\n                editor.getDocument().execCommand(\"createLink\" /* CreateLink */, false, normalizedUrl_1);\n                anchor = getAnchorNodeAtCursor(editor);\n                updateAnchorDisplayText(anchor, displayText);\n            }\n            if (altText && anchor) {\n                // Hack: Ideally this should be done by HyperLink plugin.\n                // We make a hack here since we don't have an event to notify HyperLink plugin\n                // before we apply the link.\n                anchor.removeAttribute(TEMP_TITLE);\n                anchor.title = altText;\n            }\n            return anchor;\n        }, \"CreateLink\" /* CreateLink */);\n    }\n}\nexports.default = createLink;\nfunction getAnchorNodeAtCursor(editor) {\n    return editor.queryElements('a[href]', 1 /* OnSelection */)[0];\n}\nfunction updateAnchorDisplayText(anchor, displayText) {\n    if (displayText && anchor.textContent != displayText) {\n        anchor.textContent = displayText;\n    }\n}\nfunction checkXss(link) {\n    var santizer = new roosterjs_editor_dom_1.HtmlSanitizer();\n    var doc = new DOMParser().parseFromString('<a></a>', 'text/html');\n    var a = doc.body.firstChild;\n    a.href = link || '';\n    santizer.sanitize(doc.body);\n    // We use getAttribute because some browsers will try to make the href property a valid link.\n    // This has unintended side effects when the link lacks a protocol.\n    return a.getAttribute('href');\n}\n//# sourceMappingURL=createLink.js.map","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar roosterjs_editor_core_1 = require(\"roosterjs-editor-core\");\nvar roosterjs_editor_dom_1 = require(\"roosterjs-editor-dom\");\nvar roosterjs_editor_dom_2 = require(\"roosterjs-editor-dom\");\n/**\n * Get element based Format State at cursor\n * @param editor The editor instance\n * @param event (Optional) The plugin event, it stores the event cached data for looking up.\n * In this function the event cache is used to get list state and header level. If not passed,\n * it will query the node within selection to get the info\n * @returns An ElementBasedFormatState object\n */\nfunction getElementBasedFormatState(editor, event) {\n    var listTag = roosterjs_editor_dom_2.getTagOfNode(roosterjs_editor_core_1.cacheGetElementAtCursor(editor, event, 'OL,UL'));\n    var headerTag = roosterjs_editor_dom_2.getTagOfNode(roosterjs_editor_core_1.cacheGetElementAtCursor(editor, event, 'H1,H2,H3,H4,H5,H6'));\n    return {\n        isBullet: listTag == 'UL',\n        isNumbering: listTag == 'OL',\n        headerLevel: (headerTag && parseInt(headerTag[1])) || 0,\n        canUnlink: !!editor.queryElements('a[href]', 1 /* OnSelection */)[0],\n        canAddImageAltText: !!editor.queryElements('img', 1 /* OnSelection */)[0],\n        isBlockQuote: !!editor.queryElements('blockquote', 1 /* OnSelection */)[0],\n    };\n}\nexports.getElementBasedFormatState = getElementBasedFormatState;\n/**\n * @deprecated Use Editor.getStyleBasedFormatState() instead\n * Get style based Format State at cursor\n * @param editor The editor instance\n * @returns A StyleBasedFormatState object\n */\nfunction getStyleBasedFormatState(editor) {\n    return editor.getStyleBasedFormatState();\n}\nexports.getStyleBasedFormatState = getStyleBasedFormatState;\n/**\n * Get format state at cursor\n * A format state is a collection of all format related states, e.g.,\n * bold, italic, underline, font name, font size, etc.\n * @param editor The editor instance\n * @param event (Optional) The plugin event, it stores the event cached data for looking up.\n * In this function the event cache is used to get list state and header level. If not passed,\n * it will query the node within selection to get the info\n * @returns The format state at cursor\n */\nfunction getFormatState(editor, event) {\n    return __assign(__assign(__assign(__assign({}, roosterjs_editor_dom_1.getPendableFormatState(editor.getDocument())), getElementBasedFormatState(editor, event)), editor.getStyleBasedFormatState()), { canUndo: editor.canUndo(), canRedo: editor.canRedo() });\n}\nexports.default = getFormatState;\n//# sourceMappingURL=getFormatState.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction insertImage(editor, imageFile) {\n    if (typeof imageFile == 'string') {\n        insertImageWithSrc(editor, imageFile);\n    }\n    else {\n        var reader = new FileReader();\n        reader.onload = function (event) {\n            if (!editor.isDisposed()) {\n                insertImageWithSrc(editor, event.target.result);\n            }\n        };\n        reader.readAsDataURL(imageFile);\n    }\n}\nexports.default = insertImage;\nfunction insertImageWithSrc(editor, src) {\n    editor.addUndoSnapshot(function () {\n        var image = editor.getDocument().createElement('img');\n        image.src = src;\n        image.style.maxWidth = '100%';\n        editor.insertNode(image);\n    }, \"Format\" /* Format */);\n}\n//# sourceMappingURL=insertImage.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar roosterjs_editor_dom_1 = require(\"roosterjs-editor-dom\");\n/**\n * Insert table into editor at current selection\n * @param editor The editor instance\n * @param columns Number of columns in table, it also controls the default table cell width:\n * if columns &lt;= 4, width = 120px; if columns &lt;= 6, width = 100px; else width = 70px\n * @param rows Number of rows in table\n * @param format (Optional) The table format. If not passed, the default format will be applied:\n * background color: #FFF; border color: #ABABAB\n */\nfunction insertTable(editor, columns, rows, format) {\n    var document = editor.getDocument();\n    var fragment = document.createDocumentFragment();\n    var table = document.createElement('table');\n    fragment.appendChild(table);\n    table.cellSpacing = '0';\n    table.cellPadding = '1';\n    for (var i = 0; i < rows; i++) {\n        var tr = document.createElement('tr');\n        table.appendChild(tr);\n        for (var j = 0; j < columns; j++) {\n            var td = document.createElement('td');\n            tr.appendChild(td);\n            td.appendChild(document.createElement('br'));\n            td.style.width = getTableCellWidth(columns);\n        }\n    }\n    editor.focus();\n    editor.addUndoSnapshot(function () {\n        var vtable = new roosterjs_editor_dom_1.VTable(table);\n        vtable.applyFormat(format || {\n            bgColorEven: '#FFF',\n            bgColorOdd: '#FFF',\n            topBorderColor: '#ABABAB',\n            bottomBorderColor: '#ABABAB',\n            verticalBorderColor: '#ABABAB',\n        });\n        vtable.writeBack();\n        editor.insertNode(fragment);\n        editor.runAsync(function () { return editor.select(new roosterjs_editor_dom_1.Position(table, 0 /* Begin */).normalize()); });\n    }, \"Format\" /* Format */);\n}\nexports.default = insertTable;\nfunction getTableCellWidth(columns) {\n    if (columns <= 4) {\n        return '120px';\n    }\n    else if (columns <= 6) {\n        return '100px';\n    }\n    else {\n        return '70px';\n    }\n}\n//# sourceMappingURL=insertTable.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar roosterjs_editor_dom_1 = require(\"roosterjs-editor-dom\");\n/**\n * Edit table with given operation. If there is no table at cursor then no op.\n * @param editor The editor instance\n * @param operation Table operation\n */\nfunction editTable(editor, operation) {\n    var td = editor.getElementAtCursor('TD,TH');\n    if (td) {\n        editor.addUndoSnapshot(function (start, end) {\n            var vtable = new roosterjs_editor_dom_1.VTable(td);\n            vtable.edit(operation);\n            vtable.writeBack();\n            editor.focus();\n            var cellToSelect = calculateCellToSelect(operation, vtable.row, vtable.col);\n            editor.select(vtable.getCell(cellToSelect.newRow, cellToSelect.newCol).td, 0 /* Begin */);\n        }, \"Format\" /* Format */);\n    }\n}\nexports.default = editTable;\nfunction calculateCellToSelect(operation, currentRow, currentCol) {\n    var newRow = currentRow;\n    var newCol = currentCol;\n    switch (operation) {\n        case 0 /* InsertAbove */:\n            newCol = 0;\n            break;\n        case 1 /* InsertBelow */:\n            newRow += 1;\n            newCol = 0;\n            break;\n        case 2 /* InsertLeft */:\n            newRow = 0;\n            break;\n        case 3 /* InsertRight */:\n            newRow = 0;\n            newCol += 1;\n            break;\n    }\n    return {\n        newRow: newRow,\n        newCol: newCol,\n    };\n}\n//# sourceMappingURL=editTable.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar roosterjs_editor_dom_1 = require(\"roosterjs-editor-dom\");\n/**\n * Format table\n * @param editor The editor which contains the table to format\n * @param format A TableFormat object contains format information we want to apply to the table\n * @param table The table to format. This is optional. When not passed, the current table (if any) will be formatted\n */\nfunction formatTable(editor, format, table) {\n    table = table || editor.getElementAtCursor('TABLE');\n    if (table) {\n        editor.addUndoSnapshot(function (start, end) {\n            var vtable = new roosterjs_editor_dom_1.VTable(table);\n            vtable.applyFormat(format);\n            vtable.writeBack();\n            editor.focus();\n            editor.select(start, end);\n        }, \"Format\" /* Format */);\n    }\n}\nexports.default = formatTable;\n//# sourceMappingURL=formatTable.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar roosterjs_editor_dom_1 = require(\"roosterjs-editor-dom\");\n/**\n * Remove link at selection. If no links at selection, do nothing.\n * If selection contains multiple links, all of the link styles will be removed.\n * If only part of a link is selected, the whole link style will be removed.\n * @param editor The editor instance\n */\nfunction removeLink(editor) {\n    editor.focus();\n    editor.addUndoSnapshot(function (start, end) {\n        editor.queryElements('a[href]', 1 /* OnSelection */, roosterjs_editor_dom_1.unwrap);\n        editor.select(start, end);\n    }, \"Format\" /* Format */);\n}\nexports.default = removeLink;\n//# sourceMappingURL=removeLink.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction replaceWithNode(editor, textOrRange, node, exactMatch, searcher) {\n    // Make sure the text and node is valid\n    if (!textOrRange || !node) {\n        return false;\n    }\n    var range;\n    if (typeof textOrRange == 'string') {\n        searcher = searcher || editor.getContentSearcherOfCursor();\n        range = searcher && searcher.getRangeFromText(textOrRange, exactMatch);\n    }\n    else {\n        range = textOrRange;\n    }\n    if (range) {\n        var backupRange = editor.getSelectionRange();\n        // If the range to replace is right before current cursor, it is actually an exact match\n        if (backupRange.collapsed &&\n            range.endContainer == backupRange.startContainer &&\n            range.endOffset == backupRange.startOffset) {\n            exactMatch = true;\n        }\n        editor.insertNode(node, {\n            position: 5 /* Range */,\n            updateCursor: exactMatch,\n            replaceSelection: true,\n            insertOnNewLine: false,\n            range: range,\n        });\n        return true;\n    }\n    return false;\n}\nexports.default = replaceWithNode;\n//# sourceMappingURL=replaceWithNode.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Rotate an element visually\n * @param editor The editor instance\n * @param element The element that should be rotated\n * @param angle The degree at which to rotate the element from it's center\n */\nfunction rotateElement(editor, element, angle) {\n    if (element) {\n        editor.addUndoSnapshot(function () {\n            element.style.transform = \"rotate(\" + angle + \"deg)\";\n        }, \"Format\" /* Format */);\n    }\n}\nexports.default = rotateElement;\n//# sourceMappingURL=rotateElement.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar execCommand_1 = require(\"../utils/execCommand\");\n/**\n * Set content alignment\n * @param editor The editor instance\n * @param alignment The alignment option:\n * Alignment.Center, Alignment.Left, Alignment.Right\n */\nfunction setAlignment(editor, alignment) {\n    var command = \"justifyLeft\" /* JustifyLeft */;\n    var align = 'left';\n    if (alignment == 1 /* Center */) {\n        command = \"justifyCenter\" /* JustifyCenter */;\n        align = 'center';\n    }\n    else if (alignment == 2 /* Right */) {\n        command = \"justifyRight\" /* JustifyRight */;\n        align = 'right';\n    }\n    editor.addUndoSnapshot(function () {\n        execCommand_1.default(editor, command);\n        editor.queryElements('[align]', 1 /* OnSelection */, function (node) { return (node.style.textAlign = align); });\n    }, \"Format\" /* Format */);\n}\nexports.default = setAlignment;\n//# sourceMappingURL=setAlignment.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar collapseSelectedBlocks_1 = require(\"../utils/collapseSelectedBlocks\");\n/**\n * Change direction for the blocks/paragraph at selection\n * @param editor The editor instance\n * @param direction The direction option:\n * Direction.LeftToRight refers to 'ltr', Direction.RightToLeft refers to 'rtl'\n */\nfunction setDirection(editor, direction) {\n    editor.focus();\n    editor.addUndoSnapshot(function (start, end) {\n        collapseSelectedBlocks_1.default(editor, function (element) {\n            element.setAttribute('dir', direction == 0 /* LeftToRight */ ? 'ltr' : 'rtl');\n            element.style.textAlign = direction == 0 /* LeftToRight */ ? 'left' : 'right';\n        });\n        editor.select(start, end);\n    }, \"Format\" /* Format */);\n}\nexports.default = setDirection;\n//# sourceMappingURL=setDirection.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Set image alt text for all selected images at selection. If no images is contained\n * in selection, do nothing.\n * The alt attribute provides alternative information for an image if a user for some reason\n * cannot view it (because of slow connection, an error in the src attribute, or if the user\n * uses a screen reader). See https://www.w3schools.com/tags/att_img_alt.asp\n * @param editor The editor instance\n * @param altText The image alt text\n */\nfunction setImageAltText(editor, altText) {\n    editor.focus();\n    editor.addUndoSnapshot(function () {\n        editor.queryElements('img', 1 /* OnSelection */, function (node) {\n            return node.setAttribute('alt', altText);\n        });\n    }, \"Format\" /* Format */);\n}\nexports.default = setImageAltText;\n//# sourceMappingURL=setImageAltText.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar experimentSetIndentation_1 = require(\"../experiment/experimentSetIndentation\");\nvar processList_1 = require(\"../utils/processList\");\n/**\n * Set indentation at selection\n * If selection contains bullet/numbering list, increase/decrease indentation will\n * increase/decrease the list level by one.\n * @param editor The editor instance\n * @param indentation The indentation option:\n * Indentation.Increase to increase indentation or Indentation.Decrease to decrease indentation\n */\nfunction setIndentation(editor, indentation) {\n    if (editor.useExperimentFeatures()) {\n        experimentSetIndentation_1.default(editor, indentation);\n    }\n    else {\n        var command_1 = indentation == 0 /* Increase */ ? \"indent\" /* Indent */ : \"outdent\" /* Outdent */;\n        editor.addUndoSnapshot(function () {\n            editor.focus();\n            var listNode = editor.getElementAtCursor('OL,UL');\n            var newNode;\n            if (listNode) {\n                // There is already list node, setIndentation() will increase/decrease the list level,\n                // so we need to process the list when change indentation\n                newNode = processList_1.default(editor, command_1);\n            }\n            else {\n                // No existing list node, browser will create <Blockquote> node for indentation.\n                // We need to set top and bottom margin to 0 to avoid unnecessary spaces\n                editor.getDocument().execCommand(command_1, false, null);\n                editor.queryElements('BLOCKQUOTE', 1 /* OnSelection */, function (node) {\n                    newNode = newNode || node;\n                    node.style.marginTop = '0px';\n                    node.style.marginBottom = '0px';\n                });\n            }\n            return newNode;\n        }, \"Format\" /* Format */);\n    }\n}\nexports.default = setIndentation;\n//# sourceMappingURL=setIndentation.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar blockFormat_1 = require(\"../utils/blockFormat\");\nvar roosterjs_editor_dom_1 = require(\"roosterjs-editor-dom\");\nvar roosterjs_editor_dom_2 = require(\"roosterjs-editor-dom\");\nvar BlockWrapper = '<blockquote style=\"margin-top:0;margin-bottom:0\"></blockquote>';\n/**\n * @internal\n */\nfunction experimentSetIndentation(editor, indentation) {\n    var handler = indentation == 0 /* Increase */ ? indent : outdent;\n    blockFormat_1.default(editor, function (region, start, end) {\n        var blocks = roosterjs_editor_dom_1.getSelectedBlockElementsInRegion(region);\n        var blockGroups = [[]];\n        for (var i = 0; i < blocks.length; i++) {\n            var startNode = blocks[i].getStartNode();\n            var vList = roosterjs_editor_dom_2.createVListFromRegion(region, true /*includeSiblingLists*/, startNode);\n            if (vList) {\n                blockGroups.push([]);\n                while (blocks[i + 1] && vList.contains(blocks[i + 1].getStartNode())) {\n                    i++;\n                }\n                vList.setIndentation(start, end, indentation);\n                vList.writeBack();\n            }\n            else {\n                blockGroups[blockGroups.length - 1].push(blocks[i]);\n            }\n        }\n        blockGroups.forEach(function (group) { return handler(region, group); });\n    });\n}\nexports.default = experimentSetIndentation;\nfunction indent(region, blocks) {\n    if (blocks.length > 0) {\n        var startNode = blocks[0].getStartNode();\n        var endNode = blocks[blocks.length - 1].getEndNode();\n        var nodes = roosterjs_editor_dom_2.collapseNodesInRegion(region, [startNode, endNode]);\n        roosterjs_editor_dom_2.wrap(nodes, BlockWrapper);\n    }\n}\nfunction outdent(region, blocks) {\n    blocks.forEach(function (blockElement) {\n        var node = blockElement.collapseToSingleElement();\n        var quote = roosterjs_editor_dom_2.findClosestElementAncestor(node, region.rootNode, 'blockquote');\n        if (quote) {\n            if (node == quote) {\n                node = roosterjs_editor_dom_2.wrap(roosterjs_editor_dom_2.toArray(node.childNodes));\n            }\n            while (roosterjs_editor_dom_2.isNodeInRegion(region, node) && roosterjs_editor_dom_2.getTagOfNode(node) != 'BLOCKQUOTE') {\n                node = roosterjs_editor_dom_2.splitBalancedNodeRange(node);\n            }\n            if (roosterjs_editor_dom_2.isNodeInRegion(region, node)) {\n                roosterjs_editor_dom_2.unwrap(node);\n            }\n        }\n    });\n}\n//# sourceMappingURL=experimentSetIndentation.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar experimentToggleListType_1 = require(\"../experiment/experimentToggleListType\");\nvar processList_1 = require(\"../utils/processList\");\n/**\n * Toggle bullet at selection\n * If selection contains bullet in deep level, toggle bullet will decrease the bullet level by one\n * If selection contains number list, toggle bullet will convert the number list into bullet list\n * If selection contains both bullet/numbering and normal text, the behavior is decided by corresponding\n * browser execCommand API\n * @param editor The editor instance\n */\nfunction toggleBullet(editor) {\n    if (editor.useExperimentFeatures()) {\n        experimentToggleListType_1.default(editor, 2 /* Unordered */);\n    }\n    else {\n        editor.focus();\n        editor.addUndoSnapshot(function () { return processList_1.default(editor, \"insertUnorderedList\" /* InsertUnorderedList */); }, \"Format\" /* Format */);\n    }\n}\nexports.default = toggleBullet;\n//# sourceMappingURL=toggleBullet.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar experimentToggleListType_1 = require(\"../experiment/experimentToggleListType\");\nvar processList_1 = require(\"../utils/processList\");\n/**\n * Toggle numbering at selection\n * If selection contains numbering in deep level, toggle numbering will decrease the numbering level by one\n * If selection contains bullet list, toggle numbering will convert the bullet list into number list\n * If selection contains both bullet/numbering and normal text, the behavior is decided by corresponding\n * realization of browser execCommand API\n * @param editor The editor instance\n */\nfunction toggleNumbering(editor) {\n    if (editor.useExperimentFeatures()) {\n        experimentToggleListType_1.default(editor, 1 /* Ordered */);\n    }\n    else {\n        editor.focus();\n        editor.addUndoSnapshot(function () { return processList_1.default(editor, \"insertOrderedList\" /* InsertOrderedList */); }, \"Format\" /* Format */);\n    }\n}\nexports.default = toggleNumbering;\n//# sourceMappingURL=toggleNumbering.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar toggleTagCore_1 = require(\"../utils/toggleTagCore\");\nvar BLOCKQUOTE_TAG = 'blockquote';\nvar DEFAULT_STYLER = function (element) {\n    element.style.borderLeft = '3px solid';\n    element.style.borderColor = '#C8C8C8';\n    element.style.paddingLeft = '10px';\n    element.style.color = '#666666';\n};\n/**\n * Toggle blockquote at selection, if selection already contains any blockquoted elements,\n * the blockquoted elements will be unblockquoted and other elements will take no affect\n * @param editor The editor instance\n * @param styler (Optional) The custom styler for setting the style for the blockquote element\n */\nfunction toggleBlockQuote(editor, styler) {\n    toggleTagCore_1.default(editor, BLOCKQUOTE_TAG, styler || DEFAULT_STYLER);\n}\nexports.default = toggleBlockQuote;\n//# sourceMappingURL=toggleBlockQuote.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar toggleTagCore_1 = require(\"../utils/toggleTagCore\");\nvar roosterjs_editor_dom_1 = require(\"roosterjs-editor-dom\");\nvar PRE_TAG = 'pre';\nvar CODE_TAG = 'code';\nvar CODE_NODE_TAG = 'CODE';\n/**\n * Toggle code block at selection, if selection already contains any code blocked elements,\n * the code block elements will be no longer be code blocked and other elements will take no affect\n * @param editor The editor instance\n * @param styler (Optional) The custom styler for setting the style for the code block element\n */\nfunction toggleCodeBlock(editor, styler) {\n    toggleTagCore_1.default(editor, PRE_TAG, styler, wrapFunction, unwrapFunction);\n}\nexports.default = toggleCodeBlock;\nfunction wrapFunction(nodes) {\n    var codeBlock = roosterjs_editor_dom_1.wrap(nodes, CODE_TAG);\n    return roosterjs_editor_dom_1.wrap(codeBlock, PRE_TAG);\n}\nfunction unwrapFunction(node) {\n    if (!node) {\n        return null;\n    }\n    var firstChild = node.childNodes[0];\n    if (node.childNodes.length == 1 && roosterjs_editor_dom_1.getTagOfNode(firstChild) == CODE_NODE_TAG) {\n        roosterjs_editor_dom_1.unwrap(firstChild);\n    }\n    return roosterjs_editor_dom_1.unwrap(node);\n}\n//# sourceMappingURL=toggleCodeBlock.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar execCommand_1 = require(\"../utils/execCommand\");\n/**\n * Toggle strikethrough at selection\n * If selection is collapsed, it will only affect the input after caret\n * If selection contains only strikethrough text, the strikethrough style will be removed\n * If selection contains only normal text, strikethrough style will be added to the whole selected text\n * If selection contains both strikethrough and normal text, strikethrough stlye will be added to the whole selected text\n * @param editor The editor instance\n */\nfunction toggleStrikethrough(editor) {\n    execCommand_1.default(editor, \"strikeThrough\" /* StrikeThrough */);\n}\nexports.default = toggleStrikethrough;\n//# sourceMappingURL=toggleStrikethrough.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar execCommand_1 = require(\"../utils/execCommand\");\n/**\n * Toggle subscript at selection\n * If selection is collapsed, it will only affect the input after caret\n * If selection contains only subscript text, the subscript style will be removed\n * If selection contains only normal text, subscript style will be added to the whole selected text\n * If selection contains both subscript and normal text, the subscript style will be removed from whole selected text\n * If selection contains any superscript text, the behavior is determined by corresponding realization of browser\n * execCommand API\n * @param editor The editor instance\n */\nfunction toggleSubscript(editor) {\n    execCommand_1.default(editor, \"subscript\" /* Subscript */);\n}\nexports.default = toggleSubscript;\n//# sourceMappingURL=toggleSubscript.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar execCommand_1 = require(\"../utils/execCommand\");\n/**\n * Toggle superscript at selection\n * If selection is collapsed, it will only affect the input after caret\n * If selection contains only superscript text, the superscript style will be removed\n * If selection contains only normal text, superscript style will be added to the whole selected text\n * If selection contains both superscript and normal text, the superscript style will be removed from whole selected text\n * If selection contains any subscript text, the behavior is determined by corresponding realization of browser\n * execCommand API\n * @param editor The editor instance\n */\nfunction toggleSuperscript(editor) {\n    execCommand_1.default(editor, \"superscript\" /* Superscript */);\n}\nexports.default = toggleSuperscript;\n//# sourceMappingURL=toggleSuperscript.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar roosterjs_editor_dom_1 = require(\"roosterjs-editor-dom\");\n/**\n * Toggle header at selection\n * @param editor The editor instance\n * @param level The header level, can be a number from 0 to 6, in which 1 ~ 6 refers to\n * the HTML header element &lt;H1&gt; to &lt;H6&gt;, 0 means no header\n * if passed in param is outside the range, will be rounded to nearest number in the range\n */\nfunction toggleHeader(editor, level) {\n    level = Math.min(Math.max(Math.round(level), 0), 6);\n    editor.addUndoSnapshot(function () {\n        editor.focus();\n        var wrapped = false;\n        editor.queryElements('H1,H2,H3,H4,H5,H6', 1 /* OnSelection */, function (header) {\n            if (!wrapped) {\n                editor.getDocument().execCommand(\"formatBlock\" /* FormatBlock */, false, '<DIV>');\n                wrapped = true;\n            }\n            var div = editor.getDocument().createElement('div');\n            while (header.firstChild) {\n                div.appendChild(header.firstChild);\n            }\n            editor.replaceNode(header, div);\n        });\n        if (level > 0) {\n            var traverser = editor.getSelectionTraverser();\n            var blockElement = traverser ? traverser.currentBlockElement : null;\n            var sanitizer = new roosterjs_editor_dom_1.HtmlSanitizer({\n                styleCallbacks: {\n                    'font-size': function () { return false; },\n                },\n            });\n            while (blockElement) {\n                var element = blockElement.collapseToSingleElement();\n                sanitizer.sanitize(element);\n                blockElement = traverser.getNextBlockElement();\n            }\n            editor.getDocument().execCommand(\"formatBlock\" /* FormatBlock */, false, \"<H\" + level + \">\");\n        }\n    }, \"Format\" /* Format */);\n}\nexports.default = toggleHeader;\n//# sourceMappingURL=toggleHeader.js.map","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"./plugins/ContentEdit/index\"));\n//# sourceMappingURL=ContentEdit.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ContentEdit_1 = require(\"./ContentEdit\");\nexports.ContentEdit = ContentEdit_1.default;\nvar ContentEditFeatures_1 = require(\"./ContentEditFeatures\");\nexports.getDefaultContentEditFeatures = ContentEditFeatures_1.getDefaultContentEditFeatures;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ContentEditFeatures_1 = require(\"./ContentEditFeatures\");\nvar autoLinkFeatures_1 = require(\"./features/autoLinkFeatures\");\nvar shortcutFeatures_1 = require(\"./features/shortcutFeatures\");\nvar insertLineBeforeStructuredNodeFeature_1 = require(\"./features/insertLineBeforeStructuredNodeFeature\");\nvar noCycleCursorMove_1 = require(\"./features/noCycleCursorMove\");\nvar tableFeatures_1 = require(\"./features/tableFeatures\");\nvar markdownFeatures_1 = require(\"./features/markdownFeatures\");\nvar listFeatures_1 = require(\"./features/listFeatures\");\nvar quoteFeatures_1 = require(\"./features/quoteFeatures\");\n/**\n * An editor plugin to handle content edit event.\n * The following cases are included:\n * 1. Auto increase/decrease indentation on Tab, Shift+tab\n * 2. Enter, Backspace on empty list item\n * 3. Enter, Backspace on empty blockquote line\n * 4. Auto bullet/numbering\n * 5. Auto link\n * 6. Tab in table\n * 7. Up/Down in table\n * 8. Manage list style\n */\nvar ContentEdit = /** @class */ (function () {\n    /**\n     * Create instance of ContentEdit plugin\n     * @param features An optional feature set to determine which features the plugin should provide\n     */\n    function ContentEdit(featureSet) {\n        this.featureSet = featureSet;\n    }\n    /**\n     * Get a friendly name of  this plugin\n     */\n    ContentEdit.prototype.getName = function () {\n        return 'ContentEdit';\n    };\n    /**\n     * Initialize this plugin\n     * @param editor The editor instance\n     */\n    ContentEdit.prototype.initialize = function (editor) {\n        var _this = this;\n        this.editor = editor;\n        this.getFilteredFeatures().forEach(function (feature) { return _this.editor.addContentEditFeature(feature); });\n    };\n    /**\n     * Dispose this plugin\n     */\n    ContentEdit.prototype.dispose = function () {\n        this.editor = null;\n    };\n    ContentEdit.prototype.getFilteredFeatures = function () {\n        var featureSet = this.featureSet || ContentEditFeatures_1.getDefaultContentEditFeatures();\n        var allFeatures = {\n            indentWhenTab: listFeatures_1.IndentWhenTab,\n            outdentWhenShiftTab: listFeatures_1.OutdentWhenShiftTab,\n            outdentWhenBackspaceOnEmptyFirstLine: listFeatures_1.OutdentWhenBackOn1stEmptyLine,\n            outdentWhenEnterOnEmptyLine: listFeatures_1.OutdentWhenEnterOnEmptyLine,\n            mergeInNewLineWhenBackspaceOnFirstChar: listFeatures_1.MergeInNewLine,\n            unquoteWhenBackspaceOnEmptyFirstLine: quoteFeatures_1.UnquoteWhenBackOnEmpty1stLine,\n            unquoteWhenEnterOnEmptyLine: quoteFeatures_1.UnquoteWhenEnterOnEmptyLine,\n            tabInTable: tableFeatures_1.TabInTable,\n            upDownInTable: tableFeatures_1.UpDownInTable,\n            insertLineBeforeStructuredNodeFeature: insertLineBeforeStructuredNodeFeature_1.InsertLineBeforeStructuredNodeFeature,\n            autoBullet: listFeatures_1.AutoBullet,\n            autoLink: autoLinkFeatures_1.AutoLink,\n            unlinkWhenBackspaceAfterLink: autoLinkFeatures_1.UnlinkWhenBackspaceAfterLink,\n            defaultShortcut: shortcutFeatures_1.DefaultShortcut,\n            noCycleCursorMove: noCycleCursorMove_1.NoCycleCursorMove,\n            smartOrderedList: listFeatures_1.getSmartOrderedList(featureSet.smartOrderedListStyles),\n            markdownBold: markdownFeatures_1.MarkdownBold,\n            markdownItalic: markdownFeatures_1.MarkdownItalic,\n            markdownStrikethru: markdownFeatures_1.MarkdownStrikethru,\n            markdownInlineCode: markdownFeatures_1.MarkdownInlineCode,\n        };\n        var keys = Object.keys(allFeatures);\n        return keys.filter(function (key) { return featureSet[key]; }).map(function (key) { return allFeatures[key]; });\n    };\n    return ContentEdit;\n}());\nexports.default = ContentEdit;\n//# sourceMappingURL=ContentEdit.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar roosterjs_editor_dom_1 = require(\"roosterjs-editor-dom\");\nvar roosterjs_editor_api_1 = require(\"roosterjs-editor-api\");\nvar roosterjs_editor_core_1 = require(\"roosterjs-editor-core\");\n/**\n * When user type, they may end a link with a puncatuation, i.e. www.bing.com;\n * we need to trim off the trailing puncatuation before turning it to link match\n */\nvar TRAILING_PUNCTUATION_REGEX = /[.+=\\s:;\"',>]+$/i;\nvar MINIMUM_LENGTH = 5;\n/**\n * AutoLink edit feature, provides the ability to automatically convert text user typed or pasted\n * in hyperlink format into a real hyperlink\n */\nexports.AutoLink = {\n    keys: [13 /* ENTER */, 32 /* SPACE */, 2048 /* CONTENTCHANGED */],\n    shouldHandleEvent: cacheGetLinkData,\n    handleEvent: autoLink,\n};\n/**\n * UnlinkWhenBackspaceAfterLink edit feature, provides the ability to convert a hyperlink back into text\n * if user presses BACKSPACE right after a hyperlink\n */\nexports.UnlinkWhenBackspaceAfterLink = {\n    keys: [8 /* BACKSPACE */],\n    shouldHandleEvent: hasLinkBeforeCursor,\n    handleEvent: function (event, editor) {\n        event.rawEvent.preventDefault();\n        roosterjs_editor_api_1.removeLink(editor);\n    },\n};\nfunction cacheGetLinkData(event, editor) {\n    return event.eventType == 0 /* KeyDown */ ||\n        (event.eventType == 6 /* ContentChanged */ && event.source == \"Paste\" /* Paste */)\n        ? roosterjs_editor_core_1.cacheGetEventData(event, 'LINK_DATA', function () {\n            // First try to match link from the whole paste string from the plain text in clipboard.\n            // This helps when we paste a link next to some existing character, and the text we got\n            // from clipboard will only contain what we pasted, any existing characters will not\n            // be included.\n            var clipboardData = event.eventType == 6 /* ContentChanged */ &&\n                event.source == \"Paste\" /* Paste */ &&\n                event.data;\n            var link = roosterjs_editor_dom_1.matchLink((clipboardData.text || '').trim());\n            var searcher = roosterjs_editor_core_1.cacheGetContentSearcher(event, editor);\n            // In case the matched link is already inside a <A> tag, we do a range search.\n            // getRangeFromText will return null if the given text is already in a LinkInlineElement\n            if (link && searcher.getRangeFromText(link.originalUrl, false /*exactMatch*/)) {\n                return link;\n            }\n            var word = searcher && searcher.getWordBefore();\n            if (word && word.length > MINIMUM_LENGTH) {\n                // Check for trailing punctuation\n                var trailingPunctuations = word.match(TRAILING_PUNCTUATION_REGEX);\n                var trailingPunctuation = (trailingPunctuations || [])[0] || '';\n                var candidate_1 = word.substring(0, word.length - trailingPunctuation.length);\n                // Do special handling for ')', '}', ']'\n                ['()', '{}', '[]'].forEach(function (str) {\n                    if (candidate_1[candidate_1.length - 1] == str[1] &&\n                        candidate_1.indexOf(str[0]) < 0) {\n                        candidate_1 = candidate_1.substr(0, candidate_1.length - 1);\n                    }\n                });\n                // Match and replace in editor\n                return roosterjs_editor_dom_1.matchLink(candidate_1);\n            }\n            return null;\n        })\n        : null;\n}\nfunction hasLinkBeforeCursor(event, editor) {\n    var contentSearcher = roosterjs_editor_core_1.cacheGetContentSearcher(event, editor);\n    var inline = contentSearcher.getInlineElementBefore();\n    return inline instanceof roosterjs_editor_dom_1.LinkInlineElement;\n}\nfunction autoLink(event, editor) {\n    var anchor = editor.getDocument().createElement('a');\n    var linkData = cacheGetLinkData(event, editor);\n    // Need to get searcher before we enter the async callback since the callback can happen when cursor is moved to next line\n    // and at that time a new searcher won't be able to find the link text to replace\n    var searcher = editor.getContentSearcherOfCursor();\n    anchor.textContent = linkData.originalUrl;\n    anchor.href = linkData.normalizedUrl;\n    editor.runAsync(function () {\n        editor.performAutoComplete(function () {\n            roosterjs_editor_api_1.replaceWithNode(editor, linkData.originalUrl, anchor, false /* exactMatch */, searcher);\n            // The content at cursor has changed. Should also clear the cursor data cache\n            roosterjs_editor_core_1.clearContentSearcherCache(event);\n            return anchor;\n        }, \"AutoLink\" /* AutoLink */);\n    });\n}\n//# sourceMappingURL=autoLinkFeatures.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar roosterjs_editor_dom_1 = require(\"roosterjs-editor-dom\");\nvar roosterjs_editor_core_1 = require(\"roosterjs-editor-core\");\nvar roosterjs_editor_api_1 = require(\"roosterjs-editor-api\");\nfunction createCommand(winKey, macKey, action) {\n    return {\n        winKey: winKey,\n        macKey: macKey,\n        action: action,\n    };\n}\nvar commands = [\n    createCommand(256 /* Ctrl */ | 66 /* B */, 512 /* Meta */ | 66 /* B */, roosterjs_editor_api_1.toggleBold),\n    createCommand(256 /* Ctrl */ | 73 /* I */, 512 /* Meta */ | 73 /* I */, roosterjs_editor_api_1.toggleItalic),\n    createCommand(256 /* Ctrl */ | 85 /* U */, 512 /* Meta */ | 85 /* U */, roosterjs_editor_api_1.toggleUnderline),\n    createCommand(256 /* Ctrl */ | 90 /* Z */, 512 /* Meta */ | 90 /* Z */, function (editor) { return editor.undo(); }),\n    createCommand(256 /* Ctrl */ | 89 /* Y */, 512 /* Meta */ | 1024 /* Shift */ | 90 /* Z */, function (editor) { return editor.redo(); }),\n    createCommand(256 /* Ctrl */ | 190 /* PERIOD */, 512 /* Meta */ | 190 /* PERIOD */, roosterjs_editor_api_1.toggleBullet),\n    createCommand(256 /* Ctrl */ | 191 /* FORWARDSLASH */, 512 /* Meta */ | 191 /* FORWARDSLASH */, roosterjs_editor_api_1.toggleNumbering),\n    createCommand(256 /* Ctrl */ | 1024 /* Shift */ | 190 /* PERIOD */, 512 /* Meta */ | 1024 /* Shift */ | 190 /* PERIOD */, function (editor) { return roosterjs_editor_api_1.changeFontSize(editor, 0 /* Increase */); }),\n    createCommand(256 /* Ctrl */ | 1024 /* Shift */ | 188 /* COMMA */, 512 /* Meta */ | 1024 /* Shift */ | 188 /* COMMA */, function (editor) { return roosterjs_editor_api_1.changeFontSize(editor, 1 /* Decrease */); }),\n];\n/**\n * DefaultShortcut edit feature, provides shortcuts for the following features:\n * Ctrl/Meta+B: toggle bold style\n * Ctrl/Meta+I: toggle italic style\n * Ctrl/Meta+U: toggle underline style\n * Ctrl/Meta+Z: undo\n * Ctrl+Y/Meta+Shift+Z: redo\n * Ctrl/Meta+PERIOD: toggle bullet list\n * Ctrl/Meta+/: toggle numbering list\n * Ctrl/Meta+Shift+>: increase font size\n * Ctrl/Meta+Shift+<: decrease font size\n */\nexports.DefaultShortcut = {\n    allowFunctionKeys: true,\n    keys: [66 /* B */, 73 /* I */, 85 /* U */, 89 /* Y */, 90 /* Z */, 188 /* COMMA */, 190 /* PERIOD */, 191 /* FORWARDSLASH */],\n    shouldHandleEvent: cacheGetCommand,\n    handleEvent: function (event, editor) {\n        var command = cacheGetCommand(event);\n        if (command) {\n            command.action(editor);\n            event.rawEvent.preventDefault();\n            event.rawEvent.stopPropagation();\n        }\n    },\n};\nfunction cacheGetCommand(event) {\n    return roosterjs_editor_core_1.cacheGetEventData(event, 'DEFAULT_SHORT_COMMAND', function () {\n        var e = event.rawEvent;\n        var key = \n        // Need to check ALT key to be false since in some language (e.g. Polski) uses AltGr to input some special charactors\n        // In that case, ctrlKey and altKey are both true in Edge, but we should not trigger any shortcut function here\n        event.eventType == 0 /* KeyDown */ && !e.altKey\n            ? e.which |\n                (e.metaKey && 512 /* Meta */) |\n                (e.shiftKey && 1024 /* Shift */) |\n                (e.ctrlKey && 256 /* Ctrl */)\n            : 0;\n        return key && commands.filter(function (cmd) { return (roosterjs_editor_dom_1.Browser.isMac ? cmd.macKey : cmd.winKey) == key; })[0];\n    });\n}\n//# sourceMappingURL=shortcutFeatures.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar roosterjs_editor_core_1 = require(\"roosterjs-editor-core\");\nvar roosterjs_editor_dom_1 = require(\"roosterjs-editor-dom\");\n// Edge can sometimes lose current format when Enter to new line.\n// So here we add an extra SPAN for Edge to workaround this bug\nvar NEWLINE_HTML = roosterjs_editor_dom_1.Browser.isEdge ? '<div><span><br></span></div>' : '<div><br></div>';\nvar CHILD_PARENT_TAG_MAP = {\n    TD: 'TABLE',\n    TH: 'TABLE',\n    LI: 'OL,UL',\n};\nvar CHILD_SELECTOR = Object.keys(CHILD_PARENT_TAG_MAP).join(',');\n/**\n * InsertLineBeforeStructuredNode edit feature, provides the ability to insert an empty line before\n * a structured element (bullet/numbering list, blockquote, table) if the element is at beginning of\n * document\n */\nexports.InsertLineBeforeStructuredNodeFeature = {\n    keys: [13 /* ENTER */],\n    shouldHandleEvent: cacheGetStructuredElement,\n    handleEvent: function (event, editor) {\n        var element = cacheGetStructuredElement(event, editor);\n        var div = roosterjs_editor_dom_1.fromHtml(NEWLINE_HTML, editor.getDocument())[0];\n        editor.addUndoSnapshot(function () {\n            element.parentNode.insertBefore(div, element);\n            // Select the new line when we are in table. This is the same behavior with Word\n            if (roosterjs_editor_dom_1.getTagOfNode(element) == 'TABLE') {\n                editor.select(new roosterjs_editor_dom_1.Position(div, 0 /* Begin */).normalize());\n            }\n        });\n        event.rawEvent.preventDefault();\n    },\n};\nfunction cacheGetStructuredElement(event, editor) {\n    return roosterjs_editor_core_1.cacheGetEventData(event, 'FIRST_STRUCTURE', function () {\n        // Provide a chance to keep browser default behavior by pressing SHIFT\n        var element = event.rawEvent.shiftKey ? null : editor.getElementAtCursor(CHILD_SELECTOR);\n        if (element) {\n            var range = editor.getSelectionRange();\n            if (range &&\n                range.collapsed &&\n                roosterjs_editor_dom_1.isPositionAtBeginningOf(roosterjs_editor_dom_1.Position.getStart(range), element) &&\n                !editor.getBodyTraverser(element).getPreviousBlockElement()) {\n                return editor.getElementAtCursor(CHILD_PARENT_TAG_MAP[roosterjs_editor_dom_1.getTagOfNode(element)]);\n            }\n        }\n        return null;\n    });\n}\n//# sourceMappingURL=insertLineBeforeStructuredNodeFeature.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar roosterjs_editor_dom_1 = require(\"roosterjs-editor-dom\");\nexports.NoCycleCursorMove = {\n    keys: [37 /* LEFT */, 39 /* RIGHT */],\n    allowFunctionKeys: true,\n    shouldHandleEvent: function (event, editor, ctrlOrMeta) {\n        var range;\n        var position;\n        if (!ctrlOrMeta ||\n            !(range = editor.getSelectionRange()) ||\n            !range.collapsed ||\n            !(position = roosterjs_editor_dom_1.Position.getStart(range)) ||\n            !editor.isPositionAtBeginning(position)) {\n            return false;\n        }\n        var rtl = roosterjs_editor_dom_1.isRtl(position.element);\n        var rawEvent = event.rawEvent;\n        return (!rtl && rawEvent.which == 37 /* LEFT */) || (rtl && rawEvent.which == 39 /* RIGHT */);\n    },\n    handleEvent: function (event) {\n        event.rawEvent.preventDefault();\n    },\n};\n//# sourceMappingURL=noCycleCursorMove.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar roosterjs_editor_core_1 = require(\"roosterjs-editor-core\");\nvar roosterjs_editor_dom_1 = require(\"roosterjs-editor-dom\");\nvar roosterjs_editor_api_1 = require(\"roosterjs-editor-api\");\n/**\n * TabInTable edit feature, provides the ability to jump between cells when user press TAB in table\n */\nexports.TabInTable = {\n    keys: [9 /* TAB */],\n    shouldHandleEvent: cacheGetTableCell,\n    handleEvent: function (event, editor) {\n        var shift = event.rawEvent.shiftKey;\n        var td = cacheGetTableCell(event, editor);\n        for (var vtable = new roosterjs_editor_dom_1.VTable(td), step = shift ? -1 : 1, row = vtable.row, col = vtable.col + step;; col += step) {\n            if (col < 0 || col >= vtable.cells[row].length) {\n                row += step;\n                if (row < 0) {\n                    editor.select(vtable.table, -2 /* Before */);\n                    break;\n                }\n                else if (row >= vtable.cells.length) {\n                    roosterjs_editor_api_1.editTable(editor, 1 /* InsertBelow */);\n                    break;\n                }\n                col = shift ? vtable.cells[row].length - 1 : 0;\n            }\n            var cell = vtable.getCell(row, col);\n            if (cell.td) {\n                editor.select(cell.td, 0 /* Begin */);\n                break;\n            }\n        }\n        event.rawEvent.preventDefault();\n    },\n};\n/**\n * UpDownInTable edit feature, provides the ability to jump to cell above/below when user press UP/DOWN\n * in table\n */\nexports.UpDownInTable = {\n    keys: [38 /* UP */, 40 /* DOWN */],\n    shouldHandleEvent: cacheGetTableCell,\n    handleEvent: function (event, editor) {\n        var td = cacheGetTableCell(event, editor);\n        var vtable = new roosterjs_editor_dom_1.VTable(td);\n        var isUp = event.rawEvent.which == 38 /* UP */;\n        var step = isUp ? -1 : 1;\n        var targetTd = null;\n        var hasShiftKey = event.rawEvent.shiftKey;\n        var _a = editor.getSelection(), anchorNode = _a.anchorNode, anchorOffset = _a.anchorOffset;\n        for (var row = vtable.row; row >= 0 && row < vtable.cells.length; row += step) {\n            var cell = vtable.getCell(row, vtable.col);\n            if (cell.td && cell.td != td) {\n                targetTd = cell.td;\n                break;\n            }\n        }\n        editor.runAsync(function () {\n            var newContainer = editor.getElementAtCursor();\n            if (roosterjs_editor_dom_1.contains(vtable.table, newContainer) &&\n                !roosterjs_editor_dom_1.contains(td, newContainer, true /*treatSameNodeAsContain*/)) {\n                var newPos = targetTd\n                    ? new roosterjs_editor_dom_1.Position(targetTd, 0 /* Begin */)\n                    : new roosterjs_editor_dom_1.Position(vtable.table, isUp ? -2 /* Before */ : -3 /* After */);\n                if (hasShiftKey) {\n                    newPos =\n                        newPos.node.nodeType == 1 /* Element */ && roosterjs_editor_dom_1.isVoidHtmlElement(newPos.node)\n                            ? new roosterjs_editor_dom_1.Position(newPos.node, newPos.isAtEnd ? -3 /* After */ : -2 /* Before */)\n                            : newPos;\n                    editor\n                        .getSelection()\n                        .setBaseAndExtent(anchorNode, anchorOffset, newPos.node, newPos.offset);\n                }\n                else {\n                    editor.select(newPos);\n                }\n            }\n        });\n    },\n};\nfunction cacheGetTableCell(event, editor) {\n    return roosterjs_editor_core_1.cacheGetEventData(event, 'TABLECELL_FOR_TABLE_FEATURES', function () {\n        var pos = editor.getFocusedPosition();\n        var firstTd = pos && editor.getElementAtCursor('TD,TH,LI', pos.node);\n        return (firstTd && (roosterjs_editor_dom_1.getTagOfNode(firstTd) == 'LI' ? null : firstTd));\n    });\n}\n//# sourceMappingURL=tableFeatures.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar roosterjs_editor_dom_1 = require(\"roosterjs-editor-dom\");\nvar roosterjs_editor_core_1 = require(\"roosterjs-editor-core\");\nvar ZERO_WIDTH_SPACE = '\\u200B';\nfunction generateBasicMarkdownFeature(key, triggerCharacter, elementTag, useShiftKey) {\n    return {\n        keys: [key],\n        shouldHandleEvent: function (event, editor) {\n            return event.rawEvent.shiftKey === useShiftKey &&\n                !!cacheGetRangeForMarkdownOperation(event, editor, triggerCharacter);\n        },\n        handleEvent: function (event, editor) {\n            // runAsync is here to allow the event to complete so autocomplete will present the trigger character.\n            editor.runAsync(function () {\n                handleMarkdownEvent(event, editor, triggerCharacter, elementTag);\n            });\n        },\n    };\n}\nfunction cacheGetRangeForMarkdownOperation(event, editor, triggerCharacter) {\n    return roosterjs_editor_core_1.cacheGetEventData(event, 'MARKDOWN_RANGE', function () {\n        var searcher = roosterjs_editor_core_1.cacheGetContentSearcher(event, editor);\n        var startPosition;\n        var endPosition;\n        searcher.forEachTextInlineElement(function (textInlineElement) {\n            if (endPosition && startPosition) {\n                return true;\n            }\n            var inlineTextContent = textInlineElement.getTextContent();\n            // special case for immediately preceeding character being whitespace\n            if (inlineTextContent[inlineTextContent.length - 1].trim().length == 0) {\n                return false;\n            }\n            // special case for consecutive trigger characters\n            if (inlineTextContent[inlineTextContent.length - 1] === triggerCharacter) {\n                return false;\n            }\n            if (!endPosition) {\n                endPosition = textInlineElement.getStartPosition().move(inlineTextContent.length);\n            }\n            if (inlineTextContent[0] == triggerCharacter) {\n                startPosition = textInlineElement.getStartPosition();\n            }\n            else {\n                var contentIndex = inlineTextContent.length - 1;\n                for (; contentIndex > 0; contentIndex--) {\n                    if (startPosition) {\n                        return true;\n                    }\n                    if (inlineTextContent[contentIndex] == triggerCharacter &&\n                        inlineTextContent[contentIndex - 1].trim().length == 0) {\n                        startPosition = textInlineElement.getStartPosition().move(contentIndex);\n                        return true;\n                    }\n                }\n            }\n        });\n        return !!startPosition && !!endPosition && roosterjs_editor_dom_1.createRange(startPosition, endPosition);\n    });\n}\nfunction handleMarkdownEvent(event, editor, triggerCharacter, elementTag) {\n    editor.performAutoComplete(function () {\n        var range = cacheGetRangeForMarkdownOperation(event, editor, triggerCharacter);\n        if (!!range) {\n            // get the text content range\n            var textContentRange = range.cloneRange();\n            textContentRange.setStart(textContentRange.startContainer, textContentRange.startOffset + 1);\n            // set the removal range to include the typed last character.\n            range.setEnd(range.endContainer, range.endOffset + 1);\n            // extract content and put it into a new element.\n            var elementToWrap = editor.getDocument().createElement(elementTag);\n            elementToWrap.appendChild(textContentRange.extractContents());\n            range.deleteContents();\n            // ZWS here ensures we don't end up inside the newly created node.\n            var nonPrintedSpaceTextNode = editor.getDocument().createTextNode(ZERO_WIDTH_SPACE);\n            range.insertNode(nonPrintedSpaceTextNode);\n            range.insertNode(elementToWrap);\n            editor.select(nonPrintedSpaceTextNode, -1 /* End */);\n        }\n    }, \"Format\" /* Format */);\n}\n/**\n * Markdown bold feature. Bolds text with markdown shortcuts.\n */\nexports.MarkdownBold = generateBasicMarkdownFeature(56 /* EIGHT_ASTIRISK */, '*', 'b', true);\n/**\n * Markdown italics feature. Italicises text with markdown shortcuts.\n */\nexports.MarkdownItalic = generateBasicMarkdownFeature(189 /* DASH_UNDERSCORE */, '_', 'i', true);\n/**\n * Markdown strikethru feature. Strikethrus text with markdown shortcuts.\n */\nexports.MarkdownStrikethru = generateBasicMarkdownFeature(192 /* GRAVE_TILDE */, '~', 's', true);\n/**\n * Markdown inline code feature. Marks specific text as inline code with markdown shortcuts.\n */\nexports.MarkdownInlineCode = generateBasicMarkdownFeature(192 /* GRAVE_TILDE */, '`', 'code', false);\n//# sourceMappingURL=markdownFeatures.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar roosterjs_editor_api_1 = require(\"roosterjs-editor-api\");\nvar roosterjs_editor_dom_1 = require(\"roosterjs-editor-dom\");\nvar roosterjs_editor_core_1 = require(\"roosterjs-editor-core\");\n/**\n * IndentWhenTab edit feature, provides the ability to indent current list when user press TAB\n */\nexports.IndentWhenTab = {\n    keys: [9 /* TAB */],\n    shouldHandleEvent: function (event, editor) {\n        return !event.rawEvent.shiftKey && cacheGetListElement(event, editor);\n    },\n    handleEvent: function (event, editor) {\n        roosterjs_editor_api_1.setIndentation(editor, 0 /* Increase */);\n        event.rawEvent.preventDefault();\n    },\n};\n/**\n * OutdentWhenShiftTab edit feature, provides the ability to outdent current list when user press Shift+TAB\n */\nexports.OutdentWhenShiftTab = {\n    keys: [9 /* TAB */],\n    shouldHandleEvent: function (event, editor) {\n        return event.rawEvent.shiftKey && cacheGetListElement(event, editor);\n    },\n    handleEvent: function (event, editor) {\n        roosterjs_editor_api_1.setIndentation(editor, 1 /* Decrease */);\n        event.rawEvent.preventDefault();\n    },\n};\n/**\n * MergeInNewLine edit feature, provides the ability to merge current line into a new line when user press\n * BACKSPACE at beginning of a list item\n */\nexports.MergeInNewLine = {\n    keys: [8 /* BACKSPACE */],\n    shouldHandleEvent: function (event, editor) {\n        var li = roosterjs_editor_core_1.cacheGetElementAtCursor(editor, event, 'LI');\n        var range = editor.getSelectionRange();\n        return li && range && roosterjs_editor_dom_1.isPositionAtBeginningOf(roosterjs_editor_dom_1.Position.getStart(range), li);\n    },\n    handleEvent: function (event, editor) {\n        var li = roosterjs_editor_core_1.cacheGetElementAtCursor(editor, event, 'LI');\n        if (li.previousSibling) {\n            editor.runAsync(function () {\n                var br = editor.getDocument().createElement('BR');\n                editor.insertNode(br);\n                editor.select(br, -3 /* After */);\n            });\n        }\n        else {\n            toggleListAndPreventDefault(event, editor);\n        }\n    },\n};\n/**\n * OutdentWhenBackOn1stEmptyLine edit feature, provides the ability to outdent current item if user press\n * BACKSPACE at the first and empty line of a list\n */\nexports.OutdentWhenBackOn1stEmptyLine = {\n    keys: [8 /* BACKSPACE */],\n    shouldHandleEvent: function (event, editor) {\n        var li = roosterjs_editor_core_1.cacheGetElementAtCursor(editor, event, 'LI');\n        return li && roosterjs_editor_dom_1.isNodeEmpty(li) && !li.previousSibling;\n    },\n    handleEvent: toggleListAndPreventDefault,\n};\n/**\n * OutdentWhenEnterOnEmptyLine edit feature, provides the ability to outdent current item if user press\n * ENTER at the beginning of an empty line of a list\n */\nexports.OutdentWhenEnterOnEmptyLine = {\n    keys: [13 /* ENTER */],\n    shouldHandleEvent: function (event, editor) {\n        var li = roosterjs_editor_core_1.cacheGetElementAtCursor(editor, event, 'LI');\n        return !event.rawEvent.shiftKey && li && roosterjs_editor_dom_1.isNodeEmpty(li);\n    },\n    handleEvent: function (event, editor) {\n        editor.performAutoComplete(function () { return toggleListAndPreventDefault(event, editor); });\n    },\n};\n/**\n * AutoBullet edit feature, provides the ablility to automatically convert current line into a list.\n * When user input \"1. \", convert into a numbering list\n * When user input \"- \" or \"* \", convert into a bullet list\n */\nexports.AutoBullet = {\n    keys: [32 /* SPACE */],\n    shouldHandleEvent: function (event, editor) {\n        if (!cacheGetListElement(event, editor)) {\n            var searcher = roosterjs_editor_core_1.cacheGetContentSearcher(event, editor);\n            var textBeforeCursor = searcher.getSubStringBefore(3);\n            // Auto list is triggered if:\n            // 1. Text before cursor exactly mathces '*', '-' or '1.'\n            // 2. There's no non-text inline entities before cursor\n            return (['*', '-', '1.'].indexOf(textBeforeCursor) >= 0 &&\n                !searcher.getNearestNonTextInlineElement());\n        }\n        return false;\n    },\n    handleEvent: function (event, editor) {\n        editor.runAsync(function () {\n            editor.performAutoComplete(function () {\n                var searcher = editor.getContentSearcherOfCursor();\n                var textBeforeCursor = searcher.getSubStringBefore(3);\n                var rangeToDelete = searcher.getRangeFromText(textBeforeCursor, true /*exactMatch*/);\n                if (rangeToDelete) {\n                    rangeToDelete.deleteContents();\n                    var node = rangeToDelete.startContainer;\n                    if ((node === null || node === void 0 ? void 0 : node.nodeType) == 3 /* Text */ &&\n                        node.nodeValue == '' &&\n                        !node.previousSibling &&\n                        !node.nextSibling) {\n                        var br = editor.getDocument().createElement('BR');\n                        editor.insertNode(br);\n                        editor.select(br, -2 /* Before */);\n                    }\n                }\n                if (textBeforeCursor.indexOf('1.') == 0) {\n                    roosterjs_editor_api_1.toggleNumbering(editor);\n                }\n                else {\n                    roosterjs_editor_api_1.toggleBullet(editor);\n                }\n            });\n        });\n    },\n};\n/**\n * Get an instance of SmartOrderedList edit feature. This feature provides the ability to use different\n * number style for different level of numbering list.\n * @param styleList The list of number styles used for this feature.\n * See https://www.w3schools.com/cssref/pr_list-style-type.asp for more information\n */\nfunction getSmartOrderedList(styleList) {\n    return {\n        keys: [2048 /* CONTENTCHANGED */],\n        shouldHandleEvent: function (event, editor) { return roosterjs_editor_dom_1.isHTMLOListElement(event.data); },\n        handleEvent: function (event, editor) {\n            var ol = event.data;\n            var parentOl = editor.getElementAtCursor('OL', ol.parentNode);\n            if (parentOl) {\n                // The style list must has at least one value. If no value is passed in, fallback to decimal\n                var styles = styleList && styleList.length > 0 ? styleList : ['decimal'];\n                ol.style.listStyle =\n                    styles[(styles.indexOf(parentOl.style.listStyle) + 1) % styles.length];\n            }\n        },\n    };\n}\nexports.getSmartOrderedList = getSmartOrderedList;\nfunction toggleListAndPreventDefault(event, editor) {\n    var listInfo = cacheGetListElement(event, editor);\n    if (listInfo) {\n        var listElement = listInfo[0];\n        var tag = roosterjs_editor_dom_1.getTagOfNode(listElement);\n        if (tag == 'UL') {\n            roosterjs_editor_api_1.toggleBullet(editor);\n        }\n        else if (tag == 'OL') {\n            roosterjs_editor_api_1.toggleNumbering(editor);\n        }\n        editor.focus();\n        event.rawEvent.preventDefault();\n    }\n}\nfunction cacheGetListElement(event, editor) {\n    var li = roosterjs_editor_core_1.cacheGetElementAtCursor(editor, event, 'LI,TABLE');\n    var listElement = li && roosterjs_editor_dom_1.getTagOfNode(li) == 'LI' && editor.getElementAtCursor('UL,OL', li);\n    return listElement ? [listElement, li] : null;\n}\n//# sourceMappingURL=listFeatures.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar roosterjs_editor_core_1 = require(\"roosterjs-editor-core\");\nvar roosterjs_editor_dom_1 = require(\"roosterjs-editor-dom\");\nvar QUOTE_TAG = 'BLOCKQUOTE';\nvar STRUCTURED_TAGS = [QUOTE_TAG, 'LI', 'TD', 'TH'].join(',');\n/**\n * UnquoteWhenBackOnEmpty1stLine edit feature, provides the ability to Unquote current line when\n * user press BACKSPACE on first and empty line of a BLOCKQUOTE\n */\nexports.UnquoteWhenBackOnEmpty1stLine = {\n    keys: [8 /* BACKSPACE */],\n    shouldHandleEvent: function (event, editor) {\n        var childOfQuote = cacheGetQuoteChild(event, editor);\n        return childOfQuote && roosterjs_editor_dom_1.isNodeEmpty(childOfQuote) && !childOfQuote.previousSibling;\n    },\n    handleEvent: splitQuote,\n};\n/**\n * UnquoteWhenEnterOnEmptyLine edit feature, provides the ability to Unquote current line when\n * user press ENTER on an empty line of a BLOCKQUOTE\n */\nexports.UnquoteWhenEnterOnEmptyLine = {\n    keys: [13 /* ENTER */],\n    shouldHandleEvent: function (event, editor) {\n        var childOfQuote = cacheGetQuoteChild(event, editor);\n        var shift = event.rawEvent.shiftKey;\n        return !shift && childOfQuote && roosterjs_editor_dom_1.isNodeEmpty(childOfQuote);\n    },\n    handleEvent: function (event, editor) { return editor.performAutoComplete(function () { return splitQuote(event, editor); }); },\n};\nfunction cacheGetQuoteChild(event, editor) {\n    return roosterjs_editor_core_1.cacheGetEventData(event, 'QUOTE_CHILD', function () {\n        var quote = editor.getElementAtCursor(STRUCTURED_TAGS);\n        if (quote && roosterjs_editor_dom_1.getTagOfNode(quote) == QUOTE_TAG) {\n            var pos = editor.getFocusedPosition();\n            var block = pos && editor.getBlockElementAtNode(pos.normalize().node);\n            if (block) {\n                var node = block.getStartNode() == quote\n                    ? block.getStartNode()\n                    : block.collapseToSingleElement();\n                return roosterjs_editor_dom_1.isNodeEmpty(node) ? node : null;\n            }\n        }\n        return null;\n    });\n}\nfunction splitQuote(event, editor) {\n    editor.addUndoSnapshot(function () {\n        var childOfQuote = cacheGetQuoteChild(event, editor);\n        var parent;\n        if (roosterjs_editor_dom_1.getTagOfNode(childOfQuote) == QUOTE_TAG) {\n            childOfQuote = roosterjs_editor_dom_1.wrap(roosterjs_editor_dom_1.toArray(childOfQuote.childNodes));\n        }\n        parent = roosterjs_editor_dom_1.splitBalancedNodeRange(childOfQuote);\n        roosterjs_editor_dom_1.unwrap(parent);\n        editor.select(childOfQuote, 0 /* Begin */);\n    });\n    event.rawEvent.preventDefault();\n}\n//# sourceMappingURL=quoteFeatures.js.map","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"./plugins/CustomReplace/index\"));\n//# sourceMappingURL=CustomReplace.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar CustomReplace_1 = require(\"./CustomReplace\");\nexports.CustomReplace = CustomReplace_1.default;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar roosterjs_editor_core_1 = require(\"roosterjs-editor-core\");\nvar makeReplacement = function (sourceString, replacementHTML, matchSourceCaseSensitive) { return ({ sourceString: sourceString, replacementHTML: replacementHTML, matchSourceCaseSensitive: matchSourceCaseSensitive }); };\nvar defaultReplacements = [\n    makeReplacement(':)', '🙂', true),\n    makeReplacement(';)', '😉', true),\n    makeReplacement(':O', '😲', true),\n    makeReplacement(':o', '😯', true),\n    makeReplacement('<3', '❤️', true),\n];\n/**\n * Wrapper for CustomReplaceContentEditFeature that provides an API for updating the\n * content edit feature\n */\nvar CustomReplacePlugin = /** @class */ (function () {\n    /**\n     * Create instance of CustomReplace plugin\n     * @param replacements Replacement rules. If not passed, a default replacement rule set will be applied\n     */\n    function CustomReplacePlugin(replacements) {\n        if (replacements === void 0) { replacements = defaultReplacements; }\n        this.updateReplacements(replacements);\n    }\n    /**\n     * Set the replacements that this plugin is looking for.\n     * @param newReplacements new set of replacements for this plugin\n     */\n    CustomReplacePlugin.prototype.updateReplacements = function (newReplacements) {\n        this.replacements = newReplacements;\n        this.longestReplacementLength = getLongestReplacementSourceLength(this.replacements);\n        this.replacementEndCharacters = getReplacementEndCharacters(this.replacements);\n    };\n    /**\n     * Get a friendly name of  this plugin\n     */\n    CustomReplacePlugin.prototype.getName = function () {\n        return 'CustomReplace';\n    };\n    /**\n     * Initialize this plugin\n     * @param editor The editor instance\n     */\n    CustomReplacePlugin.prototype.initialize = function (editor) {\n        this.editor = editor;\n    };\n    /**\n     * Dispose this plugin\n     */\n    CustomReplacePlugin.prototype.dispose = function () {\n        this.editor = null;\n    };\n    CustomReplacePlugin.prototype.onPluginEvent = function (event) {\n        var _this = this;\n        if (this.editor.isInIME() || event.eventType != 12 /* Input */) {\n            return;\n        }\n        // Exit early on input events that do not insert a replacement's final character.\n        if (!event.rawEvent.data || !this.replacementEndCharacters.has(event.rawEvent.data)) {\n            return;\n        }\n        // Get the matching replacement\n        var range = this.editor.getSelectionRange();\n        if (range == null) {\n            return;\n        }\n        var searcher = roosterjs_editor_core_1.cacheGetContentSearcher(event, this.editor);\n        var stringToSearch = searcher.getSubStringBefore(this.longestReplacementLength);\n        var replacement = this.getMatchingReplacement(stringToSearch);\n        if (replacement == null) {\n            return;\n        }\n        // Reconstruct a selection of the text on the document that matches the\n        // replacement we selected.\n        var matchingText = searcher.getSubStringBefore(replacement.sourceString.length);\n        var matchingRange = searcher.getRangeFromText(matchingText, true /* exactMatch */);\n        // parse the html string off the dom and inline the resulting element.\n        var document = this.editor.getDocument();\n        var parsingSpan = document.createElement('span');\n        parsingSpan.innerHTML = replacement.replacementHTML;\n        var nodeToInsert = parsingSpan.childNodes.length == 1 ? parsingSpan.childNodes[0] : parsingSpan;\n        // Switch the node for the selection range\n        this.editor.performAutoComplete(function () {\n            matchingRange.deleteContents();\n            matchingRange.insertNode(nodeToInsert);\n            _this.editor.select(nodeToInsert, -1 /* End */);\n        });\n    };\n    CustomReplacePlugin.prototype.getMatchingReplacement = function (stringToSearch) {\n        if (stringToSearch.length == 0) {\n            return null;\n        }\n        var lowerCaseStringToSearch = stringToSearch.toLocaleLowerCase();\n        for (var _i = 0, _a = this.replacements; _i < _a.length; _i++) {\n            var replacement = _a[_i];\n            var _b = replacement.matchSourceCaseSensitive\n                ? [stringToSearch, replacement.sourceString]\n                : [lowerCaseStringToSearch, replacement.sourceString.toLocaleLowerCase()], sourceMatch = _b[0], replacementMatch = _b[1];\n            if (sourceMatch.substring(sourceMatch.length - replacementMatch.length) ==\n                replacementMatch) {\n                return replacement;\n            }\n        }\n        return null;\n    };\n    return CustomReplacePlugin;\n}());\nexports.default = CustomReplacePlugin;\nfunction getLongestReplacementSourceLength(replacements) {\n    return Math.max.apply(null, replacements.map(function (replacement) { return replacement.sourceString.length; }));\n}\nfunction getReplacementEndCharacters(replacements) {\n    var endChars = new Set();\n    for (var _i = 0, replacements_1 = replacements; _i < replacements_1.length; _i++) {\n        var replacement = replacements_1[_i];\n        var sourceString = replacement.sourceString;\n        if (sourceString.length == 0) {\n            continue;\n        }\n        var lastChar = sourceString[sourceString.length - 1];\n        if (!replacement.matchSourceCaseSensitive) {\n            endChars.add(lastChar.toLocaleLowerCase());\n            endChars.add(lastChar.toLocaleUpperCase());\n        }\n        else {\n            endChars.add(lastChar);\n        }\n    }\n    return endChars;\n}\n//# sourceMappingURL=CustomReplace.js.map","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"./plugins/HyperLink/index\"));\n//# sourceMappingURL=HyperLink.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar HyperLink_1 = require(\"./HyperLink\");\nexports.HyperLink = HyperLink_1.default;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar roosterjs_editor_dom_1 = require(\"roosterjs-editor-dom\");\nvar roosterjs_editor_core_1 = require(\"roosterjs-editor-core\");\n/**\n * An editor plugin that show a tooltip for existing link\n */\nvar HyperLink = /** @class */ (function () {\n    /**\n     * Create a new instance of HyperLink class\n     * @param getTooltipCallback A callback function to get tooltip text for an existing hyperlink.\n     * Default value is to return the href itself. If null, there will be no tooltip text.\n     * @param target (Optional) Target window name for hyperlink. If null, will use \"_blank\"\n     * @param onLinkClick (Optional) Open link callback (return false to use default behavior)\n     */\n    function HyperLink(getTooltipCallback, target, onLinkClick) {\n        var _this = this;\n        if (getTooltipCallback === void 0) { getTooltipCallback = function (href) { return href; }; }\n        this.getTooltipCallback = getTooltipCallback;\n        this.target = target;\n        this.onLinkClick = onLinkClick;\n        this.onMouse = function (e) {\n            var a = _this.editor.getElementAtCursor('a[href]', e.target);\n            var href = _this.tryGetHref(a);\n            if (href) {\n                _this.editor.setEditorDomAttribute('title', e.type == 'mouseover' ? _this.getTooltipCallback(href, a) : null);\n            }\n        };\n    }\n    /**\n     * Get a friendly name of  this plugin\n     */\n    HyperLink.prototype.getName = function () {\n        return 'Hyperlink';\n    };\n    /**\n     * Initialize this plugin\n     * @param editor The editor instance\n     */\n    HyperLink.prototype.initialize = function (editor) {\n        this.editor = editor;\n        this.disposer =\n            this.getTooltipCallback &&\n                editor.addDomEventHandler({ mouseover: this.onMouse, mouseout: this.onMouse });\n    };\n    /**\n     * Dispose this plugin\n     */\n    HyperLink.prototype.dispose = function () {\n        if (this.disposer) {\n            this.disposer();\n            this.disposer = null;\n        }\n        this.editor = null;\n    };\n    /**\n     * Handle events triggered from editor\n     * @param event PluginEvent object\n     */\n    HyperLink.prototype.onPluginEvent = function (event) {\n        if (event.eventType == 5 /* MouseUp */) {\n            var anchor = this.editor.getElementAtCursor('A', event.rawEvent.srcElement);\n            if (anchor) {\n                if (this.onLinkClick && this.onLinkClick(anchor, event.rawEvent) !== false) {\n                    return;\n                }\n                var href = void 0;\n                if (!roosterjs_editor_dom_1.Browser.isFirefox &&\n                    (href = this.tryGetHref(anchor)) &&\n                    roosterjs_editor_core_1.isCtrlOrMetaPressed(event.rawEvent) &&\n                    event.rawEvent.button === 0) {\n                    try {\n                        var target = this.target || '_blank';\n                        var window_1 = this.editor.getDocument().defaultView;\n                        window_1.open(href, target);\n                    }\n                    catch (_a) { }\n                }\n            }\n        }\n    };\n    /**\n     * Try get href from an anchor element\n     * The reason this is put in a try-catch is that\n     * it has been seen that accessing href may throw an exception, in particular on IE/Edge\n     */\n    HyperLink.prototype.tryGetHref = function (anchor) {\n        try {\n            return anchor ? anchor.href : null;\n        }\n        catch (_a) { }\n    };\n    return HyperLink;\n}());\nexports.default = HyperLink;\n//# sourceMappingURL=HyperLink.js.map","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"./plugins/ImageResize/index\"));\n//# sourceMappingURL=ImageResize.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ImageResize_1 = require(\"./ImageResize\");\nexports.ImageResize = ImageResize_1.default;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar roosterjs_editor_dom_1 = require(\"roosterjs-editor-dom\");\nvar BEGIN_TAG = 'RoosterJsImageResizingBegin';\nvar END_TAG = 'RoosterJsImageResizingEnd';\nvar EXTRACT_HTML_REGEX = new RegExp(\"<!--\" + BEGIN_TAG + \"-->[\\\\s\\\\S]*(<img\\\\s[^>]+>)[\\\\s\\\\S]*<!--\" + END_TAG + \"-->\", 'gim');\nvar DELETE_KEYCODE = 46;\nvar BACKSPACE_KEYCODE = 8;\nvar SHIFT_KEYCODE = 16;\nvar CTRL_KEYCODE = 17;\nvar ALT_KEYCODE = 18;\n/**\n * ImageResize plugin provides the ability to resize an inline image in editor\n */\nvar ImageResize = /** @class */ (function () {\n    /**\n     * Create a new instance of ImageResize\n     * @param minWidth Minimum width of image when resize in pixel, default value is 10\n     * @param minHeight Minimum height of image when resize in pixel, default value is 10\n     * @param selectionBorderColor Color of resize border and handles, default value is #DB626C\n     * @param forcePreserveRatio Whether always preserve width/height ratio when resize, default value is false\n     * @param resizableImageSelector Selector for picking which image is resizable (e.g. for all images not placeholders), note\n     * that the tag must be IMG regardless what the selector is\n     */\n    function ImageResize(minWidth, minHeight, selectionBorderColor, forcePreserveRatio, resizableImageSelector) {\n        var _this = this;\n        if (minWidth === void 0) { minWidth = 10; }\n        if (minHeight === void 0) { minHeight = 10; }\n        if (selectionBorderColor === void 0) { selectionBorderColor = '#DB626C'; }\n        if (forcePreserveRatio === void 0) { forcePreserveRatio = false; }\n        if (resizableImageSelector === void 0) { resizableImageSelector = 'img'; }\n        this.minWidth = minWidth;\n        this.minHeight = minHeight;\n        this.selectionBorderColor = selectionBorderColor;\n        this.forcePreserveRatio = forcePreserveRatio;\n        this.resizableImageSelector = resizableImageSelector;\n        this.startResize = function (e) {\n            var img = _this.getSelectedImage();\n            if (_this.editor && img) {\n                _this.startPageX = e.pageX;\n                _this.startPageY = e.pageY;\n                _this.startWidth = img.clientWidth;\n                _this.startHeight = img.clientHeight;\n                _this.editor.addUndoSnapshot();\n                var document_1 = _this.editor.getDocument();\n                document_1.addEventListener('mousemove', _this.doResize, true /*useCapture*/);\n                document_1.addEventListener('mouseup', _this.finishResize, true /*useCapture*/);\n                _this.direction = (e.srcElement || e.target).style.cursor;\n            }\n            _this.stopEvent(e);\n        };\n        this.doResize = function (e) {\n            var img = _this.getSelectedImage();\n            if (_this.editor && img) {\n                var widthChange = e.pageX - _this.startPageX;\n                var heightChange = e.pageY - _this.startPageY;\n                var newWidth = Math.max(_this.startWidth + (_this.isWest(_this.direction) ? -widthChange : widthChange), _this.minWidth);\n                var newHeight = Math.max(_this.startHeight + (_this.isNorth(_this.direction) ? -heightChange : heightChange), _this.minHeight);\n                if (_this.forcePreserveRatio || e.shiftKey) {\n                    var ratio = _this.startWidth > 0 && _this.startHeight > 0\n                        ? (_this.startWidth * 1.0) / _this.startHeight\n                        : 0;\n                    if (ratio > 0) {\n                        if (newWidth < newHeight * ratio) {\n                            newWidth = newHeight * ratio;\n                        }\n                        else {\n                            newHeight = newWidth / ratio;\n                        }\n                    }\n                }\n                img.style.width = newWidth + 'px';\n                img.style.height = newHeight + 'px';\n                // double check\n                if (_this.forcePreserveRatio || e.shiftKey) {\n                    var ratio = _this.startWidth > 0 && _this.startHeight > 0\n                        ? (_this.startWidth * 1.0) / _this.startHeight\n                        : 0;\n                    var clientWidth = Math.floor(img.clientWidth);\n                    var clientHeight = Math.floor(img.clientHeight);\n                    newWidth = Math.floor(newWidth);\n                    newHeight = Math.floor(newHeight);\n                    if (clientHeight !== newHeight || clientWidth !== newWidth) {\n                        if (clientHeight < newHeight) {\n                            newWidth = clientHeight * ratio;\n                        }\n                        else {\n                            newHeight = clientWidth / ratio;\n                        }\n                        img.style.width = newWidth + 'px';\n                        img.style.height = newHeight + 'px';\n                    }\n                }\n            }\n            _this.stopEvent(e);\n        };\n        this.finishResize = function (e) {\n            var img = _this.getSelectedImage();\n            if (_this.editor && img) {\n                var document_2 = _this.editor.getDocument();\n                document_2.removeEventListener('mousemove', _this.doResize, true /*useCapture*/);\n                document_2.removeEventListener('mouseup', _this.finishResize, true /*useCapture*/);\n                var width = img.clientWidth;\n                var height = img.clientHeight;\n                img.style.width = width + 'px';\n                img.style.height = height + 'px';\n                img.width = width;\n                img.height = height;\n                _this.resizeDiv.style.width = '';\n                _this.resizeDiv.style.height = '';\n            }\n            _this.direction = null;\n            _this.editor.addUndoSnapshot();\n            _this.editor.triggerContentChangedEvent(\"ImageResize\" /* ImageResize */);\n            _this.stopEvent(e);\n        };\n        this.stopEvent = function (e) {\n            e.stopPropagation();\n            e.preventDefault();\n        };\n        this.removeResizeDivIfAny = function (img) {\n            var div = img && img.parentNode;\n            var previous = div && div.previousSibling;\n            var next = div && div.nextSibling;\n            if (previous &&\n                previous.nodeType == 8 /* Comment */ &&\n                previous.nodeValue == BEGIN_TAG &&\n                next &&\n                next.nodeType == 8 /* Comment */ &&\n                next.nodeValue == END_TAG) {\n                div.parentNode.insertBefore(img, div);\n                _this.removeResizeDiv(div);\n            }\n        };\n        this.onBlur = function (e) {\n            _this.hideResizeHandle();\n        };\n        this.onDragStart = function (e) {\n            if ((e.srcElement || e.target) == _this.getSelectedImage()) {\n                _this.hideResizeHandle(true);\n            }\n        };\n    }\n    /**\n     * Get a friendly name of  this plugin\n     */\n    ImageResize.prototype.getName = function () {\n        return 'ImageResize';\n    };\n    /**\n     * Initialize this plugin. This should only be called from Editor\n     * @param editor Editor instance\n     */\n    ImageResize.prototype.initialize = function (editor) {\n        this.editor = editor;\n        this.disposer = editor.addDomEventHandler({\n            dragstart: this.onDragStart,\n            blur: this.onBlur,\n        });\n    };\n    /**\n     * Dispose this plugin\n     */\n    ImageResize.prototype.dispose = function () {\n        if (this.resizeDiv) {\n            this.hideResizeHandle();\n        }\n        this.disposer();\n        this.disposer = null;\n        this.editor = null;\n    };\n    /**\n     * Handle events triggered from editor\n     * @param event PluginEvent object\n     */\n    ImageResize.prototype.onPluginEvent = function (e) {\n        var _this = this;\n        if (e.eventType == 4 /* MouseDown */) {\n            var event_1 = e.rawEvent;\n            var target = (event_1.srcElement || event_1.target);\n            if (roosterjs_editor_dom_1.getTagOfNode(target) == 'IMG') {\n                var parent_1 = target.parentNode;\n                var elements = parent_1\n                    ? roosterjs_editor_dom_1.toArray(parent_1.querySelectorAll(this.resizableImageSelector))\n                    : [];\n                if (elements.indexOf(target) < 0) {\n                    return;\n                }\n                target.contentEditable = 'false';\n                var currentImg = this.getSelectedImage();\n                if (currentImg && currentImg != target) {\n                    this.hideResizeHandle();\n                }\n                if (!this.resizeDiv) {\n                    this.showResizeHandle(target);\n                }\n            }\n            else if (this.resizeDiv && !roosterjs_editor_dom_1.contains(this.resizeDiv, target)) {\n                this.hideResizeHandle();\n            }\n        }\n        else if (e.eventType == 0 /* KeyDown */ && this.resizeDiv) {\n            var event_2 = e.rawEvent;\n            if (event_2.which == DELETE_KEYCODE || event_2.which == BACKSPACE_KEYCODE) {\n                this.editor.addUndoSnapshot(function () {\n                    _this.removeResizeDiv(_this.resizeDiv);\n                });\n                this.resizeDiv = null;\n                event_2.preventDefault();\n                this.resizeDiv = null;\n            }\n            else if (event_2.which != SHIFT_KEYCODE &&\n                event_2.which != CTRL_KEYCODE &&\n                event_2.which != ALT_KEYCODE) {\n                this.hideResizeHandle(true /*selectImage*/);\n            }\n        }\n        else if (e.eventType == 6 /* ContentChanged */ &&\n            e.source != \"ImageResize\" /* ImageResize */) {\n            this.editor.queryElements('img', this.removeResizeDivIfAny);\n            this.resizeDiv = null;\n        }\n        else if (e.eventType == 7 /* ExtractContent */) {\n            var event_3 = e;\n            event_3.content = this.extractHtml(event_3.content);\n        }\n    };\n    /**\n     * Select a given IMG element, show the resize handle\n     * @param img The IMG element to select\n     */\n    ImageResize.prototype.showResizeHandle = function (img) {\n        this.resizeDiv = this.createResizeDiv(img);\n        img.contentEditable = 'false';\n        this.editor.select(this.resizeDiv, -3 /* After */);\n    };\n    /**\n     * Hide resize handle of current selected image\n     * @param selectImageAfterUnSelect Optional, when set to true, select the image element after hide the resize handle\n     */\n    ImageResize.prototype.hideResizeHandle = function (selectImageAfterUnSelect) {\n        var img = this.getSelectedImage();\n        var parent = this.resizeDiv && this.resizeDiv.parentNode;\n        if (parent) {\n            if (img) {\n                // Reset the transform of the image before the container is removed, so the rotation isn't reset\n                img.style.transform = this.resizeDiv.style.transform;\n                img.removeAttribute('contentEditable');\n                var referenceNode = this.resizeDiv.previousSibling &&\n                    this.resizeDiv.previousSibling.nodeType == 8 /* Comment */\n                    ? this.resizeDiv.previousSibling\n                    : this.resizeDiv;\n                parent.insertBefore(img, referenceNode);\n                if (selectImageAfterUnSelect) {\n                    this.editor.select(img);\n                }\n                else {\n                    this.editor.select(img, -3 /* After */);\n                }\n            }\n            this.removeResizeDiv(this.resizeDiv);\n            this.resizeDiv = null;\n        }\n    };\n    ImageResize.prototype.createResizeDiv = function (target) {\n        var _this = this;\n        var document = this.editor.getDocument();\n        var resizeDiv = document.createElement('DIV');\n        var parent = target.parentNode;\n        parent.insertBefore(resizeDiv, target);\n        parent.insertBefore(document.createComment(BEGIN_TAG), resizeDiv);\n        parent.insertBefore(document.createComment(END_TAG), resizeDiv.nextSibling);\n        resizeDiv.style.position = 'relative';\n        resizeDiv.style.display = 'inline-flex';\n        resizeDiv.contentEditable = 'false';\n        resizeDiv.addEventListener('click', this.stopEvent);\n        resizeDiv.appendChild(target);\n        ['nw', 'ne', 'sw', 'se'].forEach(function (pos) {\n            var div = document.createElement('DIV');\n            resizeDiv.appendChild(div);\n            div.style.position = 'absolute';\n            div.style.width = '7px';\n            div.style.height = '7px';\n            div.style.backgroundColor = _this.selectionBorderColor;\n            div.style.cursor = pos + '-resize';\n            if (_this.isNorth(pos)) {\n                div.style.top = '-3px';\n            }\n            else {\n                div.style.bottom = '-3px';\n            }\n            if (_this.isWest(pos)) {\n                div.style.left = '-3px';\n            }\n            else {\n                div.style.right = '-3px';\n            }\n            div.addEventListener('mousedown', _this.startResize);\n        });\n        var div = document.createElement('DIV');\n        resizeDiv.appendChild(div);\n        div.style.position = 'absolute';\n        div.style.top = '0';\n        div.style.left = '0';\n        div.style.right = '0';\n        div.style.bottom = '0';\n        div.style.border = 'solid 1px ' + this.selectionBorderColor;\n        div.style.pointerEvents = 'none';\n        // If the resizeDiv's image has a transform, apply it to the container\n        var selectedImage = this.getSelectedImage(resizeDiv);\n        if (selectedImage && selectedImage.style && selectedImage.style.transform) {\n            resizeDiv.style.transform = selectedImage.style.transform;\n            selectedImage.style.transform = '';\n        }\n        return resizeDiv;\n    };\n    ImageResize.prototype.removeResizeDiv = function (resizeDiv) {\n        var _this = this;\n        if (this.editor && this.editor.contains(resizeDiv)) {\n            [resizeDiv.previousSibling, resizeDiv.nextSibling].forEach(function (comment) {\n                if (comment && comment.nodeType == 8 /* Comment */) {\n                    _this.editor.deleteNode(comment);\n                }\n            });\n            this.editor.deleteNode(resizeDiv);\n        }\n    };\n    ImageResize.prototype.extractHtml = function (html) {\n        return html.replace(EXTRACT_HTML_REGEX, function () {\n            var groups = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                groups[_i] = arguments[_i];\n            }\n            return groups[1].replace(/(\\s*contenteditable=\"false\"(\\/?>)|contenteditable=\"false\"\\s*)/im, '$2');\n        });\n    };\n    ImageResize.prototype.getSelectedImage = function (div) {\n        var divWithImage = div || this.resizeDiv;\n        return divWithImage ? divWithImage.getElementsByTagName('IMG')[0] : null;\n    };\n    ImageResize.prototype.isNorth = function (direction) {\n        return direction && direction.substr(0, 1) == 'n';\n    };\n    ImageResize.prototype.isWest = function (direction) {\n        return direction && direction.substr(1, 1) == 'w';\n    };\n    return ImageResize;\n}());\nexports.default = ImageResize;\n//# sourceMappingURL=ImageResize.js.map","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"./plugins/Paste/index\"));\n//# sourceMappingURL=Paste.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Paste_1 = require(\"./Paste\");\nexports.Paste = Paste_1.default;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar convertPastedContentFromExcel_1 = require(\"./excelConverter/convertPastedContentFromExcel\");\nvar convertPastedContentFromWord_1 = require(\"./wordConverter/convertPastedContentFromWord\");\nvar roosterjs_editor_dom_1 = require(\"roosterjs-editor-dom\");\nvar constants_1 = require(\"./officeOnlineConverter/constants\");\nvar convertPastedContentFromWordOnline_1 = require(\"./officeOnlineConverter/convertPastedContentFromWordOnline\");\nvar WORD_ATTRIBUTE_NAME = 'xmlns:w';\nvar WORD_ATTRIBUTE_VALUE = 'urn:schemas-microsoft-com:office:word';\nvar EXCEL_ATTRIBUTE_NAME = 'xmlns:x';\nvar EXCEL_ATTRIBUTE_VALUE = 'urn:schemas-microsoft-com:office:excel';\nvar EXCEL_ONLINE_ATTRIBUTE_NAME = 'ProgId';\nvar EXCEL_ONLINE_ATTRIBUTE_VALUE = 'Excel.Sheet';\nvar GOOGLE_SHEET_NODE_NAME = 'google-sheets-html-origin';\n/**\n * Paste plugin, handles BeforePaste event and reformat some special content, including:\n * 1. Content copied from Word\n * 2. Content copied from Excel\n * 3. Content copied from Word Online or Onenote Online\n */\nvar Paste = /** @class */ (function () {\n    /**\n     * Create an instance of Paste\n     * @param preserved @deprecated Not used. Preserved parameter only used for compatibility with old code\n     * @param attributeCallbacks @deprecated A set of callbacks to help handle html attribute during sanitization\n     */\n    function Paste(preserved, attributeCallbacks) {\n        this.attributeCallbacks = attributeCallbacks;\n    }\n    /**\n     * Get a friendly name of  this plugin\n     */\n    Paste.prototype.getName = function () {\n        return 'Paste';\n    };\n    /**\n     * Initialize this plugin. This should only be called from Editor\n     * @param editor Editor instance\n     */\n    Paste.prototype.initialize = function (editor) {\n        this.editor = editor;\n    };\n    /**\n     * Dispose this plugin\n     */\n    Paste.prototype.dispose = function () {\n        this.editor = null;\n    };\n    /**\n     * Handle events triggered from editor\n     * @param event PluginEvent object\n     */\n    Paste.prototype.onPluginEvent = function (event) {\n        var _this = this;\n        if (event.eventType == 9 /* BeforePaste */) {\n            var htmlAttributes = event.htmlAttributes, fragment = event.fragment, sanitizingOption_1 = event.sanitizingOption;\n            var wacListElements = void 0;\n            if (htmlAttributes[WORD_ATTRIBUTE_NAME] == WORD_ATTRIBUTE_VALUE) {\n                // Handle HTML copied from Word\n                convertPastedContentFromWord_1.default(event);\n            }\n            else if (htmlAttributes[EXCEL_ATTRIBUTE_NAME] == EXCEL_ATTRIBUTE_VALUE ||\n                htmlAttributes[EXCEL_ONLINE_ATTRIBUTE_NAME] == EXCEL_ONLINE_ATTRIBUTE_VALUE) {\n                // Handle HTML copied from Excel\n                convertPastedContentFromExcel_1.default(event);\n            }\n            else if ((wacListElements = fragment.querySelectorAll(constants_1.WAC_IDENTIFING_SELECTOR))[0]) {\n                // Once it is known that the document is from WAC\n                // We need to remove the display property and margin from all the list item\n                wacListElements.forEach(function (el) {\n                    el.style.display = null;\n                    el.style.margin = null;\n                });\n                // call conversion function if the pasted content is from word online and\n                // has list element in the pasted content.\n                if (convertPastedContentFromWordOnline_1.isWordOnlineWithList(fragment)) {\n                    convertPastedContentFromWordOnline_1.default(fragment);\n                }\n            }\n            else if (fragment.querySelector(GOOGLE_SHEET_NODE_NAME)) {\n                sanitizingOption_1.additionalAllowedTags.push(GOOGLE_SHEET_NODE_NAME);\n            }\n            // TODO: Deprecate attributeCallbacks parameter\n            if (this.attributeCallbacks) {\n                Object.keys(this.attributeCallbacks).forEach(function (name) {\n                    roosterjs_editor_dom_1.chainSanitizerCallback(sanitizingOption_1.attributeCallbacks, name, _this.attributeCallbacks[name]);\n                });\n            }\n        }\n    };\n    /**\n     * @deprecated\n     * Paste into editor using passed in clipboardData with original format\n     * @param clipboardData The clipboardData to paste\n     */\n    Paste.prototype.pasteOriginal = function (clipboardData) {\n        this.editor.paste(clipboardData);\n    };\n    /**\n     * @deprecated\n     * Paste plain text into editor using passed in clipboardData\n     * @param clipboardData The clipboardData to paste\n     */\n    Paste.prototype.pasteText = function (clipboardData) {\n        this.editor.paste(clipboardData, true /*pasteAsText*/);\n    };\n    /**\n     * @deprecated\n     * Paste into editor using passed in clipboardData with curent format\n     * @param clipboardData The clipboardData to paste\n     */\n    Paste.prototype.pasteAndMergeFormat = function (clipboardData) {\n        this.editor.paste(clipboardData, false /*pasteAsText*/, true /*applyCurrentFormat*/);\n    };\n    return Paste;\n}());\nexports.default = Paste;\n//# sourceMappingURL=Paste.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar roosterjs_editor_dom_1 = require(\"roosterjs-editor-dom\");\nvar LAST_TD_END_REGEX = /<\\/\\s*td\\s*>((?!<\\/\\s*tr\\s*>)[\\s\\S])*$/i;\nvar LAST_TR_END_REGEX = /<\\/\\s*tr\\s*>((?!<\\/\\s*table\\s*>)[\\s\\S])*$/i;\nvar LAST_TR_REGEX = /<tr[^>]*>[^<]*/i;\nvar LAST_TABLE_REGEX = /<table[^>]*>[^<]*/i;\nvar DEFAULT_BORDER_STYLE = 'solid 1px #d4d4d4';\n/**\n * @internal\n * Convert pasted content from Excel, add borders when source doc doesn't have a border\n * @param doc HTML Document which contains the content from Excel\n */\nfunction convertPastedContentFromExcel(event) {\n    var _a;\n    var fragment = event.fragment, sanitizingOption = event.sanitizingOption, htmlBefore = event.htmlBefore;\n    var html = event.clipboardData.html;\n    if (html.match(LAST_TD_END_REGEX)) {\n        var trMatch = htmlBefore.match(LAST_TR_REGEX);\n        var tr = trMatch ? trMatch[0] : '<TR>';\n        html = tr + html + '</TR>';\n    }\n    if (html.match(LAST_TR_END_REGEX)) {\n        var tableMatch = htmlBefore.match(LAST_TABLE_REGEX);\n        var table = tableMatch ? tableMatch[0] : '<TABLE>';\n        html = table + html + '</TABLE>';\n    }\n    if (event.clipboardData.html != html) {\n        var doc = new DOMParser().parseFromString(html, 'text/html');\n        while (fragment.firstChild) {\n            fragment.removeChild(fragment.firstChild);\n        }\n        while ((_a = doc === null || doc === void 0 ? void 0 : doc.body) === null || _a === void 0 ? void 0 : _a.firstChild) {\n            fragment.appendChild(doc.body.firstChild);\n        }\n    }\n    roosterjs_editor_dom_1.chainSanitizerCallback(sanitizingOption.elementCallbacks, 'TD', function (element) {\n        if (element.style.borderStyle == 'none') {\n            element.style.border = DEFAULT_BORDER_STYLE;\n        }\n        return true;\n    });\n}\nexports.default = convertPastedContentFromExcel;\n//# sourceMappingURL=convertPastedContentFromExcel.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar roosterjs_editor_dom_1 = require(\"roosterjs-editor-dom\");\nvar wordConverter_1 = require(\"./wordConverter\");\nvar WordConverterArguments_1 = require(\"./WordConverterArguments\");\nvar converterUtils_1 = require(\"./converterUtils\");\n/**\n * @internal\n * Converts all the Word generated list items in the specified node into standard HTML UL and OL tags\n */\nfunction convertPastedContentFromWord(event) {\n    var sanitizingOption = event.sanitizingOption, fragment = event.fragment;\n    // Preserve <o:p> when its innerHTML is \"&nbsp;\" to avoid dropping an empty line\n    roosterjs_editor_dom_1.chainSanitizerCallback(sanitizingOption.elementCallbacks, 'O:P', function (element) {\n        element.innerHTML = '&nbsp;';\n        return true;\n    });\n    var wordConverter = wordConverter_1.createWordConverter();\n    // First find all the nodes that we need to check for list item information\n    // This call will return all the p and header elements under the root node.. These are the elements that\n    // Word uses a list items, so we'll only process them and avoid walking the whole tree.\n    var elements = fragment.querySelectorAll('p');\n    if (elements.length > 0) {\n        wordConverter.wordConverterArgs = WordConverterArguments_1.createWordConverterArguments(elements);\n        if (converterUtils_1.processNodesDiscovery(wordConverter)) {\n            converterUtils_1.processNodeConvert(wordConverter);\n        }\n    }\n}\nexports.default = convertPastedContentFromWord;\n//# sourceMappingURL=convertPastedContentFromWord.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar CustomData_1 = require(\"./CustomData\");\n/**\n * @internal\n * create an empty WordConverter\n */\nfunction createWordConverter() {\n    return {\n        nextUniqueId: 1,\n        numBulletsConverted: 0,\n        numNumberedConverted: 0,\n        wordConverterArgs: null,\n        customData: CustomData_1.createCustomData(),\n    };\n}\nexports.createWordConverter = createWordConverter;\n//# sourceMappingURL=wordConverter.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar LevelLists_1 = require(\"./LevelLists\");\n/**\n * @internal\n * create an empty WordConverterArguments\n */\nfunction createWordConverterArguments(nodes) {\n    return {\n        nodes: nodes,\n        currentIndex: 0,\n        lists: {},\n        listItems: [],\n        currentListIdsByLevels: [LevelLists_1.createLevelLists()],\n        lastProcessedItem: null,\n    };\n}\nexports.createWordConverterArguments = createWordConverterArguments;\n//# sourceMappingURL=WordConverterArguments.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar LevelLists_1 = require(\"./LevelLists\");\nvar CustomData_1 = require(\"./CustomData\");\nvar roosterjs_editor_dom_1 = require(\"roosterjs-editor-dom\");\n/** Word list metadata style name */\nvar LOOKUP_DEPTH = 5;\n/** Name for the word list id property in the custom data */\nvar UNIQUE_LIST_ID_CUSTOM_DATA = 'UniqueListId';\n/** Word list metadata style name */\nvar MSO_LIST_STYLE_NAME = 'mso-list';\n/** Regular expression to match line breaks */\nvar LINE_BREAKS = /[\\n|\\r]/gi;\n/**\n * @internal\n * Handles the pass 1: Discovery\n * During discovery, we'll parse the metadata out of the elements and store it in the list items dictionary.\n * We'll detect cases where the list items for a particular ordered list are not next to each other. Word does these\n * for numbered headers, and we don't want to convert those, because the numbering would be completely wrong.\n */\nfunction processNodesDiscovery(wordConverter) {\n    var args = wordConverter.wordConverterArgs;\n    while (args.currentIndex < args.nodes.length) {\n        var node = args.nodes.item(args.currentIndex);\n        // Try to get the list metadata for the specified node\n        var itemMetadata = getListItemMetadata(node);\n        if (itemMetadata) {\n            var levelInfo = args.currentListIdsByLevels[itemMetadata.level - 1] || LevelLists_1.createLevelLists();\n            args.currentListIdsByLevels[itemMetadata.level - 1] = levelInfo;\n            // We need to drop some list information if this is not an item next to another\n            if (args.lastProcessedItem && getRealPreviousSibling(node) != args.lastProcessedItem) {\n                // This list item is not next to the previous one. This means that there is some content in between them\n                // so we need to reset our list of list ids per level\n                resetCurrentLists(args);\n            }\n            // Get the list metadata for the list that will hold this item\n            var listMetadata = levelInfo.listsMetadata[itemMetadata.wordListId];\n            if (!listMetadata) {\n                // Get the first item fake bullet.. This will be used later to check what is the right type of list\n                var firstFakeBullet = getFakeBulletText(node, LOOKUP_DEPTH);\n                // This is a the first item of a list.. We'll create the list metadata using the information\n                // we already have from this first item\n                listMetadata = {\n                    numberOfItems: 0,\n                    uniqueListId: wordConverter.nextUniqueId++,\n                    firstFakeBullet: firstFakeBullet,\n                    // If the bullet we got is emtpy or not found, we ignore the list out.. this means\n                    // that this is not an item we need to convert of that the format doesn't match what\n                    // we are expecting\n                    ignore: !firstFakeBullet || firstFakeBullet.length == 0,\n                    // We'll use the first fake bullet to try to figure out which type of list we create. If this list has a second\n                    // item, we'll perform a better comparasion, but for one item lists, this will be check that will determine the list type\n                    tagName: getFakeBulletTagName(firstFakeBullet),\n                };\n                levelInfo.listsMetadata[itemMetadata.wordListId] = listMetadata;\n                args.lists[listMetadata.uniqueListId.toString()] = listMetadata;\n            }\n            else if (!listMetadata.ignore && listMetadata.numberOfItems == 1) {\n                // This is the second item we've seen for this list.. we'll compare the 2 fake bullet\n                // items we have an decide if we create ordered or unordered lists based on this.\n                // This is the best way we can do this since we cannot read the metadata that Word\n                // puts in the head of the HTML...\n                var secondFakeBullet = getFakeBulletText(node, LOOKUP_DEPTH);\n                listMetadata.tagName =\n                    listMetadata.firstFakeBullet == secondFakeBullet ? 'UL' : 'OL';\n            }\n            // Set the unique id to the list\n            itemMetadata.uniqueListId = listMetadata.uniqueListId;\n            // Check if we need to ignore this list... we'll either know already that we need to ignore\n            // it, or we'll know it because the previous list items are not next to this one\n            if (listMetadata.ignore ||\n                (listMetadata.tagName == 'OL' &&\n                    listMetadata.numberOfItems > 0 &&\n                    levelInfo.currentUniqueListId != itemMetadata.uniqueListId)) {\n                // We need to ignore this item... and we also need to forget about the lists that\n                // are not at the root level\n                listMetadata.ignore = true;\n                args.currentListIdsByLevels[0].currentUniqueListId = -1;\n                args.currentListIdsByLevels = args.currentListIdsByLevels.slice(0, 1);\n            }\n            else {\n                // This is an item we don't need to ignore... If added lists deep under this one before\n                // we'll drop their ids from the list of ids per level.. this is because this list item\n                // breaks the deeper lists.\n                if (args.currentListIdsByLevels.length > itemMetadata.level) {\n                    args.currentListIdsByLevels = args.currentListIdsByLevels.slice(0, itemMetadata.level);\n                }\n                levelInfo.currentUniqueListId = itemMetadata.uniqueListId;\n                // Add the list item into the list of items to be processed\n                args.listItems.push(itemMetadata);\n                listMetadata.numberOfItems++;\n            }\n            args.lastProcessedItem = node;\n        }\n        else {\n            // Here, we know that this is not a list item, but we'll want to check if it is one \"no bullet\" list items...\n            // these can be created by creating a bullet and hitting delete on it it... The content will continue to be indented, but there will\n            // be no bullet and the list will continue correctly after that. Visually, it looks like the previous item has multiple lines, but\n            // the HTML generated has multiple paragraphs with the same class. We'll merge these when we find them, so the logic doesn't skips\n            // the list conversion thinking that the list items are not together...\n            var last = args.lastProcessedItem;\n            if (last &&\n                getRealPreviousSibling(node) == last &&\n                node.tagName == last.tagName &&\n                node.className == last.className) {\n                // Add 2 line breaks and move all the nodes to the last item\n                last.appendChild(last.ownerDocument.createElement('br'));\n                last.appendChild(last.ownerDocument.createElement('br'));\n                while (node.firstChild != null) {\n                    last.appendChild(node.firstChild);\n                }\n                // Remove the item that we don't need anymore\n                node.parentNode.removeChild(node);\n            }\n        }\n        // Move to the next element are return true if more elements need to be processed\n        args.currentIndex++;\n    }\n    return args.listItems.length > 0;\n}\nexports.processNodesDiscovery = processNodesDiscovery;\n/**\n * @internal\n * Handles the pass 2: Conversion\n * During conversion, we'll go over the elements that belong to a list that we've marked as a list to convert, and we'll perform the\n * conversion needed\n */\nfunction processNodeConvert(wordConverter) {\n    var args = wordConverter.wordConverterArgs;\n    args.currentIndex = 0;\n    while (args.currentIndex < args.listItems.length) {\n        var metadata = args.listItems[args.currentIndex];\n        var node = metadata.originalNode;\n        var listMetadata = args.lists[metadata.uniqueListId.toString()];\n        if (!listMetadata.ignore) {\n            // We have a list item that we need to convert, get or create the list\n            // that hold this item out\n            var list = getOrCreateListForNode(wordConverter, node, metadata, listMetadata);\n            if (list) {\n                // Clean the element out.. this call gets rid of the fake bullet and unneeded nodes\n                cleanupListIgnore(node, LOOKUP_DEPTH);\n                // Create a new list item and transfer the children\n                var li = node.ownerDocument.createElement('LI');\n                while (node.firstChild) {\n                    li.appendChild(node.firstChild);\n                }\n                // Append the list item into the list\n                list.appendChild(li);\n                // Remove the node we just converted\n                node.parentNode.removeChild(node);\n                if (listMetadata.tagName == 'UL') {\n                    wordConverter.numBulletsConverted++;\n                }\n                else {\n                    wordConverter.numNumberedConverted++;\n                }\n            }\n        }\n        args.currentIndex++;\n    }\n    return wordConverter.numBulletsConverted > 0 || wordConverter.numNumberedConverted > 0;\n}\nexports.processNodeConvert = processNodeConvert;\n/**\n * Gets or creates the list (UL or OL) that holds this item out based on the\n * items content and the specified metadata\n */\nfunction getOrCreateListForNode(wordConverter, node, metadata, listMetadata) {\n    // First get the last list next to this node under the specified level. This code\n    // path will return the list or will create lists if needed\n    var list = recurringGetOrCreateListAtNode(node, metadata.level, listMetadata);\n    // Here use the unique list ID to detect if we have the right list...\n    // it is possible to have 2 different lists next to each other with different formats, so\n    // we want to detect this an create separate lists for those cases\n    var listId = CustomData_1.getObject(wordConverter.customData, list, UNIQUE_LIST_ID_CUSTOM_DATA);\n    // If we have a list with and ID, but the ID is different than the ID for this list item, this\n    // is a completely new list, so we'll append a new list for that\n    if ((listId && listId != metadata.uniqueListId) || (!listId && list.firstChild)) {\n        var newList = node.ownerDocument.createElement(listMetadata.tagName);\n        list.parentNode.insertBefore(newList, list.nextSibling);\n        list = newList;\n    }\n    // Set the list id into the custom data\n    CustomData_1.setObject(wordConverter.customData, list, UNIQUE_LIST_ID_CUSTOM_DATA, metadata.uniqueListId);\n    // This call will convert the list if needed to the right type of list required. This can happen\n    // on the cases where the first list item for this list is located after a deeper list. for that\n    // case, we will have created a UL for it, and we may need to convert it\n    return convertListIfNeeded(wordConverter, list, listMetadata);\n}\n/**\n * Converts the list between UL and OL if needed, by using the fake bullet and\n * information already stored in the list itself\n */\nfunction convertListIfNeeded(wordConverter, list, listMetadata) {\n    // Check if we need to convert the list out\n    if (listMetadata.tagName != roosterjs_editor_dom_1.getTagOfNode(list)) {\n        // We have the wrong list type.. convert it, set the id again and tranfer all the childs\n        var newList = list.ownerDocument.createElement(listMetadata.tagName);\n        CustomData_1.setObject(wordConverter.customData, newList, UNIQUE_LIST_ID_CUSTOM_DATA, CustomData_1.getObject(wordConverter.customData, list, UNIQUE_LIST_ID_CUSTOM_DATA));\n        while (list.firstChild) {\n            newList.appendChild(list.firstChild);\n        }\n        list.parentNode.insertBefore(newList, list);\n        list.parentNode.removeChild(list);\n        list = newList;\n    }\n    return list;\n}\n/**\n * Gets or creates the specified list\n */\nfunction recurringGetOrCreateListAtNode(node, level, listMetadata) {\n    var parent = null;\n    var possibleList;\n    if (level == 1) {\n        // Root case, we'll check if the list is the previous sibling of the node\n        possibleList = getRealPreviousSibling(node);\n    }\n    else {\n        // If we get here, we are looking for level 2 or deeper... get the upper list\n        // and check if the last element is a list\n        parent = recurringGetOrCreateListAtNode(node, level - 1, null);\n        possibleList = parent.lastChild;\n    }\n    // Check the element that we got and verify that it is a list\n    if (possibleList && possibleList.nodeType == 1 /* Element */) {\n        var tag = roosterjs_editor_dom_1.getTagOfNode(possibleList);\n        if (tag == 'UL' || tag == 'OL') {\n            // We have a list.. use it\n            return possibleList;\n        }\n    }\n    // If we get here, it means we don't have a list and we need to create one\n    // this code path will always create new lists as UL lists\n    var newList = node.ownerDocument.createElement(listMetadata ? listMetadata.tagName : 'UL');\n    if (level == 1) {\n        // For level 1, we'll insert the list beofre the node\n        node.parentNode.insertBefore(newList, node);\n    }\n    else {\n        // Any level 2 or above, we insert the list as the last\n        // child of the upper level list\n        parent.appendChild(newList);\n    }\n    return newList;\n}\n/**\n * Cleans up the node children by removing the childs marked as mso-list: Ignore.\n * This nodes hold the fake bullet information that Word puts in and when\n * conversion is happening, we want to get rid of these elements\n */\nfunction cleanupListIgnore(node, levels) {\n    var nodesToRemove = [];\n    for (var child = node.firstChild; child; child = child.nextSibling) {\n        // Clean up the item internally first if we need to based on the number of levels\n        if (child.nodeType == 1 /* Element */ && levels > 1) {\n            cleanupListIgnore(child, levels - 1);\n        }\n        // Try to convert word comments into ignore elements if we haven't done so for this element\n        child = fixWordListComments(child, true /*removeComments*/);\n        // Check if we can remove this item out\n        if (isEmptySpan(child) || isIgnoreNode(child)) {\n            nodesToRemove.push(child);\n        }\n    }\n    nodesToRemove.forEach(function (child) { return node.removeChild(child); });\n}\n/**\n * Reads the word list metadada out of the specified node. If the node\n * is not a Word list item, it returns null.\n */\nfunction getListItemMetadata(node) {\n    if (node.nodeType == 1 /* Element */) {\n        var listatt = getStyleValue(node, MSO_LIST_STYLE_NAME);\n        if (listatt && listatt.length > 0) {\n            try {\n                // Word mso-list property holds 3 space separated values in the following format: lst1 level1 lfo0\n                // Where:\n                // (0) List identified for the metadata in the &lt;head&gt; of the document. We cannot read the &lt;head&gt; metada\n                // (1) Level of the list. This also maps to the &lt;head&gt; metadata that we cannot read, but\n                // for almost all cases, it maps to the list identation (or level). We'll use it as the\n                // list indentation value\n                // (2) Contains a specific list identifier.\n                // Example value: \"l0 level1 lfo1\"\n                var listprops = listatt.split(' ');\n                if (listprops.length == 3) {\n                    return {\n                        level: parseInt(listprops[1].substr('level'.length)),\n                        wordListId: listatt,\n                        originalNode: node,\n                        uniqueListId: 0,\n                    };\n                }\n            }\n            catch (e) { }\n        }\n    }\n    return null;\n}\nfunction isFakeBullet(fakeBullet) {\n    return ['o', '·', '§', '-'].indexOf(fakeBullet) >= 0;\n}\n/** Given a fake bullet text, returns the type of list that should be used for it */\nfunction getFakeBulletTagName(fakeBullet) {\n    return isFakeBullet(fakeBullet) ? 'UL' : 'OL';\n}\n/**\n * Finds the fake bullet text out of the specified node and returns it. For images, it will return\n * a bullet string. If not found, it returns null...\n */\nfunction getFakeBulletText(node, levels) {\n    // Word uses the following format for their bullets:\n    // &lt;p style=\"mso-list:l1 level1 lfo2\"&gt;\n    // &lt;span style=\"...\"&gt;\n    // &lt;span style=\"mso-list:Ignore\"&gt;1.&lt;span style=\"...\"&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;/span&gt;\n    // &lt;/span&gt;\n    // Content here...\n    // &lt;/p&gt;\n    //\n    // Basically, we need to locate the mso-list:Ignore SPAN, which holds either one text or image node. That\n    // text or image node will be the fake bullet we are looking for\n    var result = null;\n    var child = node.firstChild;\n    while (!result && child) {\n        // First, check if we need to convert the Word list comments into real elements\n        child = fixWordListComments(child, true /*removeComments*/);\n        // Check if this is the node that holds the fake bullets (mso-list: Ignore)\n        if (isIgnoreNode(child)) {\n            // Yes... this is the node that holds either the text or image data\n            result = child.textContent.trim();\n            // This is the case for image case\n            if (result.length == 0) {\n                result = 'o';\n            }\n        }\n        else if (child.nodeType == 1 /* Element */ && levels > 1) {\n            // If this is an element and we are not in the last level, try to get the fake bullet\n            // out of the child\n            result = getFakeBulletText(child, levels - 1);\n        }\n        child = child.nextSibling;\n    }\n    return result;\n}\n/**\n * If the specified element is a Word List comments, this code verifies and fixes\n * the markup when needed to ensure that Chrome bullet conversions work as expected\n * -----\n * We'll convert &lt;!--[if !supportLists]--&gt; and &lt;!--[endif]--&gt; comments into\n * &lt;span style=\"mso-list:Ignore\"&gt;&lt;/span&gt;... Chrome has a bug where it drops the\n * styles of the span, but we'll use these comments to recreate them out\n */\nfunction fixWordListComments(child, removeComments) {\n    if (child.nodeType == 8 /* Comment */) {\n        var value = child.data;\n        if (value && value.trim().toLowerCase() == '[if !supportlists]') {\n            // We have a list ignore start, find the end.. We know is not more than\n            // 3 nodes away, so we'll optimize our checks\n            var nextElement = child;\n            var endComment = null;\n            for (var j = 0; j < 4; j++) {\n                nextElement = getRealNextSibling(nextElement);\n                if (!nextElement) {\n                    break;\n                }\n                if (nextElement.nodeType == 8 /* Comment */) {\n                    value = nextElement.data;\n                    if (value && value.trim().toLowerCase() == '[endif]') {\n                        endComment = nextElement;\n                        break;\n                    }\n                }\n            }\n            // if we found the end node, wrap everything out\n            if (endComment) {\n                var newSpan = child.ownerDocument.createElement('span');\n                newSpan.setAttribute('style', 'mso-list: ignore');\n                nextElement = getRealNextSibling(child);\n                while (nextElement != endComment) {\n                    nextElement = nextElement.nextSibling;\n                    newSpan.appendChild(nextElement.previousSibling);\n                }\n                // Insert the element out and use that one as the current child\n                endComment.parentNode.insertBefore(newSpan, endComment);\n                // Remove the comments out if the call specified it out\n                if (removeComments) {\n                    child.parentNode.removeChild(child);\n                    endComment.parentNode.removeChild(endComment);\n                }\n                // Last, make sure we return the new element out instead of the comment\n                child = newSpan;\n            }\n        }\n    }\n    return child;\n}\n/** Finds the real previous sibling, ignoring emtpy text nodes */\nfunction getRealPreviousSibling(node) {\n    var prevSibling = node;\n    do {\n        prevSibling = prevSibling.previousSibling;\n    } while (prevSibling && isEmptyTextNode(prevSibling));\n    return prevSibling;\n}\n/** Finds the real next sibling, ignoring empty text nodes */\nfunction getRealNextSibling(node) {\n    var nextSibling = node;\n    do {\n        nextSibling = nextSibling.nextSibling;\n    } while (nextSibling && isEmptyTextNode(nextSibling));\n    return nextSibling;\n}\n/**\n * Checks if the specified node is marked as a mso-list: Ignore. These\n * nodes need to be ignored when a list item is converted into standard\n * HTML lists\n */\nfunction isIgnoreNode(node) {\n    if (node.nodeType == 1 /* Element */) {\n        var listatt = getStyleValue(node, MSO_LIST_STYLE_NAME);\n        if (listatt && listatt.length > 0 && listatt.trim().toLowerCase() == 'ignore') {\n            return true;\n        }\n    }\n    return false;\n}\n/** Checks if the specified node is an empty span. */\nfunction isEmptySpan(node) {\n    return roosterjs_editor_dom_1.getTagOfNode(node) == 'SPAN' && !node.firstChild;\n}\n/** Reads the specified style value from the node */\nfunction getStyleValue(node, styleName) {\n    // Word uses non-standard names for the metadata that puts in the style of the element...\n    // Most browsers will not provide the information for those unstandard values throug the node.style\n    // property, so the only reliable way to read them is to get the attribute directly and do\n    // the required parsing..\n    var textStyle = node.getAttribute('style');\n    if (textStyle && textStyle.length > 0 && textStyle.indexOf(styleName) >= 0) {\n        // Split all the CSS name: value pairs\n        var inStyles = textStyle.split(';');\n        for (var i = 0; i < inStyles.length; i++) {\n            // Split the name and value\n            var nvpair = inStyles[i].split(':');\n            if (nvpair.length == 2 && nvpair[0].trim() == styleName) {\n                return nvpair[1].trim();\n            }\n        }\n    }\n    // As a backup mechanism, we'll still try to get the value from the style object\n    // Dictionary styles = (Dictionary)(object)node.Style;\n    // return (string)styles[styleName];\n    return null;\n}\n/** Checks if the node is an empty text node that can be ignored */\nfunction isEmptyTextNode(node) {\n    // No node is empty\n    if (!node) {\n        return true;\n    }\n    // Empty text node is empty\n    if (node.nodeType == 3 /* Text */) {\n        var value = node.nodeValue;\n        value = value.replace(LINE_BREAKS, '');\n        return value.trim().length == 0;\n    }\n    // Span or Font with an empty child node is empty\n    var tagName = roosterjs_editor_dom_1.getTagOfNode(node);\n    if (node.firstChild == node.lastChild && (tagName == 'SPAN' || tagName == 'FONT')) {\n        return isEmptyTextNode(node.firstChild);\n    }\n    // If not found, then this is not empty\n    return false;\n}\n/** Resets the list */\nfunction resetCurrentLists(args) {\n    for (var i = 0; i < args.currentListIdsByLevels.length; i++) {\n        var ll = args.currentListIdsByLevels[i];\n        if (ll) {\n            ll.currentUniqueListId = -1;\n        }\n    }\n}\n//# sourceMappingURL=converterUtils.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ListItemBlock_1 = require(\"./ListItemBlock\");\nvar constants_1 = require(\"./constants\");\nvar roosterjs_editor_dom_1 = require(\"roosterjs-editor-dom\");\n/**\n * @internal\n */\nfunction isWordOnlineWithList(fragment) {\n    return !!(fragment && fragment.querySelector(constants_1.WORD_ONLINE_IDENTIFYING_SELECTOR));\n}\nexports.isWordOnlineWithList = isWordOnlineWithList;\n// Word Online pasted content DOM structure as of July 12th 2019\n//<html>\n//  <body>\n//      <div class='OutlineGroup'>  ----------> this layer may exist depend on the content user paste\n//          <div class=\"OutlineElement\">  ----------> text content\n//              <p></p>\n//          </div>\n//          <div class=\"ListItemWrapper\">  ----------> list items: for unordered list, all the items on the same level is under the same wrapper\n//              <ul>                                       list items in the same list can be divided into different ListItemWrapper\n//                  <li></li>                              list items in the same list can also be divided into different Outline Group;\n//                  <li></li>\n//              </ul>\n//          </div>\n//      </div>\n//      <div class='OutlineGroup'>\n//          <div class=\"ListItemWrapper\">  ----------> list items: for ordered list, each items has it's own wrapper\n//              <ol>\n//                  <li></li>\n//              </ol>\n//          </div>\n//          <div class=\"ListItemWrapper\">\n//              <ol>\n//                  <li></li>\n//              </ol>\n//          </div>\n//      </div>\n//  </body>\n//</html>\n//\n/**\n * @internal\n * Convert text copied from word online into text that's workable with rooster editor\n * @param fragment Document fragment that is being pasted into editor.\n */\nfunction convertPastedContentFromWordOnline(fragment) {\n    sanitizeListItemContainer(fragment);\n    var listItemBlocks = getListItemBlocks(fragment);\n    listItemBlocks.forEach(function (itemBlock) {\n        // There are cases where consecutive List Elements are seperated into different divs:\n        // <div>\n        //   <div>\n        //      <ol></ol>\n        //   </div>\n        //   <div>\n        //      <ol></ol>\n        //   </div>\n        // </div>\n        // <div>\n        //   <div>\n        //      <ol></ol>\n        //   </div>\n        // </div>\n        // in the above case we want to collapse the two root level div into one and unwrap the list item divs.\n        // after the following flattening the list will become following:\n        //\n        // <div>\n        //    <ol></ol>\n        // </div>\n        // <div>\n        //    <ol></ol>\n        // </div>\n        // <div>\n        //    <ol></ol>\n        // </div>\n        // Then we are start processing.\n        flattenListBlock(fragment, itemBlock);\n        // Find the node to insertBefore, which is next sibling node of the end of a listItemBlock.\n        itemBlock.insertPositionNode = itemBlock.endElement.nextSibling;\n        var convertedListElement;\n        var doc = fragment.ownerDocument;\n        itemBlock.listItemContainers.forEach(function (listItemContainer) {\n            var listType = getContainerListType(listItemContainer); // list type that is contained by iterator.\n            // Initialize processed element with propery listType if this is the first element\n            if (!convertedListElement) {\n                convertedListElement = doc.createElement(listType);\n            }\n            // Get all list items(<li>) in the current iterator element.\n            var currentListItems = listItemContainer.querySelectorAll('li');\n            currentListItems.forEach(function (item) {\n                // If item is in root level and the type of list changes then\n                // insert the current list into body and then reinitialize the convertedListElement\n                // Word Online is using data-aria-level to determine the the depth of the list item.\n                var itemLevel = parseInt(item.getAttribute('data-aria-level'));\n                // In first level list, there are cases where a consecutive list item divs may have different list type\n                // When that happens we need to insert the processed elements into the document, then change the list type\n                // and keep the processing going.\n                if (roosterjs_editor_dom_1.getTagOfNode(convertedListElement) != listType && itemLevel == 1) {\n                    insertConvertedListToDoc(convertedListElement, fragment, itemBlock);\n                    convertedListElement = doc.createElement(listType);\n                }\n                insertListItem(convertedListElement, item, listType, doc);\n            });\n        });\n        insertConvertedListToDoc(convertedListElement, fragment, itemBlock);\n        // Once we finish the process the list items and put them into a list.\n        // After inserting the processed element,\n        // we need to remove all the non processed node from the parent node.\n        var parentContainer = itemBlock.startElement.parentNode;\n        if (parentContainer) {\n            itemBlock.listItemContainers.forEach(function (listItemContainer) {\n                parentContainer.removeChild(listItemContainer);\n            });\n        }\n    });\n}\nexports.default = convertPastedContentFromWordOnline;\n/**\n * The node processing is based on the premise of only ol/ul is in ListContainerWrapper class\n * However the html might be melformed, this function is to split all the other elements out of ListContainerWrapper\n * @param fragment pasted document that contains all the list element.\n */\nfunction sanitizeListItemContainer(fragment) {\n    var listItemContainerListEl = fragment.querySelectorAll(constants_1.WORD_ORDERED_LIST_SELECTOR + \", \" + constants_1.WORD_UNORDERED_LIST_SELECTOR);\n    listItemContainerListEl.forEach(function (el) {\n        var replaceRegex = new RegExp(\"\\\\b\" + constants_1.LIST_CONTAINER_ELEMENT_CLASS_NAME + \"\\\\b\", 'g');\n        if (el.previousSibling) {\n            var prevParent = roosterjs_editor_dom_1.splitParentNode(el, true);\n            prevParent.className = prevParent.className.replace(replaceRegex, '');\n        }\n        if (el.nextSibling) {\n            var nextParent = roosterjs_editor_dom_1.splitParentNode(el, false);\n            nextParent.className = nextParent.className.replace(replaceRegex, '');\n        }\n    });\n}\n/**\n * Take all the list items in the document, and group the consecutive list times in a list block;\n * @param fragment pasted document that contains all the list element.\n */\nfunction getListItemBlocks(fragment) {\n    var listElements = fragment.querySelectorAll('.' + constants_1.LIST_CONTAINER_ELEMENT_CLASS_NAME);\n    var result = [];\n    var curListItemBlock;\n    for (var i = 0; i < listElements.length; i++) {\n        var curItem = listElements[i];\n        if (!curListItemBlock) {\n            curListItemBlock = ListItemBlock_1.createListItemBlock(curItem);\n        }\n        else {\n            var listItemContainers = curListItemBlock.listItemContainers;\n            var lastItemInCurBlock = listItemContainers[listItemContainers.length - 1];\n            if (curItem == lastItemInCurBlock.nextSibling ||\n                roosterjs_editor_dom_1.getFirstLeafNode(curItem) ==\n                    roosterjs_editor_dom_1.getNextLeafSibling(lastItemInCurBlock.parentNode, lastItemInCurBlock)) {\n                listItemContainers.push(curItem);\n                curListItemBlock.endElement = curItem;\n            }\n            else {\n                curListItemBlock.endElement = lastItemInCurBlock;\n                result.push(curListItemBlock);\n                curListItemBlock = ListItemBlock_1.createListItemBlock(curItem);\n            }\n        }\n    }\n    if (curListItemBlock.listItemContainers.length > 0) {\n        result.push(curListItemBlock);\n    }\n    return result;\n}\n/**\n * Flatten the list items, so that all the consecutive list items are under the same parent.\n * @param fragment Root element of that contains the element.\n * @param listItemBlock The list item block needed to be flattened.\n */\nfunction flattenListBlock(fragment, listItemBlock) {\n    var collapsedListItemSections = roosterjs_editor_dom_1.collapseNodes(fragment, listItemBlock.startElement, listItemBlock.endElement, true);\n    collapsedListItemSections.forEach(function (section) {\n        if (roosterjs_editor_dom_1.getTagOfNode(section.firstChild) == 'DIV') {\n            roosterjs_editor_dom_1.unwrap(section);\n        }\n    });\n}\n/**\n * Get the list type that the container contains. If there is no list in the container\n * return null;\n * @param listItemContainer Container that contains a list\n */\nfunction getContainerListType(listItemContainer) {\n    var tag = roosterjs_editor_dom_1.getTagOfNode(listItemContainer.firstChild);\n    return tag == constants_1.UNORDERED_LIST_TAG_NAME || tag == constants_1.ORDERED_LIST_TAG_NAME ? tag : null;\n}\n/**\n * Insert list item into the correct position of a list\n * @param listRootElement Root element of the list that is accepting a coming element.\n * @param itemToInsert List item that needed to be inserted.\n * @param listType Type of list(ul/ol)\n */\nfunction insertListItem(listRootElement, itemToInsert, listType, doc) {\n    if (!listType) {\n        return;\n    }\n    // Get item level from 'data-aria-level' attribute\n    var itemLevel = parseInt(itemToInsert.getAttribute('data-aria-level'));\n    var curListLevel = listRootElement; // Level iterator to find the correct place for the current element.\n    // if the itemLevel is 1 it means the level iterator is at the correct place.\n    while (itemLevel > 1) {\n        if (!curListLevel.firstChild) {\n            // If the current level is empty, create empty list within the current level\n            // then move the level iterator into the next level.\n            curListLevel.append(doc.createElement(listType));\n            curListLevel = curListLevel.firstElementChild;\n        }\n        else {\n            // If the current level is not empty, the last item in the needs to be a UL or OL\n            // and the level iterator should move to the UL/OL at the last position.\n            var lastChild = curListLevel.lastElementChild;\n            var lastChildTag = roosterjs_editor_dom_1.getTagOfNode(lastChild);\n            if (lastChildTag == constants_1.UNORDERED_LIST_TAG_NAME || lastChildTag == constants_1.ORDERED_LIST_TAG_NAME) {\n                // If the last child is a list(UL/OL), then move the level iterator to last child.\n                curListLevel = lastChild;\n            }\n            else {\n                // If the last child is not a list, then append a new list to the level\n                // and move the level iterator to the new level.\n                curListLevel.append(doc.createElement(listType));\n                curListLevel = curListLevel.lastElementChild;\n            }\n        }\n        itemLevel--;\n    }\n    // Once the level iterator is at the right place, then append the list item in the level.\n    curListLevel.appendChild(itemToInsert);\n}\n/**\n * Insert the converted list item into the correct place.\n * @param convertedListElement List element that is converted from list item block\n * @param fragment Root element of that contains the converted listItemBlock\n * @param listItemBlock List item block that was converted.\n */\nfunction insertConvertedListToDoc(convertedListElement, fragment, listItemBlock) {\n    if (!convertedListElement) {\n        return;\n    }\n    var insertPositionNode = listItemBlock.insertPositionNode;\n    if (insertPositionNode) {\n        var parentElement = insertPositionNode.parentElement;\n        if (parentElement) {\n            parentElement.insertBefore(convertedListElement, insertPositionNode);\n        }\n    }\n    else {\n        var parentElement = listItemBlock.startElement.parentElement;\n        if (parentElement) {\n            parentElement.appendChild(convertedListElement);\n        }\n        else {\n            fragment.appendChild(convertedListElement);\n        }\n    }\n}\n//# sourceMappingURL=convertPastedContentFromWordOnline.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * @internal\n * Initialize an empty ListItemBlock\n */\nfunction createListItemBlock(listItem) {\n    if (listItem === void 0) { listItem = null; }\n    return {\n        startElement: listItem,\n        endElement: listItem,\n        insertPositionNode: null,\n        listItemContainers: listItem ? [listItem] : [],\n    };\n}\nexports.createListItemBlock = createListItemBlock;\n//# sourceMappingURL=ListItemBlock.js.map","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"./plugins/Picker/index\"));\n//# sourceMappingURL=Picker.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar PickerPlugin_1 = require(\"./PickerPlugin\");\nexports.PickerPlugin = PickerPlugin_1.default;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar roosterjs_editor_dom_1 = require(\"roosterjs-editor-dom\");\nvar roosterjs_editor_api_1 = require(\"roosterjs-editor-api\");\nvar roosterjs_editor_core_1 = require(\"roosterjs-editor-core\");\n// Character codes.\n// IE11 uses different character codes. which are noted below.\n// If adding a new key, test in IE to figure out what the code is.\nvar BACKSPACE_CHARCODE = 'Backspace';\nvar TAB_CHARCODE = 'Tab';\nvar ENTER_CHARCODE = 'Enter';\nvar ESC_CHARCODE = !roosterjs_editor_dom_1.Browser.isIE ? 'Escape' : 'Esc';\nvar LEFT_ARROW_CHARCODE = !roosterjs_editor_dom_1.Browser.isIE ? 'ArrowLeft' : 'Left';\nvar UP_ARROW_CHARCODE = !roosterjs_editor_dom_1.Browser.isIE ? 'ArrowUp' : 'Up';\nvar RIGHT_ARROW_CHARCODE = !roosterjs_editor_dom_1.Browser.isIE ? 'ArrowRight' : 'Right';\nvar DOWN_ARROW_CHARCODE = !roosterjs_editor_dom_1.Browser.isIE ? 'ArrowDown' : 'Down';\nvar DELETE_CHARCODE = !roosterjs_editor_dom_1.Browser.isIE ? 'Delete' : 'Del';\n// Input event input types.\nvar DELETE_CONTENT_BACKWARDS_INPUT_TYPE = 'deleteContentBackwards';\n// Unidentified key, the code for Android keyboard events.\nvar UNIDENTIFIED_KEY = 'Unidentified';\n// the char code for Android keyboard events on Webview below 51.\nvar UNIDENTIFIED_CODE = [0, 229];\n/**\n * PickerPlugin represents a plugin of editor which can handle picker related behaviors, including\n * - Show picker when special trigger key is pressed\n * - Hide picker\n * - Change selection in picker by Up/Down/Left/Right\n * - Apply selected item in picker\n *\n * PickerPlugin doesn't provide any UI, it just wraps related DOM events and invoke callback functions.\n * To show a picker UI, you need to build your own UI component. Please reference to\n * https://github.com/microsoft/roosterjs/tree/master/publish/samplesite/scripts/controls/samplepicker\n */\nvar PickerPlugin = /** @class */ (function () {\n    function PickerPlugin(dataProvider, pickerOptions) {\n        this.dataProvider = dataProvider;\n        this.pickerOptions = pickerOptions;\n        // For detecting backspace in Android\n        this.isPendingInputEventHandling = false;\n    }\n    /**\n     * Get a friendly name\n     */\n    PickerPlugin.prototype.getName = function () {\n        return 'Picker';\n    };\n    /**\n     * Initialize this plugin. This should only be called from Editor\n     * @param editor Editor instance\n     */\n    PickerPlugin.prototype.initialize = function (editor) {\n        var _this = this;\n        this.editor = editor;\n        this.dataProvider.onInitalize(function (htmlNode) {\n            _this.editor.focus();\n            var wordToReplace = _this.getWord(null);\n            // Safari drops our focus out so we get an empty word to replace when we call getWord.\n            // We fall back to using the lastKnownRange to try to get around this.\n            if ((!wordToReplace || wordToReplace.length == 0) && _this.lastKnownRange) {\n                _this.editor.select(_this.lastKnownRange);\n                wordToReplace = _this.getWord(null);\n            }\n            var insertNode = function () {\n                if (wordToReplace) {\n                    roosterjs_editor_api_1.replaceWithNode(_this.editor, wordToReplace, htmlNode, true /* exactMatch */);\n                }\n                else {\n                    _this.editor.insertNode(htmlNode);\n                }\n                _this.setIsSuggesting(false);\n            };\n            if (_this.pickerOptions.handleAutoComplete) {\n                _this.editor.performAutoComplete(insertNode, _this.pickerOptions.changeSource);\n            }\n            else {\n                _this.editor.addUndoSnapshot(insertNode, _this.pickerOptions.changeSource);\n            }\n        }, function (isSuggesting) {\n            _this.setIsSuggesting(isSuggesting);\n        }, editor);\n    };\n    /**\n     * Dispose this plugin\n     */\n    PickerPlugin.prototype.dispose = function () {\n        this.editor = null;\n        this.dataProvider.onDispose();\n    };\n    /**\n     * Check if the plugin should handle the given event exclusively.\n     * Handle an event exclusively means other plugin will not receive this event in\n     * onPluginEvent method.\n     * If two plugins will return true in willHandleEventExclusively() for the same event,\n     * the final result depends on the order of the plugins are added into editor\n     * @param event The event to check\n     */\n    PickerPlugin.prototype.willHandleEventExclusively = function (event) {\n        return (this.isSuggesting &&\n            (event.eventType == 0 /* KeyDown */ ||\n                event.eventType == 2 /* KeyUp */ ||\n                event.eventType == 12 /* Input */));\n    };\n    /**\n     * Handle events triggered from editor\n     * @param event PluginEvent object\n     */\n    PickerPlugin.prototype.onPluginEvent = function (event) {\n        switch (event.eventType) {\n            case 6 /* ContentChanged */:\n                if (event.source == \"SetContent\" /* SetContent */ && this.dataProvider.onContentChanged) {\n                    // Stop suggesting since content is fully changed\n                    if (this.isSuggesting) {\n                        this.setIsSuggesting(false);\n                    }\n                    // Undos and other major changes to document content fire this type of event.\n                    // Inform the data provider of the current picker placed elements in the body.\n                    var elementIds_1 = [];\n                    this.editor.queryElements(\"[id^='\" + this.pickerOptions.elementIdPrefix + \"']\", function (element) {\n                        if (element.id) {\n                            elementIds_1.push(element.id);\n                        }\n                    });\n                    this.dataProvider.onContentChanged(elementIds_1);\n                }\n                break;\n            case 0 /* KeyDown */:\n                this.eventHandledOnKeyDown = false;\n                if (this.isAndroidKeyboardEvent(event)) {\n                    // On Android, the key for KeyboardEvent is \"Unidentified\" or undefined,\n                    // so handling should be done using the input rather than key down event\n                    // Since the key down event happens right before the input event, calculate the input\n                    // length here in preparation for onAndroidInputEvent\n                    this.currentInputLength = this.calcInputLength(event);\n                    this.isPendingInputEventHandling = true;\n                }\n                else {\n                    this.onKeyDownEvent(event);\n                    this.isPendingInputEventHandling = false;\n                }\n                break;\n            case 12 /* Input */:\n                if (this.isPendingInputEventHandling) {\n                    this.onAndroidInputEvent(event);\n                }\n                break;\n            case 2 /* KeyUp */:\n                if (!this.eventHandledOnKeyDown && this.shouldHandleKeyUpEvent(event)) {\n                    this.onKeyUpDomEvent(event);\n                    this.isPendingInputEventHandling = false;\n                }\n                break;\n            case 5 /* MouseUp */:\n                if (this.isSuggesting) {\n                    this.setIsSuggesting(false);\n                }\n                break;\n            case 15 /* Scroll */:\n                if (this.dataProvider.onScroll) {\n                    // Dispatch scroll event to data provider\n                    this.dataProvider.onScroll(event.scrollContainer);\n                }\n                break;\n        }\n    };\n    PickerPlugin.prototype.setLastKnownRange = function (range) {\n        this.lastKnownRange = range;\n    };\n    PickerPlugin.prototype.setIsSuggesting = function (isSuggesting) {\n        this.isSuggesting = isSuggesting;\n        if (!isSuggesting) {\n            this.setLastKnownRange(null);\n        }\n        this.dataProvider.onIsSuggestingChanged(isSuggesting);\n        this.setAriaOwns(isSuggesting);\n        this.setAriaActiveDescendant(isSuggesting ? 0 : null);\n    };\n    PickerPlugin.prototype.cancelDefaultKeyDownEvent = function (event) {\n        this.eventHandledOnKeyDown = true;\n        event.rawEvent.preventDefault();\n        event.rawEvent.stopImmediatePropagation();\n    };\n    PickerPlugin.prototype.getIdValue = function (node) {\n        var element = node;\n        return element.attributes && element.attributes.getNamedItem('id')\n            ? element.attributes.getNamedItem('id').value\n            : null;\n    };\n    PickerPlugin.prototype.getWordBeforeCursor = function (event) {\n        var searcher = roosterjs_editor_core_1.cacheGetContentSearcher(event, this.editor);\n        return searcher ? searcher.getWordBefore() : null;\n    };\n    PickerPlugin.prototype.replaceNode = function (currentNode, replacementNode) {\n        if (currentNode) {\n            this.editor.deleteNode(currentNode);\n        }\n        if (replacementNode) {\n            this.editor.insertNode(replacementNode);\n        }\n    };\n    PickerPlugin.prototype.getRangeUntilAt = function (event) {\n        var _this = this;\n        var PositionContentSearcher = roosterjs_editor_core_1.cacheGetContentSearcher(event, this.editor);\n        var startPos;\n        var endPos;\n        PositionContentSearcher.forEachTextInlineElement(function (textInline) {\n            var hasMatched = false;\n            var nodeContent = textInline.getTextContent();\n            var nodeIndex = nodeContent ? nodeContent.length : -1;\n            while (nodeIndex >= 0) {\n                if (nodeContent[nodeIndex] == _this.pickerOptions.triggerCharacter) {\n                    startPos = textInline.getStartPosition().move(nodeIndex);\n                    hasMatched = true;\n                    break;\n                }\n                nodeIndex--;\n            }\n            if (hasMatched) {\n                endPos = textInline.getEndPosition();\n            }\n            return hasMatched;\n        });\n        return roosterjs_editor_dom_1.createRange(startPos, endPos) || this.editor.getDocument().createRange();\n    };\n    PickerPlugin.prototype.shouldHandleKeyUpEvent = function (event) {\n        // onKeyUpDomEvent should only be called when a key that produces a character value is pressed\n        // This check will always fail on Android since the KeyboardEvent's key is \"Unidentified\" or undefined\n        // However, we don't need to check for modifier events on mobile, so can ignore this check\n        return (this.isAndroidKeyboardEvent(event) ||\n            roosterjs_editor_core_1.isCharacterValue(event.rawEvent) ||\n            (this.isSuggesting && !roosterjs_editor_core_1.isModifierKey(event.rawEvent)));\n    };\n    PickerPlugin.prototype.onKeyUpDomEvent = function (event) {\n        if (this.isSuggesting) {\n            // Word before cursor represents the text prior to the cursor, up to and including the trigger symbol.\n            var wordBeforeCursor = this.getWord(event);\n            var wordBeforeCursorWithoutTriggerChar = wordBeforeCursor.substring(1);\n            var trimmedWordBeforeCursor = wordBeforeCursorWithoutTriggerChar.trim();\n            // If we hit a case where wordBeforeCursor is just the trigger character,\n            // that means we've gotten a onKeyUp event right after it's been typed.\n            // Otherwise, update the query string when:\n            // 1. There's an actual value\n            // 2. That actual value isn't just pure whitespace\n            // 3. That actual value isn't more than 4 words long (at which point we assume the person kept typing)\n            // Otherwise, we want to dismiss the picker plugin's UX.\n            if (wordBeforeCursor == this.pickerOptions.triggerCharacter ||\n                (trimmedWordBeforeCursor &&\n                    trimmedWordBeforeCursor.length > 0 &&\n                    trimmedWordBeforeCursor.split(' ').length <= 4)) {\n                this.dataProvider.queryStringUpdated(trimmedWordBeforeCursor, wordBeforeCursorWithoutTriggerChar == trimmedWordBeforeCursor);\n                this.setLastKnownRange(this.editor.getSelectionRange());\n            }\n            else {\n                this.setIsSuggesting(false);\n            }\n        }\n        else {\n            var wordBeforeCursor = this.getWordBeforeCursor(event);\n            if (!this.blockSuggestions) {\n                if (wordBeforeCursor != null &&\n                    wordBeforeCursor.split(' ').length <= 4 &&\n                    wordBeforeCursor[0] == this.pickerOptions.triggerCharacter) {\n                    this.setIsSuggesting(true);\n                    var wordBeforeCursorWithoutTriggerChar = wordBeforeCursor.substring(1);\n                    var trimmedWordBeforeCursor = wordBeforeCursorWithoutTriggerChar.trim();\n                    this.dataProvider.queryStringUpdated(trimmedWordBeforeCursor, wordBeforeCursorWithoutTriggerChar == trimmedWordBeforeCursor);\n                    this.setLastKnownRange(this.editor.getSelectionRange());\n                    if (this.dataProvider.setCursorPoint) {\n                        // Determine the bounding rectangle for the @mention\n                        var searcher = roosterjs_editor_core_1.cacheGetContentSearcher(event, this.editor);\n                        var rangeNode = this.editor.getDocument().createRange();\n                        var nodeBeforeCursor = searcher.getInlineElementBefore().getContainerNode();\n                        var rangeStartSuccessfullySet = this.setRangeStart(rangeNode, nodeBeforeCursor, wordBeforeCursor);\n                        if (!rangeStartSuccessfullySet) {\n                            // VSO 24891: Out of range error is occurring because nodeBeforeCursor\n                            // is not including the trigger character. In this case, the node before\n                            // the node before cursor is the trigger character, and this is where the range should start.\n                            var nodeBeforeNodeBeforeCursor = nodeBeforeCursor.previousSibling;\n                            this.setRangeStart(rangeNode, nodeBeforeNodeBeforeCursor, this.pickerOptions.triggerCharacter);\n                        }\n                        var rect = rangeNode.getBoundingClientRect();\n                        // Safari's support for range.getBoundingClientRect is incomplete.\n                        // We perform this check to fall back to getClientRects in case it's at the page origin.\n                        if (rect.left == 0 && rect.bottom == 0 && rect.top == 0) {\n                            rect = rangeNode.getClientRects()[0];\n                        }\n                        if (rect) {\n                            rangeNode.detach();\n                            // Display the @mention popup in the correct place\n                            var targetPoint = { x: rect.left, y: (rect.bottom + rect.top) / 2 };\n                            var bufferZone = (rect.bottom - rect.top) / 2;\n                            this.dataProvider.setCursorPoint(targetPoint, bufferZone);\n                        }\n                    }\n                }\n            }\n            else {\n                if (wordBeforeCursor != null &&\n                    wordBeforeCursor[0] != this.pickerOptions.triggerCharacter) {\n                    this.blockSuggestions = false;\n                }\n            }\n        }\n    };\n    PickerPlugin.prototype.onKeyDownEvent = function (event) {\n        var keyboardEvent = event.rawEvent;\n        if (this.isSuggesting) {\n            if (keyboardEvent.key == ESC_CHARCODE) {\n                this.setIsSuggesting(false);\n                this.blockSuggestions = true;\n                this.cancelDefaultKeyDownEvent(event);\n            }\n            else if (this.dataProvider.shiftHighlight &&\n                (this.pickerOptions.isHorizontal\n                    ? keyboardEvent.key == LEFT_ARROW_CHARCODE ||\n                        keyboardEvent.key == RIGHT_ARROW_CHARCODE\n                    : keyboardEvent.key == UP_ARROW_CHARCODE ||\n                        keyboardEvent.key == DOWN_ARROW_CHARCODE)) {\n                this.dataProvider.shiftHighlight(this.pickerOptions.isHorizontal\n                    ? keyboardEvent.key == RIGHT_ARROW_CHARCODE\n                    : keyboardEvent.key == DOWN_ARROW_CHARCODE);\n                if (this.dataProvider.getSelectedIndex) {\n                    this.setAriaActiveDescendant(this.dataProvider.getSelectedIndex());\n                }\n                this.cancelDefaultKeyDownEvent(event);\n            }\n            else if (this.dataProvider.selectOption &&\n                (keyboardEvent.key == ENTER_CHARCODE || keyboardEvent.key == TAB_CHARCODE)) {\n                this.dataProvider.selectOption();\n                this.cancelDefaultKeyDownEvent(event);\n            }\n            else {\n                // Currently no op.\n            }\n        }\n        else {\n            if (keyboardEvent.key == BACKSPACE_CHARCODE) {\n                var nodeRemoved = this.tryRemoveNode(event);\n                if (nodeRemoved) {\n                    this.cancelDefaultKeyDownEvent(event);\n                }\n            }\n            else if (keyboardEvent.key == DELETE_CHARCODE) {\n                var searcher = roosterjs_editor_core_1.cacheGetContentSearcher(event, this.editor);\n                var nodeAfterCursor = searcher.getInlineElementAfter()\n                    ? searcher.getInlineElementAfter().getContainerNode()\n                    : null;\n                var nodeId = nodeAfterCursor ? this.getIdValue(nodeAfterCursor) : null;\n                if (nodeId && nodeId.indexOf(this.pickerOptions.elementIdPrefix) == 0) {\n                    var replacementNode = this.dataProvider.onRemove(nodeAfterCursor, false);\n                    this.replaceNode(nodeAfterCursor, replacementNode);\n                    this.cancelDefaultKeyDownEvent(event);\n                }\n            }\n        }\n    };\n    PickerPlugin.prototype.onAndroidInputEvent = function (event) {\n        this.newInputLength = this.calcInputLength(event);\n        if (this.newInputLength < this.currentInputLength ||\n            event.rawEvent.inputType === DELETE_CONTENT_BACKWARDS_INPUT_TYPE) {\n            var nodeRemoved = this.tryRemoveNode(event);\n            if (nodeRemoved) {\n                this.eventHandledOnKeyDown = true;\n            }\n        }\n    };\n    PickerPlugin.prototype.calcInputLength = function (event) {\n        var wordBeforCursor = this.getInlineElementBeforeCursor(event);\n        return wordBeforCursor ? wordBeforCursor.length : 0;\n    };\n    PickerPlugin.prototype.tryRemoveNode = function (event) {\n        var _this = this;\n        var searcher = roosterjs_editor_core_1.cacheGetContentSearcher(event, this.editor);\n        var inlineElementBefore = searcher.getInlineElementBefore();\n        var nodeBeforeCursor = inlineElementBefore\n            ? inlineElementBefore.getContainerNode()\n            : null;\n        var nodeId = nodeBeforeCursor ? this.getIdValue(nodeBeforeCursor) : null;\n        var inlineElementAfter = searcher.getInlineElementAfter();\n        if (nodeId &&\n            nodeId.indexOf(this.pickerOptions.elementIdPrefix) == 0 &&\n            (inlineElementAfter == null || !(inlineElementAfter instanceof roosterjs_editor_dom_1.PartialInlineElement))) {\n            var replacementNode_1 = this.dataProvider.onRemove(nodeBeforeCursor, true);\n            if (replacementNode_1) {\n                this.replaceNode(nodeBeforeCursor, replacementNode_1);\n                if (this.isPendingInputEventHandling) {\n                    this.editor.runAsync(function () {\n                        _this.editor.select(replacementNode_1, -3 /* After */);\n                    });\n                }\n                else {\n                    this.editor.select(replacementNode_1, -3 /* After */);\n                }\n            }\n            else {\n                this.editor.deleteNode(nodeBeforeCursor);\n            }\n            return true;\n        }\n        return false;\n    };\n    PickerPlugin.prototype.getWord = function (event) {\n        var wordFromRange = this.getRangeUntilAt(event).toString();\n        var wordFromCache = this.getWordBeforeCursor(event);\n        // VSO 24891: In picker, trigger and mention are separated into two nodes.\n        // In this case, wordFromRange is the trigger character while wordFromCache is the whole string,\n        // so wordFromCache is what we want to return.\n        if (wordFromRange == this.pickerOptions.triggerCharacter &&\n            wordFromRange != wordFromCache) {\n            return wordFromCache;\n        }\n        return wordFromRange;\n    };\n    PickerPlugin.prototype.setRangeStart = function (rangeNode, node, target) {\n        var nodeOffset = node ? node.textContent.lastIndexOf(target) : -1;\n        if (nodeOffset > -1) {\n            rangeNode.setStart(node, nodeOffset);\n            return true;\n        }\n        return false;\n    };\n    PickerPlugin.prototype.setAriaOwns = function (isSuggesting) {\n        this.editor.setEditorDomAttribute('aria-owns', isSuggesting && this.pickerOptions.suggestionsLabel\n            ? this.pickerOptions.suggestionsLabel\n            : null);\n    };\n    PickerPlugin.prototype.setAriaActiveDescendant = function (selectedIndex) {\n        this.editor.setEditorDomAttribute('aria-activedescendant', selectedIndex != null && this.pickerOptions.suggestionLabelPrefix\n            ? this.pickerOptions.suggestionLabelPrefix + selectedIndex.toString()\n            : null);\n    };\n    PickerPlugin.prototype.getInlineElementBeforeCursor = function (event) {\n        var searcher = roosterjs_editor_core_1.cacheGetContentSearcher(event, this.editor);\n        var element = searcher ? searcher.getInlineElementBefore() : null;\n        return element ? element.getTextContent() : null;\n    };\n    PickerPlugin.prototype.isAndroidKeyboardEvent = function (event) {\n        // Check keyboard events on Android for further handling.\n        // On Android Webview later 51, the KeyboardEvent's key is \"Unidentified\".\n        // On Android Webview below 51, the KeyboardEvent's key is not supported and always returns undefined,\n        // so using the charCode property, which is 0 or 229.\n        return (event.rawEvent.key == UNIDENTIFIED_KEY ||\n            (event.rawEvent.key == undefined &&\n                UNIDENTIFIED_CODE.indexOf(event.rawEvent.charCode) > -1));\n    };\n    return PickerPlugin;\n}());\nexports.default = PickerPlugin;\n//# sourceMappingURL=PickerPlugin.js.map","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"./plugins/TableResize/index\"));\n//# sourceMappingURL=TableResize.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar TableResize_1 = require(\"./TableResize\");\nexports.TableResize = TableResize_1.default;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar roosterjs_editor_dom_1 = require(\"roosterjs-editor-dom\");\nvar INSERTER_COLOR = '#4A4A4A';\nvar INSERTER_SIDE_LENGTH = 12;\nvar INSERTER_BORDER_SIZE = 1;\nvar CELL_RESIZER_WIDTH = 4;\nvar HORIZONTAL_RESIZER_HTML = '<div style=\"position: fixed; cursor: row-resize; user-select: none\"></div>';\nvar VERTICAL_RESIZER_HTML = '<div style=\"position: fixed; cursor: col-resize; user-select: none\"></div>';\nvar ResizeState;\n(function (ResizeState) {\n    ResizeState[ResizeState[\"None\"] = 0] = \"None\";\n    ResizeState[ResizeState[\"Horizontal\"] = 1] = \"Horizontal\";\n    ResizeState[ResizeState[\"Vertical\"] = 2] = \"Vertical\";\n})(ResizeState || (ResizeState = {}));\n/**\n * TableResize plugin, provides the ability to resize a table by drag-and-drop\n */\nvar TableResize = /** @class */ (function () {\n    function TableResize() {\n        var _this = this;\n        this.tableRectMap = null;\n        this.resizingState = 0 /* None */;\n        this.insertingState = 0 /* None */;\n        this.onMouseMove = function (e) {\n            if (_this.resizingState != 0 /* None */) {\n                return;\n            }\n            if (!_this.tableRectMap) {\n                _this.cacheRects();\n            }\n            if (_this.tableRectMap) {\n                var i = _this.tableRectMap.length - 1;\n                for (; i >= 0; i--) {\n                    var _a = _this.tableRectMap[i], table = _a.table, rect = _a.rect;\n                    if (e.pageX >= rect.left - INSERTER_SIDE_LENGTH &&\n                        e.pageX <= rect.right &&\n                        e.pageY >= rect.top - INSERTER_SIDE_LENGTH &&\n                        e.pageY <= rect.bottom) {\n                        _this.setCurrentTable(table, rect);\n                        break;\n                    }\n                }\n                if (i < 0) {\n                    _this.setCurrentTable(null);\n                }\n                if (_this.currentTable) {\n                    var map = _this.tableRectMap.filter(function (map) { return map.table == _this.currentTable; })[0];\n                    for (var i_1 = 0; i_1 < _this.currentTable.rows.length; i_1++) {\n                        var tr = _this.currentTable.rows[i_1];\n                        var j = 0;\n                        for (; j < tr.cells.length; j++) {\n                            var td = tr.cells[Math.max(0, j)];\n                            var tdRect = roosterjs_editor_dom_1.normalizeRect(td.getBoundingClientRect());\n                            if (e.pageX <= tdRect.right && e.pageY < tdRect.bottom) {\n                                if (i_1 == 0 && e.pageY < tdRect.top) {\n                                    _this.setCurrentTd(null);\n                                    _this.setCurrentInsertTd(2 /* Vertical */, td, map.rect);\n                                    break;\n                                }\n                                else if (j == 0 && e.pageX < tdRect.left) {\n                                    _this.setCurrentTd(null);\n                                    _this.setCurrentInsertTd(1 /* Horizontal */, td, map.rect);\n                                    break;\n                                }\n                                else {\n                                    _this.setCurrentTd(td, map.rect, tdRect.right, tdRect.bottom);\n                                    _this.setCurrentInsertTd(0 /* None */);\n                                    break;\n                                }\n                            }\n                        }\n                        if (j < tr.cells.length) {\n                            break;\n                        }\n                    }\n                }\n            }\n        };\n        this.insertTd = function () {\n            _this.editor.addUndoSnapshot(function (start, end) {\n                var vtable = new roosterjs_editor_dom_1.VTable(_this.currentInsertTd);\n                vtable.edit(_this.insertingState == 1 /* Horizontal */\n                    ? 1 /* InsertBelow */\n                    : 3 /* InsertRight */);\n                vtable.writeBack();\n                _this.editor.select(start, end);\n                _this.setCurrentInsertTd(0 /* None */);\n            }, \"Format\" /* Format */);\n        };\n        this.startHorizontalResizeTable = function (e) {\n            _this.resizingState = 1 /* Horizontal */;\n            _this.startResizeTable(e);\n        };\n        this.startVerticalResizeTable = function (e) {\n            _this.resizingState = 2 /* Vertical */;\n            _this.startResizeTable(e);\n        };\n        this.frameAnimateResizeTable = function (e) {\n            _this.editor.runAsync(function () { return _this.resizeTable(e); });\n        };\n        this.resizeTable = function (e) {\n            if (_this.currentTd) {\n                var rect_1 = roosterjs_editor_dom_1.normalizeRect(_this.currentTd.getBoundingClientRect());\n                var newPos_1 = _this.resizingState == 1 /* Horizontal */ ? e.pageY : e.pageX;\n                var vtable = new roosterjs_editor_dom_1.VTable(_this.currentTd);\n                if (_this.resizingState == 1 /* Horizontal */) {\n                    vtable.table.style.height = null;\n                    vtable.forEachCellOfCurrentRow(function (cell) {\n                        if (cell.td) {\n                            cell.td.style.height =\n                                cell.td == _this.currentTd ? newPos_1 - rect_1.top + \"px\" : null;\n                        }\n                    });\n                }\n                else {\n                    vtable.table.style.width = '';\n                    vtable.table.width = '';\n                    vtable.forEachCellOfCurrentColumn(function (cell) {\n                        if (cell.td) {\n                            cell.td.style.width =\n                                cell.td == _this.currentTd ? newPos_1 - rect_1.left + \"px\" : null;\n                        }\n                    });\n                }\n                vtable.writeBack();\n            }\n        };\n        this.endResizeTable = function (e) {\n            var doc = _this.editor.getDocument();\n            doc.removeEventListener('mousemove', _this.frameAnimateResizeTable, true);\n            doc.removeEventListener('mouseup', _this.endResizeTable, true);\n            _this.editor.addUndoSnapshot(function (start, end) {\n                _this.frameAnimateResizeTable(e);\n                _this.editor.select(start, end);\n            }, \"Format\" /* Format */);\n            _this.setCurrentTd(null);\n            _this.resizingState = 0 /* None */;\n        };\n    }\n    /**\n     * Get a friendly name of  this plugin\n     */\n    TableResize.prototype.getName = function () {\n        return 'TableResize';\n    };\n    /**\n     * Initialize this plugin. This should only be called from Editor\n     * @param editor Editor instance\n     */\n    TableResize.prototype.initialize = function (editor) {\n        this.editor = editor;\n        this.setupResizerContainer();\n        this.onMouseMoveDisposer = this.editor.addDomEventHandler('mousemove', this.onMouseMove);\n    };\n    /**\n     * Dispose this plugin\n     */\n    TableResize.prototype.dispose = function () {\n        this.onMouseMoveDisposer();\n        this.destoryRectMap();\n        this.removeResizerContainer();\n        this.editor = null;\n    };\n    /**\n    * Handle events triggered from editor\n    * @param event PluginEvent object\n    */\n    TableResize.prototype.onPluginEvent = function (e) {\n        switch (e.eventType) {\n            case 12 /* Input */:\n            case 6 /* ContentChanged */:\n            case 15 /* Scroll */:\n                this.destoryRectMap();\n                break;\n        }\n    };\n    TableResize.prototype.setupResizerContainer = function () {\n        this.resizerContainer = this.editor.getDocument().createElement('div');\n        this.editor.insertNode(this.resizerContainer, {\n            updateCursor: false,\n            insertOnNewLine: false,\n            replaceSelection: false,\n            position: 4 /* Outside */,\n        });\n    };\n    TableResize.prototype.removeResizerContainer = function () {\n        this.resizerContainer.parentNode.removeChild(this.resizerContainer);\n        this.resizerContainer = null;\n    };\n    TableResize.prototype.setCurrentInsertTd = function (insertingState, td, tableRect) {\n        if (td != this.currentInsertTd || insertingState != this.insertingState) {\n            if (this.currentInsertTd) {\n                this.resizerContainer.removeChild(this.inserter);\n                this.inserter = null;\n            }\n            this.insertingState = insertingState;\n            this.currentInsertTd = td;\n            if (this.currentInsertTd) {\n                this.inserter = this.createInserter(tableRect);\n                this.resizerContainer.appendChild(this.inserter);\n            }\n        }\n    };\n    TableResize.prototype.createInserter = function (tableRect) {\n        var rect = roosterjs_editor_dom_1.normalizeRect(this.currentInsertTd.getBoundingClientRect());\n        var editorBackgroundColor = this.editor.getDefaultFormat().backgroundColor;\n        var inserterBackgroundColor = editorBackgroundColor || 'white';\n        var HORIZONTAL_INSERTER_HTML = \"<div style=\\\"position: fixed; width: \" + INSERTER_SIDE_LENGTH + \"px; height: \" + INSERTER_SIDE_LENGTH + \"px; font-size: 16px; color: \" + INSERTER_COLOR + \"; line-height: 10px; vertical-align: middle; text-align: center; cursor: pointer; border: solid \" + INSERTER_BORDER_SIZE + \"px \" + INSERTER_COLOR + \"; border-radius: 50%; background-color: \" + inserterBackgroundColor + \"\\\"><div style=\\\"position: absolute; left: 12px; top: 5px; height: 3px; border-top: 1px solid \" + INSERTER_COLOR + \"; border-bottom: 1px solid \" + INSERTER_COLOR + \"; border-right: 1px solid \" + INSERTER_COLOR + \"; border-left: 0px; box-sizing: border-box; background-color: \" + inserterBackgroundColor + \";\\\"></div>+</div>\";\n        var VERTICAL_INSERTER_HTML = \"<div style=\\\"position: fixed; width: \" + INSERTER_SIDE_LENGTH + \"px; height: \" + INSERTER_SIDE_LENGTH + \"px; font-size: 16px; color: \" + INSERTER_COLOR + \"; line-height: 10px; vertical-align: middle; text-align: center; cursor: pointer; border: solid \" + INSERTER_BORDER_SIZE + \"px \" + INSERTER_COLOR + \"; border-radius: 50%; background-color: \" + inserterBackgroundColor + \"\\\"><div style=\\\"position: absolute; left: 5px; top: 12px; width: 3px; border-left: 1px solid \" + INSERTER_COLOR + \"; border-right: 1px solid \" + INSERTER_COLOR + \"; border-bottom: 1px solid \" + INSERTER_COLOR + \"; border-top: 0px; box-sizing: border-box; background-color: \" + inserterBackgroundColor + \";\\\"></div>+</div>\";\n        var inserter = roosterjs_editor_dom_1.fromHtml(this.insertingState == 1 /* Horizontal */\n            ? HORIZONTAL_INSERTER_HTML\n            : VERTICAL_INSERTER_HTML, this.editor.getDocument())[0];\n        if (this.insertingState == 1 /* Horizontal */) {\n            inserter.style.left = rect.left -\n                (INSERTER_SIDE_LENGTH - 1 + 2 * INSERTER_BORDER_SIZE) + \"px\";\n            inserter.style.top = rect.bottom - 8 + \"px\";\n            inserter.firstChild.style.width = tableRect.right -\n                tableRect.left + \"px\";\n        }\n        else {\n            inserter.style.left = rect.right - 8 + \"px\";\n            inserter.style.top = rect.top -\n                (INSERTER_SIDE_LENGTH - 1 + 2 * INSERTER_BORDER_SIZE) + \"px\";\n            inserter.firstChild.style.height = tableRect.bottom -\n                tableRect.top + \"px\";\n        }\n        inserter.addEventListener('click', this.insertTd);\n        return inserter;\n    };\n    TableResize.prototype.setCurrentTable = function (table, rect) {\n        if (this.currentTable != table) {\n            this.setCurrentTd(null);\n            this.setCurrentInsertTd(null);\n            this.currentTable = table;\n        }\n    };\n    TableResize.prototype.setCurrentTd = function (td, tableRect, right, bottom) {\n        if (this.currentTd != td) {\n            if (this.currentTd) {\n                this.resizerContainer.removeChild(this.horizontalResizer);\n                this.resizerContainer.removeChild(this.verticalResizer);\n                this.horizontalResizer = null;\n                this.verticalResizer = null;\n            }\n            this.currentTd = td;\n            if (this.currentTd) {\n                this.horizontalResizer = this.createResizer(true /*horizontal*/, tableRect.left, bottom - CELL_RESIZER_WIDTH + 1, tableRect.right - tableRect.left, CELL_RESIZER_WIDTH);\n                this.verticalResizer = this.createResizer(false /*horizontal*/, right - CELL_RESIZER_WIDTH + 1, tableRect.top, CELL_RESIZER_WIDTH, tableRect.bottom - tableRect.top);\n                this.resizerContainer.appendChild(this.horizontalResizer);\n                this.resizerContainer.appendChild(this.verticalResizer);\n            }\n        }\n    };\n    TableResize.prototype.createResizer = function (horizontal, left, top, width, height) {\n        var div = roosterjs_editor_dom_1.fromHtml(horizontal ? HORIZONTAL_RESIZER_HTML : VERTICAL_RESIZER_HTML, this.editor.getDocument())[0];\n        div.style.top = top + \"px\";\n        div.style.left = left + \"px\";\n        div.style.width = width + \"px\";\n        div.style.height = height + \"px\";\n        div.addEventListener('mousedown', horizontal ? this.startHorizontalResizeTable : this.startVerticalResizeTable);\n        return div;\n    };\n    TableResize.prototype.startResizeTable = function (e) {\n        var doc = this.editor.getDocument();\n        doc.addEventListener('mousemove', this.frameAnimateResizeTable, true);\n        doc.addEventListener('mouseup', this.endResizeTable, true);\n    };\n    TableResize.prototype.destoryRectMap = function () {\n        this.setCurrentTable(null);\n        this.tableRectMap = null;\n    };\n    TableResize.prototype.cacheRects = function () {\n        var _this = this;\n        this.destoryRectMap();\n        this.tableRectMap = [];\n        this.editor.queryElements('table', function (table) {\n            var rect = roosterjs_editor_dom_1.normalizeRect(table.getBoundingClientRect());\n            if (rect) {\n                _this.tableRectMap.push({\n                    table: table,\n                    rect: rect,\n                });\n            }\n        });\n    };\n    return TableResize;\n}());\nexports.default = TableResize;\n//# sourceMappingURL=TableResize.js.map","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"./plugins/Watermark/index\"));\n//# sourceMappingURL=Watermark.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Watermark_1 = require(\"./Watermark\");\nexports.Watermark = Watermark_1.default;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar roosterjs_editor_dom_1 = require(\"roosterjs-editor-dom\");\nvar WATERMARK_SPAN_ID = '_rooster_watermarkSpan';\nvar WATERMARK_REGEX = new RegExp(\"<span[^>]*id=['\\\"]?\" + WATERMARK_SPAN_ID + \"['\\\"]?[^>]*>[^<]*</span>\", 'ig');\nvar SPELLCHECK_ATTR_NAME = 'spellcheck';\n/**\n * A watermark plugin to manage watermark string for roosterjs\n */\nvar Watermark = /** @class */ (function () {\n    /**\n     * Create an instance of Watermark plugin\n     * @param watermark The watermark string\n     */\n    function Watermark(watermark, format) {\n        var _this = this;\n        this.watermark = watermark;\n        this.format = format;\n        this.handleWatermark = function () {\n            _this.showHideWatermark(false /*ignoreCachedState*/);\n        };\n        this.format = this.format || {\n            fontSize: '14px',\n            textColor: '#aaa',\n        };\n    }\n    /**\n     * Get a friendly name of  this plugin\n     */\n    Watermark.prototype.getName = function () {\n        return 'Watermark';\n    };\n    /**\n     * Initialize this plugin. This should only be called from Editor\n     * @param editor Editor instance\n     */\n    Watermark.prototype.initialize = function (editor) {\n        this.editor = editor;\n        this.disposer = this.editor.addDomEventHandler({\n            focus: this.handleWatermark,\n            blur: this.handleWatermark,\n        });\n        this.spellcheckInitialValue = this.editor.getEditorDomAttribute(SPELLCHECK_ATTR_NAME);\n    };\n    /**\n     * Dispose this plugin\n     */\n    Watermark.prototype.dispose = function () {\n        this.disposer();\n        this.disposer = null;\n        this.hideWatermark();\n        this.editor = null;\n    };\n    /**\n     * Handle events triggered from editor\n     * @param event PluginEvent object\n     */\n    Watermark.prototype.onPluginEvent = function (event) {\n        if (event.eventType == 10 /* EditorReady */) {\n            this.showHideWatermark(false /*ignoreCachedState*/);\n        }\n        else if (event.eventType == 6 /* ContentChanged */) {\n            // When content is changed from setContent() API, current cached state\n            // may not be accurate, so we ignore it\n            this.showHideWatermark(event.source == \"SetContent\" /* SetContent */);\n        }\n        else if (event.eventType == 7 /* ExtractContent */ && this.isWatermarkShowing) {\n            this.removeWartermarkFromHtml(event);\n        }\n    };\n    Watermark.prototype.showHideWatermark = function (ignoreCachedState) {\n        if (this.editor.hasFocus() && (ignoreCachedState || this.isWatermarkShowing)) {\n            this.hideWatermark();\n            this.editor.focus();\n        }\n        else if (!this.editor.hasFocus() &&\n            (ignoreCachedState || !this.isWatermarkShowing) &&\n            this.editor.isEmpty(true /*trim*/)) {\n            this.showWatermark();\n        }\n    };\n    Watermark.prototype.showWatermark = function () {\n        var document = this.editor.getDocument();\n        var watermarkNode = roosterjs_editor_dom_1.wrap(document.createTextNode(this.watermark), \"<span id=\\\"\" + WATERMARK_SPAN_ID + \"\\\"></span>\");\n        roosterjs_editor_dom_1.applyFormat(watermarkNode, this.format, this.editor.isDarkMode());\n        this.editor.insertNode(watermarkNode, {\n            position: 0 /* Begin */,\n            updateCursor: false,\n            replaceSelection: false,\n            insertOnNewLine: false,\n        });\n        this.editor.setEditorDomAttribute(SPELLCHECK_ATTR_NAME, 'false');\n        this.isWatermarkShowing = true;\n    };\n    Watermark.prototype.hideWatermark = function () {\n        var _this = this;\n        this.editor.queryElements(\"span[id=\\\"\" + WATERMARK_SPAN_ID + \"\\\"]\", function (span) {\n            var parentNode = span.parentNode;\n            _this.editor.deleteNode(span);\n            // After remove watermark node, if it leaves an empty DIV, append a BR node into it to make it a regular empty line\n            if (_this.editor.contains(parentNode) &&\n                roosterjs_editor_dom_1.getTagOfNode(parentNode) == 'DIV' &&\n                !parentNode.firstChild) {\n                parentNode.appendChild(_this.editor.getDocument().createElement('BR'));\n            }\n        });\n        this.editor.setEditorDomAttribute(SPELLCHECK_ATTR_NAME, this.spellcheckInitialValue);\n        this.isWatermarkShowing = false;\n    };\n    Watermark.prototype.removeWartermarkFromHtml = function (event) {\n        var content = event.content;\n        content = content.replace(WATERMARK_REGEX, '');\n        event.content = content;\n    };\n    return Watermark;\n}());\nexports.default = Watermark;\n//# sourceMappingURL=Watermark.js.map","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"./plugins/Entity/index\"));\n//# sourceMappingURL=Entity.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar EntityPlugin_1 = require(\"./EntityPlugin\");\nexports.EntityPlugin = EntityPlugin_1.default;\nvar insertEntity_1 = require(\"./insertEntity\");\nexports.insertEntity = insertEntity_1.default;\nvar getEntityFromElement_1 = require(\"./getEntityFromElement\");\nexports.getEntityFromElement = getEntityFromElement_1.default;\nvar getEntities_1 = require(\"./getEntities\");\nexports.getEntities = getEntities_1.default;\nvar getEntityElement_1 = require(\"./getEntityElement\");\nexports.getEntityElement = getEntityElement_1.default;\nvar createEntityWrapper_1 = require(\"./createEntityWrapper\");\nexports.createEntityWrapper = createEntityWrapper_1.default;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar getEntityElement_1 = require(\"./getEntityElement\");\nvar getEntityFromElement_1 = require(\"./getEntityFromElement\");\nvar tryTriggerEntityEvent_1 = require(\"./tryTriggerEntityEvent\");\nvar roosterjs_editor_dom_1 = require(\"roosterjs-editor-dom\");\nvar roosterjs_editor_core_1 = require(\"roosterjs-editor-core\");\nvar EntityInfo_1 = require(\"./EntityInfo\");\nvar EntityFeatures_1 = require(\"./EntityFeatures\");\n/**\n * Entity Plugin helps handle all operations related to an entity and generate entity specified events\n */\nvar EntityPlugin = /** @class */ (function () {\n    function EntityPlugin() {\n        var _this = this;\n        this.handleContextMenuEvent = function (event) {\n            var target = event.target;\n            var entityElement = getEntityElement_1.default(_this.editor, target);\n            if (entityElement) {\n                event.preventDefault();\n                tryTriggerEntityEvent_1.default(_this.editor, entityElement, 2 /* ContextMenu */, event);\n            }\n        };\n        this.handleCutEvent = function (event) {\n            var range = _this.editor.getSelectionRange();\n            if (!range.collapsed) {\n                _this.checkRemoveEntityForRange(event);\n            }\n        };\n    }\n    EntityPlugin.prototype.getName = function () {\n        return 'Entity';\n    };\n    EntityPlugin.prototype.initialize = function (editor) {\n        var _this = this;\n        this.editor = editor;\n        this.disposer = this.editor.addDomEventHandler({\n            contextmenu: this.handleContextMenuEvent,\n            cut: this.handleCutEvent,\n        });\n        this.knownEntityElements = [];\n        [\n            EntityFeatures_1.ClickOnEntityFeature,\n            EntityFeatures_1.EscapeFromEntityFeature,\n            EntityFeatures_1.EnterBeforeReadonlyEntityFeature,\n            EntityFeatures_1.BackspaceAfterEntityFeature,\n            EntityFeatures_1.DeleteBeforeEntityFeature,\n        ].forEach(function (feature) { return _this.editor.addContentEditFeature(feature); });\n    };\n    EntityPlugin.prototype.dispose = function () {\n        this.disposer();\n        this.disposer = null;\n        this.editor = null;\n        this.knownEntityElements = null;\n    };\n    EntityPlugin.prototype.onPluginEvent = function (event) {\n        switch (event.eventType) {\n            case 4 /* MouseDown */:\n                this.handleMouseDownEvent(event.rawEvent);\n                break;\n            case 5 /* MouseUp */:\n                this.handleMouseUpEvent(event.rawEvent);\n                break;\n            case 0 /* KeyDown */:\n                this.handleKeyDownEvent(event.rawEvent);\n                break;\n            case 9 /* BeforePaste */:\n                this.handleBeforePasteEvent(event.fragment, event.sanitizingOption);\n                break;\n            case 6 /* ContentChanged */:\n                this.handleContentChangedEvent(event.source == \"SetContent\" /* SetContent */);\n                break;\n            case 10 /* EditorReady */:\n                this.handleContentChangedEvent(true /*resetAll*/);\n                break;\n            case 8 /* ExtractContentWithDom */:\n                this.handleExtractContentWithDomEvent(event.clonedRoot);\n                break;\n        }\n    };\n    EntityPlugin.prototype.handleMouseDownEvent = function (event) {\n        var target = event.target, pageX = event.pageX, pageY = event.pageY;\n        var entityElement = getEntityElement_1.default(this.editor, target);\n        if (entityElement && !entityElement.isContentEditable) {\n            event.preventDefault();\n            this.clickingPoint = { pageX: pageX, pageY: pageY };\n        }\n    };\n    EntityPlugin.prototype.handleMouseUpEvent = function (event) {\n        var target = event.target, pageX = event.pageX, pageY = event.pageY;\n        var entityElement;\n        if (this.clickingPoint &&\n            this.clickingPoint.pageX == pageX &&\n            this.clickingPoint.pageY == pageY &&\n            !!(entityElement = getEntityElement_1.default(this.editor, target))) {\n            event.preventDefault();\n            tryTriggerEntityEvent_1.default(this.editor, entityElement, 1 /* Click */, event);\n            workaroundSelectionIssueForIE(this.editor);\n        }\n        this.clickingPoint = null;\n    };\n    EntityPlugin.prototype.handleKeyDownEvent = function (event) {\n        if (roosterjs_editor_core_1.isCharacterValue(event) ||\n            event.which == 8 /* BACKSPACE */ ||\n            event.which == 46 /* DELETE */) {\n            var range = this.editor.getSelectionRange();\n            if (!range.collapsed) {\n                this.checkRemoveEntityForRange(event);\n            }\n        }\n    };\n    EntityPlugin.prototype.handleBeforePasteEvent = function (fragment, sanitizingOption) {\n        var _this = this;\n        var range = this.editor.getSelectionRange();\n        if (!range.collapsed) {\n            this.checkRemoveEntityForRange(null /*rawEvent*/);\n        }\n        var entityElements = roosterjs_editor_dom_1.toArray(fragment.querySelectorAll(EntityInfo_1.getEntitySelector()));\n        if (entityElements.length > 0) {\n            var knownIds_1 = EntityInfo_1.getAllEntityIds(this.editor);\n            entityElements.forEach(function (element) {\n                var entity = getEntityFromElement_1.default(element);\n                if (entity) {\n                    element.className = EntityInfo_1.serializeEntityInfo(_this.editor, entity.type, entity.isReadonly, entity.id, knownIds_1);\n                }\n            });\n            Array.prototype.push.apply(sanitizingOption.additionalAllowedCssClasses, EntityInfo_1.ALLOWED_CSS_CLASSES);\n        }\n    };\n    EntityPlugin.prototype.handleContentChangedEvent = function (resetAll) {\n        var _this = this;\n        this.knownEntityElements = resetAll\n            ? []\n            : this.knownEntityElements.filter(function (node) { return _this.editor.contains(node); });\n        this.editor.queryElements(EntityInfo_1.getEntitySelector(), function (element) {\n            if (_this.knownEntityElements.indexOf(element) < 0) {\n                _this.knownEntityElements.push(element);\n                tryTriggerEntityEvent_1.default(_this.editor, element, 0 /* NewEntity */);\n            }\n        });\n    };\n    EntityPlugin.prototype.handleExtractContentWithDomEvent = function (root) {\n        var _this = this;\n        roosterjs_editor_dom_1.toArray(root.querySelectorAll(EntityInfo_1.getEntitySelector())).forEach(function (element) {\n            element.removeAttribute('contentEditable');\n            tryTriggerEntityEvent_1.default(_this.editor, element, 8 /* ReplaceTemporaryContent */);\n        });\n    };\n    EntityPlugin.prototype.checkRemoveEntityForRange = function (event) {\n        var _this = this;\n        var editableEntityElements = [];\n        var selector = EntityInfo_1.getEntitySelector();\n        this.editor.queryElements(selector, 1 /* OnSelection */, function (element) {\n            if (element.isContentEditable) {\n                editableEntityElements.push(element);\n            }\n            else {\n                tryTriggerEntityEvent_1.default(_this.editor, element, 6 /* Overwrite */, event);\n            }\n        });\n        // For editable entities, we need to check if it is fully or partially covered by current selection,\n        // and trigger different events;\n        if (editableEntityElements.length > 0) {\n            var inSelectionEntityElements_1 = this.editor.queryElements(selector, 2 /* InSelection */);\n            editableEntityElements.forEach(function (element) {\n                var isFullyCovered = inSelectionEntityElements_1.indexOf(element) >= 0;\n                tryTriggerEntityEvent_1.default(_this.editor, element, isFullyCovered ? 6 /* Overwrite */ : 7 /* PartialOverwrite */, event);\n            });\n        }\n    };\n    return EntityPlugin;\n}());\nexports.default = EntityPlugin;\n/**\n * IE will show a resize border around the readonly content within content editable DIV\n * This is a workaround to remove it by temporarily move focus out of editor\n */\nvar workaroundSelectionIssueForIE = roosterjs_editor_dom_1.Browser.isIE\n    ? function (editor) {\n        editor.runAsync(function () {\n            var workaroundButton = editor.getCustomData('ENTITY_IE_FOCUS_BUTTON', function () {\n                var button = editor.getDocument().createElement('button');\n                button.style.overflow = 'hidden';\n                button.style.position = 'fixed';\n                button.style.width = '0';\n                button.style.height = '0';\n                button.style.left = '0';\n                button.style.top = '-1000px';\n                button.onblur = function () {\n                    button.style.display = 'none';\n                };\n                editor.insertNode(button, {\n                    position: 4 /* Outside */,\n                });\n                return button;\n            });\n            workaroundButton.style.display = '';\n            var range = editor.getDocument().createRange();\n            range.setStart(workaroundButton, 0);\n            try {\n                window.getSelection().removeAllRanges();\n                window.getSelection().addRange(range);\n            }\n            catch (_a) { }\n        });\n    }\n    : function () { };\n//# sourceMappingURL=EntityPlugin.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar getEntityElement_1 = require(\"./getEntityElement\");\nvar tryTriggerEntityEvent_1 = require(\"./tryTriggerEntityEvent\");\nvar roosterjs_editor_core_1 = require(\"roosterjs-editor-core\");\nvar roosterjs_editor_dom_1 = require(\"roosterjs-editor-dom\");\n/**\n * @internal\n * A content edit feature to trigger EntityOperation event with operation \"Click\" when user\n * clicks on a readonly entity.\n */\nexports.ClickOnEntityFeature = {\n    keys: [13 /* ENTER */],\n    shouldHandleEvent: cacheGetReadonlyEntityElement,\n    handleEvent: function (event, editor) {\n        var entityElement = cacheGetReadonlyEntityElement(event, editor);\n        tryTriggerEntityEvent_1.default(editor, entityElement, 1 /* Click */, event.rawEvent);\n    },\n};\n/**\n * @internal\n * A content edit feature to trigger EntityOperation event with operation \"Escape\" when user\n * presses ESC on a readonly entity.\n */\nexports.EscapeFromEntityFeature = {\n    keys: [27 /* ESCAPE */],\n    shouldHandleEvent: cacheGetReadonlyEntityElement,\n    handleEvent: function (event, editor) {\n        var entityElement = cacheGetReadonlyEntityElement(event, editor);\n        tryTriggerEntityEvent_1.default(editor, entityElement, 3 /* Escape */, event.rawEvent);\n    },\n};\n/**\n * @internal\n * A content edit feature to split current line into two lines at the cursor when user presses\n * ENTER right before a readonly entity.\n * Browser's default behavior will insert an extra BR tag before the entity which causes an extra\n * empty line. So we override the default behavior here.\n */\nexports.EnterBeforeReadonlyEntityFeature = {\n    keys: [13 /* ENTER */],\n    shouldHandleEvent: function (event, editor) {\n        return cacheGetNeighborEntityElement(event, editor, true /*isNext*/, false /*collapseOnly*/, true /*checkForSameLine*/);\n    },\n    handleEvent: function (event, editor) {\n        var _a;\n        event.rawEvent.preventDefault();\n        var range = editor.getSelectionRange();\n        var node = roosterjs_editor_dom_1.Position.getEnd(range).normalize().node;\n        var br = editor.getDocument().createElement('BR');\n        node.parentNode.insertBefore(br, node.nextSibling);\n        var block = editor.getBlockElementAtNode(node);\n        var newContainer;\n        if (block) {\n            newContainer = block.collapseToSingleElement();\n            (_a = br.parentNode) === null || _a === void 0 ? void 0 : _a.removeChild(br);\n        }\n        editor.getSelectionRange().deleteContents();\n        if (newContainer.nextSibling) {\n            editor.select(newContainer.nextSibling, 0 /* Begin */);\n        }\n    },\n};\n/**\n * @internal\n * A content edit feature to trigger EntityOperation event with operation \"RemoveFromEnd\" when user\n * press BACKSPACE right after an entity\n */\nexports.BackspaceAfterEntityFeature = {\n    keys: [8 /* BACKSPACE */],\n    shouldHandleEvent: function (event, editor) {\n        return cacheGetNeighborEntityElement(event, editor, false /*isNext*/, true /*collapseOnly*/);\n    },\n    handleEvent: function (event, editor) {\n        var element = cacheGetNeighborEntityElement(event, editor, false /*isNext*/, true /*collapseOnly*/);\n        tryTriggerEntityEvent_1.default(editor, element, 5 /* RemoveFromEnd */, event.rawEvent);\n    },\n};\n/**\n * @internal\n * A content edit feature to trigger EntityOperation event with operation \"RemoveFromStart\" when user\n * press DELETE right after an entity\n */\nexports.DeleteBeforeEntityFeature = {\n    keys: [46 /* DELETE */],\n    shouldHandleEvent: function (event, editor) {\n        return cacheGetNeighborEntityElement(event, editor, true /*isNext*/, true /*collapseOnly*/);\n    },\n    handleEvent: function (event, editor) {\n        var element = cacheGetNeighborEntityElement(event, editor, true /*isNext*/, true /*collapseOnly*/);\n        tryTriggerEntityEvent_1.default(editor, element, 4 /* RemoveFromStart */, event.rawEvent);\n    },\n};\nfunction cacheGetReadonlyEntityElement(event, editor) {\n    return roosterjs_editor_core_1.cacheGetEventData(event, 'READONLY_ENTITY_ELEMENT', function () {\n        var entityElement = getEntityElement_1.default(editor, event.rawEvent.target);\n        return entityElement && !entityElement.isContentEditable ? entityElement : null;\n    });\n}\nfunction cacheGetNeighborEntityElement(event, editor, isNext, collapseOnly, checkForSameLine) {\n    return roosterjs_editor_core_1.cacheGetEventData(event, 'NEIGHBOR_ENTITY_ELEMENT_' + isNext + '_' + collapseOnly + '_' + !!checkForSameLine, function () {\n        var range = editor.getSelectionRange();\n        if (collapseOnly && !range.collapsed) {\n            return null;\n        }\n        var pos = roosterjs_editor_dom_1.Position.getEnd(range);\n        var lookForPrev = !isNext && (pos.node.nodeType != 3 /* Text */ || pos.offset == 0);\n        var lookForNext = isNext && (pos.node.nodeType != 3 /* Text */ || pos.isAtEnd);\n        var entityNode = null;\n        if (lookForNext || lookForPrev) {\n            var traverser = editor.getBodyTraverser(pos.node);\n            var sibling = lookForPrev\n                ? traverser.getPreviousInlineElement()\n                : traverser.getNextInlineElement();\n            var node = sibling && sibling.getContainerNode();\n            if (checkForSameLine) {\n                var block = editor.getBlockElementAtNode(pos.node);\n                if (!block || !block.contains(node)) {\n                    node = null;\n                }\n            }\n            entityNode = getEntityElement_1.default(editor, node);\n        }\n        return entityNode;\n    });\n}\n//# sourceMappingURL=EntityFeatures.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar createEntityWrapper_1 = require(\"./createEntityWrapper\");\nvar getEntityElement_1 = require(\"./getEntityElement\");\nvar getEntityFromElement_1 = require(\"./getEntityFromElement\");\nvar roosterjs_editor_dom_1 = require(\"roosterjs-editor-dom\");\n/**\n * Insert an entity into editor.\n * @param editor The editor to insert entity into.\n * @param type Type of the entity\n * @param contentNode Root element of the entity\n * @param isBlock Whether the entity will be shown as a block\n * @param isReadonly Whether the entity will be a readonly entity\n * @param position (Optional) The position to insert into. If not specified, current position will be used.\n * If isBlock is true, entity will be insert below this position\n */\nfunction insertEntity(editor, type, contentNode, isBlock, isReadonly, position) {\n    var wrapper = createEntityWrapper_1.default(editor, type, contentNode, isBlock, isReadonly);\n    var currentRange;\n    if (position) {\n        currentRange = editor.getSelectionRange();\n        var node = position.normalize().node;\n        var existingEntity = getEntityElement_1.default(editor, node);\n        // Do not insert entity into another entity\n        if (existingEntity) {\n            position = new roosterjs_editor_dom_1.Position(existingEntity, -3 /* After */);\n        }\n        editor.select(position);\n    }\n    editor.insertNode(wrapper, {\n        updateCursor: false,\n        insertOnNewLine: isBlock,\n        replaceSelection: true,\n        position: 3 /* SelectionStart */,\n    });\n    if (isBlock) {\n        // Insert an extra empty line for block entity to make sure\n        // user can still put cursor below the entity.\n        var br = editor.getDocument().createElement('BR');\n        wrapper.parentNode.insertBefore(br, wrapper.nextSibling);\n    }\n    if (currentRange) {\n        editor.select(currentRange);\n    }\n    else if (!isBlock) {\n        editor.select(wrapper, -3 /* After */);\n    }\n    var entity = getEntityFromElement_1.default(wrapper);\n    editor.triggerContentChangedEvent(\"InsertEntity\" /* InsertEntity */, entity);\n    return entity;\n}\nexports.default = insertEntity;\n//# sourceMappingURL=insertEntity.js.map","export type Strings = { [key: string]: string };\r\n\r\nlet defaultStrings: { [category: string]: Strings } = {};\r\n\r\nexport function registerDefaultString(category: string, strings: Strings) {\r\n    defaultStrings[category] = strings;\r\n}\r\n\r\nexport function getString(category: string, name: string, strings?: Strings): string {\r\n    let str = (strings || {})[name];\r\n    if (str == null) {\r\n        str = defaultStrings[category][name];\r\n    }\r\n    return str;\r\n}\r\n","export const NullFunction = (...args: any[]) => { return undefined; };\r\n","interface HTMLElementForIE extends HTMLElement {\r\n    msMatchesSelector: (selector: string) => boolean;\r\n}\r\n\r\nexport function closest(element: Element, query: string): Element {\r\n    if (element && element.closest) {\r\n        return element.closest(query);\r\n    }\r\n\r\n    // for IE11 and below\r\n    while (element && !(element.matches || (<HTMLElementForIE>element).msMatchesSelector).call(element, query)) {\r\n        element = element.parentElement;\r\n    }\r\n\r\n    return element;\r\n}\r\n","import { Editor } from 'roosterjs-editor-core';\r\nimport { getFormatState } from 'roosterjs-editor-api';\r\nimport { DocumentCommand, Indentation, QueryScope } from 'roosterjs-editor-types';\r\n\r\nfunction execCommand(editor: Editor, command: DocumentCommand, addUndoSnapshotWhenCollapsed?: boolean) {\r\n    editor.focus();\r\n    const formatter = () => editor.getDocument().execCommand(command, false, null);\r\n\r\n    const range = editor.getSelectionRange();\r\n    if (range && range.collapsed && !addUndoSnapshotWhenCollapsed) {\r\n        formatter();\r\n    } else {\r\n        editor.addUndoSnapshot(formatter);\r\n    }\r\n}\r\n\r\n/**\r\n * Toggle numbering at selection\r\n * If selection contains numbering in deep level, toggle numbering will decrease the numbering level by one\r\n * If selection contains bullet list, toggle numbering will convert the bullet list into number list\r\n * If selection contains both bullet/numbering and normal text, the behavior is decided by corresponding\r\n * realization of browser execCommand API\r\n * @param editor The editor instance\r\n */\r\nexport function toggleNonCompatNumbering(editor: Editor) {\r\n    execCommand(editor, DocumentCommand.InsertOrderedList, true);\r\n}\r\n\r\n/**\r\n * Toggle bullet at selection\r\n * If selection contains bullet in deep level, toggle bullet will decrease the bullet level by one\r\n * If selection contains number list, toggle bullet will convert the number list into bullet list\r\n * If selection contains both bullet/numbering and normal text, the behavior is decided by corresponding\r\n * browser execCommand API\r\n * @param editor The editor instance\r\n */\r\nexport function toggleNonCompatBullet(editor: Editor) {\r\n    execCommand(editor, DocumentCommand.InsertUnorderedList, true);\r\n}\r\n\r\n/**\r\n * Set indentation at selection\r\n * If selection contains bullet/numbering list, increase/decrease indentation will\r\n * increase/decrease the list level by one.\r\n * @param editor The editor instance\r\n * @param indentation The indentation option:\r\n * Indentation.Increase to increase indentation or Indentation.Decrease to decrease indentation\r\n */\r\nexport function setNonCompatIndentation(editor: Editor, indentation: Indentation) {\r\n    editor.focus();\r\n    const command = indentation == Indentation.Increase ? 'indent' : 'outdent';\r\n    editor.addUndoSnapshot(() => {\r\n        const format = getFormatState(editor);\r\n        editor.getDocument().execCommand(command, false, null);\r\n        if (!format.isBullet && !format.isNumbering) {\r\n            editor.queryElements('blockquote', QueryScope.OnSelection, node => {\r\n                node.style.marginTop = '0';\r\n                node.style.marginBottom = '0';\r\n            });\r\n        }\r\n    });\r\n}\r\n","/* tslint:disable */\nimport { loadStyles } from '@microsoft/load-themed-styles';\nloadStyles([{\"rawString\":\"@-webkit-keyframes roosterjsReactSpin_a7c369ec{0%{-webkit-transform:rotateZ(0deg);transform:rotateZ(0deg)}100%{-webkit-transform:rotateZ(360deg);transform:rotateZ(360deg)}}@keyframes roosterjsReactSpin_a7c369ec{0%{-webkit-transform:rotateZ(0deg);transform:rotateZ(0deg)}100%{-webkit-transform:rotateZ(360deg);transform:rotateZ(360deg)}}.roosterjsReactSpinner_a7c369ec{-webkit-animation-name:roosterjsReactSpin_a7c369ec;animation-name:roosterjsReactSpin_a7c369ec;-webkit-animation-duration:1.3s;animation-duration:1.3s;-webkit-animation-iteration-count:infinite;animation-iteration-count:infinite;-webkit-animation-timing-function:cubic-bezier(0.53, 0.21, 0.29, 0.67);animation-timing-function:cubic-bezier(0.53, 0.21, 0.29, 0.67);padding:0 4px}\"}]);\nexport const roosterjsReactSpinner = \"roosterjsReactSpinner_a7c369ec\";\nexport const roosterjsReactSpin = \"roosterjsReactSpin_a7c369ec\";","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","import { Editor, EditorPlugin } from \"roosterjs-editor-core\";\r\nimport { PluginEvent, PluginEventType } from \"roosterjs-editor-types\";\r\n\r\nexport default class ContentChangedPlugin implements EditorPlugin {\r\n    private changeDisposer: () => void;\r\n    private textInputDisposer: () => void;\r\n    private pasteDisposer: () => void;\r\n\r\n    protected editor: Editor;\r\n\r\n    public constructor(private onChange: (newValue: string) => void) {}\r\n\r\n    public getName() {\r\n        return 'ContentChanged';\r\n    }\r\n\r\n    public initialize(editor: Editor): void {\r\n        this.editor = editor;\r\n        this.changeDisposer = this.editor.addDomEventHandler(\"input\", this.onChangeEvent);\r\n        this.textInputDisposer = this.editor.addDomEventHandler(\"textinput\", this.onChangeEvent); // IE 11\r\n        this.pasteDisposer = this.editor.addDomEventHandler(\"paste\", this.onChangeEvent);\r\n    }\r\n\r\n    public onPluginEvent(event: PluginEvent): void {\r\n        if (event && event.eventType === PluginEventType.ContentChanged) {\r\n            this.onChangeEvent();\r\n        }\r\n    }\r\n\r\n    public dispose(): void {\r\n        if (this.changeDisposer) {\r\n            this.changeDisposer();\r\n            this.changeDisposer = null;\r\n        }\r\n        if (this.textInputDisposer) {\r\n            this.textInputDisposer();\r\n            this.textInputDisposer = null;\r\n        }\r\n        if (this.pasteDisposer) {\r\n            this.pasteDisposer();\r\n            this.pasteDisposer = null;\r\n        }\r\n\r\n        this.editor = null;\r\n    }\r\n\r\n    private onChangeEvent = (): void => {\r\n        this.onChange(this.editor.getContent());\r\n    };\r\n}\r\n","import { Editor, EditorPlugin } from 'roosterjs-editor-core';\r\nimport { getTagOfNode } from 'roosterjs-editor-dom';\r\n\r\nexport default class DoubleClickImagePlugin implements EditorPlugin {\r\n    private onDoubleClickDisposer: () => void;\r\n    private editor: Editor;\r\n\r\n    public constructor(private doubleClickImageSelector: string = 'img') {}\r\n\r\n    public getName() {\r\n        return 'DoubleClickImage';\r\n    }\r\n\r\n    public initialize(editor: Editor): void {\r\n        this.editor = editor;\r\n        this.onDoubleClickDisposer = this.editor.addDomEventHandler('dblclick', this.onDoubleClick);\r\n    }\r\n\r\n    public dispose(): void {\r\n        if (this.editor) {\r\n            this.editor = null;\r\n            this.onDoubleClickDisposer();\r\n        }\r\n    }\r\n\r\n    public getEditor(): Editor {\r\n        return this.editor;\r\n    }\r\n\r\n    private onDoubleClick = (ev: MouseEvent): void => {\r\n        const target = ev.target as HTMLElement;\r\n        if (getTagOfNode(target) !== 'IMG') {\r\n            return;\r\n        }\r\n\r\n        const src = target.getAttribute('src');\r\n        if (!src) {\r\n            return;\r\n        }\r\n\r\n        const parent = target.parentNode as HTMLElement;\r\n        const elements = parent ? ([].slice.call(parent.querySelectorAll(this.doubleClickImageSelector)) as HTMLElement[]) : [];\r\n        if (elements.indexOf(target) < 0) {\r\n            return;\r\n        }\r\n\r\n        const isDataUrl = src.indexOf('data:') === 0;\r\n        const openedWindow = window.open(isDataUrl ? null : src, '_blank');\r\n        if (openedWindow) {\r\n            // noopener\r\n            openedWindow.opener = null;\r\n            if (isDataUrl) {\r\n                // for data URL, we need to create an image otherwise we'll get\r\n                // Window is not allowed to navigate Top-frame navigations to data URLs\r\n                openedWindow.document.body.innerHTML = `<img src=\"${src}\">`;\r\n            }\r\n        }\r\n    };\r\n}\r\n","import { Editor, EditorPlugin } from \"roosterjs-editor-core\";\r\nimport { BeforePasteEvent, ExtractContentEvent, PasteOption, PluginEvent, PluginEventType } from \"roosterjs-editor-types\";\r\n\r\nimport { hasPlaceholder, ImageManagerInteface, PlaceholderDataAttribute } from \"../utils/ImageManager\";\r\n\r\nconst PlaceholderRegex = new RegExp(`<img [^>]*${PlaceholderDataAttribute}=\"\\\\d+\"[^>]*>`, \"gm\");\r\n\r\nexport default class PasteImagePlugin implements EditorPlugin {\r\n    private editor: Editor;\r\n\r\n    constructor(private imageManager: ImageManagerInteface, private preventImagePaste: boolean = false) {}\r\n\r\n    public getName() {\r\n        return 'PasteImage';\r\n    }\r\n\r\n    public initialize(editor: Editor): void {\r\n        this.editor = editor;\r\n    }\r\n\r\n    public dispose(): void {\r\n        if (this.editor) {\r\n            this.editor = null;\r\n        }\r\n    }\r\n\r\n    public onPluginEvent(event: PluginEvent): void {\r\n        if (event.eventType === PluginEventType.ExtractContent) {\r\n            const extractContentEvent = event as ExtractContentEvent;\r\n            const content = extractContentEvent.content;\r\n            const runRemove = hasPlaceholder(content);\r\n            if (runRemove) {\r\n                extractContentEvent.content = content.replace(PlaceholderRegex, \"\");\r\n            }\r\n\r\n            return;\r\n        }\r\n\r\n        if (event.eventType !== PluginEventType.BeforePaste) {\r\n            return;\r\n        }\r\n        const beforePasteEvent = event as BeforePasteEvent;\r\n        if (beforePasteEvent.pasteOption !== PasteOption.PasteImage) {\r\n            return;\r\n        }\r\n\r\n        // handle only before paste and image paste\r\n        const editor = this.getEditor();\r\n        if (!editor) {\r\n            return;\r\n        }\r\n\r\n        // prevent pasting of image by telling the handler to interpret the paste as text\r\n        if (this.preventImagePaste) {\r\n            beforePasteEvent.pasteOption = PasteOption.PasteText;\r\n            return;\r\n        }\r\n\r\n        const image = beforePasteEvent.clipboardData.image;\r\n        const placeholder: HTMLElement = this.imageManager.upload(editor, image, true);\r\n        if (placeholder === null) {\r\n            return;\r\n        }\r\n\r\n        // modify the pasting content and option so Paste plugin won't handle\r\n        beforePasteEvent.fragment.appendChild(placeholder);\r\n        beforePasteEvent.clipboardData.html = placeholder.outerHTML;\r\n        beforePasteEvent.pasteOption = PasteOption.PasteHtml;\r\n    }\r\n\r\n    public setPreventImagePaste(enabled: boolean = true): void {\r\n        this.preventImagePaste = enabled;\r\n    }\r\n\r\n    public getEditor(): Editor {\r\n        return this.editor;\r\n    }\r\n}\r\n","import { Editor, EditorPlugin } from \"roosterjs-editor-core\";\r\nimport { BeforePasteEvent, PasteOption, PluginEvent, PluginEventType } from \"roosterjs-editor-types\";\r\n\r\nexport default class IgnorePasteImagePlugin implements EditorPlugin {\r\n    private editor: Editor;\r\n    private static InternalInstance = new IgnorePasteImagePlugin();\r\n\r\n    private constructor() {}\r\n\r\n    public static get Instance(): IgnorePasteImagePlugin {\r\n        return IgnorePasteImagePlugin.InternalInstance;\r\n    }\r\n\r\n    public getName() {\r\n        return 'IgnorePasteImage';\r\n    }\r\n\r\n    public initialize(editor: Editor): void {\r\n        this.editor = editor;\r\n    }\r\n\r\n    public dispose(): void {\r\n        if (this.editor) {\r\n            this.editor = null;\r\n        }\r\n    }\r\n\r\n    public onPluginEvent(event: PluginEvent): void {\r\n        if (event.eventType !== PluginEventType.BeforePaste) {\r\n            return;\r\n        }\r\n        const beforePasteEvent = event as BeforePasteEvent;\r\n        if (beforePasteEvent.pasteOption !== PasteOption.PasteImage) {\r\n            return;\r\n        }\r\n\r\n        // handle only before paste and image paste\r\n        const editor = this.getEditor();\r\n        if (!editor) {\r\n            return;\r\n        }\r\n\r\n        // prevent pasting of image by telling the handler to interpret the paste as text\r\n        beforePasteEvent.pasteOption = PasteOption.PasteText;\r\n    }\r\n\r\n    public getEditor(): Editor {\r\n        return this.editor;\r\n    }\r\n}\r\n","import { Undo } from 'roosterjs-editor-core';\r\nimport { UndoSnapshotsService } from 'roosterjs-editor-core';\r\n\r\nimport { hasPlaceholder, ImageManagerInteface, UpdatePlaceholdersResult } from '../utils/ImageManager';\r\n\r\n// Max stack size that cannot be exceeded. When exceeded, old undo history will be dropped\r\n// to keep size under limit. This is kept at 10MB.\r\nconst MAXSIZELIMIT = 10000000;\r\n\r\ninterface Snapshot {\r\n    value: string;\r\n    hasPlaceholder: boolean;\r\n}\r\n\r\nclass UndoSnapshotsWithImage implements UndoSnapshotsService {\r\n    private snapshots: Snapshot[];\r\n    private totalSize: number;\r\n    private currentIndex: number;\r\n\r\n    constructor(private imageManager: ImageManagerInteface, private maxSize: number) {\r\n        this.snapshots = [];\r\n        this.totalSize = 0;\r\n        this.currentIndex = -1;\r\n    }\r\n\r\n    public canMove(delta: number): boolean {\r\n        const newIndex = this.currentIndex + delta;\r\n        return newIndex >= 0 && newIndex < this.snapshots.length;\r\n    }\r\n\r\n    public move(delta: number): string {\r\n        if (!this.canMove(delta)) {\r\n            return null;\r\n        }\r\n\r\n        const lastIndex = this.currentIndex;\r\n        this.currentIndex += delta;\r\n        const snapshot = this.snapshots[this.currentIndex];\r\n\r\n        // There is a chance snapshots were saved with placeholders. To resolve that,\r\n        // we optimistically ask Image Manager to replace the placeholders with images,\r\n        // since the manager caches placeholder IDs to final image URLs (when they are resolved).\r\n        // The manager returns the final HTML and also if all of the placeholders are resolved.\r\n        if (snapshot.hasPlaceholder) {\r\n            const originalValue = snapshot.value;\r\n            const result: UpdatePlaceholdersResult = this.imageManager.updatePlaceholders(originalValue);\r\n            snapshot.hasPlaceholder = !result.resolvedAll;\r\n            snapshot.value = result.html;\r\n            const sizeDelta = originalValue.length - result.html.length;\r\n\r\n            // if we undo/redo and the content is the same after updating the placeholders, keep moving\r\n            // (we get two snapshots when inserting an image, one for the placeholder, and another when the placeholder is resolved)\r\n            const lastSnapshot = this.snapshots[lastIndex];\r\n            if (lastSnapshot && lastSnapshot.value === snapshot.value && delta !== 0) {\r\n                // since content is the same, remove the last \"duplicated\" snapshot\r\n                this.totalSize -= snapshot.value.length;\r\n                this.snapshots.splice(lastIndex);\r\n\r\n                // then, move again by one unit at a time and until content is different after resolving placeholders\r\n                return this.move(delta < 0 ? -1 : 1);\r\n            } else {\r\n                // it is possible total size is greater at this point (unlikely if default spinner is used)\r\n                this.totalSize -= sizeDelta;\r\n            }\r\n        }\r\n\r\n        return snapshot.value;\r\n    }\r\n\r\n    public addSnapshot(value: string): void {\r\n        if (this.currentIndex > -1 && value === this.snapshots[this.currentIndex].value) {\r\n            return;\r\n        }\r\n\r\n        this.clearRedo();\r\n        this.snapshots.push({ value, hasPlaceholder: hasPlaceholder(value) });\r\n        ++this.currentIndex;\r\n        this.totalSize += value.length;\r\n\r\n        let removeCount = 0;\r\n        while (removeCount < this.snapshots.length && this.totalSize > this.maxSize) {\r\n            this.totalSize -= this.snapshots[removeCount].value.length;\r\n            removeCount++;\r\n        }\r\n\r\n        if (removeCount > 0) {\r\n            this.snapshots.splice(0, removeCount);\r\n            this.currentIndex -= removeCount;\r\n        }\r\n    }\r\n\r\n    public clearRedo(): void {\r\n        if (!this.canMove(1)) {\r\n            return;\r\n        }\r\n\r\n        let removedSize = 0;\r\n        for (let i = this.currentIndex + 1; i < this.snapshots.length; ++i) {\r\n            removedSize += this.snapshots[i].value.length;\r\n        }\r\n        this.snapshots.splice(this.currentIndex + 1);\r\n        this.totalSize -= removedSize;\r\n    }\r\n}\r\n\r\nexport default class UndoWithImagePlugin extends Undo {\r\n    /**\r\n     * Create an instance of Undo\r\n     * @param preserveSnapshots True to preserve the snapshots after dispose, this allows\r\n     * this object to be reused when editor is disposed and created again\r\n     * @param bufferSize The buffer size for snapshots. Default value is 10MB, it is possible after\r\n     * placeholder to image resolution that buffer size is greater.\r\n     */\r\n    constructor(private imageManager: ImageManagerInteface, preserveSnapshots?: boolean, private bufferSize: number = MAXSIZELIMIT) {\r\n        super(preserveSnapshots, bufferSize);\r\n    }\r\n\r\n    protected getSnapshotsManager(): UndoSnapshotsService {\r\n        if (!this.undoSnapshots) {\r\n            this.undoSnapshots = new UndoSnapshotsWithImage(this.imageManager, this.bufferSize);\r\n        }\r\n\r\n        return this.undoSnapshots;\r\n    }\r\n\r\n    public reset(initialContent: string) : void {\r\n        this.clear();\r\n        this.getSnapshotsManager().addSnapshot(initialContent);\r\n    }\r\n}\r\n","export const AriaAttributes = {\r\n    ActiveDescendant: \"aria-activedescendant\",\r\n    AutoComplete: \"aria-autocomplete\",\r\n    Controls: \"aria-controls\",\r\n    Expanded: \"aria-expanded\",\r\n    HasPopup: \"aria-haspopup\",\r\n    Owns: \"aria-owns\",\r\n    Pressed: \"aria-pressed\"\r\n};\r\n","export { default as RoosterCommandBar } from \"./components/RoosterCommandBar\";\r\nexport { RoosterCommandBarProps, RoosterCommandBarState, RoosterCommandBarButton } from \"./schema/RoosterCommandBarSchema\";\r\nexport { default as RoosterCommandBarPlugin, RoosterCommandBarPluginOptions } from \"./plugins/RoosterCommandBarPlugin\";\r\nexport { RoosterShortcutCommands } from \"./plugins/RoosterCommandBarPlugin.Shortcuts\";\r\nexport { default as RoosterCommandBarPluginInterface } from \"./schema/RoosterCommandBarPluginInterface\";\r\nexport { RoosterCommandBarStringKeys, RoosterCommmandBarButtonKeys } from \"./utils/OutOfBoxCommandBarButtons\";\r\nexport {\r\n    getIconOnRenderDelegate,\r\n    getIconOnRenderDelegateWithCustomCacheKey,\r\n    getIconButtonOnRenderDelegate,\r\n    ButtonOnRenderDelegate,\r\n    IconOnRenderDelegateOptions\r\n} from \"./utils/getIconOnRenderDelegate\";\r\nexport { createLinkDialog, LinkDialogProps, InsertLinkStringKeys } from \"./components/LinkDialog\";\r\n","import \"./RoosterCommandBar.scss.g\";\r\n\r\nimport { ICalloutProps } from \"office-ui-fabric-react/lib/Callout\";\r\nimport { CommandBar } from \"office-ui-fabric-react/lib/CommandBar\";\r\nimport { IContextualMenuItem } from \"office-ui-fabric-react/lib/ContextualMenu\";\r\nimport { FocusZoneDirection } from \"office-ui-fabric-react/lib/FocusZone\";\r\nimport { Async, css } from \"office-ui-fabric-react/lib/Utilities\";\r\nimport * as React from \"react\";\r\nimport { getFormatState, insertImage } from \"roosterjs-editor-api\";\r\nimport { Editor } from \"roosterjs-editor-core\";\r\nimport { ChangeSource, FormatState } from \"roosterjs-editor-types\";\r\nimport { AriaAttributes } from \"roosterjs-react-common\";\r\nimport { createFormatState } from \"roosterjs-react-editor\";\r\n\r\nimport { RoosterCommandBarButtonInternal, RoosterCommandBarProps, RoosterCommandBarState } from \"../schema/RoosterCommandBarSchema\";\r\nimport { getIconButtonOnRenderDelegate } from \"../utils/getIconOnRenderDelegate\";\r\nimport {\r\n    OutOfBoxCommandBarButtonMap,\r\n    OutOfBoxCommandBarButtons,\r\n    RoosterCommandBarButtonRootClassName,\r\n    RoosterCommandBarIconClassName,\r\n    RoosterCommmandBarButtonKeys as ButtonKeys\r\n} from \"../utils/OutOfBoxCommandBarButtons\";\r\n\r\nconst DisplayNoneStyle = { display: \"none\" } as React.CSSProperties;\r\n\r\nexport default class RoosterCommandBar extends React.PureComponent<RoosterCommandBarProps, RoosterCommandBarState> {\r\n    private static IdCounter: number = 0;\r\n\r\n    private _id = RoosterCommandBar.IdCounter++;\r\n    private _async: Async;\r\n    private _updateFormatStateDebounced: () => void;\r\n    private _fileInput: HTMLInputElement;\r\n    private _buttons: RoosterCommandBarButtonInternal[];\r\n\r\n    constructor(props: RoosterCommandBarProps) {\r\n        super(props);\r\n\r\n        this.state = { formatState: createFormatState() };\r\n        this._initButtons(props);\r\n\r\n        this._async = new Async();\r\n        this._updateFormatStateDebounced = this._async.debounce(() => this._updateFormatState(), 100);\r\n    }\r\n\r\n    public render(): JSX.Element {\r\n        const { className, calloutClassName, calloutOnDismiss, overflowMenuProps, commandBarClassName, ellipsisAriaLabel } = this.props;\r\n\r\n        // with the newest changes on the editor, refresh the buttons (e.g. bold button being selected if text selected is bold and header being checked if used)\r\n        this._buttons.forEach(this._refreshButtonStates);\r\n        return (\r\n            <div className={css(\"rooster-command-bar\", className)}>\r\n                <CommandBar\r\n                    className={css(\"rooster-command-bar-base\", commandBarClassName)}\r\n                    items={this._buttons}\r\n                    overflowButtonProps={{\r\n                        ariaLabel: ellipsisAriaLabel,\r\n                        menuProps: {\r\n                            ...overflowMenuProps,\r\n                            // we set items as empty to satisfy the type checker & because otherwise the component\r\n                            // throws an error about an unexpected `undefined` value on first render.\r\n                            //\r\n                            // We expect it to be overridden by the commandBar when rendering the button\r\n                            // after measuring.\r\n                            items: [],\r\n                            calloutProps: {\r\n                                className: calloutClassName\r\n                            },\r\n                            onDismiss: calloutOnDismiss,\r\n                            className: css(\"rooster-command-bar-overflow\", overflowMenuProps && overflowMenuProps.className),\r\n                            focusZoneProps: { direction: FocusZoneDirection.horizontal }\r\n                        }\r\n                    }}\r\n                />\r\n                <input type=\"file\" ref={this._fileInputOnRef} accept=\"image/*\" style={DisplayNoneStyle} onChange={this._fileInputOnChange} />\r\n            </div>\r\n        );\r\n    }\r\n\r\n    public componentDidMount(): void {\r\n        const { roosterCommandBarPlugin } = this.props;\r\n\r\n        roosterCommandBarPlugin.registerRoosterCommandBar(this);\r\n    }\r\n\r\n    public componentWillUnmount(): void {\r\n        const { roosterCommandBarPlugin } = this.props;\r\n\r\n        roosterCommandBarPlugin.unregisterRoosterCommandBar(this);\r\n\r\n        if (this._async) {\r\n            this._async.dispose();\r\n            this._async = null;\r\n        }\r\n    }\r\n\r\n    public componentWillReceiveProps(nextProps: RoosterCommandBarProps, nextState: RoosterCommandBarState) {\r\n        if (nextProps.buttonOverrides !== this.props.buttonOverrides) {\r\n            this._initButtons(nextProps);\r\n        }\r\n    }\r\n\r\n    public refreshFormatState(): void {\r\n        this._updateFormatStateDebounced();\r\n    }\r\n\r\n    private _initButtons(props: RoosterCommandBarProps): void {\r\n        const { buttonOverrides = [], emojiPlugin } = props;\r\n\r\n        const buttonMap = { ...OutOfBoxCommandBarButtonMap };\r\n        const visibleButtonKeys = OutOfBoxCommandBarButtons.map(item => item.key);\r\n\r\n        for (const button of buttonOverrides) {\r\n            if (!button) {\r\n                continue;\r\n            }\r\n\r\n            const currentButton = buttonMap[button.key];\r\n            if (currentButton) {\r\n                buttonMap[button.key] = { ...currentButton, ...button };\r\n                const currentSubMenuProps = currentButton.subMenuProps;\r\n                const subMenuPropsOverride = button.subMenuPropsOverride;\r\n                if (currentSubMenuProps && subMenuPropsOverride) {\r\n                    buttonMap[button.key].subMenuProps = {\r\n                        ...currentSubMenuProps,\r\n                        ...subMenuPropsOverride,\r\n                        className: css(currentSubMenuProps.className, subMenuPropsOverride.className)\r\n                    };\r\n                }\r\n            } else {\r\n                buttonMap[button.key] = button;\r\n            }\r\n\r\n            if (visibleButtonKeys.indexOf(button.key) === -1) {\r\n                visibleButtonKeys.push(button.key);\r\n            }\r\n        }\r\n        if (!emojiPlugin) {\r\n            const emojiIndex = visibleButtonKeys.indexOf(ButtonKeys.Emoji);\r\n            if (emojiIndex > -1) {\r\n                visibleButtonKeys.splice(emojiIndex, 1);\r\n            }\r\n        }\r\n\r\n        this._buttons = visibleButtonKeys.map(key => this._createButton(buttonMap[key])).filter(b => !!b && !b.exclude);\r\n        this._buttons.sort((l: RoosterCommandBarButtonInternal, r: RoosterCommandBarButtonInternal) => {\r\n            if (l.order !== r.order) {\r\n                const leftOrder = l.order == null ? Number.MAX_VALUE : l.order;\r\n                const rightOrder = r.order == null ? Number.MAX_VALUE : r.order;\r\n                return leftOrder - rightOrder;\r\n            }\r\n\r\n            return visibleButtonKeys.indexOf(l.key) - visibleButtonKeys.indexOf(r.key);\r\n        });\r\n    }\r\n\r\n    private _fileInputOnRef = (ref: HTMLInputElement): void => {\r\n        this._fileInput = ref;\r\n    };\r\n\r\n    private _fileInputOnChange = (): void => {\r\n        const { roosterCommandBarPlugin, imageManager } = this.props;\r\n\r\n        const editor: Editor = roosterCommandBarPlugin.getEditor();\r\n        const file = this._fileInput.files[0];\r\n        if (editor && !editor.isDisposed() && file) {\r\n            if (imageManager) {\r\n                const placeholder = imageManager.upload(editor, file);\r\n                editor.insertNode(placeholder);\r\n                editor.triggerContentChangedEvent(ChangeSource.Format);\r\n                editor.addUndoSnapshot();\r\n            } else {\r\n                insertImage(editor, file);\r\n            }\r\n            this._fileInput.value = \"\";\r\n        }\r\n    };\r\n\r\n    private _refreshButtonStatesCore = (commandBarButton: RoosterCommandBarButtonInternal, firstLevel: boolean): RoosterCommandBarButtonInternal => {\r\n        if (!commandBarButton) {\r\n            return null;\r\n        }\r\n\r\n        const { formatState } = this.state;\r\n\r\n        if (commandBarButton.getChecked) {\r\n            const checked = commandBarButton.getChecked(formatState);\r\n            commandBarButton.checked = checked;\r\n\r\n            if (!commandBarButton.isContextMenuItem) {\r\n                commandBarButton[AriaAttributes.Pressed] = checked; // OF 5.0\r\n            }\r\n        }\r\n        if (commandBarButton.getDisabled) {\r\n            commandBarButton.disabled = commandBarButton.getDisabled(formatState);\r\n        }\r\n        if (commandBarButton.subMenuProps && commandBarButton.subMenuProps.items) {\r\n            commandBarButton.subMenuProps.items.forEach(this._refreshChildButtonStates);\r\n        }\r\n\r\n        return commandBarButton;\r\n    };\r\n\r\n    private _refreshButtonStates = (commandBarButton: RoosterCommandBarButtonInternal): RoosterCommandBarButtonInternal => {\r\n        return this._refreshButtonStatesCore(commandBarButton, true);\r\n    };\r\n\r\n    private _refreshChildButtonStates = (commandBarButton: RoosterCommandBarButtonInternal): RoosterCommandBarButtonInternal => {\r\n        return this._refreshButtonStatesCore(commandBarButton, false);\r\n    };\r\n\r\n    private _createButton = (commandBarButton: RoosterCommandBarButtonInternal, firstLevel: boolean = true): RoosterCommandBarButtonInternal => {\r\n        if (!commandBarButton) {\r\n            return null;\r\n        }\r\n\r\n        const { strings, calloutClassName, calloutOnDismiss, tooltipDirectionHint } = this.props;\r\n        const className = commandBarButton.className || \"\";\r\n        const rootClassName = className.split(\" \").indexOf(RoosterCommandBarButtonRootClassName) < 0 ? RoosterCommandBarButtonRootClassName : undefined;\r\n        // make a copy of the OOB button template since we're changing its properties\r\n        const button = { ...commandBarButton, className: css(rootClassName, { \"first-level\": firstLevel }, className) };\r\n\r\n        if (!button.onRender && button.onRenderOptions) {\r\n            const { customCacheKey = `${button.key}${this._id}` } = button.onRenderOptions;\r\n            button.onRender = getIconButtonOnRenderDelegate({ ...button.onRenderOptions, customCacheKey, tooltipDirectionHint });\r\n        }\r\n        button.onClick = button.onClick || this._onCommandBarButtonClick.bind(this, button);\r\n        button.iconOnly = true;\r\n        if (button.iconProps) {\r\n            const { className = \"\" } = button.iconProps;\r\n            button.iconProps = {\r\n                ...button.iconProps,\r\n                className: className.split(\" \").indexOf(RoosterCommandBarIconClassName) < 0 ? css(RoosterCommandBarIconClassName, className) : className\r\n            };\r\n        }\r\n        if (strings && strings[button.key] != null) {\r\n            button.name = strings[button.key];\r\n            if (button.title) {\r\n                button.title = button.name; // for buttons like color which has title/tooltip\r\n            }\r\n        }\r\n        if (button.subMenuProps && button.subMenuProps.items) {\r\n            button.subMenuProps = { ...button.subMenuProps }; // make a copy of the OOB submenu properties since we're changing them\r\n            button.subMenuProps.items = button.subMenuProps.items.map(this._createChildButton);\r\n            button.subMenuProps.calloutProps = { className: calloutClassName } as ICalloutProps;\r\n            button.subMenuProps.onDismiss = calloutOnDismiss;\r\n        }\r\n\r\n        // make sure the initial states are correct\r\n        this._refreshButtonStatesCore(button, firstLevel);\r\n\r\n        return button;\r\n    };\r\n\r\n    private _createChildButton = (commandBarButton: RoosterCommandBarButtonInternal): RoosterCommandBarButtonInternal => {\r\n        return this._createButton(commandBarButton, false);\r\n    };\r\n\r\n    private _onCommandBarButtonClick = (button: RoosterCommandBarButtonInternal | IContextualMenuItem) => {\r\n        const { roosterCommandBarPlugin, onButtonClicked } = this.props;\r\n\r\n        const editor: Editor = roosterCommandBarPlugin.getEditor();\r\n        if (editor && button.handleChange) {\r\n            const outOfBoxItem: RoosterCommandBarButtonInternal = button;\r\n            outOfBoxItem.handleChange(editor, this.props, this.state);\r\n        }\r\n\r\n        // special case insert image\r\n        if (button.key === ButtonKeys.InsertImage) {\r\n            this._fileInput.click();\r\n        }\r\n\r\n        this._updateFormatState();\r\n        onButtonClicked && onButtonClicked(button.key);\r\n    };\r\n\r\n    private _updateFormatState = (): void => {\r\n        const { roosterCommandBarPlugin } = this.props;\r\n\r\n        const editor: Editor = roosterCommandBarPlugin.getEditor();\r\n        const formatState = editor ? getFormatState(editor) : null;\r\n        if (formatState && this._hasFormatStateChanged(formatState)) {\r\n            this.setState({ formatState });\r\n        }\r\n    };\r\n\r\n    private _hasFormatStateChanged(newState: FormatState): boolean {\r\n        const { formatState } = this.state;\r\n\r\n        for (const key in formatState) {\r\n            if (formatState[key] !== newState[key]) {\r\n                return true;\r\n            }\r\n        }\r\n\r\n        return false;\r\n    }\r\n}\r\n","/* tslint:disable */\nimport { loadStyles } from '@microsoft/load-themed-styles';\nloadStyles([{\"rawString\":\".rooster-command-bar .rooster-command-bar-base{background:#fff}.rooster-command-bar .ms-CommandBar-primaryCommands{margin:0 4px}.rooster-command-bar .ms-CommandBar-sideCommands{padding:0}.rooster-command-button-root.first-level:not(:last-child){padding-right:2px}.rooster-command-bar-button{min-width:32px;line-height:40px;height:40px;border-color:transparent}html[dir=ltr] .rooster-command-bar .ms-CommandBar-primaryCommands,html[dir=rtl] .rooster-command-bar .ms-CommandBar-primaryCommands{margin:0 4px}html[dir=ltr] .rooster-command-bar .ms-CommandBar-sideCommands,html[dir=rtl] .rooster-command-bar .ms-CommandBar-sideCommands{padding:0}.rooster-command-bar .command-button-tool-tip,.rooster-command-bar-overflow .command-button-tool-tip{display:block}.rooster-command-bar .stacked-icon-container,.rooster-command-bar-overflow .stacked-icon-container{display:-webkit-box;display:-ms-flexbox;display:flex;height:100%;position:relative}.rooster-command-bar .stacked-icon-container>.stacked-icon,.rooster-command-bar-overflow .stacked-icon-container>.stacked-icon{font-size:16px;position:absolute;left:0;top:0}.rooster-command-bar .stacked-icon-container>.stacked-icon:first-child,.rooster-command-bar-overflow .stacked-icon-container>.stacked-icon:first-child{position:relative}.rooster-command-bar .stacked-icon-container .highlight-swatch,.rooster-command-bar-overflow .stacked-icon-container .highlight-swatch{color:#ff0}.rooster-command-bar .stacked-icon-container .stacked-icon-RemoveLinkX,.rooster-command-bar .stacked-icon-container .color-swatch,.rooster-command-bar-overflow .stacked-icon-container .stacked-icon-RemoveLinkX,.rooster-command-bar-overflow .stacked-icon-container .color-swatch{color:#e81123}.rooster-command-bar .stacked-icon-container .stacked-icon-ClearFormattingEraser,.rooster-command-bar-overflow .stacked-icon-container .stacked-icon-ClearFormattingEraser{color:#e68497}.rooster-command-bar .stacked-icon-container .stacked-icon-IncreaseIndentArrow,.rooster-command-bar .stacked-icon-container .stacked-icon-DecreaseIndentArrow,.rooster-command-bar .stacked-icon-container .stacked-icon-BulletedListBullet,.rooster-command-bar .stacked-icon-container .stacked-icon-NumberedListNumber,.rooster-command-bar .stacked-icon-container .stacked-icon-Photo2Fill,.rooster-command-bar-overflow .stacked-icon-container .stacked-icon-IncreaseIndentArrow,.rooster-command-bar-overflow .stacked-icon-container .stacked-icon-DecreaseIndentArrow,.rooster-command-bar-overflow .stacked-icon-container .stacked-icon-BulletedListBullet,.rooster-command-bar-overflow .stacked-icon-container .stacked-icon-NumberedListNumber,.rooster-command-bar-overflow .stacked-icon-container .stacked-icon-Photo2Fill{color:#0078d4}.rooster-command-bar .stacked-icon-container .high-contrast-icon,.rooster-command-bar-overflow .stacked-icon-container .high-contrast-icon{display:none}@media screen and (-ms-high-contrast: active){.rooster-command-bar .stacked-icon-container .high-contrast-icon,.rooster-command-bar-overflow .stacked-icon-container .high-contrast-icon{display:block}}.rooster-command-bar .rooster-command-bar-icon,.rooster-command-bar-overflow .rooster-command-bar-icon{color:#212121}@media screen and (-ms-high-contrast: active){.rooster-command-bar .rooster-command-bar-icon,.rooster-command-bar-overflow .rooster-command-bar-icon{color:ButtonText}}.rooster-command-bar .rooster-command-bar-icon.rooster-emoji,.rooster-command-bar-overflow .rooster-command-bar-icon.rooster-emoji{font-style:normal}.rooster-command-bar .rooster-command-bar-icon.rooster-emoji:before,.rooster-command-bar-overflow .rooster-command-bar-icon.rooster-emoji:before{content:\\\"\\\\1F642\\\"}.rooster-command-bar button:not(:hover):not(:active):not(:focus):not(.is-checked),.rooster-command-bar-overflow button:not(:hover):not(:active):not(:focus):not(.is-checked){background:#fff;border-color:transparent}@media screen and (-ms-high-contrast: active){.rooster-command-bar button:hover:not([disabled])::after,.rooster-command-bar-overflow button:hover:not([disabled])::after{content:\\\"\\\";position:absolute;left:0;top:0;bottom:0;right:0;border:1px solid WindowText}}.rooster-command-bar button:hover:not([disabled]) .rooster-command-bar-icon,.rooster-command-bar-overflow button:hover:not([disabled]) .rooster-command-bar-icon{color:#212121}@media screen and (-ms-high-contrast: active){.rooster-command-bar button:hover:not([disabled]) .rooster-command-bar-icon,.rooster-command-bar-overflow button:hover:not([disabled]) .rooster-command-bar-icon{color:ButtonText}}.rooster-command-bar button.is-checked,.rooster-command-bar-overflow button.is-checked{background:#dadada}@media screen and (-ms-high-contrast: active){.rooster-command-bar button.is-checked,.rooster-command-bar button.is-checked:hover,.rooster-command-bar button.is-checked:active,.rooster-command-bar-overflow button.is-checked,.rooster-command-bar-overflow button.is-checked:hover,.rooster-command-bar-overflow button.is-checked:active{background-color:Highlight;-ms-high-contrast-adjust:none}.rooster-command-bar button.is-checked,.rooster-command-bar button.is-checked .rooster-command-bar-icon,.rooster-command-bar button.is-checked:hover,.rooster-command-bar button.is-checked:hover .rooster-command-bar-icon,.rooster-command-bar button.is-checked:active,.rooster-command-bar button.is-checked:active .rooster-command-bar-icon,.rooster-command-bar-overflow button.is-checked,.rooster-command-bar-overflow button.is-checked .rooster-command-bar-icon,.rooster-command-bar-overflow button.is-checked:hover,.rooster-command-bar-overflow button.is-checked:hover .rooster-command-bar-icon,.rooster-command-bar-overflow button.is-checked:active,.rooster-command-bar-overflow button.is-checked:active .rooster-command-bar-icon{color:HighlightText}}.rooster-command-bar-overflow div{min-width:0}.rooster-command-bar-overflow ul{display:-webkit-box;display:-ms-flexbox;display:flex;overflow:hidden}.rooster-command-bar-overflow li{display:inline-block}.rooster-command-bar-header1 span{font-size:28px;font-weight:bold}.rooster-command-bar-header2 span{font-size:21px;font-weight:bold}.rooster-command-bar-header3 span{font-size:16px;font-weight:bold}.rooster-command-bar-color-container{padding:2px;overflow:hidden;background:#fff}@media screen and (-ms-high-contrast: active){.rooster-command-bar-color-container{background-color:Background}}.rooster-command-bar-color-container ul{width:180px}.rooster-command-bar-color-cell-border{border-width:1px;border-style:solid;position:absolute;left:1px;right:1px;bottom:1px;top:1px}.rooster-command-bar-color-item{display:inline-block;width:30px;height:30px;background:#fff}@media screen and (-ms-high-contrast: active){.rooster-command-bar-color-item{background-color:Background}}.rooster-command-bar-color-item button{padding:0;min-width:0;border:0}.rooster-command-bar-color-item button:before{content:\\\"\\\";position:absolute;left:0;right:0;top:0;bottom:0;border:2px solid #fff}@media screen and (-ms-high-contrast: active){.rooster-command-bar-color-item button:before{border-color:Background}}.rooster-command-bar-color-item button:hover:before{display:none}.rooster-command-bar-color-item button:hover .rooster-command-bar-color-cell-border{left:0;right:0;top:0;bottom:0}.rooster-command-bar-color-button{height:30px;border:0}.rooster-command-bar-color-cell{width:30px;height:30px}\"}]);","module.exports = __WEBPACK_EXTERNAL_MODULE__272__;","import EditorViewState from '../schema/EditorViewState';\r\nimport { HtmlSanitizer, SanitizeHtmlOptions } from 'roosterjs-html-sanitizer';\r\n\r\nexport default function createEditorViewState(initialContent?: string, options?: SanitizeHtmlOptions): EditorViewState {\r\n    return {\r\n        content: HtmlSanitizer.sanitizeHtml(initialContent, options) || '',\r\n        isDirty: false\r\n    };\r\n}\r\n","import { FormatState } from 'roosterjs-editor-types';\r\n\r\nexport default function createFormatState(): FormatState {\r\n    return {\r\n        fontName: '',\r\n        fontSize: '',\r\n        isBold: false,\r\n        isItalic: false,\r\n        isUnderline: false,\r\n        backgroundColor: '',\r\n        textColor: '',\r\n        isBullet: false,\r\n        isNumbering: false,\r\n        isStrikeThrough: false,\r\n        isSubscript: false,\r\n        isSuperscript: false,\r\n        isBlockQuote: false,\r\n        canUnlink: false,\r\n        canAddImageAltText: false,\r\n        canUndo: false,\r\n        canRedo: false,\r\n    };\r\n}\r\n","// Note: keep the dependencies for this generic component at a minimal (e.g. don't import OfficeFabric)\r\nimport * as React from \"react\";\r\nimport { Browser } from \"roosterjs-editor-dom\";\r\nimport { closest, css, NullFunction } from \"roosterjs-react-common\";\r\n\r\nexport type FocusEventHandler = (ev: React.FocusEvent<HTMLElement>) => void;\r\n\r\nexport interface FocusOutShellProps {\r\n    allowMouseDown?: (target: HTMLElement) => boolean;\r\n    className?: string;\r\n    onBlur?: FocusEventHandler;\r\n    onFocus?: FocusEventHandler;\r\n    children: (calloutClassName: string, calloutOnDismiss: FocusEventHandler) => React.ReactNode;\r\n    shouldCallBlur?: (nextTarget: HTMLElement, shouldCallBlurDefault: (nextTarget: HTMLElement) => boolean) => boolean;\r\n}\r\n\r\nexport interface FocusOutShellState {\r\n    isFocused?: boolean;\r\n}\r\n\r\nexport default class FocusOutShell extends React.PureComponent<FocusOutShellProps, FocusOutShellState> {\r\n    private static readonly BaseClassName = \"focus-out-shell\";\r\n    private static readonly CalloutClassName = `${FocusOutShell.BaseClassName}-callout`;\r\n    private static NextId = 0;\r\n\r\n    private _calloutClassName = `${FocusOutShell.CalloutClassName}-${FocusOutShell.NextId++}`;\r\n    private _containerDiv: HTMLDivElement;\r\n\r\n    constructor(props: FocusOutShellProps) {\r\n        super(props);\r\n\r\n        this.state = { isFocused: false };\r\n    }\r\n\r\n    public render(): JSX.Element {\r\n        const { className, children } = this.props;\r\n        return (\r\n            <div\r\n                className={css(FocusOutShell.BaseClassName, className, { \"is-focused\": this.state.isFocused })}\r\n                ref={this._containerDivOnRef}\r\n                onBlur={this._onBlur}\r\n                onFocus={this._onFocus}\r\n                onMouseDown={this._onMouseDown}\r\n            >\r\n                {children(this._calloutClassName, this._calloutOnDismiss)}\r\n            </div>\r\n        );\r\n    }\r\n\r\n    private _calloutOnDismiss = (ev: React.FocusEvent<HTMLElement>): void => {\r\n        // command bar can trigger dismiss event w/o an event object for submenu (when\r\n        // button is clicked again to hide submenu)\r\n        if (!ev) {\r\n            return;\r\n        }\r\n\r\n        // For Callout component, target is the event object from the document.body focus event\r\n        const nextTarget = ev.target as HTMLElement;\r\n\r\n        if (this._shouldCallBlur(nextTarget)) {\r\n            // delay so callout dismiss can complete\r\n            requestAnimationFrame(() => {\r\n                const { onBlur = NullFunction } = this.props;\r\n\r\n                onBlur(ev);\r\n                this.setState({ isFocused: false });\r\n            });\r\n        }\r\n    };\r\n\r\n    private _onBlur = (ev: React.FocusEvent<HTMLElement>): void => {\r\n        // relatedTarget is the event object from the blur event, so it is the next focused element\r\n        const nextTarget = ev.relatedTarget as HTMLElement;\r\n\r\n        if (this._shouldCallBlur(nextTarget)) {\r\n            const { onBlur = NullFunction } = this.props;\r\n\r\n            onBlur(ev);\r\n            this.setState({ isFocused: false });\r\n        }\r\n    };\r\n\r\n    private _shouldCallBlur(nextTarget: HTMLElement): boolean {\r\n        const { shouldCallBlur = this._shouldCallBlurDefault } = this.props;\r\n        return shouldCallBlur(nextTarget, this._shouldCallBlurDefault);\r\n    }\r\n\r\n    private _shouldCallBlurDefault = (nextTarget: HTMLElement): boolean => {\r\n        // don't call blur if the next target is an element on this container\r\n        if (nextTarget && this._containerDiv.contains(nextTarget)) {\r\n            return false;\r\n        }\r\n\r\n        // similarly, don't call blur if the next target is the callout or its children\r\n        if (nextTarget == null && Browser.isIE) {\r\n            nextTarget = document.activeElement as HTMLElement;\r\n        }\r\n        if (nextTarget && closest(nextTarget, `.${this._calloutClassName}`)) {\r\n            return false;\r\n        }\r\n\r\n        return true;\r\n    };\r\n\r\n    private _onFocus = (ev: React.FocusEvent<HTMLElement>): void => {\r\n        if (!this.state.isFocused) {\r\n            const { onFocus = NullFunction } = this.props;\r\n            onFocus(ev);\r\n        }\r\n    };\r\n\r\n    // React onFocus isn't reliable, hook into native version instead\r\n    private _onFocusNative = (ev: FocusEvent): void => {\r\n        this.setState({ isFocused: true });\r\n    };\r\n\r\n    private _onMouseDown = (ev: React.MouseEvent<HTMLElement>): void => {\r\n        const { allowMouseDown = NullFunction } = this.props;\r\n        const { target } = ev;\r\n\r\n        if (allowMouseDown(target as HTMLElement)) {\r\n            return;\r\n        }\r\n\r\n        ev.preventDefault(); // prevents blur event from triggering\r\n    };\r\n\r\n    private _containerDivOnRef = (ref: HTMLDivElement): void => {\r\n        this._containerDiv = ref;\r\n        const eventName = \"focusin\";\r\n        if (this._containerDiv) {\r\n            this._containerDiv.removeEventListener(eventName, this._onFocusNative);\r\n        }\r\n        if (ref) {\r\n            ref.addEventListener(eventName, this._onFocusNative);\r\n        }\r\n    };\r\n}\r\n","import \"./LeanRooster.scss.g\";\r\n\r\nimport * as React from \"react\";\r\nimport { CoreApiMap, Editor, EditorOptions, EditorPlugin, Undo, UndoService } from \"roosterjs-editor-core\";\r\nimport { Browser, findClosestElementAncestor, isNodeEmpty } from \"roosterjs-editor-dom\";\r\nimport { ContentEdit, ContentEditFeatures, getDefaultContentEditFeatures, HyperLink, Paste } from \"roosterjs-editor-plugins\";\r\nimport { DefaultFormat } from \"roosterjs-editor-types\";\r\nimport { AttributeCallbackMap } from \"roosterjs-html-sanitizer\";\r\nimport { css, getDataAndAriaProps, LeanRoosterPlugin, NullFunction } from \"roosterjs-react-common\";\r\n\r\nimport EditorViewState from \"../schema/EditorViewState\";\r\n\r\nconst ContentEditableDivStyle = { userSelect: \"text\", msUserSelect: \"text\", WebkitUserSelect: \"text\" } as React.CSSProperties;\r\nconst ReadOnlyClassName = \"readonly\";\r\n\r\nexport const enum LeanRoosterModes {\r\n    View = 0,\r\n    Edit = 1\r\n}\r\n\r\n// Initial editor options\r\nexport interface LeanRoosterInitialOptions {\r\n    /**\r\n     * (Optional) True to activate rooster and its plugins when component is mounted\r\n     */\r\n    activateRoosterOnMount?: boolean;\r\n\r\n    /**\r\n     * (Optional) Activate rooster in view mode instead of edit when activateRoosterOnMount is on\r\n     */\r\n    activateInViewMode?: boolean;\r\n\r\n    /**\r\n     * (Optional) Feature options for the editor\r\n     */\r\n    contentEditFeatures?: ContentEditFeatures;\r\n\r\n    /**\r\n     * (Optional) Core API override for the editor (useful for tracking timings)\r\n     */\r\n    coreApiOverride?: Partial<CoreApiMap>;\r\n\r\n    /**\r\n     * (Optional) Default format for the editor\r\n     */\r\n    defaultFormat?: DefaultFormat;\r\n\r\n    /**\r\n     * (Optional) Enable restore selection on focus\r\n     */\r\n    enableRestoreSelectionOnFocus?: boolean;\r\n\r\n    /**\r\n     * (Optional) Plugins for the editor\r\n     */\r\n    plugins?: LeanRoosterPlugin[];\r\n\r\n    /**\r\n     * (Optional) Custom undo plugin\r\n     */\r\n    undo?: UndoService;\r\n\r\n    /**\r\n     * (Optional) Callback map for santizing attributes (used by Paste plugin)\r\n     */\r\n    sanitizeAttributeCallbacks?: AttributeCallbackMap;\r\n\r\n    /**\r\n     * (Optional) Update view state callback\r\n     */\r\n    updateViewState?: (viewState: EditorViewState, content: string, isInitializing: boolean) => void;\r\n\r\n    /**\r\n     * Initial view state for the editor\r\n     */\r\n    viewState: EditorViewState;\r\n}\r\n\r\nexport interface LeanRoosterProps extends LeanRoosterInitialOptions {\r\n    /**\r\n     * Additional CSS class(es) to apply to the ColorPicker.\r\n     */\r\n    className?: string;\r\n\r\n    /**\r\n     * (Optional) True to use right to left locale\r\n     */\r\n    isRtl?: boolean;\r\n\r\n    /**\r\n     * (Optional) Placeholder text\r\n     */\r\n    placeholder?: string;\r\n\r\n    /**\r\n     * (Optional) Threshold for isEmpty() check\r\n     */\r\n    thresholdForIsEmptyCheck?: number;\r\n\r\n    /**\r\n     * (Optional) Trim when calling isEmpty()\r\n     */\r\n    trimWithEmptyCheck?: boolean;\r\n\r\n    /**\r\n     * (Optional) True to enable readonly mode\r\n     */\r\n    readonly?: boolean;\r\n\r\n    /**\r\n     * (Optional) True to allow hyperlink to be opened while in view mode\r\n     */\r\n    clickOpenHyperlinkViewMode?: boolean;\r\n\r\n    /**\r\n     * (Optional) Callback for the content DIV reference\r\n     */\r\n    contentDivRef?: (ref: HTMLDivElement) => void;\r\n\r\n    /**\r\n     * (Optional) Callback for getting the tooltip for a hyperlink\r\n     */\r\n    hyperlinkToolTipCallback?: (href: string, anchor: HTMLAnchorElement) => string;\r\n\r\n    /**\r\n     * (Optional) Custom isEmpty() function\r\n     */\r\n    isEmptyFunction?: (element: HTMLDivElement, trim?: boolean) => boolean;\r\n\r\n    /**\r\n     * (Optional) Callback for after a mode change\r\n     */\r\n    onAfterModeChange?: (newMode: LeanRoosterModes) => void;\r\n\r\n    /**\r\n     * (Optional) Callback for before a mode change\r\n     */\r\n    onBeforeModeChange?: (newMode: LeanRoosterModes) => boolean;\r\n\r\n    /**\r\n     * (Optional) Callback for editor blur event\r\n     */\r\n    onBlur?: (ev: React.FocusEvent<HTMLDivElement>) => void;\r\n\r\n    /**\r\n     * (Optional) Callback for editor focus event\r\n     */\r\n    onFocus?: (ev: React.FocusEvent<HTMLDivElement>) => void;\r\n\r\n    /**\r\n     * (Optional) Callback for editor drop event\r\n     */\r\n    onDrop?: (ev: React.DragEvent<HTMLDivElement>) => void;\r\n\r\n    /**\r\n     * (Optional) Callback for editor drag enter event\r\n     */\r\n    onDragEnter?: (ev: React.DragEvent<HTMLDivElement>) => void;\r\n\r\n    /**\r\n     * (Optional) Callback for editor drag leave event\r\n     */\r\n    onDragLeave?: (ev: React.DragEvent<HTMLDivElement>) => void;\r\n\r\n    /**\r\n     * (Optional) Callback for editor drag over event\r\n     */\r\n    onDragOver?: (ev: React.DragEvent<HTMLDivElement>) => void;\r\n\r\n    /**\r\n     * (Optional) Handler for when hyperlink is clicked\r\n     */\r\n    onHyperlinkClick?: (anchor: HTMLAnchorElement, ev: MouseEvent) => boolean;\r\n}\r\n\r\nexport default class LeanRooster extends React.Component<LeanRoosterProps, {}> {\r\n    private _contentDiv: HTMLDivElement;\r\n    private _editor: Editor;\r\n    private _mode: LeanRoosterModes = LeanRoosterModes.View;\r\n    // Note: set React DIV up with an intial inner HTML, but don't change it after creating rooster editor, otherwise\r\n    // React will recreate the elements defined by the inner HTML\r\n    private _initialContent: { __html: string } = undefined;\r\n    private _editorOptions: EditorOptions = null;\r\n    private _hasPlaceholder: boolean = false;\r\n    private _placeholderVisible: boolean = false;\r\n\r\n    constructor(props: LeanRoosterProps) {\r\n        super(props);\r\n\r\n        this._setInitialReactContent(true);\r\n        this._editorOptions = this._createEditorOptions();\r\n    }\r\n\r\n    public render(): JSX.Element {\r\n        const { isRtl, readonly } = this.props;\r\n        return (\r\n            // tslint:disable-next-line: react-no-dangerous-html\r\n            <div\r\n                {...getDataAndAriaProps(this.props)}\r\n                className={this._getClassName(this.props)}\r\n                data-placeholder={this.props.placeholder}\r\n                contentEditable={!readonly}\r\n                dir={this._getDirValue(isRtl)}\r\n                onBlur={this._onBlur}\r\n                onFocus={this._onFocus}\r\n                onMouseDown={this._onMouseDown}\r\n                onMouseUp={this._onMouseUp}\r\n                onDragEnter={this._onDragEnter}\r\n                onDragLeave={this._onDragLeave}\r\n                onDragOver={this._onDragOver}\r\n                onDrop={this._onDrop}\r\n                ref={this._contentDivOnRef}\r\n                style={ContentEditableDivStyle}\r\n                suppressContentEditableWarning={true}\r\n                tabIndex={0}\r\n                dangerouslySetInnerHTML={this._initialContent}\r\n                aria-multiline=\"true\"\r\n                role=\"textbox\"\r\n            />\r\n        );\r\n    }\r\n\r\n    public componentDidMount(): void {\r\n        const { readonly, activateRoosterOnMount, activateInViewMode } = this.props;\r\n\r\n        if (!readonly && activateRoosterOnMount) {\r\n            if (activateInViewMode) {\r\n                this._editor = new Editor(this._contentDiv, this._editorOptions);\r\n                this._updateContentToViewState(true /* isInitializing */);\r\n            } else {\r\n                this._trySwithToEditMode();\r\n            }\r\n        } else if (!this._hasPlaceholder) {\r\n            this._refreshPlaceholder();\r\n        }\r\n    }\r\n\r\n    public componentWillUnmount(): void {\r\n        this._updateContentToViewState();\r\n        if (this._editor) {\r\n            this._editor.dispose();\r\n            this._editor = null;\r\n        }\r\n    }\r\n\r\n    public componentWillReceiveProps(nextProps: LeanRoosterProps, nextState: {}) {\r\n        const div = this._contentDiv;\r\n        if (!div) {\r\n            return;\r\n        }\r\n\r\n        const { className, readonly, isRtl, placeholder } = nextProps;\r\n\r\n        if (className !== this.props.className) {\r\n            div.setAttribute(\"class\", this._getClassName(nextProps));\r\n        }\r\n\r\n        if (readonly !== this.props.readonly) {\r\n            if (readonly) {\r\n                div.classList.add(ReadOnlyClassName);\r\n            } else {\r\n                div.classList.remove(ReadOnlyClassName);\r\n            }\r\n            div.setAttribute(\"contentEditable\", (!readonly).toString());\r\n        }\r\n\r\n        if (isRtl !== this.props.isRtl) {\r\n            div.setAttribute(\"dir\", this._getDirValue(isRtl));\r\n        }\r\n\r\n        if (placeholder !== this.props.placeholder) {\r\n            div.setAttribute(\"data-placeholder\", placeholder == null ? \"\" : placeholder);\r\n        }\r\n    }\r\n\r\n    public shouldComponentUpdate(): boolean {\r\n        return false;\r\n    }\r\n\r\n    public get mode(): LeanRoosterModes {\r\n        return this._mode;\r\n    }\r\n\r\n    public set mode(value: LeanRoosterModes) {\r\n        if (value === LeanRoosterModes.Edit) {\r\n            this._trySwithToEditMode();\r\n        } else {\r\n            this._trySwitchToViewMode();\r\n        }\r\n    }\r\n\r\n    public get hasActivated(): boolean {\r\n        return !!this._editor;\r\n    }\r\n\r\n    public hasPlaceholder(): boolean {\r\n        return this._hasPlaceholder;\r\n    }\r\n\r\n    public focus(): void {\r\n        if (this._editor) {\r\n            this._editor.focus();\r\n        } else if (this._contentDiv) {\r\n            this._contentDiv.focus();\r\n        }\r\n    }\r\n\r\n    public reloadContent(triggerContentChangedEvent: boolean = true, resetUndo: boolean = true): void {\r\n        const { viewState } = this.props;\r\n\r\n        if (this._editor) {\r\n            this._editor.setContent(viewState.content, triggerContentChangedEvent);\r\n            if (resetUndo && this._editorOptions.undo) {\r\n                this._editorOptions.undo.clear();\r\n                this._editor.addUndoSnapshot();\r\n            }\r\n            this._refreshPlaceholder();\r\n        } else {\r\n            this._setInitialReactContent();\r\n            this.forceUpdate(this._refreshPlaceholder);\r\n        }\r\n    }\r\n\r\n    public triggerContentChangedEvent(source?: string): void {\r\n        this._editor && this._editor.triggerContentChangedEvent(source);\r\n    }\r\n\r\n    public selectAll(): void {\r\n        const contentDiv = this._contentDiv;\r\n        if (!contentDiv) {\r\n            return;\r\n        }\r\n\r\n        if (this._editor && !this._editor.isDisposed()) {\r\n            const range = this._editor.getDocument().createRange();\r\n            range.selectNodeContents(contentDiv);\r\n            this._editor.select(range);\r\n        } else {\r\n            const range = contentDiv.ownerDocument.createRange();\r\n            range.selectNodeContents(contentDiv);\r\n            const selection = window.getSelection();\r\n\r\n            // Workaround IE exception 800a025e\r\n            try {\r\n                selection.removeAllRanges();\r\n            } catch (e) {}\r\n\r\n            selection.addRange(range);\r\n        }\r\n    }\r\n\r\n    public isEmpty(): boolean {\r\n        const { trimWithEmptyCheck = false, thresholdForIsEmptyCheck, viewState, isEmptyFunction = isNodeEmpty } = this.props;\r\n\r\n        if (!this._contentDiv) {\r\n            return !viewState.content || viewState.content.length === 0;\r\n        }\r\n\r\n        if (thresholdForIsEmptyCheck && this._contentDiv.innerHTML.length >= thresholdForIsEmptyCheck) {\r\n            return false;\r\n        }\r\n\r\n        return isEmptyFunction(this._contentDiv, trimWithEmptyCheck);\r\n    }\r\n\r\n    public getContent(): string {\r\n        return this._editor ? this._editor.getContent() : this._contentDiv.innerHTML;\r\n    }\r\n\r\n    private _getClassName(props: LeanRoosterProps): string {\r\n        const { className, readonly } = props;\r\n        const modeClassName = this.mode === LeanRoosterModes.View ? \"view-mode\" : \"edit-mode\";\r\n\r\n        return css(\"lean-rooster\", className, modeClassName, {\r\n            readonly,\r\n            \"show-placeholder\": this._placeholderVisible\r\n        });\r\n    }\r\n\r\n    private _getDirValue(isRtl: boolean): string {\r\n        return isRtl ? \"rtl\" : \"ltr\";\r\n    }\r\n\r\n    private _refreshPlaceholder = (): void => {\r\n        const isEmpty = this.props.placeholder && this.isEmpty();\r\n        const wasPlaceholderVisible = this._placeholderVisible;\r\n        const hasFocus = this._editor && this._editor.hasFocus();\r\n        this._hasPlaceholder = isEmpty;\r\n        this._placeholderVisible = isEmpty && !hasFocus;\r\n\r\n        // refresh if the placeholder's visibility was changed\r\n        if (wasPlaceholderVisible !== this._placeholderVisible) {\r\n            this.forceUpdate();\r\n        }\r\n    };\r\n\r\n    private _setInitialReactContent(fromConstructor: boolean = false): void {\r\n        const { viewState } = this.props;\r\n        const hasContent = viewState.content != null && viewState.content.length > 0;\r\n        if (fromConstructor) {\r\n            this._hasPlaceholder = this.props.placeholder && !hasContent;\r\n            this._placeholderVisible = this._hasPlaceholder;\r\n        }\r\n        this._initialContent = hasContent ? { __html: viewState.content } : undefined;\r\n    }\r\n\r\n    private _updateContentToViewState(isInitializing?: boolean): string {\r\n        if (this._editor && !this._editor.isDisposed()) {\r\n            const { updateViewState = this._updateViewState, viewState } = this.props;\r\n\r\n            const content = this._editor.getContent();\r\n            updateViewState(viewState, content, isInitializing);\r\n            return content;\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    private _createEditorOptions(): EditorOptions {\r\n        const {\r\n            plugins: additionalPlugins = [],\r\n            undo = new Undo(),\r\n            defaultFormat = {},\r\n            contentEditFeatures,\r\n            enableRestoreSelectionOnFocus,\r\n            coreApiOverride,\r\n            sanitizeAttributeCallbacks\r\n        } = this.props;\r\n        const plugins: EditorPlugin[] = [\r\n            new ContentEdit({ ...getDefaultContentEditFeatures(), defaultShortcut: false, smartOrderedList: true, ...contentEditFeatures }),\r\n            new HyperLink(this._hyperlinkToolTipCallback, undefined, this._onHyperlinkClick),\r\n            new Paste(null, { istemptitle: v => v, ...sanitizeAttributeCallbacks }),\r\n            ...additionalPlugins\r\n        ];\r\n        const disableRestoreSelectionOnFocus = !enableRestoreSelectionOnFocus;\r\n\r\n        // Important: don't set the initial content, the content editable already starts with initial HTML content\r\n        return { plugins, defaultFormat, undo, disableRestoreSelectionOnFocus, omitContentEditableAttributeChanges: true /* avoid unnecessary reflow */, coreApiOverride };\r\n    }\r\n\r\n    private _onHyperlinkClick = (anchor: HTMLAnchorElement, mouseEvent: MouseEvent): boolean => {\r\n        const { onHyperlinkClick = _ => false } = this.props;\r\n        return onHyperlinkClick(anchor, mouseEvent);\r\n    };\r\n\r\n    private _hyperlinkToolTipCallback = (href: string, anchor: HTMLAnchorElement): string => {\r\n        const { hyperlinkToolTipCallback = (href, _) => href } = this.props;\r\n        return hyperlinkToolTipCallback(href, anchor);\r\n    };\r\n\r\n    private _updateViewState = (viewState: EditorViewState, content: string, isInitializing: boolean): void => {\r\n        if (viewState.content !== content) {\r\n            viewState.content = content;\r\n            if (!isInitializing) {\r\n                const originalContent = this._initialContent ? this._initialContent.__html : null;\r\n                viewState.isDirty = content !== originalContent;\r\n            }\r\n        }\r\n    };\r\n\r\n    private _trySwithToEditMode(alwaysForceUpdateForEditMode: boolean = false): boolean {\r\n        const { readonly, onBeforeModeChange = NullFunction, onAfterModeChange = NullFunction } = this.props;\r\n\r\n        if (readonly) {\r\n            return false;\r\n        }\r\n        if (this.mode === LeanRoosterModes.Edit) {\r\n            if (alwaysForceUpdateForEditMode) {\r\n                this.forceUpdate();\r\n            }\r\n            return false;\r\n        }\r\n        if (onBeforeModeChange(LeanRoosterModes.Edit)) {\r\n            return;\r\n        }\r\n        const isInitializing = !this._editor;\r\n        if (isInitializing) {\r\n            this._editor = new Editor(this._contentDiv, this._editorOptions);\r\n        }\r\n        this._mode = LeanRoosterModes.Edit;\r\n\r\n        this._updateContentToViewState(isInitializing);\r\n        this.forceUpdate();\r\n        onAfterModeChange(LeanRoosterModes.Edit);\r\n\r\n        return true;\r\n    }\r\n\r\n    private _trySwitchToViewMode(): boolean {\r\n        const { onBeforeModeChange = NullFunction, onAfterModeChange = NullFunction } = this.props;\r\n\r\n        if (this.mode === LeanRoosterModes.View) {\r\n            return false;\r\n        }\r\n        if (onBeforeModeChange(LeanRoosterModes.View)) {\r\n            return false;\r\n        }\r\n\r\n        this._updateContentToViewState();\r\n        this._mode = LeanRoosterModes.View;\r\n        this.forceUpdate();\r\n        onAfterModeChange(LeanRoosterModes.View);\r\n\r\n        return true;\r\n    }\r\n\r\n    private _onMouseDown = (ev: React.MouseEvent<HTMLDivElement>): void => {\r\n        const target = ev.target as HTMLElement;\r\n        const anchor = this._getAnchorForClickOpenHyperlink(ev, target);\r\n        if (anchor) {\r\n            // we're going to handle click for the href, so don't switch to view mode\r\n            ev.preventDefault();\r\n            ev.stopPropagation();\r\n            return;\r\n        }\r\n\r\n        this._placeholderVisible = false;\r\n        const forceUpdate = true;\r\n        this._trySwithToEditMode(forceUpdate);\r\n    };\r\n\r\n    private _onMouseUp = (ev: React.MouseEvent<HTMLDivElement>): void => {\r\n        const target = ev.target as HTMLElement;\r\n        const anchor = this._getAnchorForClickOpenHyperlink(ev, target);\r\n        if (anchor) {\r\n            const { onHyperlinkClick } = this.props;\r\n            // if editor has already activated, let the Hyperlink plugin call onHyperlinkClick\r\n            if (this.hasActivated && onHyperlinkClick) {\r\n                return;\r\n            }\r\n\r\n            // if no custom click handler or it returned false, open the link\r\n            if (!onHyperlinkClick || onHyperlinkClick(anchor, ev.nativeEvent) === false) {\r\n                try {\r\n                    window.open(anchor.getAttribute(\"href\"), \"_blank\");\r\n                } catch {}\r\n            }\r\n\r\n            return;\r\n        }\r\n\r\n        if (this._editor && !this._editor.hasFocus()) {\r\n            this._editor.focus();\r\n        }\r\n    };\r\n\r\n    private _getAnchorForClickOpenHyperlink(ev: React.MouseEvent<HTMLDivElement>, element: HTMLElement): HTMLAnchorElement {\r\n        const { clickOpenHyperlinkViewMode, readonly } = this.props;\r\n        const isPrimaryButton = ev.button === 0;\r\n        if (!isPrimaryButton || !clickOpenHyperlinkViewMode || readonly || this.mode !== LeanRoosterModes.View) {\r\n            return null;\r\n        }\r\n\r\n        // Hyperlink plugin will handle CTRL+Click when editor is created and FireFox will handle for contenteditable\r\n        const ctrlOpen = Browser.isMac ? ev.metaKey : ev.ctrlKey;\r\n        if ((this._editor && ctrlOpen) || (Browser.isFirefox && ctrlOpen)) {\r\n            return null;\r\n        }\r\n\r\n        const anchor = findClosestElementAncestor(element, this._contentDiv, \"a[href]\");\r\n        if (anchor) {\r\n            return anchor as HTMLAnchorElement;\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    private _onBlur = (ev: React.FocusEvent<HTMLDivElement>): void => {\r\n        const { onBlur = NullFunction } = this.props;\r\n\r\n        this._hasPlaceholder = false; // reset flag each time we blur\r\n        const content = this._updateContentToViewState();\r\n        if (content !== null) {\r\n            this._refreshPlaceholder();\r\n        }\r\n\r\n        onBlur(ev);\r\n    };\r\n\r\n    private _onDragEnter = (ev: React.DragEvent<HTMLDivElement>): void => {\r\n        const { onDragEnter = NullFunction } = this.props;\r\n        onDragEnter(ev);\r\n    };\r\n\r\n    private _onDragLeave = (ev: React.DragEvent<HTMLDivElement>): void => {\r\n        const { onDragLeave = NullFunction } = this.props;\r\n        onDragLeave(ev);\r\n    };\r\n\r\n    private _onDragOver = (ev: React.DragEvent<HTMLDivElement>): void => {\r\n        const { onDragOver = NullFunction } = this.props;\r\n        onDragOver(ev);\r\n    };\r\n\r\n    private _onFocus = (ev: React.FocusEvent<HTMLDivElement>): void => {\r\n        const { onFocus = NullFunction } = this.props;\r\n        onFocus(ev);\r\n    };\r\n\r\n    // When used with FocusOutShell and CommandBar, React doesn't fire focus event when toggle\r\n    // buttons with callout, so use the native event which is still triggered.\r\n    private _onFocusNative = (ev: FocusEvent): void => {\r\n        let forceUpdate = false;\r\n        if (this._placeholderVisible) {\r\n            this._placeholderVisible = false;\r\n            forceUpdate = true;\r\n        }\r\n        if (this._trySwithToEditMode(forceUpdate)) {\r\n            this._editor.focus();\r\n        }\r\n    };\r\n\r\n    private _onDrop = (ev: React.DragEvent<HTMLDivElement>): void => {\r\n        const { onDrop = NullFunction } = this.props;\r\n\r\n        // handles the drop content scenario when editor is not yet activated and there's a placeholder\r\n        if (this._contentDiv) {\r\n            this.focus();\r\n        }\r\n\r\n        onDrop(ev);\r\n    };\r\n\r\n    private _contentDivOnRef = (ref: HTMLDivElement): void => {\r\n        const { contentDivRef = NullFunction, plugins } = this.props;\r\n\r\n        const eventName = \"focus\";\r\n        if (this._contentDiv) {\r\n            this._contentDiv.removeEventListener(eventName, this._onFocusNative);\r\n        }\r\n        if (ref) {\r\n            ref.addEventListener(eventName, this._onFocusNative);\r\n        }\r\n        this._contentDiv = ref;\r\n        plugins.forEach(p => p.initializeContentEditable && p.initializeContentEditable(ref));\r\n\r\n        contentDivRef(ref);\r\n    };\r\n}\r\n","/* tslint:disable */\nimport { loadStyles } from '@microsoft/load-themed-styles';\nloadStyles([{\"rawString\":\".lean-rooster{padding:4px}.lean-rooster img{max-width:100%;-ms-flex-item-align:center;align-self:center}.lean-rooster.show-placeholder::before{color:rgba(0,0,0,.55);content:attr(data-placeholder);cursor:text;font-style:italic;pointer-events:none}\"}]);","module.exports = __WEBPACK_EXTERNAL_MODULE__278__;","export interface ColorInfo {\r\n    key: string;\r\n    title: string;\r\n    color: string;\r\n    cellBorderColor?: string;\r\n}\r\n\r\nexport const FontColorInfoList = [\r\n    { title: \"Light Blue\", color: \"#51a7f9\" },\r\n    { title: \"Light Green\", color: \"#6fc040\" },\r\n    { title: \"Light Yellow\", color: \"#f5d427\" },\r\n    { title: \"Light Orange\", color: \"#f3901d\" },\r\n    { title: \"Light Red\", color: \"#ed5c57\" },\r\n    { title: \"Light Purple\", color: \"#b36ae2\" },\r\n    { title: \"Blue\", color: \"#0c64c0\" },\r\n    { title: \"Green\", color: \"#0c882a\" },\r\n    { title: \"Yellow\", color: \"#dcbe22\" },\r\n    { title: \"Orange\", color: \"#de6a19\" },\r\n    { title: \"Red\", color: \"#c82613\" },\r\n    { title: \"Purple\", color: \"#763e9b\" },\r\n    { title: \"Dark Blue\", color: \"#174e86\" },\r\n    { title: \"Dark Green\", color: \"#0f5c1a\" },\r\n    { title: \"Dark Yellow\", color: \"#c3971d\" },\r\n    { title: \"Dark Orange\", color: \"#be5b17\" },\r\n    { title: \"Dark Red\", color: \"#861106\" },\r\n    { title: \"Dark Purple\", color: \"#5e327c\" },\r\n    { title: \"Darker Blue\", color: \"#002451\" },\r\n    { title: \"Darker Green\", color: \"#06400c\" },\r\n    { title: \"Darker Yellow\", color: \"#a37519\" },\r\n    { title: \"Darker Orange\", color: \"#934511\" },\r\n    { title: \"Darker Red\", color: \"#570606\" },\r\n    { title: \"Darker Purple\", color: \"#3b204d\" },\r\n    { title: \"White\", color: \"#ffffff\", cellBorderColor: \"#bebebe\" },\r\n    { title: \"Light Gray\", color: \"#cccccc\" },\r\n    { title: \"Gray\", color: \"#999999\" },\r\n    { title: \"Dark Gray\", color: \"#666666\" },\r\n    { title: \"Darker Gray\", color: \"#333333\" },\r\n    { title: \"Black\", color: \"#000000\" },\r\n] as ColorInfo[];\r\n\r\nexport const HighlightColorInfoList = [\r\n    { title: \"Cyan\", color: \"#00ffff\" },\r\n    { title: \"Green\", color: \"#00ff00\" },\r\n    { title: \"Yellow\", color: \"#ffff00\" },\r\n    { title: \"Orange\", color: \"#ff8000\" },\r\n    { title: \"Red\", color: \"#ff0000\" },\r\n    { title: \"Magenta\", color: \"#ff00ff\" },\r\n    { title: \"Light Cyan\", color: \"#80ffff\" },\r\n    { title: \"Light Green\", color: \"#80ff80\" },\r\n    { title: \"Light Yellow\", color: \"#ffff80\" },\r\n    { title: \"Light Orange\", color: \"#ffc080\" },\r\n    { title: \"Light Red\", color: \"#ff8080\" },\r\n    { title: \"Light Magenta\", color: \"#ff80ff\" },\r\n    { title: \"White\", color: \"#ffffff\", cellBorderColor: \"#bebebe\" },\r\n    { title: \"Light Gray\", color: \"#cccccc\" },\r\n    { title: \"Gray\", color: \"#999999\" },\r\n    { title: \"Dark Gray\", color: \"#666666\" },\r\n    { title: \"Darker Gray\", color: \"#333333\" },\r\n    { title: \"Black\", color: \"#000000\" },\r\n] as ColorInfo[];\r\n\r\nfunction _setKey(prefix: string, color: ColorInfo): void {\r\n    const { title } = color;\r\n    color.key = `${prefix}${title.replace(/\\s/g, \"\")}`;\r\n}\r\n\r\nFontColorInfoList.forEach(_setKey.bind(this, \"fontColor\"));\r\nHighlightColorInfoList.forEach(_setKey.bind(this, \"highlight\"));\r\n","import { clearBlockFormat, clearFormat, toggleBold, toggleBullet, toggleHeader, toggleItalic, toggleNumbering, toggleUnderline } from \"roosterjs-editor-api\";\r\nimport { Editor, EditorPlugin } from \"roosterjs-editor-core\";\r\nimport { PluginDomEvent, PluginEvent, PluginEventType } from \"roosterjs-editor-types\";\r\nimport { NullFunction, Strings, toggleNonCompatBullet, toggleNonCompatNumbering } from \"roosterjs-react-common\";\r\n\r\nimport { createLinkDialog, LinkDialogProps } from \"../components/LinkDialog\";\r\nimport RoosterCommandBar from \"../components/RoosterCommandBar\";\r\nimport RoosterCommandBarPluginInterface from \"../schema/RoosterCommandBarPluginInterface\";\r\nimport { getCommandFromEvent, RoosterShortcutCommands } from \"./RoosterCommandBarPlugin.Shortcuts\";\r\n\r\nexport const InsertLinkStringKeys = {\r\n    LinkFieldLabel: \"linkFieldLabel\",\r\n    Title: \"linkPromptTitle\",\r\n    InsertButton: \"insertLinkText\",\r\n    CancelButton: \"cancelLinkText\"\r\n};\r\n\r\nexport interface RoosterCommandBarPluginOptions {\r\n    strings?: Strings;\r\n    calloutClassName?: string;\r\n    linkDialogClassName?: string;\r\n    calloutOnDismiss?: (ev?: any) => void;\r\n    onShortcutTriggered?: (command: RoosterShortcutCommands) => void;\r\n    disableListWorkaround?: boolean;\r\n    useLegacyClearFormat?: boolean;\r\n}\r\n\r\nexport default class RoosterCommandBarPlugin implements EditorPlugin, RoosterCommandBarPluginInterface {\r\n    private static readonly EventTypesToRefreshFormatState: { [eventType: number]: boolean } = {\r\n        [PluginEventType.KeyUp]: true,\r\n        [PluginEventType.MouseDown]: true,\r\n        [PluginEventType.MouseUp]: true,\r\n        [PluginEventType.ContentChanged]: true\r\n    };\r\n\r\n    private editor: Editor;\r\n    private commandBars: RoosterCommandBar[] = [];\r\n    private dialogDismiss: () => void;\r\n\r\n    constructor(private options: RoosterCommandBarPluginOptions = {}) {}\r\n\r\n    public getName() {\r\n        return 'RoosterCommandBar';\r\n    }\r\n\r\n    public initialize(editor: Editor): void {\r\n        this.editor = editor;\r\n\r\n        if (!editor) {\r\n            return;\r\n        }\r\n        const doc = this.editor.getDocument();\r\n        if (!doc) {\r\n            return;\r\n        }\r\n    }\r\n\r\n    public dispose(): void {\r\n        if (this.dialogDismiss) {\r\n            this.dialogDismiss();\r\n            this.dialogDismiss = null;\r\n        }\r\n\r\n        if (this.editor) {\r\n            this.editor = null;\r\n        }\r\n\r\n        if (this.commandBars.length > 0) {\r\n            this.commandBars.forEach((_, i) => (this.commandBars[i] = undefined));\r\n            this.commandBars = [];\r\n        }\r\n    }\r\n\r\n    public onPluginEvent(event: PluginEvent): void {\r\n        if (this.commandBars && RoosterCommandBarPlugin.EventTypesToRefreshFormatState[event.eventType]) {\r\n            this.commandBars.forEach(commandBar => commandBar.refreshFormatState());\r\n            return;\r\n        }\r\n\r\n        if (event.eventType === PluginEventType.KeyDown) {\r\n            this.handleShortcuts(event);\r\n        }\r\n    }\r\n\r\n    private handleShortcuts(event: PluginEvent) {\r\n        const pluginDomEvent = event as PluginDomEvent;\r\n        const keyboardEvent = pluginDomEvent.rawEvent as KeyboardEvent;\r\n        if (keyboardEvent.defaultPrevented) {\r\n            return;\r\n        }\r\n\r\n        const command = getCommandFromEvent(event);\r\n        if (command === RoosterShortcutCommands.None) {\r\n            return;\r\n        }\r\n\r\n        const { disableListWorkaround, onShortcutTriggered = NullFunction } = this.options;\r\n        const editor = this.editor;\r\n        let commandExecuted = true;\r\n        switch (command) {\r\n            case RoosterShortcutCommands.Bold:\r\n                toggleBold(editor);\r\n                break;\r\n            case RoosterShortcutCommands.Italic:\r\n                toggleItalic(editor);\r\n                break;\r\n            case RoosterShortcutCommands.Underline:\r\n                toggleUnderline(editor);\r\n                break;\r\n            case RoosterShortcutCommands.Undo:\r\n                editor.undo();\r\n                break;\r\n            case RoosterShortcutCommands.Redo:\r\n                editor.redo();\r\n                break;\r\n            case RoosterShortcutCommands.Bullet:\r\n                (disableListWorkaround ? toggleNonCompatBullet : toggleBullet)(editor);\r\n                break;\r\n            case RoosterShortcutCommands.Numbering:\r\n                (disableListWorkaround ? toggleNonCompatNumbering : toggleNumbering)(editor);\r\n                break;\r\n            case RoosterShortcutCommands.InsertLink:\r\n                this.promptForLink();\r\n                break;\r\n            case RoosterShortcutCommands.ClearFormat:\r\n                this.clearFormat();\r\n                break;\r\n            default:\r\n                commandExecuted = false;\r\n        }\r\n\r\n        if (commandExecuted) {\r\n            onShortcutTriggered(command);\r\n            keyboardEvent.preventDefault();\r\n            keyboardEvent.stopPropagation();\r\n        }\r\n    }\r\n\r\n    public getEditor(): Editor {\r\n        return this.editor;\r\n    }\r\n\r\n    public registerRoosterCommandBar(commandBar: RoosterCommandBar): void {\r\n        if (this.commandBars.indexOf(commandBar) < 0) {\r\n            this.commandBars.push(commandBar);\r\n        }\r\n    }\r\n\r\n    public unregisterRoosterCommandBar(commandBar: RoosterCommandBar): void {\r\n        const index = this.commandBars.indexOf(commandBar);\r\n        if (index >= 0) {\r\n            this.commandBars.splice(index, 1);\r\n        }\r\n    }\r\n\r\n    public promptForLink(): void {\r\n        const { strings = {}, calloutOnDismiss: onDismiss, calloutClassName, linkDialogClassName: className } = this.options;\r\n        this.dialogDismiss = createLinkDialog(document, { editor: this.editor, strings, onDismiss, className } as LinkDialogProps, calloutClassName);\r\n    }\r\n\r\n    public clearFormat(): void {\r\n        const editor = this.editor;\r\n\r\n        this.editor.addUndoSnapshot(() => {\r\n            if (this.options.useLegacyClearFormat) {\r\n                clearFormat(editor);\r\n                toggleHeader(editor, 0);\r\n            } else {\r\n                clearBlockFormat(editor);\r\n            }\r\n        });\r\n    }\r\n}\r\n","/* tslint:disable */\nimport { loadStyles } from '@microsoft/load-themed-styles';\nloadStyles([{\"rawString\":\"div.modal_f58d80d5{-webkit-box-align:start;-ms-flex-align:start;align-items:flex-start;padding:250px 0 10px;position:static}\"}]);\nexport const modal = \"modal_f58d80d5\";","module.exports = __WEBPACK_EXTERNAL_MODULE__282__;","import { KeyCodes } from 'office-ui-fabric-react/lib/Utilities';\r\nimport { Browser } from 'roosterjs-editor-dom';\r\nimport { PluginDomEvent, PluginEvent, PluginEventType } from 'roosterjs-editor-types';\r\n\r\nexport const enum RoosterShortcutCommands {\r\n    None = 'None',\r\n    Bold = 'Bold',\r\n    Italic = 'Italic',\r\n    Underline = 'Underline',\r\n    Undo = 'Undo',\r\n    Redo = 'Redo',\r\n    Bullet = 'Bullet',\r\n    Numbering = 'Numbering',\r\n    InsertLink = 'InsertLink',\r\n    ClearFormat = 'ClearFormat'\r\n}\r\n\r\ninterface ShortcutCommand {\r\n    metaKey: boolean;\r\n    ctrlKey: boolean;\r\n    shiftKey: boolean;\r\n    which: number;\r\n    command: RoosterShortcutCommands;\r\n}\r\n\r\nconst macCommands: ShortcutCommand[] = [\r\n    // Bold for Mac: Command (Meta) + B\r\n    {\r\n        metaKey: true,\r\n        ctrlKey: false,\r\n        shiftKey: false,\r\n        which: KeyCodes.b,\r\n        command: RoosterShortcutCommands.Bold\r\n    },\r\n    // Italic for Mac: Command (Meta) + I\r\n    {\r\n        metaKey: true,\r\n        ctrlKey: false,\r\n        shiftKey: false,\r\n        which: KeyCodes.i,\r\n        command: RoosterShortcutCommands.Italic\r\n    },\r\n    // Underline for Mac: Command (Meta) + U\r\n    {\r\n        metaKey: true,\r\n        ctrlKey: false,\r\n        shiftKey: false,\r\n        which: KeyCodes.u,\r\n        command: RoosterShortcutCommands.Underline\r\n    },\r\n    // Undo for Mac: Command (Meta) + Z\r\n    {\r\n        metaKey: true,\r\n        ctrlKey: false,\r\n        shiftKey: false,\r\n        which: KeyCodes.z,\r\n        command: RoosterShortcutCommands.Undo\r\n    },\r\n    // Redo for Mac: Command (meta) + SHIFT + Z\r\n    {\r\n        metaKey: true,\r\n        ctrlKey: false,\r\n        shiftKey: true,\r\n        which: KeyCodes.z,\r\n        command: RoosterShortcutCommands.Redo\r\n    },\r\n    // Bullet for Mac: Command (meta) + .\r\n    {\r\n        metaKey: true,\r\n        ctrlKey: false,\r\n        shiftKey: false,\r\n        which: KeyCodes.period,\r\n        command: RoosterShortcutCommands.Bullet\r\n    },\r\n    // Numbering for Mac: Command (meta) + /\r\n    {\r\n        metaKey: true,\r\n        ctrlKey: false,\r\n        shiftKey: false,\r\n        which: KeyCodes.forwardSlash,\r\n        command: RoosterShortcutCommands.Numbering\r\n    },\r\n    // Insert link for Mac: Command (meta) + k\r\n    {\r\n        metaKey: true,\r\n        ctrlKey: false,\r\n        shiftKey: false,\r\n        which: KeyCodes.k,\r\n        command: RoosterShortcutCommands.InsertLink\r\n    },\r\n    // Clear format for Mac: Command (meta) + space\r\n    {\r\n        metaKey: true,\r\n        ctrlKey: false,\r\n        shiftKey: false,\r\n        which: KeyCodes.space,\r\n        command: RoosterShortcutCommands.ClearFormat\r\n    }\r\n];\r\n\r\nconst winCommands: ShortcutCommand[] = [\r\n    // Bold for Windows: Ctrl + B\r\n    {\r\n        metaKey: false,\r\n        ctrlKey: true,\r\n        shiftKey: false,\r\n        which: KeyCodes.b,\r\n        command: RoosterShortcutCommands.Bold\r\n    },\r\n    // Italic for Windows: Ctrl + I\r\n    {\r\n        metaKey: false,\r\n        ctrlKey: true,\r\n        shiftKey: false,\r\n        which: KeyCodes.i,\r\n        command: RoosterShortcutCommands.Italic\r\n    },\r\n    // Underline for Windows: Ctrl + U\r\n    {\r\n        metaKey: false,\r\n        ctrlKey: true,\r\n        shiftKey: false,\r\n        which: KeyCodes.u,\r\n        command: RoosterShortcutCommands.Underline\r\n    },\r\n    // Undo for Windows: Ctrl + Z\r\n    {\r\n        metaKey: false,\r\n        ctrlKey: true,\r\n        shiftKey: false,\r\n        which: KeyCodes.z,\r\n        command: RoosterShortcutCommands.Undo\r\n    },\r\n    // Redo for Windows: Ctrl + Y\r\n    {\r\n        metaKey: false,\r\n        ctrlKey: true,\r\n        shiftKey: false,\r\n        which: KeyCodes.y,\r\n        command: RoosterShortcutCommands.Redo\r\n    },\r\n    // Bullet for Windows: Ctrl + .\r\n    {\r\n        metaKey: false,\r\n        ctrlKey: true,\r\n        shiftKey: false,\r\n        which: KeyCodes.period,\r\n        command: RoosterShortcutCommands.Bullet\r\n    },\r\n    // Numbering for Windows: Ctrl + /\r\n    {\r\n        metaKey: false,\r\n        ctrlKey: true,\r\n        shiftKey: false,\r\n        which: KeyCodes.forwardSlash,\r\n        command: RoosterShortcutCommands.Numbering\r\n    },\r\n    // Insert link for Windows: Ctrl + k\r\n    {\r\n        metaKey: false,\r\n        ctrlKey: true,\r\n        shiftKey: false,\r\n        which: KeyCodes.k,\r\n        command: RoosterShortcutCommands.InsertLink\r\n    },\r\n    // Clear format for Windows: Ctrl + space\r\n    {\r\n        metaKey: false,\r\n        ctrlKey: true,\r\n        shiftKey: false,\r\n        which: KeyCodes.space,\r\n        command: RoosterShortcutCommands.ClearFormat\r\n    }\r\n];\r\n\r\nexport function getCommandFromEvent(event: PluginEvent): RoosterShortcutCommands {\r\n    if (event.eventType !== PluginEventType.KeyDown) {\r\n        return RoosterShortcutCommands.None;\r\n    }\r\n\r\n    const commands = Browser.isMac ? macCommands : winCommands;\r\n    const keyboardEvent = (event as PluginDomEvent).rawEvent as KeyboardEvent;\r\n    for (const cmd of commands) {\r\n        if (\r\n            !keyboardEvent.altKey &&\r\n            cmd.ctrlKey === keyboardEvent.ctrlKey &&\r\n            cmd.metaKey === keyboardEvent.metaKey &&\r\n            cmd.shiftKey === keyboardEvent.shiftKey &&\r\n            cmd.which === keyboardEvent.which\r\n        ) {\r\n            return cmd.command;\r\n        }\r\n    }\r\n\r\n    return RoosterShortcutCommands.None;\r\n}\r\n","export { default as Emoji } from \"./schema/Emoji\";\r\nexport { default as EmojiPlugin, EmojiPluginOptions } from \"./plugins/EmojiPlugin\";\r\nexport { EmojiPaneProps, EmojiPaneState, EmojiPaneMode } from \"./components/EmojiPane\";\r\nexport { EmojiIconProps } from \"./components/EmojiIcon\";\r\nexport { EmojiNavBarProps } from \"./components/EmojiNavBar\";\r\nexport { EmojiStatusBarProps } from \"./components/EmojiStatusBar\";\r\nexport { EmojiFamilyKeys } from \"./utils/emojiList\";\r\n","import { Callout, DirectionalHint } from \"office-ui-fabric-react/lib/Callout\";\r\nimport { Async, KeyCodes } from \"office-ui-fabric-react/lib/Utilities\";\r\nimport * as React from \"react\";\r\nimport * as ReactDOM from \"react-dom\";\r\nimport { replaceWithNode } from \"roosterjs-editor-api\";\r\nimport { Editor, cacheGetContentSearcher, clearContentSearcherCache } from \"roosterjs-editor-core\";\r\nimport { PluginDomEvent, PluginEvent, PluginEventType, PositionType } from \"roosterjs-editor-types\";\r\nimport { AriaAttributes, LeanRoosterPlugin, NullFunction, Strings } from \"roosterjs-react-common\";\r\n\r\nimport EmojiPane, { EmojiPaneMode, EmojiPaneProps } from \"../components/EmojiPane\";\r\nimport Emoji from \"../schema/Emoji\";\r\nimport { MoreEmoji } from \"../utils/emojiList\";\r\nimport { matchShortcut } from \"../utils/searchEmojis\";\r\n\r\nconst EMOJI_SEARCH_DELAY = 300;\r\nconst INTERNAL_EMOJI_FONT_NAME = \"EmojiFont\";\r\nconst EMOJI_FONT_LIST = \"'Apple Color Emoji','Segoe UI Emoji', NotoColorEmoji,'Segoe UI Symbol','Android Emoji',EmojiSymbols\";\r\n// Regex looks for an emoji right before the : to allow contextual search immediately following an emoji\r\n// MATCHES: 0: 😃:r\r\n//          1: 😃\r\n//          2: :r\r\nconst EMOJI_BEFORE_COLON_REGEX = /([\\u0023-\\u0039][\\u20e3]|[\\ud800-\\udbff][\\udc00-\\udfff]|[\\u00a9-\\u00ae]|[\\u2122-\\u3299])*([:;][^:]*)/;\r\nconst KEYCODE_COLON = 186;\r\nconst KEYCODE_COLON_FIREFOX = 59;\r\n\r\nexport interface EmojiPluginOptions {\r\n    strings?: Strings;\r\n    calloutClassName?: string;\r\n    calloutOnDismiss?: (ev?: any) => void;\r\n    emojiPaneProps?: EmojiPaneProps;\r\n    onKeyboardTriggered?: () => void;\r\n}\r\n\r\nexport default class EmojiPlugin implements LeanRoosterPlugin {\r\n    private _editor: Editor;\r\n    private _contentEditable: HTMLDivElement;\r\n    private _contentDiv: HTMLDivElement;\r\n    private _isSuggesting: boolean;\r\n    private _pane: EmojiPane;\r\n    private _eventHandledOnKeyDown: boolean;\r\n    private _canUndoEmoji: boolean;\r\n    private _timer: number;\r\n    private _callout: Callout;\r\n    private _async: Async;\r\n    private _refreshCalloutDebounced: () => void;\r\n    private _strings: Strings;\r\n\r\n    constructor(private options: EmojiPluginOptions = {}) {\r\n        this._async = new Async();\r\n        this._refreshCalloutDebounced = this._async.debounce(() => this._refreshCallout(), 100);\r\n        this._strings = options.strings;\r\n    }\r\n\r\n    public getName() {\r\n        return 'Emoji';\r\n    }\r\n\r\n    public initialize(editor: Editor): void {\r\n        this._editor = editor;\r\n        const document = editor.getDocument();\r\n        this._contentDiv = document.createElement(\"div\");\r\n        document.body.appendChild(this._contentDiv);\r\n    }\r\n\r\n    public initializeContentEditable(contentEditable: HTMLDivElement): void {\r\n        this._contentEditable = contentEditable;\r\n    }\r\n\r\n    public setStrings(strings: Strings): void {\r\n        this._strings = strings;\r\n    }\r\n\r\n    public dispose(): void {\r\n        this._setIsSuggesting(false);\r\n        if (this._contentDiv) {\r\n            ReactDOM.unmountComponentAtNode(this._contentDiv);\r\n            this._contentDiv.parentElement.removeChild(this._contentDiv);\r\n            this._contentDiv = null;\r\n        }\r\n        this._editor = null;\r\n        this._contentEditable = null;\r\n        if (this._async) {\r\n            this._async.dispose();\r\n            this._async = null;\r\n        }\r\n    }\r\n\r\n    public willHandleEventExclusively(event: PluginEvent): boolean {\r\n        return this._isSuggesting && (event.eventType === PluginEventType.KeyDown || event.eventType === PluginEventType.KeyUp || event.eventType === PluginEventType.MouseUp);\r\n    }\r\n\r\n    public onPluginEvent(event: PluginEvent): void {\r\n        const domEvent = event as PluginDomEvent;\r\n        const keyboardEvent = domEvent.rawEvent as KeyboardEvent;\r\n\r\n        if (event.eventType === PluginEventType.KeyDown) {\r\n            this._eventHandledOnKeyDown = false;\r\n            if (this._isSuggesting) {\r\n                this._onKeyDownSuggestingDomEvent(domEvent);\r\n            } else if (keyboardEvent.which === KeyCodes.backspace && this._canUndoEmoji) {\r\n                // If KeyDown is backspace and canUndoEmoji, call editor undo\r\n                this._editor.undo();\r\n                this._handleEventOnKeyDown(domEvent);\r\n                this._canUndoEmoji = false;\r\n            }\r\n        } else if (event.eventType === PluginEventType.KeyUp && !this._isModifierKey(keyboardEvent.key)) {\r\n            if (this._isSuggesting) {\r\n                this._onKeyUpSuggestingDomEvent(domEvent);\r\n            } else {\r\n                this._onKeyUpDomEvent(domEvent);\r\n            }\r\n        } else if (event.eventType === PluginEventType.MouseUp) {\r\n            // If MouseUp, the emoji cannot be undone\r\n            this._canUndoEmoji = false;\r\n            this._setIsSuggesting(false);\r\n        }\r\n    }\r\n\r\n    public startEmoji(startingString: string = \":\"): void {\r\n        const { _editor: editor } = this;\r\n        if (!editor) {\r\n            return;\r\n        }\r\n\r\n        this._setIsSuggesting(true);\r\n        editor.insertContent(startingString);\r\n        this._triggerChangeEvent();\r\n    }\r\n\r\n    private _setIsSuggesting(isSuggesting: boolean, restoreSavedRange: boolean = true): void {\r\n        if (this._isSuggesting === isSuggesting) {\r\n            return;\r\n        }\r\n\r\n        this._isSuggesting = isSuggesting;\r\n        if (this._isSuggesting) {\r\n            ReactDOM.render(this._getCallout(), this._contentDiv);\r\n\r\n            // we need to delay so NVDA will announce the first selection\r\n            setTimeout(() => {\r\n                const { _contentEditable } = this;\r\n                if (_contentEditable) {\r\n                    _contentEditable.setAttribute(AriaAttributes.AutoComplete, \"list\");\r\n                    _contentEditable.setAttribute(AriaAttributes.Owns, this._pane.listId);\r\n                    _contentEditable.setAttribute(AriaAttributes.ActiveDescendant, this._pane.getEmojiElementIdByIndex(0));\r\n                }\r\n            }, 0);\r\n            this._editor.saveSelectionRange();\r\n        } else {\r\n            ReactDOM.unmountComponentAtNode(this._contentDiv);\r\n\r\n            this._removeAutoCompleteAriaAttributes();\r\n            restoreSavedRange && this._editor.restoreSavedRange();\r\n        }\r\n    }\r\n\r\n    private _removeAutoCompleteAriaAttributes(): void {\r\n        const { _contentEditable } = this;\r\n        if (_contentEditable) {\r\n            _contentEditable.removeAttribute(AriaAttributes.AutoComplete);\r\n            _contentEditable.removeAttribute(AriaAttributes.Owns);\r\n            _contentEditable.removeAttribute(AriaAttributes.ActiveDescendant);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * On KeyDown suggesting DOM event\r\n     * Try to insert emoji is possible\r\n     * Intercept arrow keys to move selection if popup is shown\r\n     */\r\n    private _onKeyDownSuggestingDomEvent(event: PluginDomEvent): void {\r\n        // If key is enter, try insert emoji at selection\r\n        // If key is space and selection is shortcut, try insert emoji\r\n        const keyboardEvent = event.rawEvent as KeyboardEvent;\r\n        const selectedEmoji = this._pane.getSelectedEmoji();\r\n        const wordBeforeCursor = this._getWordBeforeCursor(event);\r\n\r\n        let emoji: Emoji;\r\n        switch (keyboardEvent.which) {\r\n            case KeyCodes.space:\r\n                // We only want to insert on space if the word before the cursor is a shortcut\r\n                emoji = wordBeforeCursor ? matchShortcut(wordBeforeCursor) : null;\r\n                if (!emoji) {\r\n                    this._setIsSuggesting(false, false);\r\n                }\r\n\r\n                break;\r\n            case KeyCodes.enter:\r\n                // check if selection is on the \"...\" and show full picker if so, otherwise try to apply emoji\r\n                if (this._tryShowFullPicker(event, selectedEmoji, wordBeforeCursor)) {\r\n                    break;\r\n                }\r\n\r\n                // We only want to insert on space if the word before the cursor is a shortcut\r\n                // If the timer is not null, that means we have a search queued.\r\n                // Check to see is the word before the cursor matches a shortcut first\r\n                // Otherwise if the search completed and it is a shortcut, insert the first item\r\n                emoji = this._timer ? matchShortcut(wordBeforeCursor) : selectedEmoji;\r\n                break;\r\n            case KeyCodes.left:\r\n            case KeyCodes.right:\r\n                const nextIndex = this._pane.navigate(keyboardEvent.which === KeyCodes.left ? -1 : 1);\r\n                if (nextIndex >= 0) {\r\n                    this._contentEditable.setAttribute(AriaAttributes.ActiveDescendant, this._pane.getEmojiElementIdByIndex(nextIndex));\r\n                }\r\n                this._handleEventOnKeyDown(event);\r\n                break;\r\n            case KeyCodes.escape:\r\n                this._setIsSuggesting(false);\r\n                this._handleEventOnKeyDown(event);\r\n        }\r\n\r\n        if (emoji && (this._canUndoEmoji = this._insertEmoji(emoji, wordBeforeCursor))) {\r\n            this._handleEventOnKeyDown(event);\r\n        }\r\n    }\r\n\r\n    private _tryShowFullPicker(event: PluginDomEvent, selectedEmoji: Emoji, wordBeforeCursor: string): boolean {\r\n        if (selectedEmoji !== MoreEmoji) {\r\n            return false;\r\n        }\r\n\r\n        this._handleEventOnKeyDown(event);\r\n        this._pane.showFullPicker(wordBeforeCursor);\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * On KeyUp suggesting DOM event\r\n     * If key is character, update search term\r\n     * Otherwise set isSuggesting to false\r\n     */\r\n    private _onKeyUpSuggestingDomEvent(event: PluginDomEvent): void {\r\n        if (this._eventHandledOnKeyDown) {\r\n            return;\r\n        }\r\n\r\n        const keyboardEvent = event.rawEvent as KeyboardEvent;\r\n\r\n        // If this is a character key or backspace\r\n        // Clear the timer as we will either queue a new timer or stop suggesting\r\n        if ((keyboardEvent.key.length === 1 && keyboardEvent.which !== KeyCodes.space) || keyboardEvent.which === KeyCodes.backspace) {\r\n            window.clearTimeout(this._timer);\r\n            this._timer = null;\r\n        }\r\n\r\n        const wordBeforeCursor = this._getWordBeforeCursor(event);\r\n        if (wordBeforeCursor) {\r\n            this._timer = window.setTimeout(() => {\r\n                if (this._pane) {\r\n                    this._pane.setSearch(wordBeforeCursor);\r\n                    this._timer = null;\r\n                }\r\n            }, EMOJI_SEARCH_DELAY);\r\n        } else {\r\n            this._setIsSuggesting(false);\r\n        }\r\n    }\r\n\r\n    private _onKeyUpDomEvent(event: PluginDomEvent): void {\r\n        if (this._eventHandledOnKeyDown) {\r\n            return;\r\n        }\r\n\r\n        const keyboardEvent = event.rawEvent as KeyboardEvent;\r\n        const wordBeforeCursor = this._getWordBeforeCursor(event);\r\n        if ((keyboardEvent.which === KEYCODE_COLON || keyboardEvent.which === KEYCODE_COLON_FIREFOX) && wordBeforeCursor === \":\") {\r\n            const { onKeyboardTriggered = NullFunction } = this.options;\r\n            this._setIsSuggesting(true);\r\n            onKeyboardTriggered();\r\n        } else if (wordBeforeCursor) {\r\n            const cursorData = cacheGetContentSearcher(event, this._editor);\r\n            const charBeforeCursor = cursorData ? cursorData.getSubStringBefore(1) : null;\r\n\r\n            // It is possible that the word before the cursor is ahead of the pluginEvent we are handling\r\n            // ex. WordBeforeCursor is \":D\"\" but the event we are currently handling is for the : key\r\n            // Check that the char before the cursor is actually the key event we are currently handling\r\n            // Otherwise we set canUndoEmoji to early and user is unable to backspace undo on the inserted emoji\r\n            if (keyboardEvent.key === charBeforeCursor) {\r\n                const emoji = matchShortcut(wordBeforeCursor);\r\n                if (emoji && this._insertEmoji(emoji, wordBeforeCursor)) {\r\n                    clearContentSearcherCache(event);\r\n                    this._canUndoEmoji = true;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    private _insertEmoji(emoji: Emoji, wordBeforeCursor: string): boolean {\r\n        let inserted = false;\r\n        this._editor.addUndoSnapshot();\r\n\r\n        const node = this._editor.getDocument().createElement(\"span\");\r\n        node.innerText = emoji.codePoint;\r\n        if (wordBeforeCursor && replaceWithNode(this._editor, wordBeforeCursor, node, false /*exactMatch*/)) {\r\n            inserted = true;\r\n            this._canUndoEmoji = true;\r\n\r\n            // Update the editor cursor to be after the inserted node\r\n            window.requestAnimationFrame(() => {\r\n                if (this._editor && this._editor.contains(node)) {\r\n                    this._editor.select(node, PositionType.After);\r\n                    this._editor.addUndoSnapshot();\r\n                }\r\n            });\r\n        } else {\r\n            inserted = this._editor.insertNode(node);\r\n        }\r\n\r\n        inserted && this._triggerChangeEvent();\r\n\r\n        this._tryPatchEmojiFont();\r\n        this._setIsSuggesting(false);\r\n\r\n        return inserted;\r\n    }\r\n\r\n    private _triggerChangeEvent(): void {\r\n        this._editor.triggerContentChangedEvent(\"Emoji\");\r\n    }\r\n\r\n    private _isModifierKey(key: string): boolean {\r\n        return key === \"Shift\" || key === \"Control\" || key === \"Alt\" || key === \"Command\";\r\n    }\r\n\r\n    private _handleEventOnKeyDown(event: PluginDomEvent): void {\r\n        this._eventHandledOnKeyDown = true;\r\n        event.rawEvent.preventDefault();\r\n        event.rawEvent.stopImmediatePropagation();\r\n    }\r\n\r\n    private _getCallout(): JSX.Element {\r\n        const { calloutClassName, emojiPaneProps = {} } = this.options;\r\n\r\n        const cursorRect = this._editor.getCursorRect();\r\n        const point = {\r\n            x: cursorRect.left,\r\n            y: (cursorRect.top + cursorRect.bottom) / 2\r\n        };\r\n        const gap = (cursorRect.bottom - cursorRect.top) / 2 + 5;\r\n\r\n        return (\r\n            <Callout\r\n                className={calloutClassName}\r\n                target={point}\r\n                directionalHint={DirectionalHint.bottomAutoEdge}\r\n                isBeakVisible={false}\r\n                gapSpace={gap}\r\n                onDismiss={this._calloutOnDismissInternal}\r\n                ref={this._calloutRef}\r\n            >\r\n                <EmojiPane\r\n                    {...emojiPaneProps}\r\n                    ref={this._paneRef}\r\n                    onSelect={this._onSelectFromPane}\r\n                    strings={this._strings || {}}\r\n                    onLayoutChanged={this._refreshCalloutDebounced}\r\n                    onModeChanged={this._onModeChanged}\r\n                    navBarProps={emojiPaneProps.navBarProps}\r\n                    statusBarProps={emojiPaneProps.statusBarProps}\r\n                    searchDisabled={!this._strings || emojiPaneProps.searchDisabled}\r\n                    hideStatusBar={!this._strings}\r\n                />\r\n            </Callout>\r\n        );\r\n    }\r\n\r\n    private _onModeChanged = (newMode: EmojiPaneMode): void => {\r\n        if (newMode !== EmojiPaneMode.Quick) {\r\n            this._removeAutoCompleteAriaAttributes(); // remove since we switched to a dialog\r\n        }\r\n    };\r\n\r\n    private _paneRef = (ref: EmojiPane): void => {\r\n        this._pane = ref;\r\n    };\r\n\r\n    private _calloutRef = (ref: Callout): void => {\r\n        this._callout = ref;\r\n    };\r\n\r\n    private _refreshCallout(): void {\r\n        this._callout.forceUpdate();\r\n    }\r\n\r\n    private _calloutOnDismissInternal = (ev?: any): void => {\r\n        this._setIsSuggesting(false);\r\n        if (this.options.calloutOnDismiss) {\r\n            this.options.calloutOnDismiss(ev);\r\n        }\r\n    };\r\n\r\n    private _tryPatchEmojiFont(): boolean {\r\n        // This is not perfect way of doing this, but cannot find a better way.\r\n        // Essentially what is happening is, emoji requires some special font to render properly. Without those font, it may render black and white\r\n        // The fix we have right now is to find the topest block element and patch it with emoji font\r\n        const range = this._editor.getSelectionRange();\r\n        const inlineElement = range ? this._editor.getInlineElementAtNode(range.startContainer) : null;\r\n        const blockElement = inlineElement ? inlineElement.getParentBlock() : null;\r\n        if (blockElement) {\r\n            const blockNode = blockElement.getStartNode() as HTMLElement;\r\n            const fontFamily = blockNode.style.fontFamily;\r\n            if (fontFamily && fontFamily.toLowerCase().indexOf(\"emoji\") < 0) {\r\n                blockNode.style.fontFamily = fontFamily + \",\" + INTERNAL_EMOJI_FONT_NAME + \",\" + EMOJI_FONT_LIST;\r\n                return true;\r\n            }\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    private _getWordBeforeCursor(event: PluginEvent): string {\r\n        const cursorData = cacheGetContentSearcher(event, this._editor);\r\n        const wordBeforeCursor = cursorData ? cursorData.getWordBefore() : null;\r\n        const matches = EMOJI_BEFORE_COLON_REGEX.exec(wordBeforeCursor);\r\n        return matches && matches.length > 2 && matches[0] === wordBeforeCursor ? matches[2] : null;\r\n    }\r\n\r\n    private _onSelectFromPane = (emoji: Emoji, wordBeforeCursor: string): void => {\r\n        if (emoji === MoreEmoji) {\r\n            this._pane.showFullPicker(wordBeforeCursor);\r\n            return;\r\n        }\r\n\r\n        this._insertEmoji(emoji, wordBeforeCursor);\r\n    };\r\n}\r\n","import { Callout, DirectionalHint, ICalloutProps } from \"office-ui-fabric-react/lib/Callout\";\r\nimport { FocusZone } from \"office-ui-fabric-react/lib/FocusZone\";\r\nimport { TextField, ITextField } from \"office-ui-fabric-react/lib/TextField\";\r\nimport { KeyCodes } from \"office-ui-fabric-react/lib/Utilities\";\r\nimport * as React from \"react\";\r\nimport { AriaAttributes, css, NullFunction, Strings } from \"roosterjs-react-common\";\r\n\r\nimport Emoji from \"../schema/Emoji\";\r\nimport EmojiList, { CommonEmojis, EmojiFamilyKeys, MoreEmoji } from \"../utils/emojiList\";\r\nimport { searchEmojis } from \"../utils/searchEmojis\";\r\nimport * as Styles from \"./emoji.scss.g\";\r\nimport EmojiIcon, { EmojiIconProps } from \"./EmojiIcon\";\r\nimport EmojiNavBar, { EmojiNavBarProps } from \"./EmojiNavBar\";\r\nimport EmojiStatusBar, { EmojiStatusBarProps } from \"./EmojiStatusBar\";\r\n\r\n// \"When a div contains an element that is bigger (either taller or wider) than the parent and has the property\r\n// overflow-x or overflow-y set to any value, then it can receive the focus.\"\r\n// https://bugzilla.mozilla.org/show_bug.cgi?id=1069739\r\nconst TabIndexForFirefoxBug = -1;\r\n\r\nconst PaneBaseClassName = \"rooster-emoji-pane\";\r\nconst EmojisPerRow = 7;\r\nconst EmojiVisibleRowCount = 5;\r\nconst EmojiVisibleWithoutNavBarRowCount = 6;\r\nconst EmojiHeightPx = 40;\r\nconst VerticalDirectionKeys: number[] = [KeyCodes.up, KeyCodes.down];\r\nconst DirectionKeys: number[] = [KeyCodes.left, KeyCodes.right, KeyCodes.up, KeyCodes.down, KeyCodes.home, KeyCodes.end];\r\n\r\nconst TooltipCalloutProps: ICalloutProps = {\r\n    isBeakVisible: true,\r\n    beakWidth: 16,\r\n    gapSpace: 0,\r\n    setInitialFocus: true,\r\n    doNotLayer: false,\r\n    directionalHint: DirectionalHint.bottomCenter\r\n};\r\n\r\nexport const enum EmojiPaneMode {\r\n    Quick,\r\n    Partial,\r\n    Full\r\n}\r\n\r\nexport const enum EmojiPaneNavigateDirection {\r\n    Horizontal,\r\n    Vertical\r\n}\r\n\r\nexport interface EmojiPaneState {\r\n    index: number;\r\n    mode: EmojiPaneMode;\r\n    currentEmojiList: Emoji[];\r\n    currentFamily: EmojiFamilyKeys;\r\n    search: string;\r\n    searchInBox: string;\r\n}\r\n\r\nexport interface EmojiPaneProps {\r\n    quickPickerClassName?: string;\r\n    fullPickerClassName?: string;\r\n    fullListClassName?: string;\r\n    fullListContentClassName?: string;\r\n    partialListClassName?: string;\r\n    tooltipClassName?: string;\r\n    searchInputAriaLabel?: string;\r\n    searchPlaceholder?: string;\r\n    onLayoutChanged?: () => void;\r\n    onModeChanged?: (newMode: EmojiPaneMode, previousMode: EmojiPaneMode) => void;\r\n    navBarProps?: Partial<EmojiNavBarProps>;\r\n    statusBarProps?: Partial<EmojiStatusBarProps>;\r\n    emojiIconProps?: Partial<EmojiIconProps>;\r\n    searchDisabled?: boolean;\r\n    hideStatusBar?: boolean;\r\n}\r\n\r\nexport interface InternalEmojiPaneProps extends EmojiPaneProps {\r\n    onSelect: (emoji: Emoji, wordBeforeCursor: string) => void;\r\n    strings: Strings;\r\n    onLayoutChange?: () => void;\r\n}\r\n\r\nexport default class EmojiPane extends React.PureComponent<InternalEmojiPaneProps, EmojiPaneState> {\r\n    private static IdCounter = 0;\r\n\r\n    private _baseId = EmojiPane.IdCounter++;\r\n    private _searchBox: ITextField;\r\n    private _listId = `EmojiPane${this._baseId}`;\r\n    private _emojiBody: HTMLElement;\r\n    private _input: HTMLInputElement;\r\n\r\n    public static defaultProps: EmojiPaneProps = { onLayoutChanged: NullFunction, onModeChanged: NullFunction };\r\n\r\n    constructor(props: InternalEmojiPaneProps) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            index: 0,\r\n            mode: EmojiPaneMode.Quick,\r\n            currentEmojiList: CommonEmojis,\r\n            currentFamily: EmojiFamilyKeys.People,\r\n            search: \":\",\r\n            searchInBox: \"\"\r\n        };\r\n    }\r\n\r\n    public render(): JSX.Element {\r\n        return this.state.mode === EmojiPaneMode.Quick ? this._renderQuickPicker() : this._renderFullPicker();\r\n    }\r\n\r\n    public componentDidUpdate(_: EmojiPaneProps, prevState: EmojiPaneState) {\r\n        // call onLayoutChange when the call out parent of the EmojiPane needs to reorient itself on the page\r\n        const { onLayoutChanged, onModeChanged } = this.props;\r\n        const { currentEmojiList, mode, currentFamily } = this.state;\r\n\r\n        if (mode !== prevState.mode) {\r\n            onModeChanged(mode, prevState.mode);\r\n            onLayoutChanged();\r\n            return;\r\n        }\r\n\r\n        const currentEmojisLength = currentEmojiList ? currentEmojiList.length : EmojiList[currentFamily].length;\r\n        const prevEmojisLength = prevState.currentEmojiList ? prevState.currentEmojiList.length : EmojiList[prevState.currentFamily].length;\r\n        if (mode !== EmojiPaneMode.Quick && currentEmojisLength !== prevEmojisLength) {\r\n            onLayoutChanged();\r\n            return;\r\n        }\r\n    }\r\n\r\n    public navigate(change: number, direction: EmojiPaneNavigateDirection = EmojiPaneNavigateDirection.Horizontal): number {\r\n        const { index, currentEmojiList } = this.state;\r\n        if (direction === EmojiPaneNavigateDirection.Vertical && index !== -1) {\r\n            change *= EmojisPerRow;\r\n        }\r\n\r\n        const newIndex = index + change;\r\n        const length = currentEmojiList.length;\r\n        if (newIndex >= 0 && newIndex < length) {\r\n            this.setState({ index: newIndex });\r\n            return newIndex;\r\n        }\r\n\r\n        return -1;\r\n    }\r\n\r\n    public getEmojiElementIdByIndex(index: number): string {\r\n        const { currentEmojiList } = this.state;\r\n        const emoji = currentEmojiList[index];\r\n        if (emoji) {\r\n            return this._getEmojiIconId(emoji);\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    public getSelectedEmoji(): Emoji {\r\n        const { currentEmojiList, index } = this.state;\r\n\r\n        return currentEmojiList[index];\r\n    }\r\n\r\n    public showFullPicker(fullSearchText: string): void {\r\n        const normalizedSearchValue = this._normalizeSearchText(fullSearchText, true);\r\n        const newMode = normalizedSearchValue.length === 0 ? EmojiPaneMode.Full : EmojiPaneMode.Partial;\r\n        this.setState({\r\n            index: newMode === EmojiPaneMode.Full ? -1 : 0,\r\n            mode: newMode,\r\n            currentEmojiList: this._getSearchResult(normalizedSearchValue, newMode),\r\n            search: fullSearchText,\r\n            searchInBox: normalizedSearchValue\r\n        });\r\n    }\r\n\r\n    public setSearch(value: string): void {\r\n        const normalizedSearchValue = this._normalizeSearchText(value, false);\r\n        this.setState({\r\n            index: 0,\r\n            currentEmojiList: this._getSearchResult(normalizedSearchValue, this.state.mode),\r\n            search: value\r\n        });\r\n    }\r\n\r\n    public get listId(): string {\r\n        return this._listId;\r\n    }\r\n\r\n    private _normalizeSearchText(text: string, colonIncluded: boolean): string {\r\n        if (text == null) {\r\n            return \"\";\r\n        }\r\n\r\n        if (colonIncluded) {\r\n            text = text.substr(1);\r\n        }\r\n        return text.trim();\r\n    }\r\n\r\n    private _getSearchResult(searchValue: string, mode: EmojiPaneMode): Emoji[] {\r\n        const isQuickMode = mode === EmojiPaneMode.Quick;\r\n        if (!searchValue) {\r\n            return isQuickMode ? this.state.currentEmojiList : EmojiList[this.state.currentFamily];\r\n        }\r\n\r\n        const emojiList = searchEmojis(searchValue, this.props.strings);\r\n        return isQuickMode ? emojiList.slice(0, 5).concat([MoreEmoji]) : emojiList;\r\n    }\r\n\r\n    private _renderQuickPicker(): JSX.Element {\r\n        const { quickPickerClassName, tooltipClassName, strings } = this.props;\r\n        const selectedEmoji = this.getSelectedEmoji();\r\n        const target = selectedEmoji ? `#${this._getEmojiIconId(selectedEmoji)}` : undefined;\r\n        const content = selectedEmoji ? strings[selectedEmoji.description] : undefined;\r\n\r\n        // note: we're using a callout since TooltipHost does not support manual trigger, and we need to show the tooltip since quick picker is shown\r\n        // as an autocomplete menu (false focus based on transferring navigation keyboard event)\r\n        return (\r\n            <div id={this._listId} role=\"listbox\" className={css(Styles.quickPicker, PaneBaseClassName, \"quick-picker\", quickPickerClassName)}>\r\n                {this._renderCurrentEmojiIcons()}\r\n                <Callout {...TooltipCalloutProps} role=\"tooltip\" target={target} hidden={!content} className={css(Styles.tooltip, tooltipClassName)}>\r\n                    {content}\r\n                </Callout>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    private _renderFullPicker(): JSX.Element {\r\n        const { fullPickerClassName, searchDisabled, searchPlaceholder, searchInputAriaLabel } = this.props;\r\n        const emojiId = this._getEmojiIconId(this.getSelectedEmoji());\r\n        const autoCompleteAttributes = {\r\n            [AriaAttributes.AutoComplete]: \"list\",\r\n            [AriaAttributes.Expanded]: \"true\",\r\n            [AriaAttributes.HasPopup]: \"listbox\",\r\n            [AriaAttributes.Owns]: this._listId\r\n        };\r\n        if (emojiId) {\r\n            autoCompleteAttributes[AriaAttributes.ActiveDescendant] = emojiId;\r\n        }\r\n\r\n        return (\r\n            <div className={css(PaneBaseClassName, fullPickerClassName)}>\r\n                {!searchDisabled && (\r\n                    <TextField\r\n                        role=\"combobox\"\r\n                        componentRef={this._searchRefCallback}\r\n                        value={this.state.searchInBox}\r\n                        onChange={this._onSearchChange}\r\n                        inputClassName={Styles.emojiTextInput}\r\n                        onKeyPress={this._onSearchKeyPress}\r\n                        onKeyDown={this._onSearchKeyDown}\r\n                        onFocus={this._onSearchFocus}\r\n                        placeholder={searchPlaceholder}\r\n                        ariaLabel={searchInputAriaLabel}\r\n                        {...autoCompleteAttributes}\r\n                    />\r\n                )}\r\n                {this.state.mode === EmojiPaneMode.Full ? this._renderFullList() : this._renderPartialList()}\r\n            </div>\r\n        );\r\n    }\r\n\r\n    private _onSearchFocus = (e: React.FocusEvent<HTMLInputElement>): void => {\r\n        this._input = e.target as HTMLInputElement;\r\n    };\r\n\r\n    private _onSearchKeyPress = (e: React.KeyboardEvent<HTMLInputElement>): void => {\r\n        if (!e || e.which !== KeyCodes.enter) {\r\n            return;\r\n        }\r\n\r\n        const { index, currentEmojiList } = this.state;\r\n\r\n        if (index >= 0 && currentEmojiList && currentEmojiList.length > 0) {\r\n            this._onSelect(e, currentEmojiList[index]);\r\n        }\r\n    };\r\n\r\n    private _onSearchKeyDown = (e: React.KeyboardEvent<HTMLInputElement>): void => {\r\n        if (!e || DirectionKeys.indexOf(e.which) < 0) {\r\n            return;\r\n        }\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        const { _emojiBody } = this;\r\n        if (e.which === KeyCodes.home) {\r\n            this.setState({ index: 0 });\r\n            _emojiBody.scrollTop = 0;\r\n            return;\r\n        }\r\n        if (e.which === KeyCodes.end) {\r\n            this.setState({ index: this.state.currentEmojiList.length - 1 });\r\n            _emojiBody.scrollTop = _emojiBody.scrollHeight; // scrollHeight will be larger than max\r\n            return;\r\n        }\r\n\r\n        const direction = VerticalDirectionKeys.indexOf(e.which) < 0 ? EmojiPaneNavigateDirection.Horizontal : EmojiPaneNavigateDirection.Vertical;\r\n        const newIndex = this.navigate(e.which === KeyCodes.left || e.which === KeyCodes.up ? -1 : 1, direction);\r\n        if (newIndex > -1) {\r\n            const visibleRowCount = this.state.mode === EmojiPaneMode.Full ? EmojiVisibleRowCount : EmojiVisibleWithoutNavBarRowCount;\r\n            const currentRow = Math.floor(newIndex / EmojisPerRow);\r\n            const visibleTop = _emojiBody.scrollTop;\r\n            const visibleBottom = visibleTop + visibleRowCount * EmojiHeightPx;\r\n            const currentRowTop = currentRow * EmojiHeightPx;\r\n            const currentRowBottom = currentRowTop + EmojiHeightPx;\r\n            if (visibleTop <= currentRowTop && visibleBottom >= currentRowBottom) {\r\n                return; // row is visible, so exit\r\n            }\r\n\r\n            _emojiBody.scrollTop = currentRow * EmojiHeightPx;\r\n        }\r\n    };\r\n\r\n    private _renderCurrentEmojiIcons(): JSX.Element[] {\r\n        const { strings, emojiIconProps } = this.props;\r\n        const { currentEmojiList } = this.state;\r\n\r\n        return currentEmojiList.map((emoji, index) => (\r\n            <EmojiIcon\r\n                strings={strings}\r\n                {...emojiIconProps}\r\n                id={this._getEmojiIconId(emoji)}\r\n                key={emoji.key}\r\n                onMouseOver={() => this.setState({ index })}\r\n                onFocus={() => this.setState({ index })}\r\n                emoji={emoji}\r\n                isSelected={index === this.state.index}\r\n                onClick={e => this._onSelect(e, emoji)}\r\n                aria-posinset={index + 1}\r\n                aria-setsize={currentEmojiList.length}\r\n            />\r\n        ));\r\n    }\r\n\r\n    private _getEmojiIconId(emoji: Emoji): string {\r\n        return emoji ? `${this._listId}-${emoji.key}` : undefined;\r\n    }\r\n\r\n    private _renderPartialList(): JSX.Element {\r\n        const { partialListClassName, strings, hideStatusBar, statusBarProps } = this.props;\r\n        const { currentEmojiList } = this.state;\r\n        const hasResult = currentEmojiList && currentEmojiList.length > 0;\r\n\r\n        return (\r\n            <div>\r\n                <div className={css(Styles.partialList, partialListClassName)} data-is-scrollable={true} tabIndex={TabIndexForFirefoxBug} ref={this._onEmojiBodyRef}>\r\n                    <FocusZone id={this._listId} role=\"listbox\" className={Styles.partialListContent} ref={this._focusZoneRefCallback}>\r\n                        {this._renderCurrentEmojiIcons()}\r\n                    </FocusZone>\r\n                </div>\r\n                {!hideStatusBar && <EmojiStatusBar strings={strings} {...statusBarProps} hasResult={hasResult} emoji={this.getSelectedEmoji()} />}\r\n            </div>\r\n        );\r\n    }\r\n\r\n    private _renderFullList(): JSX.Element {\r\n        const { fullListClassName, fullListContentClassName, strings, hideStatusBar, navBarProps, statusBarProps } = this.props;\r\n        const { currentEmojiList } = this.state;\r\n        const hasResult = currentEmojiList && currentEmojiList.length > 0;\r\n\r\n        return (\r\n            <div className={css(Styles.fullList, fullListClassName)}>\r\n                <div className={Styles.fullListBody} data-is-scrollable={true} tabIndex={TabIndexForFirefoxBug} ref={this._onEmojiBodyRef}>\r\n                    <EmojiNavBar strings={strings} {...navBarProps} onClick={this._pivotClick} currentSelected={this.state.currentFamily} getTabId={this._getTabId} />\r\n                    <div className={Styles.fullListContentContainer} role=\"tabpanel\" aria-labelledby={this._getTabId(this.state.currentFamily)}>\r\n                        <div>\r\n                            <FocusZone id={this._listId} role=\"listbox\" className={css(Styles.fullListContent, fullListContentClassName)} ref={this._focusZoneRefCallback}>\r\n                                {this._renderCurrentEmojiIcons()}\r\n                            </FocusZone>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {!hideStatusBar && <EmojiStatusBar strings={strings} {...statusBarProps} hasResult={hasResult} emoji={this.getSelectedEmoji()} />}\r\n            </div>\r\n        );\r\n    }\r\n\r\n    private _onEmojiBodyRef = (ref: HTMLDivElement) => {\r\n        this._emojiBody = ref;\r\n    };\r\n\r\n    private _pivotClick = (selected: string): void => {\r\n        const currentFamily = selected as EmojiFamilyKeys;\r\n\r\n        this.setState({ currentEmojiList: EmojiList[currentFamily], currentFamily });\r\n    };\r\n\r\n    private _getTabId = (itemKey: EmojiFamilyKeys): string => {\r\n        return `family_${itemKey}_${this._baseId}`;\r\n    };\r\n\r\n    private _searchRefCallback = (ref: ITextField): void => {\r\n        this._searchBox = ref;\r\n        if (this._searchBox) {\r\n            this._searchBox.focus();\r\n            this._searchBox.setSelectionStart(this._searchBox.value.length);\r\n        }\r\n    };\r\n\r\n    private _focusZoneRefCallback = (ref: FocusZone): void => {\r\n        if (this.props.searchDisabled && ref) {\r\n            ref.focus();\r\n        }\r\n\r\n        if (this._input) {\r\n            // make sure to announce the active descending after the focus zone containing the emojis is ready\r\n            this._input.removeAttribute(AriaAttributes.ActiveDescendant);\r\n            const emojiId = this._getEmojiIconId(this.getSelectedEmoji());\r\n            // we need to delay so NVDA will announce the first selection\r\n            emojiId && setTimeout(() => this._input.setAttribute(AriaAttributes.ActiveDescendant, emojiId), 0);\r\n        }\r\n    };\r\n\r\n    private _onSearchChange = (e: any, newValue: string): void => {\r\n        const normalizedSearchValue = this._normalizeSearchText(newValue, false);\r\n        const newMode = normalizedSearchValue.length === 0 ? EmojiPaneMode.Full : EmojiPaneMode.Partial;\r\n        this.setState({\r\n            index: newMode === EmojiPaneMode.Full ? -1 : 0,\r\n            currentEmojiList: this._getSearchResult(normalizedSearchValue, this.state.mode),\r\n            searchInBox: newValue,\r\n            mode: newMode\r\n        });\r\n    };\r\n\r\n    private _onSelect = (e: React.MouseEvent<EventTarget> | React.KeyboardEvent<HTMLInputElement>, emoji: Emoji): void => {\r\n        e.stopPropagation();\r\n        e.preventDefault();\r\n        this.props.onSelect && this.props.onSelect(emoji, this.state.search);\r\n    };\r\n}\r\n","import { css } from \"office-ui-fabric-react/lib/Utilities\";\r\nimport * as React from \"react\";\r\nimport { getDataAndAriaProps, Strings } from \"roosterjs-react-common\";\r\n\r\nimport Emoji from \"../schema/Emoji\";\r\nimport * as Styles from \"./emoji.scss.g\";\r\n\r\nexport interface EmojiIconProps {\r\n    id: string;\r\n    emoji: Emoji;\r\n    strings: Strings;\r\n    onClick?: (e: React.MouseEvent<EventTarget>) => void;\r\n    onMouseOver?: (number) => void;\r\n    onFocus?: (number) => void;\r\n    isSelected?: boolean;\r\n    className?: string;\r\n    selectedClassName?: string;\r\n}\r\n\r\nexport default class EmojiIcon extends React.Component<EmojiIconProps, {}> {\r\n    public render() {\r\n        const { emoji, onClick, isSelected, onMouseOver, onFocus, strings, id, className, selectedClassName } = this.props;\r\n        const content = strings[emoji.description];\r\n\r\n        return (\r\n            <button\r\n                id={id}\r\n                role=\"option\"\r\n                className={css(Styles.emoji, className, { \"rooster-emoji-selected\": isSelected, [selectedClassName]: isSelected })}\r\n                onClick={onClick}\r\n                onMouseOver={onMouseOver}\r\n                onFocus={onFocus}\r\n                data-is-focusable={true}\r\n                aria-label={content}\r\n                aria-selected={isSelected}\r\n                {...getDataAndAriaProps(this.props)}\r\n            >\r\n                {emoji.codePoint || \"…\"}\r\n            </button>\r\n        );\r\n    }\r\n}\r\n","import { FocusZone, FocusZoneDirection } from \"office-ui-fabric-react/lib/FocusZone\";\r\nimport { Icon } from \"office-ui-fabric-react/lib/Icon\";\r\nimport { TooltipHost } from \"office-ui-fabric-react/lib/Tooltip\";\r\nimport * as React from \"react\";\r\nimport { css, Strings } from \"roosterjs-react-common\";\r\n\r\nimport EmojiList, { EmojiFabricIconCharacterMap } from \"../utils/emojiList\";\r\nimport * as EmojiNavBarStyles from \"./EmojiNavBar.scss.g\";\r\n\r\nexport interface EmojiNavBarProps {\r\n    onClick?: (selected: string) => void;\r\n    currentSelected?: string;\r\n    getTabId?: (selected: string) => string;\r\n    className?: string;\r\n    buttonClassName?: string;\r\n    selectedButtonClassName?: string;\r\n    iconClassName?: string;\r\n    strings: Strings;\r\n}\r\n\r\nexport default class EmojiNavBar extends React.Component<EmojiNavBarProps, {}> {\r\n    public render() {\r\n        const { currentSelected, getTabId, strings = {}, className, buttonClassName, selectedButtonClassName, iconClassName } = this.props;\r\n        const keys = Object.keys(EmojiList);\r\n\r\n        return (\r\n            // for each emoji family key, create a button to use as nav bar\r\n            <div className={css(EmojiNavBarStyles.navBar, className)} role=\"tablist\">\r\n                <FocusZone direction={FocusZoneDirection.horizontal}>\r\n                    {keys.map((key, index) => {\r\n                        const selected = key === currentSelected;\r\n                        const friendlyName = strings[key];\r\n                        return (\r\n                            <TooltipHost hostClassName={EmojiNavBarStyles.navBarTooltip} content={friendlyName} key={key}>\r\n                                <button\r\n                                    className={css(EmojiNavBarStyles.navBarButton, buttonClassName, \"emoji-nav-bar-button\", {\r\n                                        [EmojiNavBarStyles.selected]: selected,\r\n                                        [selectedButtonClassName]: selected\r\n                                    })}\r\n                                    key={key}\r\n                                    onClick={this.onFamilyClick.bind(this, key)}\r\n                                    id={getTabId(key)}\r\n                                    role=\"tab\"\r\n                                    aria-selected={selected}\r\n                                    aria-label={friendlyName}\r\n                                    data-is-focusable=\"true\"\r\n                                    aria-posinset={index + 1}\r\n                                    aria-setsize={keys.length}\r\n                                >\r\n                                    <Icon iconName={EmojiFabricIconCharacterMap[key]} className={iconClassName} />\r\n                                </button>\r\n                            </TooltipHost>\r\n                        );\r\n                    })}\r\n                </FocusZone>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    private onFamilyClick(key: string): void {\r\n        if (this.props.onClick) {\r\n            this.props.onClick(key);\r\n        }\r\n    }\r\n}\r\n","/* tslint:disable */\nimport { loadStyles } from '@microsoft/load-themed-styles';\nloadStyles([{\"rawString\":\".navBar_9329d3c7{height:40px;position:absolute;left:0;z-index:10;padding:2px 1px 0;background:#fff}.navBarButton_9329d3c7{background:#fff;height:40px;width:40px;border:0;border-bottom:solid 1px #dadada;display:inline-block;padding:0;margin:0}.navBarButton_9329d3c7::-moz-focus-inner{border:0}.navBarButton_9329d3c7:hover{background:#eaeaea;cursor:default}@media screen and (-ms-high-contrast: active){.navBarButton_9329d3c7:hover{background-color:Highlight;color:HighlightText;-ms-high-contrast-adjust:none}}@media screen and (-ms-high-contrast: active){.navBarButton_9329d3c7:hover .selected_9329d3c7{border:1px solid Highlight;background:none}}.selected_9329d3c7{border-bottom:2px solid #0078d4}@media screen and (-ms-high-contrast: active){.selected_9329d3c7{border-bottom-color:Highlight}}.navBarTooltip_9329d3c7{display:inline-block}\"}]);\nexport const navBar = \"navBar_9329d3c7\";\nexport const navBarButton = \"navBarButton_9329d3c7\";\nexport const selected = \"selected_9329d3c7\";\nexport const navBarTooltip = \"navBarTooltip_9329d3c7\";","import { TooltipHost, TooltipOverflowMode } from \"office-ui-fabric-react/lib/Tooltip\";\r\nimport * as React from \"react\";\r\nimport { css, Strings } from \"roosterjs-react-common\";\r\n\r\nimport Emoji from \"../schema/Emoji\";\r\nimport * as StatusBarStyles from \"./EmojiStatusBar.scss.g\";\r\n\r\nexport interface EmojiStatusBarProps {\r\n    emoji: Emoji;\r\n    strings: Strings;\r\n    className?: string;\r\n    hasResult: boolean;\r\n}\r\n\r\nexport default class EmojiStatusBar extends React.Component<EmojiStatusBarProps, {}> {\r\n    public render() {\r\n        const { emoji, strings, className, hasResult } = this.props;\r\n\r\n        if (!hasResult) {\r\n            const noResultDescription = strings[\"emjDNoSuggetions\"];\r\n            return (\r\n                <div className={css(StatusBarStyles.statusBar, className)}>\r\n                    <div style={{ display: \"none\" }} aria-live=\"polite\">\r\n                        {noResultDescription}\r\n                    </div>\r\n                    <div className={StatusBarStyles.statusBarNoResultDetailsContainer}>\r\n                        <TooltipHost content={noResultDescription} overflowMode={TooltipOverflowMode.Parent}>\r\n                            <span role=\"alert\">{noResultDescription}</span>\r\n                        </TooltipHost>\r\n                    </div>\r\n                </div>\r\n            );\r\n        }\r\n\r\n        const icon = emoji ? emoji.codePoint : \"\";\r\n        const description = emoji ? strings[emoji.description] : \"\";\r\n\r\n        return (\r\n            <div className={css(StatusBarStyles.statusBar, className)}>\r\n                <i className={StatusBarStyles.statusBarIcon} role=\"presentation\" aria-hidden=\"true\">\r\n                    {icon}\r\n                </i>\r\n\r\n                <div className={StatusBarStyles.statusBarDetailsContainer}>\r\n                    <div className={StatusBarStyles.statusBarDetails}>\r\n                        <TooltipHost content={description} overflowMode={TooltipOverflowMode.Parent}>\r\n                            {description}\r\n                        </TooltipHost>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n","/* tslint:disable */\nimport { loadStyles } from '@microsoft/load-themed-styles';\nloadStyles([{\"rawString\":\".statusBar_b572bbc6{background-color:#f4f4f4;border-top:solid 1px #dadada;height:50px;overflow:hidden;position:relative}.statusBarIcon_b572bbc6{padding:4px;font-size:25px;display:inline-block;font-style:normal;font-weight:normal;line-height:40px}.statusBarDetailsContainer_b572bbc6,.statusBarNoResultDetailsContainer_b572bbc6{padding:0 4px;line-height:50px;position:absolute;display:inline-block;left:40px;right:0;top:0}.statusBarDetails_b572bbc6{font-weight:bold;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.statusBarNoResultDetailsContainer_b572bbc6{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;left:0;padding:0 8px}\"}]);\nexport const statusBar = \"statusBar_b572bbc6\";\nexport const statusBarIcon = \"statusBarIcon_b572bbc6\";\nexport const statusBarDetailsContainer = \"statusBarDetailsContainer_b572bbc6\";\nexport const statusBarNoResultDetailsContainer = \"statusBarNoResultDetailsContainer_b572bbc6\";\nexport const statusBarDetails = \"statusBarDetails_b572bbc6\";"],"sourceRoot":""}